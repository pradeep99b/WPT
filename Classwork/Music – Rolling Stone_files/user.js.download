var DIGIOH_API={};var DIGIOH_VARS={};var DIGIOH_CUSTOM_JS_GLOBAL={};var DIGIOH_CUSTOM_JS_SUPER={};var DIGIOH_CUSTOM_JS={};var DIGIOH_VENDOR_GUID='f611bb46-e8d6-4b65-af04-d7801b2011c2';var DIGIOH_VENDOR_SHORT_ID='41865';var DIGIOH_KEEN_WRITE_KEY='97EAB542CC041743281603E992F08708F25023518D5CA726250D389219FC5C550F77577DC6914F01501BF2DBC9189CAB1113F3DDF5027AB7DB224157D1247E65D532D9513037E77D0650B9F0F9DD13C58D9E80EDFBCB278F4947B33C805AFB0FADD2DDAD0CEA9FE8555F042C2B683500552A2D85BDC66629497F617815EF3212A2CF1610C5DFF75ACB38CE8153467A1E20E4D50B968745EFA4B2B55127BE6F541405FA91956A3519344D672E3CD3AF3A5323942B779E5AEC4E14567ED093F44FF8705E7DBABFC34E2E86B375EF56ACF2010EAF44D7C37E4E1BA7FCDBFE7A43980AB6C38F6B35CBC4E11597B9BC47796B08F7AF3BF4E6D1A06B9E496C408F7FF8DD9DD91038F4F7316A2C78CFDC8D29868EA25B7796E5832C8DC873752E7422AE9189BCD9B07A3540DC35ACFEED205EF34A93D0F6E9F3DFB9F6D2FBC60D94EF12F656A8CE62C09ADEAEA2E131CA038A05673FDD2A6E1D8097196920217BF3B45E57FE8A5C4B89DE0F6E8492A0F4315FCB';var DIGIOH_CDN_DOMAIN='www.lightboxcdn.com';var DIGIOH_CLIENT_IP='[#######DIGIOH_CLIENT_IP#######]';var DIGIOH_CACHE_VERSION='638368858505592321';var DIGIOH_STORAGE_TYPE='local_storage';var DIGIOH_EMBED_TYPE='lightning';var DIGIOH_USE_HTTPS_ONLY=false;var DIGIOH_LIGHTBOX_CONDITIONS=[];var DIGIOH_LIGHTBOX_RULESETS={};var DIGIOH_LIGHTBOX_EFFECTS={};var DIGIOH_LIGHTBOX_NAMES={};var DIGIOH_LIGHTBOX_IDS={};var DIGIOH_VARIATION_TO_BOX_MAP={};DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS={};DIGIOH_API.CONFIG={};DIGIOH_API.CONFIG.REGION='US';DIGIOH_API.CONFIG.PROTOCOL=('https:'==window.parent.document.location.protocol?'https://':'http://');DIGIOH_API.CONFIG.PROTOCOL_USER_OVERRIDE=((typeof DIGIOH_USE_HTTPS_ONLY!=="undefined"&&DIGIOH_USE_HTTPS_ONLY===true)?'https://':DIGIOH_API.CONFIG.PROTOCOL);DIGIOH_API.CONFIG.CDN_DOMAIN='www.lightboxcdn.com';DIGIOH_API.CONFIG.BOX_BASE_URL=DIGIOH_API.CONFIG.PROTOCOL_USER_OVERRIDE+'www.lightboxcdn.com';DIGIOH_API.CONFIG.SUBMIT_BASE_URL=DIGIOH_API.CONFIG.PROTOCOL_USER_OVERRIDE+'submit.lightboxcdn.com';DIGIOH_API.CONFIG.SUBMITCUS_BASE_URL=DIGIOH_API.CONFIG.PROTOCOL_USER_OVERRIDE+'submitcus.lightboxcdn.com';DIGIOH_API.CONFIG.API_BASE_URL=DIGIOH_API.CONFIG.PROTOCOL_USER_OVERRIDE+'api.lightboxcdn.com';DIGIOH_API.CONFIG.JSAPI_BASE_URL=DIGIOH_API.CONFIG.PROTOCOL_USER_OVERRIDE+'jsapi.lightboxcdn.com';DIGIOH_API.CONFIG.COUPON_BASE_URL=DIGIOH_API.CONFIG.PROTOCOL_USER_OVERRIDE+'coupon.lightboxcdn.com';DIGIOH_API.CONFIG.S3_BASE_URL=DIGIOH_API.CONFIG.PROTOCOL_USER_OVERRIDE+'s3.lightboxcdn.com';DIGIOH_API.CONFIG.LOG_BASE_URL=DIGIOH_API.CONFIG.PROTOCOL_USER_OVERRIDE+'lgev.lightboxcdn.com';DIGIOH_API.CONFIG.ROB_BASE_URL=DIGIOH_API.CONFIG.PROTOCOL_USER_OVERRIDE+'robert.lightboxcdn.com';DIGIOH_API.CONFIG.BETA_BASE_URL=DIGIOH_API.CONFIG.PROTOCOL_USER_OVERRIDE+'beta.lightboxcdn.com';DIGIOH_API.CONFIG.BETA2_BASE_URL=DIGIOH_API.CONFIG.PROTOCOL_USER_OVERRIDE+'beta2.lightboxcdn.com';DIGIOH_API.CONFIG.CUSTOM_FIELDS_LIMIT=parseInt('50');DIGIOH_API.CONFIG.USE_SUBMIT_POST=('true'==='true');DIGIOH_LIGHTBOX_NAMES['2f181f5d-e8e8-4193-abc1-e5f7a49ff1a6']='Abandon Cart - DONT TOUCH';DIGIOH_LIGHTBOX_IDS['2f181f5d-e8e8-4193-abc1-e5f7a49ff1a6']='206016';DIGIOH_API.ICE_BOXES='';DIGIOH_LIGHTBOX_CONDITIONS[0]={};DIGIOH_LIGHTBOX_CONDITIONS[0].lightbox_guid='2f181f5d-e8e8-4193-abc1-e5f7a49ff1a6';DIGIOH_LIGHTBOX_CONDITIONS[0].conditions=[[{"p":"S_current_page_url","o":"in_set_contains","s":["/checkout/rs/"],"v":"","sd":"","ed":""},{"p":"E_exit_intent","o":"in_set","s":["Mouse exits window top","Mouse exits window bottom","Mouse exits window left","Mouse exits window right"],"v":"","sd":"","ed":""},{"p":"E_lightbox_activity","o":"equals","v":"submit","s":[],"sd":"","ed":""},{"p":"E_device","o":"equals","v":"Desktop","s":[],"sd":"","ed":""}],[{"p":"E_lightbox_activity","o":"equals","v":"submit","s":[],"sd":"","ed":""},{"p":"I_idle_time_seconds","o":"greater_than","v":"1","s":[],"sd":"","ed":""},{"p":"E_device","o":"in_set","s":["Phone","Tablet"],"v":"","sd":"","ed":""},{"p":"S_current_page_url","o":"in_set_contains","s":["/checkout/rs/"],"v":"","sd":"","ed":""}]];DIGIOH_LIGHTBOX_EFFECTS['2f181f5d-e8e8-4193-abc1-e5f7a49ff1a6']={"widget_type":"sidebar","sidebar":{"css_positioning":"fixed","position":"top-left","speed":{"open":500,"close":500},"animation":{"open":"slideRight","close":"slideLeft"},"easing":{"open":"swing","close":"swing"},"close_button":{"display":false,"type":"default","image":"","position":"top-right","offset_x":-18,"offset_y":-18},"auto_close":{"click":false,"time":0,"scroll_up":0,"scroll_down":0},"teaser":{"display":false,"display_on_page_load":false,"css_positioning":"fixed","width":0,"height":0,"padding":{"top":0,"right":0,"bottom":0,"left":0},"text":"","font":{"family":"Arial, Helvetica, sans-serif","color":"#ffffff","align":"center","size":14,"bold":false,"italic":false,"underline":false},"font_hover":{"family":"Arial, Helvetica, sans-serif","color":"#ffffff","align":"center","size":14,"bold":false,"italic":false,"underline":false},"font_focus":{"family":"Arial, Helvetica, sans-serif","color":"#ffffff","align":"center","size":14,"bold":false,"italic":false,"underline":false},"border":{"width":2,"color":"#ffffff","style":"solid","radius":6},"border_hover":{"width":2,"color":"#ff0000","style":"solid","radius":6},"border_focus":{"width":2,"color":"#ff0000","style":"solid","radius":6},"background":{"color":"#000000","gradient":"#000000","image":"","repeat":"no-repeat","position":"left top","use_gradient":false,"use_image":false},"background_hover":{"color":"#ff0000","gradient":"#ff0000","image":"","repeat":"no-repeat","position":"left top","use_gradient":false,"use_image":false},"background_focus":{"color":"#ff0000","gradient":"#ff0000","image":"","repeat":"no-repeat","position":"left top","use_gradient":false,"use_image":false},"position":"bottom-right","offset_x":0,"offset_y":0,"follow_me":false},"css":"","overlay":{"close_click":false,"background":{"color":"rgba(255, 255, 255, 0)","gradient":"rgba(255, 255, 255, 0)","image":"","repeat":"no-repeat","position":"left top","use_gradient":false,"use_image":false}}},"width":1,"height":1,"iframe":{"use_custom":false,"is_self_hosted":false,"self_hosted_url":"","html_last_uploaded":"","width":750,"height":600},"thxwidth":416,"thxheight":465,"ep1width":599,"ep1height":471,"ep2width":599,"ep2height":471,"ep3width":599,"ep3height":471,"ep4width":599,"ep4height":471,"responsive":{"use":false},"thxresponsive":{"use":false},"ep1responsive":{"use":false},"ep2responsive":{"use":false},"ep3responsive":{"use":false},"ep4responsive":{"use":false},"scaling":{"use":false,"max_type":"abs","max_width":415,"max_height":464,"max_width_pct":75,"max_height_pct":75},"thxscaling":{"use":false,"max_type":"abs","max_width":416,"max_height":465,"max_width_pct":75,"max_height_pct":75},"ep1scaling":{"use":false,"max_type":"abs","max_width":599,"max_height":471,"max_width_pct":75,"max_height_pct":75},"ep2scaling":{"use":false,"max_type":"abs","max_width":599,"max_height":471,"max_width_pct":75,"max_height_pct":75},"ep3scaling":{"use":false,"max_type":"abs","max_width":599,"max_height":471,"max_width_pct":75,"max_height_pct":75},"ep4scaling":{"use":false,"max_type":"abs","max_width":599,"max_height":471,"max_width_pct":75,"max_height_pct":75}};DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS={};DIGIOH_API.BREAKPOINT_POINTER={};DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS['2f181f5d-e8e8-4193-abc1-e5f7a49ff1a6']={};DIGIOH_API.BREAKPOINT_POINTER['2f181f5d-e8e8-4193-abc1-e5f7a49ff1a6']={};var DIGIOH_PUBLISHED_VARIATIONS_ARR=[];var DIGIOH_DATA_STORAGE_TYPE_BY_BOX_OBJ={};var DIGIOH_PRIMARY_VARIATIONS_ARR=[];var DIGIOH_EFFECTS_IMAGE_CACHE_ARR=[];var DIGIOH_SETTINGS_IMAGE_CACHE_ARR=[];var DIGIOH_LIGHTBOX_MASTER_RULES={"OneBoxPerPageview":false,"OneBoxPerSession":true,"OneBoxPerVisitor":false,"StopAfterFormSubmitted":false,"DisableIfCookiesDisabled":true,"IgnoreForInlineBoxes":true,"AllowMultipleBoxes":false};var DIGIOH_LIGHTBOX_TEASER_PRELOAD_ARR=[];var DIGIOH_LIGHTBOX_TEASER_FOLLOW_ME_ARR=[];var DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR=[];var DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR=[];var DIGIOH_LIGHTBOX_INLINE_DEPENDENT_ARR=[];var DIGIOH_LIGHTBOX_PRELOAD_ARR=[];var DIGIOH_LIGHTBOX_MOBILE_DEVICE_ARR=[];var DIGIOH_LIGHTBOX_DESKTOP_DEVICE_ARR=['2f181f5d-e8e8-4193-abc1-e5f7a49ff1a6'];var DIGIOH_LIGHTBOX_UNCATEGORIZED_DEVICE_ARR=[];var DIGIOH_DYNAMIC_BOXES=[];var DIGIOH_SPLIT_TESTS_ARR=[];var DIGIOH_USE_BUGSNAG=false;var DIGIOH_USE_CONSOLE=false;var DIGIOH_USE_RESPONSIVE=false;var DIGIOH_USE_REAL_TIME_SUBMISSIONS=false;var DIGIOH_USE_PRQ=true;var DIGIOH_IS_QA=false;var DIGIOH_IS_PREVIEW=false;var DIGIOH_IS_DEV=false;var DIGIOH_KEEN_PV=false;var DIGIOH_BLIP_LZ='NoIg7GB0Bs2QnABkgJgIxpAGgAQgCxxrQCsqJakGJ2e0KqayaAHCzCrSPY8xaui4pE8KkgRwkQxHBRzIUNAGZE02fMUzpotOJL4q-7WOT6ELY7uRKlqY.12il-NQIZlhnXCDRhb-MiZKVks9AylvYVEHeCh8LzxhdQYoT1DTA2VVSJk3GFRnVzl3VHj0.N0XHJ0wqjBsxNzihTEqxuSW9AtqyBioCMaajKolbsHe4NiCtpAkvLgSMdmm-Vkynr7GJaiJsVT18atezPoi-UDCLl9.QMRghuWh46pL72vSk-QwGZ2j-CIVOUzCwEssOroqFoekczBgZu8ApDKIsrn5IIigpDoKibkiXti3miMXcqGh4UTbpQDiBKXVwksmLZRGBJGAuGB2GgSKlWFQ5FxoJzBaSyCjvMLiJyydN2VBvmJbChCuKhVLbgS8BzDDz2CgNeApcx6qgoXRVaTMoCVVQJVy-aCtRgjcg0tbJSLzOzDXVmPAlhAFJl4IqlPrHdytqSHgH5boQzRvLSyQCHmgUB404weeTFfgTjzU2iUHmbftQe9iyddcq8BWS8RUiRC7n81scR8bbrqZnhAZ0CnLHrIbZiD8mQxnAgHsIoKNICwoIKuCxJhPgrppLP2Av5.AuIQbR5hKTMBtKMJRUseOhmPgqWy3unGAx0DzT3QX0x50RhPZJooyQFT9bypBM8CTA8myA3h51sFglGgm8RlEJVpxEExICUSYZmvL9k3RPdxWA.EFEIj8YNYbd9VwkD0Wo4jlBQwQiJg8MyO4Yj4PnHCGLYTD9QPYgjxdLk.z2XolkE0gBBdO9EK.YsyHwB88Ck4TGAQ7w1Jkk0HglW1NHoii73RK9eJ0HiKJYURthWBgIThdtK1LOoGSLetoFSRBy3c1tKicjzFHqdtERXLEQrIMKQQi-dgjc3EwscwkEsoAYfF8lziFBHZ-AvEZUyfdBPx5MD0pS-0YrC2BKuRZt0Ui4IrXIpCuUoNh5OYJQUNDDqbXs6lfnEeBAjMqyuxUjixoUUEaOQmUWKQrU.F6xiCk05q8K6j4Vr44t2NmyiCjQ6Jz0QQJAIWzbuv2hiTJIUqDq24t30eDDhtQfUEQaj6AqrVzfs7QNBx.RRoHYnL.14coiFGxbOW-cp3p83EhuOt6yGqnJwR0fksbyBzTmhIbbjE3RUj1XquLSg7crOlb4l6dbJpap6N0u5geG5MS8ops8TRG4HSR0LnoSHNMDAR0WiAckgmd-MXixkwXxdi5XpRXZXvJ9NWLLl9C0x.TIFx1-cJvl6XhdsnGLcMcH0M2LI1Ylq2-UNhRSvNyEDCUbL9bFxADACTXA5-P2iAD4dg.nX3reHUko6YNGDa9k0E49sOU7AGPXbj5QxwQCcDGi9nvyFqOWHT2OmCL.VPerqdy7NjP65YUOq4j4KpZTi7DjFiEIE1-ywfLl3k5VzHe.DgwSDt9ui9nnPGUjrv6-HleI6YX2t1NmA7e3ndO8afeoHgzdMO3OV0-PmAr.PneJ-Wa.JaPu-D731-5RemcP4UWyn-zo4rBAgcjPnOA-TM6ytjSt.MBcom7X08srRWxQdo6GWiXfCzENocyHqAi-Lx4E.zTF.RA18uRoTITYPBO9lCENgSMUOZCSBbyIT1HIZCMDUJ3GmFh9DWpcMbAIl4t96G11IUQ387CJF6w4e.PhXV6ZwGsoo02K1rxiMoX.H-SohF0PwXI.BGBeH4N5i.PhFDWEiJMYwoheYhFaPoZIsxhiSFkJsXw.AMiJFCOTD4qxNCNG2IcYYu4QjgxhMCfQ-Arif7wHcfg9qUjzEWKiRNA6-BOTFh8YgJmB0eAZPppk3Jt0GCE2wXNJUsM8KCVMczPCfFE7ZLSQxHgTVH5EO8tkm6xl7JtIOnxV4zid5-n3EQaSxYiDoMnkLSEeiaFMBNo0om1g-xGRapzSyLUBkxPMcEmhpp2lRIMfs0qkDdJ8hejTYIWcdrsDAA9Fpn4vEePYj2COrd5rlPwmvdo-M4AIwALpAA_';var COUPON_GROUP_POPULATE_OBJ={};var ClientJsDomMaxWaitSeconds=0;var CDP_VARS={'enabled':0,'dimension':0,'save_email':0,'embed_type':'','account_type':'','esp_params':'','ua_tracking_id':''};var USE_LZ=true;var ACCOUNT_METADATA={};CJSAPPS_ARR=[];CJSAPPS_PARENT={};DIGIOH_CUSTOM_JS={runCustomJsOnDocumentReady:function(api,window,document,$,s){try{var console={};console.log=DIGIOH_CUSTOM_JS.log;function setCookie(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/";}
function getCookie(name){var value="; "+document.cookie;var parts=value.split("; "+name+"=");if(parts.length==2)return parts.pop().split(";").shift();}
function setRule(value){var Rule=document.createElement("div");Rule.setAttribute("id",value);Rule.setAttribute("style","display:none");Rule.setAttribute("digioh","digioh_rule");document.body.appendChild(Rule);}
function validateEmail(email){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(String(email).toLowerCase());}
if($("meta[property='article:published_time']").length){var siteTimeElement=$("meta[property='article:published_time']").attr("content");var siteTime=new Date(siteTimeElement);if((siteTime.getMonth()<=8&&siteTime.getFullYear()===2015&&siteTime.getDate()<=9)||siteTime.getFullYear()<2015){setRule("throwback");}}
var pageViews=getCookie("digioh_page_views");if(!pageViews){pageViews="0";setCookie("digioh_page_views",pageViews,10);}else{pageViews=(parseInt(pageViews)+1);setCookie("digioh_page_views",pageViews,10);}
var validNavigation=false;$(document).on('keypress',function(e){if(e.keyCode==116){validNavigation=true;}});$(document).on("click","a",function(){validNavigation=true;});$(document).on("submit","form",function(){validNavigation=true;});$(document).bind("click","input[type=submit]",function(){validNavigation=true;});$(document).bind("click","button[type=submit]",function(){validNavigation=true;});$(window).unload(function(){if(!validNavigation){pageViews="0";setCookie("digioh_page_views",pageViews,10);}});setRule("pageview-"+pageViews);try{if(window.location.href.indexOf("/checkout/rs/")>0){if(getCookie("digioh_email")){$('#email').val(getCookie("digioh_email"));}
if($('#email').length>0){setInterval(function(){if(validateEmail($('#email').val())){setCookie("digioh_email",$('#email').val(),360);}
if($(".price-description").length>0){var price=$(".price-description").text().trim().replace("only","").replace("/week","").replace("/month","").trim();setCookie("digioh_price",price,360);}},100);}}}catch(err){}
try{if(window.pmc_meta['subscriber-type']){setRule("subscriber-"+window.pmc_meta['subscriber-type']);}
if(window.pmc_meta.page_access_level){setRule("access-"+window.pmc_meta.page_access_level);}}catch(err){}}
catch(e){DIGIOH_CUSTOM_JS.logError(e,'runCustomJsOnDocumentReady');e.message='DIGIOH: Custom JS Parent -- '+e.message;window.console.error(e);}
return true;},runCustomJsBeforeLightboxDisplay:function(api,window,document,$,lightbox_id,variation_id,s){try{var console={};console.log=DIGIOH_CUSTOM_JS.log;}
catch(e){DIGIOH_CUSTOM_JS.logError(e,'runCustomJsBeforeLightboxDisplay');e.message='DIGIOH: Custom JS Parent -- '+e.message;window.console.error(e);}
return true;},runCustomJsOnLightboxDisplay:function(api,window,document,$,lightbox_id,variation_id,s){try{var console={};console.log=DIGIOH_CUSTOM_JS.log;}
catch(e){DIGIOH_CUSTOM_JS.logError(e,'runCustomJsOnLightboxDisplay');e.message='DIGIOH: Custom JS Parent -- '+e.message;window.console.error(e);}},runCustomJsOnChangePages:function(api,window,document,$,lightbox_id,variation_id,s){try{var console={};console.log=DIGIOH_CUSTOM_JS.log;}
catch(e){DIGIOH_CUSTOM_JS.logError(e,'runCustomJsOnChangePages');e.message='DIGIOH: Custom JS Parent -- '+e.message;window.console.error(e);}},runCustomJsOnLightboxSubmit:function(api,window,document,$,lightbox_id,variation_id,s){try{var console={};console.log=DIGIOH_CUSTOM_JS.log;}
catch(e){DIGIOH_CUSTOM_JS.logError(e,'runCustomJsOnLightboxSubmit');e.message='DIGIOH: Custom JS Parent -- '+e.message;window.console.error(e);}},runCustomJsOnLightboxRedirect:function(api,window,document,$,lightbox_id,variation_id,s){try{var console={};console.log=DIGIOH_CUSTOM_JS.log;}
catch(e){DIGIOH_CUSTOM_JS.logError(e,'runCustomJsOnLightboxRedirect');e.message='DIGIOH: Custom JS Parent -- '+e.message;window.console.error(e);}},runCustomJsOnLightboxDownload:function(api,window,document,$,lightbox_id,variation_id,s){try{var console={};console.log=DIGIOH_CUSTOM_JS.log;}
catch(e){DIGIOH_CUSTOM_JS.logError(e,'runCustomJsOnLightboxDownload');e.message='DIGIOH: Custom JS Parent -- '+e.message;window.console.error(e);}},runCustomJsOnLightboxClose:function(api,window,document,$,lightbox_id,variation_id,s){try{var console={};console.log=DIGIOH_CUSTOM_JS.log;}
catch(e){DIGIOH_CUSTOM_JS.logError(e,'runCustomJsOnLightboxClose');e.message='DIGIOH: Custom JS Parent -- '+e.message;window.console.error(e);}},runCustomJsCdpEspId:function(api,window,document,$,s){try{var console={};console.log=DIGIOH_CUSTOM_JS.log;return '_empty_';}
catch(e){DIGIOH_CUSTOM_JS.logError(e,'runCustomJsCdpEspId');e.message='DIGIOH: Custom JS Parent -- '+e.message;window.console.error(e);}},log:function(msg){try{DIGIOH_API.log(msg,'CUSTOM_JS_PARENT');}
catch(e)
{e.message='DIGIOH: Custom JS Parent -- '+e.message;window.console.error(e);}},logError:function(e,fcn){try{DIGIOH_API.log(e.message,'CUSTOM_JS_PARENT.'+fcn+'()');DIGIOH_API.logErrorFromCustomJsParent(e,'CUSTOM_JS_PARENT.'+fcn);}
catch(e)
{e.message='DIGIOH: Custom JS Parent -- '+e.message;window.console.error(e);}}};DIGIOH_CUSTOM_JS_SUPER={runCustomJsOnDocumentReady:function(api,window,document,$,s){try{var console={};console.log=DIGIOH_CUSTOM_JS_SUPER.log;console.log('This is PMC GJS');function setCookie(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/";}
function getCookie(name){var value="; "+document.cookie;var parts=value.split("; "+name+"=");if(parts.length==2)return parts.pop().split(";").shift();}
function setRule(value){var Rule=document.createElement("div");Rule.setAttribute("id",value);Rule.setAttribute("style","display:none");Rule.setAttribute("digioh","digioh_rule");document.body.appendChild(Rule);}
try{if(window.digiohVisitorFromEmail){setCookie("digioh_utm","came_from_email",3000);setRule("came_from_email");}else if(getCookie("digioh_utm")==="came_from_email"){setRule("came_from_email");}}catch(err){}
api.initGetEmails=function(geqId,window,document){try{!function(){var geq=window.geq=window.geq||[];if(geq.initialize)return;if(geq.invoked){if(window.console&&console.error){console.error("GE snippet included twice.");}
return;}
geq.invoked=true;geq.methods=["suppress"];geq.factory=function(method){return function(){var args=Array.prototype.slice.call(arguments);args.unshift(method);geq.push(args);return geq;};};for(var i=0;i<geq.methods.length;i++){var key=geq.methods;geq[key]=geq.factory(key);}
geq.load=function(key){var script=document.createElement("script");script.type="text/javascript";script.async=true;if(location.href.includes("vge=true")){script.src="https://s3-us-west-2.amazonaws.com/jsstore/a/"+key+"/ge.js?v="+Math.random();}else{script.src="https://s3-us-west-2.amazonaws.com/jsstore/a/"+key+"/ge.js";}
var first=document.getElementsByTagName("script")[0];first.parentNode.insertBefore(script,first);};geq.SNIPPET_VERSION="1.5.1";geq.load(geqId);}();}catch(e){console.log("Error: initGetEmails: "+e);}};api.supressGetEmails=function(window){try{window.geq.suppress();}catch(e){console.log("Error: supressGetEmails: "+e);}};api.td_ssc_id=function(){if(window.blogherads&&typeof window.blogherads==="object"){if(window.blogherads.hasOwnProperty("getTreasureDataObject")&&typeof window.blogherads.getTreasureDataObject==="function"){let dataObject=window.blogherads.getTreasureDataObject();if(dataObject&&typeof dataObject==="object"){if(dataObject.hasOwnProperty("client")&&typeof dataObject.client==="object"){let clientData=dataObject.client;if(clientData&&typeof clientData==="object"&&clientData.hasOwnProperty("globals")&&typeof clientData.globals==="object"){let globals=clientData.globals;if(globals&&typeof globals==="object"&&globals.hasOwnProperty("$global")&&typeof globals.$global==="object"){let $global=globals.$global;if($global&&typeof $global==="object"&&$global.hasOwnProperty("td_ssc_id")&&typeof $global.td_ssc_id==="string"){return $global.td_ssc_id;}}}}}}}
return "";};api.setDataLayerValue("custom_50",api.td_ssc_id());}
catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,'runCustomJsOnDocumentReady');e.message='DIGIOH: Custom JS Global -- '+e.message;window.console.error(e);}
return true;},runCustomJsBeforeLightboxDisplay:function(api,window,document,$,lightbox_id,variation_id,s){try{var console={};console.log=DIGIOH_CUSTOM_JS_SUPER.log;var isExist=false;$("iframe").each(function(index,iframe){try{var valid=iframe.contentWindow.document.body.innerHTML.indexOf('parent.postMessage("pmcadm:dfp:isdirect=true"')>-1||iframe.contentWindow.document.body.innerHTML.indexOf('pmc_show_interrupt_ads')>-1;if(valid){isExist=true;}}catch(err){}});if($("#pmc-adm-interrupts-container").length&&$("#pmc-adm-interrupts-container").css("display")==="block")isExist=true;if(isExist){return false;}}
catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,'runCustomJsBeforeLightboxDisplay');e.message='DIGIOH: Custom JS Global -- '+e.message;window.console.error(e);}
return true;},runCustomJsOnLightboxDisplay:function(api,window,document,$,lightbox_id,variation_id,s){try{var console={};console.log=DIGIOH_CUSTOM_JS_SUPER.log;}
catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,'runCustomJsOnLightboxDisplay');e.message='DIGIOH: Custom JS Global -- '+e.message;window.console.error(e);}},runCustomJsOnChangePages:function(api,window,document,$,lightbox_id,variation_id,s){try{var console={};console.log=DIGIOH_CUSTOM_JS_SUPER.log;}
catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,'runCustomJsOnChangePages');e.message='DIGIOH: Custom JS Global -- '+e.message;window.console.error(e);}},runCustomJsOnLightboxSubmit:function(api,window,document,$,lightbox_id,variation_id,s){try{var console={};console.log=DIGIOH_CUSTOM_JS_SUPER.log;}
catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,'runCustomJsOnLightboxSubmit');e.message='DIGIOH: Custom JS Global -- '+e.message;window.console.error(e);}},runCustomJsOnLightboxRedirect:function(api,window,document,$,lightbox_id,variation_id,s){try{var console={};console.log=DIGIOH_CUSTOM_JS_SUPER.log;}
catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,'runCustomJsOnLightboxRedirect');e.message='DIGIOH: Custom JS Global -- '+e.message;window.console.error(e);}},runCustomJsOnLightboxDownload:function(api,window,document,$,lightbox_id,variation_id,s){try{var console={};console.log=DIGIOH_CUSTOM_JS_SUPER.log;}
catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,'runCustomJsOnLightboxDownload');e.message='DIGIOH: Custom JS Global -- '+e.message;window.console.error(e);}},runCustomJsOnLightboxClose:function(api,window,document,$,lightbox_id,variation_id,s){try{var console={};console.log=DIGIOH_CUSTOM_JS_SUPER.log;}
catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,'runCustomJsOnLightboxClose');e.message='DIGIOH: Custom JS Global -- '+e.message;window.console.error(e);}},log:function(msg){try{DIGIOH_API.log(msg,'CUSTOM_JS_GLOBAL');}
catch(e)
{e.message='DIGIOH: Custom JS Global -- '+e.message;window.console.error(e);}},logError:function(e,fcn){try{DIGIOH_API.log(e.message,'CUSTOM_JS_GLOBAL.'+fcn+'()');DIGIOH_API.logErrorFromCustomJsParent(e,'CUSTOM_JS_GLOBAL.'+fcn);}
catch(e)
{e.message='DIGIOH: Custom JS Global -- '+e.message;window.console.error(e);}}};var DIGIOH_LIGHTBOX_ANALYTICS={};var DIGIOH_BUGSNAG=null;!function(a,c,b){if(typeof define=="function"&&define.amd){define("keen",[],function(d){return b()})}if(typeof module==="object"&&typeof module.exports==="object"){module.exports=b()}else{c[a]=b()}}("Keen",this,function(Keen){;function Keen(config){this.configure(config||{})}Keen.version="3.1.0";Keen.utils={};Keen.canXHR=false;if(typeof XMLHttpRequest==="object"||typeof XMLHttpRequest==="function"){if("withCredentials"in new XMLHttpRequest()){Keen.canXHR=true}}Keen.urlMaxLength=16000;if(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0){Keen.urlMaxLength=2000}Keen.enabled=true;Keen.loaded=true;Keen.ready=function(callback){if(Keen.loaded){callback()}else{Keen.on("ready",callback)}};Keen.debug=false;Keen.log=function(message){if(Keen.debug&&typeof console=="object"){console.log("[Keen IO]",message)}};var Events=Keen.Events={on:function(name,callback){this.listeners||(this.listeners={});var events=this.listeners[name]||(this.listeners[name]=[]);events.push({callback:callback});return this},once:function(name,callback,context){var self=this;var once=_once(function(){self.off(name,once);callback.apply(this,arguments)});once._callback=callback;return self.on(name,once,context)},off:function(name,callback,context){if(!this.listeners){return this}if(!name&&!callback&&!context){this.listeners=void 0;return this}var names=[];if(name){names.push(name)}else{_each(this.listeners,function(value,key){names.push(key)})}for(var i=0,length=names.length;i<length;i++){name=names[i];var events=this.listeners[name];if(!events){continue}if(!callback&&!context){delete this.listeners[name];continue}var remaining=[];for(var j=0,k=events.length;j<k;j++){var event=events[j];if(callback&&callback!==event.callback&&callback!==event.callback._callback||context&&context!==event.context){remaining.push(event)}}if(remaining.length){this.listeners[name]=remaining}else{delete this.listeners[name]}}return this},trigger:function(name){if(!this.listeners){return this}var args=Array.prototype.slice.call(arguments,1);var events=this.listeners[name]||[];for(var i=0;i<events.length;i++){events[i]["callback"].apply(this,args)}return this}};function _once(func){var ran=false,memo;return function(){if(ran){return memo}ran=true;memo=func.apply(this,arguments);func=null;return memo}}_extend(Keen.prototype,Events);_extend(Keen,Events);function _loadAsync(){var loaded=window.Keen,cached=window._Keen||{},clients,ready;if(loaded&&cached){clients=cached.clients||{},ready=cached.ready||[];for(var instance in clients){if(clients.hasOwnProperty(instance)){var client=clients[instance];for(var method in Keen.prototype){if(Keen.prototype.hasOwnProperty(method)){loaded.prototype[method]=Keen.prototype[method]}}loaded.Query=(Keen.Query)?Keen.Query:function(){};loaded.Visualization=(Keen.Visualization)?Keen.Visualization:function(){};if(client._config){client.configure.call(client,client._config);client._config=undefined;try{delete client._config}catch(e){}}if(client._setGlobalProperties){var globals=client._setGlobalProperties;for(var i=0;i<globals.length;i++){client.setGlobalProperties.apply(client,globals[i])}client._setGlobalProperties=undefined;try{delete client._setGlobalProperties}catch(e){}}if(client._addEvent){var queue=client._addEvent||[];for(var i=0;i<queue.length;i++){client.addEvent.apply(client,queue[i])}client._addEvent=undefined;try{delete client._addEvent}catch(e){}}var callback=client._on||[];if(client._on){for(var i=0;i<callback.length;i++){client.on.apply(client,callback[i])}client.trigger("ready");client._on=undefined;try{delete client._on}catch(e){}}}}for(var i=0;i<ready.length;i++){var callback=ready[i];Keen.once("ready",function(){callback()})}}}Keen.prototype.addEvent=function(eventCollection,payload,success,error){var response;if(!eventCollection||typeof eventCollection!=="string"){response="Event not recorded: Collection name must be a string";Keen.log(response);if(error){error.call(this,response)}return}_uploadEvent.apply(this,arguments)};Keen.prototype.configure=function(cfg){var config=cfg||{};if(!Keen.canXHR&&config.requestType==="xhr"){config.requestType="jsonp"}if(config.host){config.host.replace(/.*?:\/\//g,"")}if(config.protocol&&config.protocol==="auto"){config.protocol=location.protocol.replace(/:/g,"")}this.config={projectId:config.projectId,writeKey:config.writeKey,readKey:config.readKey,masterKey:config.masterKey,requestType:config.requestType||"jsonp",host:config.host||"api.keen.io/3.0",protocol:config.protocol||"https",globalProperties:null};this.trigger("ready");Keen.trigger("client",this,config)};Keen.prototype.masterKey=function(str){if(!arguments.length){return this.config.masterKey}this.config.masterKey=(str?String(str):null);return this};Keen.prototype.projectId=function(str){if(!arguments.length){return this.config.projectId}this.config.projectId=(str?String(str):null);return this};Keen.prototype.readKey=function(str){if(!arguments.length){return this.config.readKey}this.config.readKey=(str?String(str):null);return this};Keen.prototype.setGlobalProperties=function(newGlobalProperties){if(newGlobalProperties&&typeof(newGlobalProperties)=="function"){this.config.globalProperties=newGlobalProperties}else{Keen.log("Invalid value for global properties: "+newGlobalProperties)}};Keen.prototype.trackExternalLink=function(jsEvent,eventCollection,payload,timeout,timeoutCallback){var evt=jsEvent,target=(evt.currentTarget)?evt.currentTarget:(evt.srcElement||evt.target),timer=timeout||500,triggered=false,targetAttr="",callback,win;if(target.getAttribute!==void 0){targetAttr=target.getAttribute("target")}else{if(target.target){targetAttr=target.target}}if((targetAttr=="_blank"||targetAttr=="blank")&&!evt.metaKey){win=window.open("about:blank");win.document.location=target.href}if(target.nodeName==="A"){callback=function(){if(!triggered&&!evt.metaKey&&(targetAttr!=="_blank"&&targetAttr!=="blank")){triggered=true;window.location=target.href}}}else{if(target.nodeName==="FORM"){callback=function(){if(!triggered){triggered=true;target.submit()}}}else{Keen.log("#trackExternalLink method not attached to an <a> or <form> DOM element")}}if(timeoutCallback){callback=function(){if(!triggered){triggered=true;timeoutCallback()}}}_uploadEvent.call(this,eventCollection,payload,callback,callback);setTimeout(callback,timer);if(!evt.metaKey){return false}};Keen.prototype.url=function(path){return this.config.protocol+"://"+this.config.host+path};Keen.prototype.writeKey=function(str){if(!arguments.length){return this.config.writeKey}this.config.writeKey=(str?String(str):null);return this};function _clone(target){return JSON.parse(JSON.stringify(target))}function _each(o,cb,s){var n;if(!o){return 0}s=!s?o:s;if(o instanceof Array){for(n=0;n<o.length;n++){if(cb.call(s,o[n],n,o)===false){return 0}}}else{for(n in o){if(o.hasOwnProperty(n)){if(cb.call(s,o[n],n,o)===false){return 0}}}}return 1}_extend(Keen.utils,{each:_each});function _extend(target){for(var i=1;i<arguments.length;i++){for(var prop in arguments[i]){target[prop]=arguments[i][prop]}}return target}_extend(Keen.utils,{extend:_extend});function _parseParams(str){var urlParams={},match,pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl," "))},query=str.split("?")[1];while(!!(match=search.exec(query))){urlParams[decode(match[1])]=decode(match[2])}return urlParams}_extend(Keen.utils,{parseParams:_parseParams});function _sendBeacon(url,params,success,error){var successCallback=success,errorCallback=error,loaded=false,img=document.createElement("img");success=null;error=null;img.onload=function(){loaded=true;if("naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0){this.onerror();return}}else{if(this.width+this.height===0){this.onerror();return}}if(successCallback){successCallback({created:true});successCallback=errorCallback=null}};img.onerror=function(){loaded=true;if(errorCallback){errorCallback();successCallback=errorCallback=null}};img.src=url+"&c=clv1"}function _sendJsonp(url,params,success,error){var timestamp=new Date().getTime(),successCallback=success,errorCallback=error,script=document.createElement("script"),parent=document.getElementsByTagName("head")[0],callbackName="keenJSONPCallback",loaded=false;success=null;error=null;callbackName+=timestamp;while(callbackName in window){callbackName+="a"}window[callbackName]=function(response){if(loaded===true){return}loaded=true;if(successCallback&&response){successCallback(response)}cleanup()};script.src=url+"&jsonp="+callbackName;parent.appendChild(script);script.onreadystatechange=function(){if(loaded===false&&this.readyState==="loaded"){loaded=true;if(errorCallback){errorCallback()}}};script.onerror=function(){if(loaded===false){loaded=true;if(errorCallback){errorCallback()}cleanup()}};function cleanup(){window[callbackName]=undefined;try{delete window[callbackName]}catch(e){}successCallback=errorCallback=null;parent.removeChild(script)}}function _sendXhr(method,url,headers,body,success,error){var ids=["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],successCallback=success,errorCallback=error,payload,xhr;success=null;error=null;if(window.XMLHttpRequest){xhr=new XMLHttpRequest()}else{for(var i=0;i<ids.length;i++){try{xhr=new ActiveXObject(ids[i]);break}catch(e){}}}xhr.onreadystatechange=function(){var response;if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300){try{response=JSON.parse(xhr.responseText)}catch(e){Keen.log("Could not parse HTTP response: "+xhr.responseText);if(errorCallback){errorCallback(xhr,e);successCallback=errorCallback=null}}if(successCallback&&response){successCallback(response);successCallback=errorCallback=null}}else{Keen.log("HTTP request failed.");if(errorCallback){errorCallback(xhr,null);successCallback=errorCallback=null}}}};xhr.open(method,url,true);_each(headers,function(value,key){xhr.setRequestHeader(key,value)});if(body){payload=JSON.stringify(body)}if(method&&method.toUpperCase()==="GET"){xhr.send()}else{if(method&&method.toUpperCase()==="POST"){xhr.send(payload)}}}function _uploadEvent(eventCollection,payload,success,error){var urlBase,urlQueryString,reqType,data;if(!Keen.enabled){Keen.log("Event not recorded: Keen.enabled = false");return}if(!this.projectId()){Keen.log("Event not recorded: Missing projectId property");return}if(!this.writeKey()){Keen.log("Event not recorded: Missing writeKey property");return}urlBase=this.url("/projects/"+this.projectId()+"/events/"+eventCollection);urlQueryString="";reqType=this.config.requestType;data={};if(this.config.globalProperties){data=this.config.globalProperties(eventCollection)}_each(payload,function(value,key){data[key]=value});if(reqType!=="xhr"){urlQueryString+="?api_key="+encodeURIComponent(this.writeKey());urlQueryString+="&data="+encodeURIComponent(Keen.Base64.encode(JSON.stringify(data)));urlQueryString+="&modified="+encodeURIComponent(new Date().getTime());if(String(urlBase+urlQueryString).length<Keen.urlMaxLength){if(reqType==="jsonp"){_sendJsonp(urlBase+urlQueryString,null,success,error)}else{_sendBeacon(urlBase+urlQueryString,null,success,error)}return}}if(Keen.canXHR){_sendXhr("POST",urlBase,{Authorization:this.writeKey(),"Content-Type":"application/json"},data,success,error)}else{Keen.log("Event not sent: URL length exceeds current browser limit, and XHR (POST) is not supported.")}return};Keen.Base64={map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(n){var o="",i=0,m=this.map,i1,i2,i3,e1,e2,e3,e4;n=this.utf8.encode(n);while(i<n.length){i1=n.charCodeAt(i++);i2=n.charCodeAt(i++);i3=n.charCodeAt(i++);e1=(i1>>2);e2=(((i1&3)<<4)|(i2>>4));e3=(isNaN(i2)?64:((i2&15)<<2)|(i3>>6));e4=(isNaN(i2)||isNaN(i3))?64:i3&63;o=o+m.charAt(e1)+m.charAt(e2)+m.charAt(e3)+m.charAt(e4)}return o},decode:function(n){var o="",i=0,m=this.map,cc=String.fromCharCode,e1,e2,e3,e4,c1,c2,c3;n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<n.length){e1=m.indexOf(n.charAt(i++));e2=m.indexOf(n.charAt(i++));e3=m.indexOf(n.charAt(i++));e4=m.indexOf(n.charAt(i++));c1=(e1<<2)|(e2>>4);c2=((e2&15)<<4)|(e3>>2);c3=((e3&3)<<6)|e4;o=o+(cc(c1)+((e3!=64)?cc(c2):""))+(((e4!=64)?cc(c3):""))}return this.utf8.decode(o)},utf8:{encode:function(n){var o="",i=0,cc=String.fromCharCode,c;while(i<n.length){c=n.charCodeAt(i++);o=o+((c<128)?cc(c):((c>127)&&(c<2048))?(cc((c>>6)|192)+cc((c&63)|128)):(cc((c>>12)|224)+cc(((c>>6)&63)|128)+cc((c&63)|128)))}return o},decode:function(n){var o="",i=0,cc=String.fromCharCode,c2,c;while(i<n.length){c=n.charCodeAt(i);o=o+((c<128)?[cc(c),i++][0]:((c>191)&&(c<224))?[cc(((c&31)<<6)|((c2=n.charCodeAt(i+1))&63)),(i+=2)][0]:[cc(((c&15)<<12)|(((c2=n.charCodeAt(i+1))&63)<<6)|((c3=n.charCodeAt(i+2))&63)),(i+=3)][0])}return o}}};;if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case "string":return quote(value);case "number":return isFinite(value)?String(value):"null";case "boolean":case "null":return String(value);case "object":if(!value){return "null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return "\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(root,factory){root.utils.domready=factory()}(Keen,function(ready){var fns=[],fn,f=false,doc=document,testEl=doc.documentElement,hack=testEl.doScroll,domContentLoaded="DOMContentLoaded",addEventListener="addEventListener",onreadystatechange="onreadystatechange",readyState="readyState",loadedRgx=hack?/^loaded|^c/:/^loaded|c/,loaded=loadedRgx.test(doc[readyState]);function flush(f){loaded=1;while(f=fns.shift()){f()}}doc[addEventListener]&&doc[addEventListener](domContentLoaded,fn=function(){doc.removeEventListener(domContentLoaded,fn,f);flush()},f);hack&&doc.attachEvent(onreadystatechange,fn=function(){if(/^c/.test(doc[readyState])){doc.detachEvent(onreadystatechange,fn);flush()}});return(ready=hack?function(fn){self!=top?loaded?fn():fns.push(fn):function(){try{testEl.doScroll("left")}catch(e){return setTimeout(function(){ready(fn)},50)}fn()}()}:function(fn){loaded?fn():fns.push(fn)})}));if(Keen.loaded){setTimeout(function(){Keen.utils.domready(function(){Keen.trigger("ready")})},0)}_loadAsync();return Keen});var LZString=(function(){var f=String.fromCharCode;var keyStrBase64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var keyStrUriSafe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$";var baseReverseDic={};function getBaseValue(alphabet,character){if(!baseReverseDic[alphabet]){baseReverseDic[alphabet]={};for(var i=0;i<alphabet.length;i++){baseReverseDic[alphabet][alphabet.charAt(i)]=i;}}
return baseReverseDic[alphabet][character];}
var LZString={compressToBase64:function(input){if(input==null)return "";var res=LZString._compress(input,6,function(a){return keyStrBase64.charAt(a);});var resMod=res.length%4;if(resMod==1)res+="===";if(resMod==2)res+="==";if(resMod==3)res+="=";res=res.split("+").join("-").split("/").join(".").split("=").join("_");return res;},decompressFromBase64:function(input){if(input==null)return "";if(input=="")return null;input=input.split("-").join("+").split(".").join("/").split("_").join("=");return LZString._decompress(input.length,32,function(index){return getBaseValue(keyStrBase64,input.charAt(index));});},compressToUTF16:function(input){if(input==null)return "";return LZString._compress(input,15,function(a){return f(a+32);})+" ";},decompressFromUTF16:function(compressed){if(compressed==null)return "";if(compressed=="")return null;return LZString._decompress(compressed.length,16384,function(index){return compressed.charCodeAt(index)-32;});},compressToUint8Array:function(uncompressed){var compressed=LZString.compress(uncompressed);var buf=new Uint8Array(compressed.length*2);for(var i=0,TotalLen=compressed.length;i<TotalLen;i++){var current_value=compressed.charCodeAt(i);buf[i*2]=current_value>>>8;buf[i*2+1]=current_value%256;}
return buf;},decompressFromUint8Array:function(compressed){if(compressed===null||compressed===undefined){return LZString.decompress(compressed);}else{var buf=new Array(compressed.length/2);for(var i=0,TotalLen=buf.length;i<TotalLen;i++){buf[i]=compressed[i*2]*256+compressed[i*2+1];}
var result=[];buf.forEach(function(c){result.push(f(c));});return LZString.decompress(result.join(''));}},compressToEncodedURIComponent:function(input){if(input==null)return "";return LZString._compress(input,6,function(a){return keyStrUriSafe.charAt(a);});},decompressFromEncodedURIComponent:function(input){if(input==null)return "";if(input=="")return null;input=input.replace(/ /g,"+");return LZString._decompress(input.length,32,function(index){return getBaseValue(keyStrUriSafe,input.charAt(index));});},compress:function(uncompressed){return LZString._compress(uncompressed,16,function(a){return f(a);});},_compress:function(uncompressed,bitsPerChar,getCharFromInt){if(uncompressed==null)return "";var i,value,context_dictionary={},context_dictionaryToCreate={},context_c="",context_wc="",context_w="",context_enlargeIn=2,context_dictSize=3,context_numBits=2,context_data=[],context_data_val=0,context_data_position=0,ii;for(ii=0;ii<uncompressed.length;ii+=1){context_c=uncompressed.charAt(ii);if(!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)){context_dictionary[context_c]=context_dictSize++;context_dictionaryToCreate[context_c]=true;}
context_wc=context_w+context_c;if(Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)){context_w=context_wc;}else{if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val=(context_data_val<<1);if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0;}else{context_data_position++;}}
value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=(context_data_val<<1)|(value&1);if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0;}else{context_data_position++;}
value=value>>1;}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=(context_data_val<<1)|value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0;}else{context_data_position++;}
value=0;}
value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=(context_data_val<<1)|(value&1);if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0;}else{context_data_position++;}
value=value>>1;}}
context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++;}
delete context_dictionaryToCreate[context_w];}else{value=context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=(context_data_val<<1)|(value&1);if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0;}else{context_data_position++;}
value=value>>1;}}
context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++;}
context_dictionary[context_wc]=context_dictSize++;context_w=String(context_c);}}
if(context_w!==""){if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val=(context_data_val<<1);if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0;}else{context_data_position++;}}
value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=(context_data_val<<1)|(value&1);if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0;}else{context_data_position++;}
value=value>>1;}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=(context_data_val<<1)|value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0;}else{context_data_position++;}
value=0;}
value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=(context_data_val<<1)|(value&1);if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0;}else{context_data_position++;}
value=value>>1;}}
context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++;}
delete context_dictionaryToCreate[context_w];}else{value=context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=(context_data_val<<1)|(value&1);if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0;}else{context_data_position++;}
value=value>>1;}}
context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++;}}
value=2;for(i=0;i<context_numBits;i++){context_data_val=(context_data_val<<1)|(value&1);if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0;}else{context_data_position++;}
value=value>>1;}
while(true){context_data_val=(context_data_val<<1);if(context_data_position==bitsPerChar-1){context_data.push(getCharFromInt(context_data_val));break;}
else context_data_position++;}
return context_data.join('');},decompress:function(compressed){if(compressed==null)return "";if(compressed=="")return null;return LZString._decompress(compressed.length,32768,function(index){return compressed.charCodeAt(index);});},_decompress:function(length,resetValue,getNextValue){var dictionary=[],next,enlargeIn=4,dictSize=4,numBits=3,entry="",result=[],i,w,bits,resb,maxpower,power,c,data={val:getNextValue(0),position:resetValue,index:1};for(i=0;i<3;i+=1){dictionary[i]=i;}
bits=0;maxpower=Math.pow(2,2);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++);}
bits|=(resb>0?1:0)*power;power<<=1;}
switch(next=bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++);}
bits|=(resb>0?1:0)*power;power<<=1;}
c=f(bits);break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++);}
bits|=(resb>0?1:0)*power;power<<=1;}
c=f(bits);break;case 2:return "";}
dictionary[3]=c;w=c;result.push(c);while(true){if(data.index>length){return "";}
bits=0;maxpower=Math.pow(2,numBits);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++);}
bits|=(resb>0?1:0)*power;power<<=1;}
switch(c=bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++);}
bits|=(resb>0?1:0)*power;power<<=1;}
dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=resetValue;data.val=getNextValue(data.index++);}
bits|=(resb>0?1:0)*power;power<<=1;}
dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 2:return result.join('');}
if(enlargeIn==0){enlargeIn=Math.pow(2,numBits);numBits++;}
if(dictionary[c]){entry=dictionary[c];}else{if(c===dictSize){entry=w+w.charAt(0);}else{return null;}}
result.push(entry);dictionary[dictSize++]=w+entry.charAt(0);enlargeIn--;w=entry;if(enlargeIn==0){enlargeIn=Math.pow(2,numBits);numBits++;}}}};return LZString;})();/*!jQuery v1.12.4 | (c) jQuery Foundation | jquery.org/license*/!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window.parent:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="1.12.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(!l.ownFirst)for(b in a)return k.call(a,b);for(b in a);return void 0===b||k.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(h)return h.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a)?(c=e.call(arguments,2),d=function(){return a.apply(b||this,c.concat(e.call(arguments)))},d.guid=a.guid=a.guid||n.guid++,d):void 0},now:function(){return+new Date},support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=R.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;e>b;b++)if(n.contains(d[b],this))return!0}));for(b=0;e>b;b++)n.find(a,d[b],c);return c=this.pushStack(e>1?n.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}if(f=d.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return A.find(a);this.length=1,this[0]=f}return this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(n.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||(e=n.uniqueSort(e)),D.test(a)&&(e=e.reverse())),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=!0,c||j.disable(),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.addEventListener?(d.removeEventListener("DOMContentLoaded",K),a.removeEventListener("load",K)):(d.detachEvent("onreadystatechange",K),a.detachEvent("onload",K))}function K(){(d.addEventListener||"load"===a.event.type||"complete"===d.readyState)&&(J(),n.ready())}n.ready.promise=function(b){if(!I)if(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll)a.setTimeout(n.ready);else if(d.addEventListener)d.addEventListener("DOMContentLoaded",K),a.addEventListener("load",K);else{d.attachEvent("onreadystatechange",K),a.attachEvent("onload",K);var c=!1;try{c=null==a.frameElement&&d.documentElement}catch(e){}c&&c.doScroll&&!function f(){if(!n.isReady){try{c.doScroll("left")}catch(b){return a.setTimeout(f,50)}J(),n.ready()}}()}return I.promise(b)},n.ready.promise();var L;for(L in n(l))break;l.ownFirst="0"===L,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c,e;c=d.getElementsByTagName("body")[0],c&&c.style&&(b=d.createElement("div"),e=d.createElement("div"),e.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(e).appendChild(b),"undefined"!=typeof b.style.zoom&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",l.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(e))}),function(){var a=d.createElement("div");l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}a=null}();var M=function(a){var b=n.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b},N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(O,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}n.data(a,b,c)}else c=void 0;}return c}function Q(a){var b;for(b in a)if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function R(a,b,d,e){if(M(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),"object"!=typeof b&&"function"!=typeof b||(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[n.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[n.camelCase(b)])):f=g,f}}function S(a,b,c){if(M(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!Q(d):!n.isEmptyObject(d))return}(c||(delete g[h].data,Q(g[h])))&&(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=void 0)}}}n.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?n.cache[a[n.expando]]:a[n.expando],!!a&&!Q(a)},data:function(a,b,c){return R(a,b,c)},removeData:function(a,b){return S(a,b)},_data:function(a,b,c){return R(a,b,c,!0)},_removeData:function(a,b){return S(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=n.data(f),1===f.nodeType&&!n._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));n._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){n.data(this,a)}):arguments.length>1?this.each(function(){n.data(this,a,b)}):f?P(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=n._data(a,b),c&&(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks("once memory").add(function(){n._removeData(a,b+"queue"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=n._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}}),function(){var a;l.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,e;return c=d.getElementsByTagName("body")[0],c&&c.style?(b=d.createElement("div"),e=d.createElement("div"),e.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(e).appendChild(b),"undefined"!=typeof b.style.zoom&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(d.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(e),a):void 0}}();var T=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=new RegExp("^(?:([+-])=|)("+T+")([a-z%]*)$","i"),V=["Top","Right","Bottom","Left"],W=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function X(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&U.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var Y=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)Y(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Z=/^(?:checkbox|radio)$/i,$=/<([\w:-]+)/,_=/^$|\/(?:java|ecma)script/i,aa=/^\s+/,ba="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";function ca(a){var b=ba.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}!function(){var a=d.createElement("div"),b=d.createDocumentFragment(),c=d.createElement("input");a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",l.leadingWhitespace=3===a.firstChild.nodeType,l.tbody=!a.getElementsByTagName("tbody").length,l.htmlSerialize=!!a.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==d.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,b.appendChild(c),l.appendChecked=c.checked,a.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue,b.appendChild(a),c=d.createElement("input"),c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),a.appendChild(c),l.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!!a.addEventListener,a[n.expando]=1,l.attributes=!a.getAttribute(n.expando)}();var da={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};da.optgroup=da.option,da.tbody=da.tfoot=da.colgroup=da.caption=da.thead,da.th=da.td;function ea(a,b){var c,d,e=0,f="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||n.nodeName(d,b)?f.push(d):n.merge(f,ea(d,b));return void 0===b||b&&n.nodeName(a,b)?n.merge([a],f):f}function fa(a,b){for(var c,d=0;null!=(c=a[d]);d++)n._data(c,"globalEval",!b||n._data(b[d],"globalEval"))}var ga=/<|&#?\w+;/,ha=/<tbody/i;function ia(a){Z.test(a.type)&&(a.defaultChecked=a.checked)}function ja(a,b,c,d,e){for(var f,g,h,i,j,k,m,o=a.length,p=ca(b),q=[],r=0;o>r;r++)if(g=a[r],g||0===g)if("object"===n.type(g))n.merge(q,g.nodeType?[g]:g);else if(ga.test(g)){i=i||p.appendChild(b.createElement("div")),j=($.exec(g)||["",""])[1].toLowerCase(),m=da[j]||da._default,i.innerHTML=m[1]+n.htmlPrefilter(g)+m[2],f=m[0];while(f--)i=i.lastChild;if(!l.leadingWhitespace&&aa.test(g)&&q.push(b.createTextNode(aa.exec(g)[0])),!l.tbody){g="table"!==j||ha.test(g)?"<table>"!==m[1]||ha.test(g)?0:i:i.firstChild,f=g&&g.childNodes.length;while(f--)n.nodeName(k=g.childNodes[f],"tbody")&&!k.childNodes.length&&g.removeChild(k)}n.merge(q,i.childNodes),i.textContent="";while(i.firstChild)i.removeChild(i.firstChild);i=p.lastChild}else q.push(b.createTextNode(g));i&&p.removeChild(i),l.appendChecked||n.grep(ea(q,"input"),ia),r=0;while(g=q[r++])if(d&&n.inArray(g,d)>-1)e&&e.push(g);else if(h=n.contains(g.ownerDocument,g),i=ea(p.appendChild(g),"script"),h&&fa(i),c){f=0;while(g=i[f++])_.test(g.type||"")&&c.push(g)}return i=null,p}!function(){var b,c,e=d.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(l[b]=c in a)||(e.setAttribute(c,"t"),l[b]=e.attributes[c].expando===!1);e=null}();var ka=/^(?:input|select|textarea)$/i,la=/^key/,ma=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,na=/^(?:focusinfocus|focusoutblur)$/,oa=/^([^.]*)(?:\.(.+)|)/;function pa(){return!0}function qa(){return!1}function ra(){try{return d.activeElement}catch(a){}}function sa(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)sa(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=qa;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return"undefined"==typeof n||a&&n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(G)||[""],h=b.length;while(h--)f=oa.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)&&n._data(a);if(r&&(k=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=oa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;while(f--)g=m[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(k)&&(delete r.handle,n._removeData(a,"events"))}},trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(i=m=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!na.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),h=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),l=n.event.special[q]||{},f||!l.trigger||l.trigger.apply(e,c)!==!1)){if(!f&&!l.noBubble&&!n.isWindow(e)){for(j=l.delegateType||q,na.test(j+q)||(i=i.parentNode);i;i=i.parentNode)p.push(i),m=i;m===(e.ownerDocument||d)&&p.push(m.defaultView||m.parentWindow||a)}o=0;while((i=p[o++])&&!b.isPropagationStopped())b.type=o>1?j:l.bindType||q,g=(n._data(i,"events")||{})[b.type]&&n._data(i,"handle"),g&&g.apply(i,c),g=h&&i[h],g&&g.apply&&M(i)&&(b.result=g.apply(i,c),b.result===!1&&b.preventDefault());if(b.type=q,!f&&!b.isDefaultPrevented()&&(!l._default||l._default.apply(p.pop(),c)===!1)&&M(e)&&h&&e[q]&&!n.isWindow(e)){m=e[h],m&&(e[h]=null),n.event.triggered=q;try{e[q]()}catch(s){}n.event.triggered=void 0,m&&(e[h]=m)}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(n._data(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ma.test(f)?this.mouseHooks:la.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=g.srcElement||d),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,h.filter?h.filter(a,g):a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button,h=b.fromElement;return null==a.pageX&&null!=b.clientX&&(e=a.target.ownerDocument||d,f=e.documentElement,c=e.body,a.pageX=b.clientX+(f&&f.scrollLeft||c&&c.scrollLeft||0)-(f&&f.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(f&&f.scrollTop||c&&c.scrollTop||0)-(f&&f.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?b.toElement:h),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ra()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===ra()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return n.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b),d.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=d.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)}:function(a,b,c){var d="on"+b;a.detachEvent&&("undefined"==typeof a[d]&&(a[d]=null),a.detachEvent(d,c))},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?pa:qa):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:qa,isPropagationStopped:qa,isImmediatePropagationStopped:qa,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=pa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=pa,a&&!this.isSimulated&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=pa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||n.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.submit||(n.event.special.submit={setup:function(){return n.nodeName(this,"form")?!1:void n.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=n.nodeName(b,"input")||n.nodeName(b,"button")?n.prop(b,"form"):void 0;c&&!n._data(c,"submit")&&(n.event.add(c,"submit._submit",function(a){a._submitBubble=!0}),n._data(c,"submit",!0))})},postDispatch:function(a){a._submitBubble&&(delete a._submitBubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a))},teardown:function(){return n.nodeName(this,"form")?!1:void n.event.remove(this,"._submit")}}),l.change||(n.event.special.change={setup:function(){return ka.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._justChanged=!0)}),n.event.add(this,"click._change",function(a){this._justChanged&&!a.isTrigger&&(this._justChanged=!1),n.event.simulate("change",this,a)})),!1):void n.event.add(this,"beforeactivate._change",function(a){var b=a.target;ka.test(b.nodeName)&&!n._data(b,"change")&&(n.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a)}),n._data(b,"change",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return n.event.remove(this,"._change"),!ka.test(this.nodeName)}}),l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=n._data(d,b);e||d.addEventListener(a,c,!0),n._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=n._data(d,b)-1;e?n._data(d,b,e):(d.removeEventListener(a,c,!0),n._removeData(d,b))}}}),n.fn.extend({on:function(a,b,c,d){return sa(this,a,b,c,d)},one:function(a,b,c,d){return sa(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=qa),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ta=/ jQuery\d+="(?:null|\d+)"/g,ua=new RegExp("<(?:"+ba+")[\\s/>]","i"),va=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,wa=/<script|<style|<link/i,xa=/checked\s*(?:[^=]|=\s*.checked.)/i,ya=/^true\/(.*)/,za=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Aa=ca(d),Ba=Aa.appendChild(d.createElement("div"));function Ca(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function Da(a){return a.type=(null!==n.find.attr(a,"type"))+"/"+a.type,a}function Ea(a){var b=ya.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Fa(a,b){if(1===b.nodeType&&n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)n.event.add(b,c,h[c][d])}g.data&&(g.data=n.extend({},g.data))}}function Ga(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent&&b[n.expando]){e=n._data(b);for(d in e.events)n.removeEvent(b,d,e.handle);b.removeAttribute(n.expando)}"script"===c&&b.text!==a.text?(Da(b).text=a.text,Ea(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),l.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Z.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}}function Ha(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&xa.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),Ha(f,b,c,d)});if(o&&(k=ja(b,a[0].ownerDocument,!1,a,d),e=k.firstChild,1===k.childNodes.length&&(k=e),e||d)){for(i=n.map(ea(k,"script"),Da),h=i.length;o>m;m++)g=k,m!==p&&(g=n.clone(g,!0,!0),h&&n.merge(i,ea(g,"script"))),c.call(a[m],g,m);if(h)for(j=i[i.length-1].ownerDocument,n.map(i,Ea),m=0;h>m;m++)g=i[m],_.test(g.type||"")&&!n._data(g,"globalEval")&&n.contains(j,g)&&(g.src?n._evalUrl&&n._evalUrl(g.src):n.globalEval((g.text||g.textContent||g.innerHTML||"").replace(za,"")));k=e=null}return a}function Ia(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(ea(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&fa(ea(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(va,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!ua.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Ba.innerHTML=a.outerHTML,Ba.removeChild(f=Ba.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(d=ea(f),h=ea(a),g=0;null!=(e=h[g]);++g)d[g]&&Ga(e,d[g]);if(b)if(c)for(h=h||ea(a),d=d||ea(f),g=0;null!=(e=h[g]);g++)Fa(e,d[g]);else Fa(a,f);return d=ea(f,"script"),d.length>0&&fa(d,!i&&ea(a,"script")),d=h=e=null,f},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.attributes,m=n.event.special;null!=(d=a[h]);h++)if((b||M(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle);j[f]&&(delete j[f],k||"undefined"==typeof d.removeAttribute?d[i]=void 0:d.removeAttribute(i),c.push(f))}}}),n.fn.extend({domManip:Ha,detach:function(a){return Ia(this,a,!0)},remove:function(a){return Ia(this,a)},text:function(a){return Y(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||d).createTextNode(a))},null,a,arguments.length)},append:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.appendChild(a)}})},prepend:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&n.cleanData(ea(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&n.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return Y(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(ta,""):void 0;if("string"==typeof a&&!wa.test(a)&&(l.htmlSerialize||!ua.test(a))&&(l.leadingWhitespace||!aa.test(a))&&!da[($.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ea(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ha(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(ea(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=0,e=[],f=n(a),h=f.length-1;h>=d;d++)c=d===h?this:this.clone(!0),n(f[d])[b](c),g.apply(e,c.get());return this.pushStack(e)}});var Ja,Ka={HTML:"block",BODY:"block"};function La(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function Ma(a){var b=d,c=Ka[a];return c||(c=La(a,b),"none"!==c&&c||(Ja=(Ja||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Ja[0].contentWindow||Ja[0].contentDocument).document,b.write(),b.close(),c=La(a,b),Ja.detach()),Ka[a]=c),c}var Na=/^margin/,Oa=new RegExp("^("+T+")(?!px)[a-z%]+$","i"),Pa=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Qa=d.documentElement;!function(){var b,c,e,f,g,h,i=d.createElement("div"),j=d.createElement("div");if(j.style){j.style.cssText="float:left;opacity:.5",l.opacity="0.5"===j.style.opacity,l.cssFloat=!!j.style.cssFloat,j.style.backgroundClip="content-box",j.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===j.style.backgroundClip,i=d.createElement("div"),i.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",j.innerHTML="",i.appendChild(j),l.boxSizing=""===j.style.boxSizing||""===j.style.MozBoxSizing||""===j.style.WebkitBoxSizing,n.extend(l,{reliableHiddenOffsets:function(){return null==b&&k(),f},boxSizingReliable:function(){return null==b&&k(),e},pixelMarginRight:function(){return null==b&&k(),c},pixelPosition:function(){return null==b&&k(),b},reliableMarginRight:function(){return null==b&&k(),g},reliableMarginLeft:function(){return null==b&&k(),h}});function k(){var k,l,m=d.documentElement;m.appendChild(i),j.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",b=e=h=!1,c=g=!0,a.getComputedStyle&&(l=a.getComputedStyle(j),b="1%"!==(l||{}).top,h="2px"===(l||{}).marginLeft,e="4px"===(l||{width:"4px"}).width,j.style.marginRight="50%",c="4px"===(l||{marginRight:"4px"}).marginRight,k=j.appendChild(d.createElement("div")),k.style.cssText=j.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",k.style.marginRight=k.style.width="0",j.style.width="1px",g=!parseFloat((a.getComputedStyle(k)||{}).marginRight),j.removeChild(k)),j.style.display="none",f=0===j.getClientRects().length,f&&(j.style.display="",j.innerHTML="<table><tr><td></td><td>t</td></tr></table>",j.childNodes[0].style.borderCollapse="separate",k=j.getElementsByTagName("td"),k[0].style.cssText="margin:0;border:0;padding:0;display:none",f=0===k[0].offsetHeight,f&&(k[0].style.display="",k[1].style.display="none",f=0===k[0].offsetHeight)),m.removeChild(i)}}}();var Ra,Sa,Ta=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ra=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Oa.test(g)&&Na.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0===g?g:g+""}):Qa.currentStyle&&(Ra=function(a){return a.currentStyle},Sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Oa.test(g)&&!Ta.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Ua(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Va=/alpha\([^)]*\)/i,Wa=/opacity\s*=\s*([^)]*)/i,Xa=/^(none|table(?!-c[ea]).+)/,Ya=new RegExp("^("+T+")(.*)$","i"),Za={position:"absolute",visibility:"hidden",display:"block"},$a={letterSpacing:"0",fontWeight:"400"},_a=["Webkit","O","Moz","ms"],ab=d.createElement("div").style;function bb(a){if(a in ab)return a;var b=a.charAt(0).toUpperCase()+a.slice(1),c=_a.length;while(c--)if(a=_a[c]+b,a in ab)return a}function cb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=n._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&W(d)&&(f[g]=n._data(d,"olddisplay",Ma(d.nodeName)))):(e=W(d),(c&&"none"!==c||!e)&&n._data(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function db(a,b,c){var d=Ya.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function eb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+V[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+V[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+V[f]+"Width",!0,e))):(g+=n.css(a,"padding"+V[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+V[f]+"Width",!0,e)));return g}function fb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ra(a),g=l.boxSizing&&"border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Sa(a,b,f),(0>e||null==e)&&(e=a.style[b]),Oa.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+eb(a,b,c||(g?"border":"content"),d,f)+"px"}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Sa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=bb(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=U.exec(c))&&e[1]&&(c=X(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=bb(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Sa(a,b,d)),"normal"===f&&b in $a&&(f=$a[b]),""===c||c?(e=parseFloat(f),c===!0||isFinite(e)?e||0:f):f}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Xa.test(n.css(a,"display"))&&0===a.offsetWidth?Pa(a,Za,function(){return fb(a,b,d)}):fb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ra(a);return db(a,c,d?eb(a,b,d,l.boxSizing&&"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Wa.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===n.trim(f.replace(Va,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Va.test(f)?f.replace(Va,e):f+" "+e)}}),n.cssHooks.marginRight=Ua(l.reliableMarginRight,function(a,b){return b?Pa(a,{display:"inline-block"},Sa,[a,"marginRight"]):void 0}),n.cssHooks.marginLeft=Ua(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Sa(a,"marginLeft"))||(n.contains(a.ownerDocument,a)?a.getBoundingClientRect().left-Pa(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}):0))+"px":void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+V[d]+b]=f[d]||f[d-2]||f[0];return e}},Na.test(a)||(n.cssHooks[a+b].set=db)}),n.fn.extend({css:function(a,b){return Y(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ra(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return cb(this,!0)},hide:function(){return cb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){W(this)?n(this).show():n(this).hide()})}});function gb(a,b,c,d,e){return new gb.prototype.init(a,b,c,d,e)}n.Tween=gb,gb.prototype={constructor:gb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=gb.propHooks[this.prop];return a&&a.get?a.get(this):gb.propHooks._default.get(this)},run:function(a){var b,c=gb.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):gb.propHooks._default.set(this),this}},gb.prototype.init.prototype=gb.prototype,gb.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},gb.propHooks.scrollTop=gb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=gb.prototype.init,n.fx.step={};var hb,ib,jb=/^(?:toggle|show|hide)$/,kb=/queueHooks$/;function lb(){return a.setTimeout(function(){hb=void 0}),hb=n.now()}function mb(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=V[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function nb(a,b,c){for(var d,e=(qb.tweeners[b]||[]).concat(qb.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ob(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType&&W(a),r=n._data(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,"display"),k="none"===j?n._data(a,"olddisplay")||Ma(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==Ma(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],jb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(o))"inline"===("none"===j?Ma(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=n._data(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,"fxshow");for(b in o)n.style(a,b,o[b])});for(d in o)g=nb(q?r[d]:0,d,m),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function pb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function qb(a,b,c){var d,e,f=0,g=qb.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=hb||lb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:hb||lb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(pb(k,j.opts.specialEasing);g>f;f++)if(d=qb.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,nb,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(qb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return X(c.elem,a,U.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],qb.tweeners[c]=qb.tweeners[c]||[],qb.tweeners[c].unshift(b)},prefilters:[ob],prefilter:function(a,b){b?qb.prefilters.unshift(a):qb.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(W).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=qb(this,n.extend({},a),f);(e||n._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&kb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=n._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(mb(b,!0),a,d,e)}}),n.each({slideDown:mb("show"),slideUp:mb("hide"),slideToggle:mb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(hb=n.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||n.fx.stop(),hb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){ib||(ib=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(ib),ib=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a,b=d.createElement("input"),c=d.createElement("div"),e=d.createElement("select"),f=e.appendChild(d.createElement("option"));c=d.createElement("div"),c.setAttribute("className","t"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],b.setAttribute("type","checkbox"),c.appendChild(b),a=c.getElementsByTagName("a")[0],a.style.cssText="top:1px",l.getSetAttribute="t"!==c.className,l.style=/top/.test(a.getAttribute("style")),l.hrefNormalized="/a"===a.getAttribute("href"),l.checkOn=!!b.value,l.optSelected=f.selected,l.enctype=!!d.createElement("form").enctype,e.disabled=!0,l.optDisabled=!f.disabled,b=d.createElement("input"),b.setAttribute("value",""),l.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),l.radioValue="t"===b.value}();var rb=/\r/g,sb=/[\x20\t\r\n\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(rb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a)).replace(sb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)if(d=e[g],n.inArray(n.valHooks.option.get(d),f)>-1)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var tb,ub,vb=n.expr.attrHandle,wb=/^(?:checked|selected)$/i,xb=l.getSetAttribute,yb=l.input;n.fn.extend({attr:function(a,b){return Y(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ub:tb)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)?yb&&xb||!wb.test(c)?a[d]=!1:a[n.camelCase("default-"+c)]=a[d]=!1:n.attr(a,c,""),a.removeAttribute(xb?c:d)}}),ub={set:function(a,b,c){return b===!1?n.removeAttr(a,c):yb&&xb||!wb.test(c)?a.setAttribute(!xb&&n.propFix[c]||c,c):a[n.camelCase("default-"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=vb[b]||n.find.attr;yb&&xb||!wb.test(b)?vb[b]=function(a,b,d){var e,f;return d||(f=vb[b],vb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,vb[b]=f),e}:vb[b]=function(a,b,c){return c?void 0:a[n.camelCase("default-"+b)]?b.toLowerCase():null}}),yb&&xb||(n.attrHooks.value={set:function(a,b,c){return n.nodeName(a,"input")?void(a.defaultValue=b):tb&&tb.set(a,b,c)}}),xb||(tb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},vb.id=vb.name=vb.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:tb.set},n.attrHooks.contenteditable={set:function(a,b,c){tb.set(a,""===b?!1:b,c)}},n.each(["width","height"],function(a,b){n.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var zb=/^(?:input|select|textarea|button|object)$/i,Ab=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return Y(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):zb.test(a.nodeName)||Ab.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.hrefNormalized||n.each(["href","src"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype="encoding");var Bb=/[\t\r\n\f]/g;function Cb(a){return n.attr(a,"class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,Cb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=Cb(c),d=1===c.nodeType&&(" "+e+" ").replace(Bb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&n.attr(c,"class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,Cb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=Cb(c),d=1===c.nodeType&&(" "+e+" ").replace(Bb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&n.attr(c,"class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,Cb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=Cb(this),b&&n._data(this,"__className__",b),n.attr(this,"class",b||a===!1?"":n._data(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+Cb(c)+" ").replace(Bb," ").indexOf(b)>-1)return!0;return!1}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Db=a.location,Eb=n.now(),Fb=/\?/,Gb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;n.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=n.trim(b+"");return e&&!n.trim(e.replace(Gb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():n.error("Invalid JSON: "+b)},n.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new a.DOMParser,c=d.parseFromString(b,"text/xml")):(c=new a.ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var Hb=/#.*$/,Ib=/([?&])_=[^&]*/,Jb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Kb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Lb=/^(?:GET|HEAD)$/,Mb=/^\/\//,Nb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ob={},Pb={},Qb="*/".concat("*"),Rb=Db.href,Sb=Nb.exec(Rb.toLowerCase())||[];function Tb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Ub(a,b,c,d){var e={},f=a===Pb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Vb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&n.extend(!0,a,c),a}function Wb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Xb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rb,type:"GET",isLocal:Kb.test(Sb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Qb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Vb(Vb(a,n.ajaxSettings),b):Vb(n.ajaxSettings,a)},ajaxPrefilter:Tb(Ob),ajaxTransport:Tb(Pb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var d,e,f,g,h,i,j,k,l=n.ajaxSetup({},c),m=l.context||l,o=l.context&&(m.nodeType||m.jquery)?n(m):n.event,p=n.Deferred(),q=n.Callbacks("once memory"),r=l.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!k){k={};while(b=Jb.exec(g))k[b[1].toLowerCase()]=b[2]}b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return j&&j.abort(b),y(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,l.url=((b||l.url||Rb)+"").replace(Hb,"").replace(Mb,Sb[1]+"//"),l.type=c.method||c.type||l.method||l.type,l.dataTypes=n.trim(l.dataType||"*").toLowerCase().match(G)||[""],null==l.crossDomain&&(d=Nb.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Sb[1]&&d[2]===Sb[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Sb[3]||("http:"===Sb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=n.param(l.data,l.traditional)),Ub(Ob,l,c,w),2===u)return w;i=n.event&&l.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Lb.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(Fb.test(f)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Ib.test(f)?f.replace(Ib,"$1_="+Eb++):f+(Fb.test(f)?"&":"?")+"_="+Eb++)),l.ifModified&&(n.lastModified[f]&&w.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&w.setRequestHeader("If-None-Match",n.etag[f])),(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",l.contentType),w.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Qb+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)w.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(l.beforeSend.call(m,w,l)===!1||2===u))return w.abort();v="abort";for(e in{success:1,error:1,complete:1})w[e](l[e]);if(j=Ub(Pb,l,c,w)){if(w.readyState=1,i&&o.trigger("ajaxSend",[w,l]),2===u)return w;l.async&&l.timeout>0&&(h=a.setTimeout(function(){w.abort("timeout")},l.timeout));try{u=1,j.send(s,y)}catch(x){if(!(2>u))throw x;y(-1,x)}}else y(-1,"No Transport");function y(b,c,d,e){var k,s,t,v,x,y=c;2!==u&&(u=2,h&&a.clearTimeout(h),j=void 0,g=e||"",w.readyState=b>0?4:0,k=b>=200&&300>b||304===b,d&&(v=Wb(l,w,d)),v=Xb(l,v,w,k),k?(l.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(n.lastModified[f]=x),x=w.getResponseHeader("etag"),x&&(n.etag[f]=x)),204===b||"HEAD"===l.type?y="nocontent":304===b?y="notmodified":(y=v.state,s=v.data,t=v.error,k=!t)):(t=y,!b&&y||(y="error",0>b&&(b=0))),w.status=b,w.statusText=(c||y)+"",k?p.resolveWith(m,[s,y,w]):p.rejectWith(m,[w,y,t]),w.statusCode(r),r=void 0,i&&o.trigger(k?"ajaxSuccess":"ajaxError",[w,l,k?s:t]),q.fireWith(m,[w,y]),i&&(o.trigger("ajaxComplete",[w,l]),--n.active||n.event.trigger("ajaxStop")))}return w},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a))return this.each(function(b){n(this).wrapAll(a.call(this,b))});if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}});function Yb(a){return a.style&&a.style.display||n.css(a,"display")}function Zb(a){if(!n.contains(a.ownerDocument||d,a))return!0;while(a&&1===a.nodeType){if("none"===Yb(a)||"hidden"===a.type)return!0;a=a.parentNode}return!1}n.expr.filters.hidden=function(a){return l.reliableHiddenOffsets()?a.offsetWidth<=0&&a.offsetHeight<=0&&!a.getClientRects().length:Zb(a)},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var $b=/%20/g,_b=/\[\]$/,ac=/\r?\n/g,bc=/^(?:submit|button|image|reset|file)$/i,cc=/^(?:input|select|textarea|keygen)/i;function dc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||_b.test(a)?d(a,e):dc(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)dc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)dc(c,a[c],b,e);return d.join("&").replace($b,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&cc.test(this.nodeName)&&!bc.test(a)&&(this.checked||!Z.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(ac,"\r\n")}}):{name:b.name,value:c.replace(ac,"\r\n")}}).get()}}),n.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return this.isLocal?ic():d.documentMode>8?hc():/^(get|post|head|put|delete|options)$/i.test(this.type)&&hc()||ic()}:hc;var ec=0,fc={},gc=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in fc)fc[a](void 0,!0)}),l.cors=!!gc&&"withCredentials"in gc,gc=l.ajax=!!gc,gc&&n.ajaxTransport(function(b){if(!b.crossDomain||l.cors){var c;return{send:function(d,e){var f,g=b.xhr(),h=++ec;if(g.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(f in b.xhrFields)g[f]=b.xhrFields[f];b.mimeType&&g.overrideMimeType&&g.overrideMimeType(b.mimeType),b.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");for(f in d)void 0!==d[f]&&g.setRequestHeader(f,d[f]+"");g.send(b.hasContent&&b.data||null),c=function(a,d){var f,i,j;if(c&&(d||4===g.readyState))if(delete fc[h],c=void 0,g.onreadystatechange=n.noop,d)4!==g.readyState&&g.abort();else{j={},f=g.status,"string"==typeof g.responseText&&(j.text=g.responseText);try{i=g.statusText}catch(k){i=""}f||!b.isLocal||b.crossDomain?1223===f&&(f=204):f=j.text?200:404}j&&e(f,i,j,g.getAllResponseHeaders())},b.async?4===g.readyState?a.setTimeout(c):g.onreadystatechange=fc[h]=c:c()},abort:function(){c&&c(void 0,!0)}}}});function hc(){try{return new a.XMLHttpRequest}catch(b){}}function ic(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=d.head||n("head")[0]||d.documentElement;return{send:function(e,f){b=d.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||f(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var jc=[],kc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=jc.pop()||n.expando+"_"+Eb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(kc.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&kc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(kc,"$1"+e):b.jsonp!==!1&&(b.url+=(Fb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,jc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ja([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var lc=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&lc)return lc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h,a.length)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function mc(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&n.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,n.contains(b,e)?("undefined"!=typeof e.getBoundingClientRect&&(d=e.getBoundingClientRect()),c=mc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===n.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(c=a.offset()),c.top+=n.css(a[0],"borderTopWidth",!0),c.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-n.css(d,"marginTop",!0),left:b.left-c.left-n.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Qa})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return Y(this,function(a,d,e){var f=mc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ua(l.pixelPosition,function(a,c){return c?(c=Sa(a,b),Oa.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return Y(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var nc=a.jQuery,oc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=oc),b&&a.jQuery===n&&(a.jQuery=nc),n},b||(a.jQuery=a.$=n),n});var JQUERY_DIGIOH=window.parent.jQuery.noConflict(true);RegExp.escape=function(r){return r.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},function(){"use strict";var p=JQUERY_DIGIOH;p.csv={defaults:{separator:",",delimiter:'"',headers:!0},hooks:{castToScalar:function(r,e){if(isNaN(r))return r;if(/\./.test(r))return parseFloat(r);var a=parseInt(r);return isNaN(a)?null:a}},parsers:{parse:function(r,e){var a=e.separator,t=e.delimiter;e.state.rowNum||(e.state.rowNum=1),e.state.colNum||(e.state.colNum=1);var o=[],s=[],n=0,i="",l=!1;function u(){if(n=0,i="",e.start&&e.state.rowNum<e.start)return s=[],e.state.rowNum++,void(e.state.colNum=1);if(void 0===e.onParseEntry)o.push(s);else{var r=e.onParseEntry(s,e.state);!1!==r&&o.push(r)}s=[],e.end&&e.state.rowNum>=e.end&&(l=!0),e.state.rowNum++,e.state.colNum=1}function c(){if(void 0===e.onParseValue)s.push(i);else if(e.headers&&1===e.state.rowNum)s.push(i);else{var r=e.onParseValue(i,e.state);!1!==r&&s.push(r)}i="",n=0,e.state.colNum++}var f=RegExp.escape(a),d=RegExp.escape(t),m=/(D|S|\r\n|\n|\r|[^DS\r\n]+)/,p=m.source;return p=(p=p.replace(/S/g,f)).replace(/D/g,d),m=new RegExp(p,"gm"),r.replace(m,function(r){if(!l)switch(n){case 0:if(r===a){i+="",c();break}if(r===t){n=1;break}if(/^(\r\n|\n|\r)$/.test(r)){c(),u();break}i+=r,n=3;break;case 1:if(r===t){n=2;break}i+=r,n=1;break;case 2:if(r===t){i+=r,n=1;break}if(r===a){c();break}if(/^(\r\n|\n|\r)$/.test(r)){c(),u();break}throw Error("CSVDataError: Illegal State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");case 3:if(r===a){c();break}if(/^(\r\n|\n|\r)$/.test(r)){c(),u();break}if(r===t)throw Error("CSVDataError: Illegal Quote [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");throw Error("CSVDataError: Illegal Data [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");default:throw Error("CSVDataError: Unknown State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]")}}),0!==s.length&&(c(),u()),o},splitLines:function(r,a){if(r){var t=(a=a||{}).separator||p.csv.defaults.separator,o=a.delimiter||p.csv.defaults.delimiter;a.state=a.state||{},a.state.rowNum||(a.state.rowNum=1);var e=[],s=0,n="",i=!1,l=RegExp.escape(t),u=RegExp.escape(o),c=/(D|S|\n|\r|[^DS\r\n]+)/,f=c.source;return f=(f=f.replace(/S/g,l)).replace(/D/g,u),c=new RegExp(f,"gm"),r.replace(c,function(r){if(!i)switch(s){case 0:if(r===t){n+=r,s=0;break}if(r===o){n+=r,s=1;break}if("\n"===r){d();break}if(/^\r$/.test(r))break;n+=r,s=3;break;case 1:if(r===o){n+=r,s=2;break}n+=r,s=1;break;case 2:var e=n.substr(n.length-1);if(r===o&&e===o){n+=r,s=1;break}if(r===t){n+=r,s=0;break}if("\n"===r){d();break}if("\r"===r)break;throw Error("CSVDataError: Illegal state [Row:"+a.state.rowNum+"]");case 3:if(r===t){n+=r,s=0;break}if("\n"===r){d();break}if("\r"===r)break;if(r===o)throw Error("CSVDataError: Illegal quote [Row:"+a.state.rowNum+"]");throw Error("CSVDataError: Illegal state [Row:"+a.state.rowNum+"]");default:throw Error("CSVDataError: Unknown state [Row:"+a.state.rowNum+"]")}}),""!==n&&d(),e}function d(){if(s=0,a.start&&a.state.rowNum<a.start)return n="",void a.state.rowNum++;if(void 0===a.onParseEntry)e.push(n);else{var r=a.onParseEntry(n,a.state);!1!==r&&e.push(r)}n="",a.end&&a.state.rowNum>=a.end&&(i=!0),a.state.rowNum++}},parseEntry:function(r,e){var a=e.separator,t=e.delimiter;e.state.rowNum||(e.state.rowNum=1),e.state.colNum||(e.state.colNum=1);var o=[],s=0,n="";function i(){if(void 0===e.onParseValue)o.push(n);else{var r=e.onParseValue(n,e.state);!1!==r&&o.push(r)}n="",s=0,e.state.colNum++}if(!e.match){var l=RegExp.escape(a),u=RegExp.escape(t),c=/(D|S|\n|\r|[^DS\r\n]+)/.source;c=(c=c.replace(/S/g,l)).replace(/D/g,u),e.match=new RegExp(c,"gm")}return r.replace(e.match,function(r){switch(s){case 0:if(r===a){n+="",i();break}if(r===t){s=1;break}if("\n"===r||"\r"===r)break;n+=r,s=3;break;case 1:if(r===t){s=2;break}n+=r,s=1;break;case 2:if(r===t){n+=r,s=1;break}if(r===a){i();break}if("\n"===r||"\r"===r)break;throw Error("CSVDataError: Illegal State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");case 3:if(r===a){i();break}if("\n"===r||"\r"===r)break;if(r===t)throw Error("CSVDataError: Illegal Quote [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");throw Error("CSVDataError: Illegal Data [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");default:throw Error("CSVDataError: Unknown State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]")}}),i(),o}},helpers:{collectPropertyNames:function(r){var e=[],a=[],t=[];for(e in r)for(a in r[e])r[e].hasOwnProperty(a)&&t.indexOf(a)<0&&"function"!=typeof r[e][a]&&t.push(a);return t}},toArray:function(r,e,a){if(void 0!==e&&"function"==typeof e){if(void 0!==a)return console.error("You cannot 3 arguments with the 2nd argument being a function");a=e,e={}}e=void 0!==e?e:{};var t={};t.callback=void 0!==a&&"function"==typeof a&&a,t.separator="separator"in e?e.separator:p.csv.defaults.separator,t.delimiter="delimiter"in e?e.delimiter:p.csv.defaults.delimiter;var o=void 0!==e.state?e.state:{};e={delimiter:t.delimiter,separator:t.separator,onParseEntry:e.onParseEntry,onParseValue:e.onParseValue,state:o};var s=p.csv.parsers.parseEntry(r,e);if(!t.callback)return s;t.callback("",s)},toArrays:function(r,e,a){if(void 0!==e&&"function"==typeof e){if(void 0!==a)return console.error("You cannot 3 arguments with the 2nd argument being a function");a=e,e={}}e=void 0!==e?e:{};var t={};t.callback=void 0!==a&&"function"==typeof a&&a,t.separator="separator"in e?e.separator:p.csv.defaults.separator,t.delimiter="delimiter"in e?e.delimiter:p.csv.defaults.delimiter;var o=[];if(void 0!==(e={delimiter:t.delimiter,separator:t.separator,onPreParse:e.onPreParse,onParseEntry:e.onParseEntry,onParseValue:e.onParseValue,onPostParse:e.onPostParse,start:e.start,end:e.end,state:{rowNum:1,colNum:1}}).onPreParse&&(r=e.onPreParse(r,e.state)),o=p.csv.parsers.parse(r,e),void 0!==e.onPostParse&&(o=e.onPostParse(o,e.state)),!t.callback)return o;t.callback("",o)},toObjects:function(r,e,a){if(void 0!==e&&"function"==typeof e){if(void 0!==a)return console.error("You cannot 3 arguments with the 2nd argument being a function");a=e,e={}}e=void 0!==e?e:{};var t={};t.callback=void 0!==a&&"function"==typeof a&&a,t.separator="separator"in e?e.separator:p.csv.defaults.separator,t.delimiter="delimiter"in e?e.delimiter:p.csv.defaults.delimiter,t.headers="headers"in e?e.headers:p.csv.defaults.headers,e.start="start"in e?e.start:1,t.headers&&e.start++,e.end&&t.headers&&e.end++;var o,s=[];e={delimiter:t.delimiter,separator:t.separator,onPreParse:e.onPreParse,onParseEntry:e.onParseEntry,onParseValue:e.onParseValue,onPostParse:e.onPostParse,start:e.start,end:e.end,state:{rowNum:1,colNum:1},match:!1,transform:e.transform};var n={delimiter:t.delimiter,separator:t.separator,start:1,end:1,state:{rowNum:1,colNum:1},headers:!0};void 0!==e.onPreParse&&(r=e.onPreParse(r,e.state));var i=p.csv.parsers.splitLines(r,n),l=p.csv.toArray(i[0],n);o=p.csv.parsers.splitLines(r,e),e.state.colNum=1,e.state.rowNum=l?2:1;for(var u=0,c=o.length;u<c;u++){for(var f=p.csv.toArray(o[u],e),d={},m=0;m<l.length;m++)d[l[m]]=f[m];void 0!==e.transform?s.push(e.transform.call(void 0,d)):s.push(d),e.state.rowNum++}if(void 0!==e.onPostParse&&(s=e.onPostParse(s,e.state)),!t.callback)return s;t.callback("",s)},fromArrays:function(r,e,a){if(void 0!==e&&"function"==typeof e){if(void 0!==a)return console.error("You cannot 3 arguments with the 2nd argument being a function");a=e,e={}}e=void 0!==e?e:{};var t={};t.callback=void 0!==a&&"function"==typeof a&&a,t.separator="separator"in e?e.separator:p.csv.defaults.separator,t.delimiter="delimiter"in e?e.delimiter:p.csv.defaults.delimiter;var o,s,n,i,l="";for(n=0;n<r.length;n++){for(o=r[n],s=[],i=0;i<o.length;i++){var u=void 0===o[i]||null===o[i]?"":o[i].toString();-1<u.indexOf(t.delimiter)&&(u=u.replace(new RegExp(t.delimiter,"g"),t.delimiter+t.delimiter));var c="\n|\r|S|D";c=(c=c.replace("S",t.separator)).replace("D",t.delimiter),-1<u.search(c)&&(u=t.delimiter+u+t.delimiter),s.push(u)}l+=s.join(t.separator)+"\n"}if(!t.callback)return l;t.callback("",l)},fromObjects:function(r,e,a){if(void 0!==e&&"function"==typeof e){if(void 0!==a)return console.error("You cannot 3 arguments with the 2nd argument being a function");a=e,e={}}e=void 0!==e?e:{};var t={};if(t.callback=void 0!==a&&"function"==typeof a&&a,t.separator="separator"in e?e.separator:p.csv.defaults.separator,t.delimiter="delimiter"in e?e.delimiter:p.csv.defaults.delimiter,t.headers="headers"in e?e.headers:p.csv.defaults.headers,t.sortOrder="sortOrder"in e?e.sortOrder:"declare",t.manualOrder="manualOrder"in e?e.manualOrder:[],t.transform=e.transform,"string"==typeof t.manualOrder&&(t.manualOrder=p.csv.toArray(t.manualOrder,t)),void 0!==t.transform){var o,s=r;for(r=[],o=0;o<s.length;o++)r.push(t.transform.call(void 0,s[o]))}var n,i,l=p.csv.helpers.collectPropertyNames(r);if("alpha"===t.sortOrder&&l.sort(),0<t.manualOrder.length){var u,c=[].concat(t.manualOrder);for(u=0;u<l.length;u++)c.indexOf(l[u])<0&&c.push(l[u]);l=c}var f,d=[];for(t.headers&&d.push(l),n=0;n<r.length;n++){for(i=[],u=0;u<l.length;u++)(f=l[u])in r[n]&&"function"!=typeof r[n][f]?i.push(r[n][f]):i.push("");d.push(i)}return p.csv.fromArrays(d,e,t.callback)}},p.csvEntry2Array=p.csv.toArray,p.csv2Array=p.csv.toArrays,p.csv2Dictionary=p.csv.toObjects,"undefined"!=typeof module&&module.exports&&(module.exports=p.csv)}.call(this);JQUERY_DIGIOH.idleTimer=function(firstParam,elem,opts){opts=JQUERY_DIGIOH.extend({startImmediately:true,idle:false,enabled:true,timeout:30000,events:"mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove"},opts);elem=elem||window.parent.document;var jqElem=JQUERY_DIGIOH(elem),obj=jqElem.data("idleTimerObj")||{},toggleIdleState=function(myelem){if(typeof myelem==="number"){myelem=undefined;}
var obj=JQUERY_DIGIOH.data(myelem||elem,"idleTimerObj");obj.idle=!obj.idle;var elapsed=(+new Date())-obj.olddate;obj.olddate=+new Date();if(obj.idle&&(elapsed<opts.timeout)){obj.idle=false;window.parent.clearTimeout(JQUERY_DIGIOH.idleTimer.tId);if(opts.enabled){try{JQUERY_DIGIOH.idleTimer.tId=window.parent.setTimeout(toggleIdleState,opts.timeout);}catch(e){}}
return;}
var event=JQUERY_DIGIOH.Event(JQUERY_DIGIOH.data(elem,"idleTimer",obj.idle?"idle":"active")+".idleTimer");JQUERY_DIGIOH(elem).trigger(event);},stop=function(jqElem){var obj=jqElem.data("idleTimerObj")||{};obj.enabled=false;try{window.parent.clearTimeout(obj.tId);}catch(e){}
jqElem.off(".idleTimer");};obj.olddate=obj.olddate||+new Date();if(typeof firstParam==="number"){opts.timeout=firstParam;}else if(firstParam==="destroy"){stop(jqElem);return this;}else if(firstParam==="getElapsedTime"){return(+new Date())-obj.olddate;}
jqElem.on(JQUERY_DIGIOH.trim((opts.events+" ").split(" ").join(".idleTimer ")),function(){var obj=JQUERY_DIGIOH.data(this,"idleTimerObj");try{window.parent.clearTimeout(obj.tId);}catch(e){}
if(obj.enabled){if(obj.idle){toggleIdleState(this);}
try{obj.tId=window.parent.setTimeout(toggleIdleState,obj.timeout);}catch(e){}}});obj.idle=opts.idle;obj.enabled=opts.enabled;obj.timeout=opts.timeout;if(opts.startImmediately){try{obj.tId=window.parent.setTimeout(toggleIdleState,obj.timeout);}catch(e){}}
jqElem.data("idleTimer","active");jqElem.data("idleTimerObj",obj);};JQUERY_DIGIOH.fn.idleTimer=function(firstParam,opts){if(!opts){opts={};}
if(this[0]){JQUERY_DIGIOH.idleTimer(firstParam,this[0],opts);}
return this;};if(DIGIOH_EMBED_TYPE==='inline'){}
var hasRunJquerySelectorGenerator=false;var JquerySelectorGeneratorPrevBorder={};var JquerySelectorGeneratorPrevPath='';var runJquerySelectorGenerator=function(){if(!hasRunJquerySelectorGenerator){hasRunJquerySelectorGenerator=true;JQUERY_DIGIOH.fn.extend({getJqSelectorPath:function(){var path,node=this;while(node.length){var realNode=node[0],name=realNode.localName;if(!name)break;name=name.toLowerCase();var parent=node.parent();var sameTagSiblings=parent.children(name);if(sameTagSiblings.length>1){var allSiblings=parent.children();var index=allSiblings.index(realNode)+1;if(index>1){name+=':nth-child('+index+')';}}
path=name+(path?'>'+path:'');node=parent;}
return path;}});JQUERY_DIGIOH(window.parent.document).ready(function(){JQUERY_DIGIOH('body').append("<div id='lightbox-jquery-selector-generator-wrapper' class='lightbox-jquery-selector-generator' style='display: none; position: fixed; z-index: 7000000; top: 0px; right: 0px; width: 500px; background-color: #D5D5D5; border: 0px solid #e5e9ea; border-radius: 8px;'><a href='javascript:void(0);' id='lightbox-jquery-selector-generator-close' class='lightbox-jquery-selector-generator' style='float: right; margin-right: 5px; margin-top: 5px; text-decoration: none; border: 0px solid black;'><img id='lightbox-jquery-selector-generator-close-img' class='lightbox-jquery-selector-generator' src='https://lightbox.blob.core.windows.net/static/jquery_selector_generator_close_btn.png' style='width: 15px; border: 0px solid #D5D5D5;' /></a><input id='lightbox-jquery-selector-generator-input-1' class='lightbox-jquery-selector-generator' type='text' style='width: 452px; margin-left: 22px; height: 30px; margin-top: 20px; margin-bottom: 20px; border: 1px solid #7E7E7E; background-color: #fff; border-radius: 6px;' /><input id='lightbox-jquery-selector-generator-input-2' class='lightbox-jquery-selector-generator' type='text' style='display: none; width: 452px; margin-left: 22px; height: 30px; margin-top: -10px; margin-bottom: 20px; border: 1px solid #7E7E7E; background-color: #fff; border-radius: 6px;' /></div>");JQUERY_DIGIOH('#lightbox-jquery-selector-generator-close').click(function(){JQUERY_DIGIOH('#lightbox-jquery-selector-generator-wrapper').hide();});JQUERY_DIGIOH(window.parent.document).click(function(e){e.preventDefault();var ele=JQUERY_DIGIOH(e.target);var sp=ele.getJqSelectorPath();if(!ele.attr('id')||ele.attr('class')!=='lightbox-jquery-selector-generator'){if(JquerySelectorGeneratorPrevBorder!=={}&&JquerySelectorGeneratorPrevBorder.width!=='0px'&&JquerySelectorGeneratorPrevPath&&JquerySelectorGeneratorPrevPath!==sp){JQUERY_DIGIOH(JquerySelectorGeneratorPrevPath).css({'border-width':JquerySelectorGeneratorPrevBorder.width,'border-color':JquerySelectorGeneratorPrevBorder.color,'border-style':JquerySelectorGeneratorPrevBorder.style});}else if(JquerySelectorGeneratorPrevPath&&JquerySelectorGeneratorPrevPath!==sp){JQUERY_DIGIOH(JquerySelectorGeneratorPrevPath).css({'border':'none'});}
if(JquerySelectorGeneratorPrevPath!==sp){var blw=JQUERY_DIGIOH(sp).css("border-left-width");if(blw){JquerySelectorGeneratorPrevBorder={'width':blw,'color':JQUERY_DIGIOH(sp).css("border-color"),'style':JQUERY_DIGIOH(sp).css("border-style")};}else{JquerySelectorGeneratorPrevBorder={'width':'0px','color':'black','style':'solid'};}
if(DIGIOH_API&&DIGIOH_API.hasOwnProperty('activeInlineSelectorGeneratorBox')&&DIGIOH_API.activeInlineSelectorGeneratorBox.length&&JQUERY_DIGIOH('#lightbox-iframe-'+DIGIOH_API.activeInlineSelectorGeneratorBox).length){JQUERY_DIGIOH('#lightbox-iframe-'+DIGIOH_API.activeInlineSelectorGeneratorBox).parent().hide();}}
JquerySelectorGeneratorPrevPath=sp;JQUERY_DIGIOH(sp).css({"border-width":"1px","border-color":"#009EC5","border-style":"solid"});JQUERY_DIGIOH('#lightbox-jquery-selector-generator-input-1').val(sp);JQUERY_DIGIOH('#lightbox-jquery-selector-generator-wrapper').show();if(JQUERY_DIGIOH(sp).html().length&&(JQUERY_DIGIOH(sp).html().indexOf('<')===-1||JQUERY_DIGIOH(sp).html().indexOf('>')===-1)){if(JQUERY_DIGIOH(sp).html().indexOf("'")>=0){JQUERY_DIGIOH('#lightbox-jquery-selector-generator-input-2').val(sp+":contains("+JQUERY_DIGIOH(sp).html().trim()+")");}else{JQUERY_DIGIOH('#lightbox-jquery-selector-generator-input-2').val(sp+":contains('"+JQUERY_DIGIOH(sp).html().trim()+"')");}
JQUERY_DIGIOH('#lightbox-jquery-selector-generator-input-2').show();}else{JQUERY_DIGIOH('#lightbox-jquery-selector-generator-input-2').hide();}
if(DIGIOH_API&&DIGIOH_API.hasOwnProperty('activeInlineSelectorGeneratorBox')&&DIGIOH_API.activeInlineSelectorGeneratorBox.length){var jqueryMethod=DIGIOH_API.LIGHTBOX.getUrlParam('jquery-selector-method');if(!jqueryMethod){jqueryMethod='append';}
if(JQUERY_DIGIOH('#lightbox-iframe-'+DIGIOH_API.activeInlineSelectorGeneratorBox).length){var inlineElement=JQUERY_DIGIOH('#lightbox-iframe-'+DIGIOH_API.activeInlineSelectorGeneratorBox).parent().detach();if(JQUERY_DIGIOH(sp).length>1){JQUERY_DIGIOH(sp).eq(0)[jqueryMethod](inlineElement);}else{JQUERY_DIGIOH(sp)[jqueryMethod](inlineElement);}
JQUERY_DIGIOH('#lightbox-iframe-'+DIGIOH_API.activeInlineSelectorGeneratorBox).parent().show();}else{var lid=DIGIOH_API.activeInlineSelectorGeneratorBox;DIGIOH_LIGHTBOX_EFFECTS[lid].inline.position_using='jquery_selector';DIGIOH_LIGHTBOX_EFFECTS[lid].inline.jquery_selector=sp;DIGIOH_LIGHTBOX_EFFECTS[lid].inline.jquery_method=jqueryMethod;DIGIOH_API.LIGHTBOX.embedInlineLightboxForm(lid);}}}});});}};if(window.parent.location.href.indexOf('lightbox-jquery-selector-generator')>0){runJquerySelectorGenerator();}
var DIGIOH_STORAGE={storage_type:(DIGIOH_STORAGE_TYPE||'cookie'),data:{},callbacks:{},set:function(){if(typeof DIGIOH_STORAGE.data!=='object'||DIGIOH_STORAGE.data===null){DIGIOH_STORAGE.data={};}
if(typeof DIGIOH_STORAGE.storage_type==='string'&&DIGIOH_STORAGE.storage_type){if(DIGIOH_STORAGE.storage_type==='local_storage'){DIGIOH_LOCAL_STORAGE.set(DIGIOH_STORAGE.data);}else if(DIGIOH_STORAGE.storage_type==='cross_domain'){if(DIGIOH_CROSS_DOMAIN.isWorking){DIGIOH_CROSS_DOMAIN.set(DIGIOH_STORAGE.data);}else{DIGIOH_API.log('DIGIOH_CROSS_DOMAIN.isWorking = '+DIGIOH_CROSS_DOMAIN.isWorking+' -- Could not perform (DIGIOH_STORAGE.set) operation');}}else if(DIGIOH_STORAGE.storage_type==='cookie'){DIGIOH_COOKIE.set('xdibx',JSON.stringify(DIGIOH_STORAGE.data));DIGIOH_LOCAL_STORAGE.set(DIGIOH_STORAGE.data);}}else{DIGIOH_API.log('DIGIOH_STORAGE.storage_type ==> NOT SET!!!! -- Could not perform (DIGIOH_STORAGE.set) operation');}},get:function(callback){if(typeof DIGIOH_STORAGE.storage_type==='string'&&DIGIOH_STORAGE.storage_type){if(DIGIOH_STORAGE.storage_type==='local_storage'){callback(DIGIOH_LOCAL_STORAGE.get('xdibx'));}else if(DIGIOH_STORAGE.storage_type==='cross_domain'){if(DIGIOH_CROSS_DOMAIN.isWorking){DIGIOH_CROSS_DOMAIN.get(callback);}else{DIGIOH_API.log('DIGIOH_CROSS_DOMAIN.isWorking = '+DIGIOH_CROSS_DOMAIN.isWorking+' -- Could not perform (DIGIOH_STORAGE.get) operation');}}else if(DIGIOH_STORAGE.storage_type==='cookie'){var storageVal=DIGIOH_COOKIE.getEncoded('xdibx');var storageValLS=DIGIOH_LOCAL_STORAGE.get('xdibx');if(storageVal===null||storageVal===''){storageVal=storageValLS;DIGIOH_API.log('DIGIOH_STORAGE.get ==> pulled value from localStorage, since cookie value does not exist.');}else if(storageValLS&&(storageValLS.length>storageVal.length||storageVal.length>3500&&storageValLS.length>3500)){storageVal=storageValLS;DIGIOH_API.log('DIGIOH_STORAGE.get ==> pulled value from localStorage, since cookie value was smaller or is approaching max size limit of 4000.');}
callback(storageVal);}}else{DIGIOH_API.log('DIGIOH_STORAGE.storage_type ==> NOT SET!!!! -- Could not perform (DIGIOH_STORAGE.get) operation');}},erase:function(){if(typeof DIGIOH_STORAGE.storage_type==='string'&&DIGIOH_STORAGE.storage_type){if(DIGIOH_STORAGE.storage_type==='local_storage'){DIGIOH_LOCAL_STORAGE.erase();}else if(DIGIOH_STORAGE.storage_type==='cross_domain'){if(DIGIOH_CROSS_DOMAIN.isWorking){DIGIOH_CROSS_DOMAIN.erase();}else{DIGIOH_API.log('DIGIOH_CROSS_DOMAIN.isWorking = '+DIGIOH_CROSS_DOMAIN.isWorking+' -- Could not perform (DIGIOH_STORAGE.get) operation');}}else if(DIGIOH_STORAGE.storage_type==='cookie'){DIGIOH_COOKIE.erase('xdibx');}}else{DIGIOH_API.log('DIGIOH_STORAGE.storage_type ==> NOT SET!!!! -- Could not perform (DIGIOH_STORAGE.erase) operation');}},setStorageType:function(){if(typeof DIGIOH_STORAGE_TYPE==='string'){if(DIGIOH_STORAGE_TYPE==='local_storage'&&DIGIOH_LOCAL_STORAGE.isAvailable()===false){DIGIOH_API.log('DIGIOH_STORAGE.storage_type ==> detected that localStorage is not available, so falling back to using cookies');DIGIOH_STORAGE.storage_type='cookie';}else{DIGIOH_STORAGE.storage_type=DIGIOH_STORAGE_TYPE;}}else{DIGIOH_STORAGE.storage_type='cookie';}}};var DIGIOH_LOCAL_STORAGE={set:function(obj){var data_val='';var useLZ=(typeof USE_LZ==='undefined'||USE_LZ==true);if(typeof obj!=='object'||obj===null){if(useLZ){data_val=LZString.compressToBase64(JSON.stringify({}));}else{data_val=JSON.stringify({});}}else{if(useLZ){data_val=LZString.compressToBase64(JSON.stringify(obj));}else{data_val=JSON.stringify(obj);}}
if(DIGIOH_VENDOR_SHORT_ID=='42662')
sessionStorage.setItem('xdibx',data_val);else
localStorage.setItem('xdibx',data_val);},get:function(callback){var val=localStorage.getItem('xdibx');if(DIGIOH_VENDOR_SHORT_ID=='42662')
val=sessionStorage.getItem('xdibx');if(typeof val!=='string'){val='';}
return val;},erase:function(){if(DIGIOH_VENDOR_SHORT_ID=='42662')
sessionStorage.removeItem('xdibx');else
localStorage.removeItem('xdibx');},setManual:function(key,value){try{var data_val='';var useLZ=(typeof USE_LZ==='undefined'||USE_LZ==true);if(typeof value==='undefined'||value===null){if(useLZ){data_val=LZString.compressToBase64('');}else{data_val='';}}else if(typeof value==='object'){if(useLZ){data_val=LZString.compressToBase64(JSON.stringify(value));}else{data_val=JSON.stringify(value);}}else{if(useLZ){data_val=LZString.compressToBase64(value.toString());}else{data_val=value.toString();}}
if(DIGIOH_VENDOR_SHORT_ID=='42662')
sessionStorage.setItem(key,data_val);else
localStorage.setItem(key,data_val);}catch(e){return false;}},getManual:function(key){try{var value=localStorage.getItem(key);if(DIGIOH_VENDOR_SHORT_ID=='42662')
value=sessionStorage.getItem(key);var data_val='';var useLZ=(typeof USE_LZ==='undefined'||USE_LZ==true);if(typeof value==='undefined'||value===null){data_val='';}else if(typeof value==='string'){if(useLZ){value=LZString.decompressFromBase64(value);}
if((value.indexOf('{')===0&&value.substring(value.length-1)==='}')||(value.indexOf('[')===0&&value.substring(value.length-1)===']')){data_val=JSON.parse(value);}else{data_val=value;}}
return data_val;}catch(e){return '';}},isAvailable:function(){var t='tst';try{if(DIGIOH_VENDOR_SHORT_ID=='42662'){sessionStorage.setItem(t,t);sessionStorage.removeItem(t);}
else{localStorage.setItem(t,t);localStorage.removeItem(t);}
return true;}catch(e){return false;}}};var DIGIOH_CROSS_DOMAIN={isWorking:false,isWorkingFinished:false,callbacks:{},set:function(value){var data_val='';var useLZ=(typeof USE_LZ==='undefined'||USE_LZ==true);if(typeof value!=='object'||value===null){if(useLZ){data_val=LZString.compressToBase64(JSON.stringify({}));}else{data_val=JSON.stringify({});}}else{if(useLZ){data_val=LZString.compressToBase64(JSON.stringify(value));}else{data_val=JSON.stringify(value);}}
var obj={operation:"set",value:data_val,vid:DIGIOH_VENDOR_GUID};window.parent.frames['DigiohLocalStorageIframe'].postMessage(JSON.stringify(obj),'https://'+DIGIOH_API.CONFIG.CDN_DOMAIN);},get:function(callback){var identifier=new Date().getTime();var obj={operation:"get",identifier:identifier,vid:DIGIOH_VENDOR_GUID};DIGIOH_CROSS_DOMAIN.callbacks[identifier]=callback;window.parent.frames['DigiohLocalStorageIframe'].postMessage(JSON.stringify(obj),'https://'+DIGIOH_API.CONFIG.CDN_DOMAIN);},erase:function(){var obj={operation:"erase",vid:DIGIOH_VENDOR_GUID};window.parent.frames['DigiohLocalStorageIframe'].postMessage(JSON.stringify(obj),'https://'+DIGIOH_API.CONFIG.CDN_DOMAIN);},setInner:function(key,value){var data_type='';var data_val='';var useLZ=(typeof USE_LZ==='undefined'||USE_LZ==true);if(typeof value==='undefined'||value===null){data_type='string';if(useLZ){data_val=LZString.compressToBase64('');}else{data_val='';}}else if(typeof value==='object'){data_type='object';if(useLZ){data_val=LZString.compressToBase64(JSON.stringify(value));}else{data_val=JSON.stringify(value);}}else{data_type=(typeof value);if(useLZ){data_val=LZString.compressToBase64(value.toString());}else{data_val=value.toString();}}
var obj={operation:"set_inner",key:key,value:data_val,type:data_type,vid:DIGIOH_VENDOR_GUID};window.parent.frames['DigiohLocalStorageIframe'].postMessage(JSON.stringify(obj),'https://'+DIGIOH_API.CONFIG.CDN_DOMAIN);},getInner:function(key,callback){var identifier=new Date().getTime();var obj={operation:"get_inner",key:key,identifier:identifier,vid:DIGIOH_VENDOR_GUID};DIGIOH_CROSS_DOMAIN.callbacks[identifier]=callback;window.parent.frames['DigiohLocalStorageIframe'].postMessage(JSON.stringify(obj),'https://'+DIGIOH_API.CONFIG.CDN_DOMAIN);},eraseInner:function(key){var obj={operation:"erase_inner",key:key,vid:DIGIOH_VENDOR_GUID};window.parent.frames['DigiohLocalStorageIframe'].postMessage(JSON.stringify(obj),'https://'+DIGIOH_API.CONFIG.CDN_DOMAIN);},setManual:function(key,value){var data_val='';var useLZ=(typeof USE_LZ==='undefined'||USE_LZ==true);if(typeof value==='undefined'||value===null){if(useLZ){data_val=LZString.compressToBase64('');}else{data_val='';}}else if(typeof value==='object'){if(useLZ){data_val=LZString.compressToBase64(JSON.stringify(value));}else{data_val=JSON.stringify(value);}}else{if(useLZ){data_val=LZString.compressToBase64(value.toString());}else{data_val=value.toString();}}
var obj={operation:"set_manual",key:key,value:data_val,vid:DIGIOH_VENDOR_GUID};window.parent.frames['DigiohLocalStorageIframe'].postMessage(JSON.stringify(obj),'https://'+DIGIOH_API.CONFIG.CDN_DOMAIN);},getManual:function(key,callback){var identifier=new Date().getTime();var obj={operation:"get_manual",key:key,identifier:identifier,vid:DIGIOH_VENDOR_GUID};DIGIOH_CROSS_DOMAIN.callbacks[identifier]=callback;window.parent.frames['DigiohLocalStorageIframe'].postMessage(JSON.stringify(obj),'https://'+DIGIOH_API.CONFIG.CDN_DOMAIN);},eraseManual:function(key){var obj={operation:"erase_manual",key:key,vid:DIGIOH_VENDOR_GUID};window.parent.frames['DigiohLocalStorageIframe'].postMessage(JSON.stringify(obj),'https://'+DIGIOH_API.CONFIG.CDN_DOMAIN);}};var DIGIOH_COOKIE={set:function(name,value,days){DIGIOH_COOKIE.trySet(name,value,true,days);},setDecoded:function(name,value,days){DIGIOH_COOKIE.trySet(name,value,false,days);},trySet:function(name,value,encode,days,cookie_domain_override){var domain,domainParts,date,expires,host;var useLZ=(typeof USE_LZ==='undefined'||USE_LZ==true);var enc='';if(value){if(encode&&useLZ){enc=LZString.compressToBase64(value);}else{enc=value;}}
if(typeof days==='undefined'){days=3650;}
date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toGMTString();host=location.hostname;if(cookie_domain_override){window.parent.document.cookie=name+"="+enc+expires+"; path=/; domain="+cookie_domain_override;}
else if(host.split('.').length===1){window.parent.document.cookie=name+"="+enc+expires+"; path=/";}
else if(DIGIOH_VENDOR_GUID=='5fb5fbce-1665-4cb1-a778-84825f66a775'&&host.indexOf('golfchannel.com')>=0){window.parent.document.cookie=name+"="+enc+expires+"; path=/; domain=.golfchannel.com";}
else{domainParts=host.split('.').reverse();var wasWritten=false;var idx=1;var cv='';while(!wasWritten&&idx<domainParts.length){domain="";for(var i=idx;i>=0;i--){domain+='.'+domainParts[i];}
window.parent.document.cookie=name+"="+enc+expires+"; path=/; domain="+domain+"; SameSite=Lax";cv=DIGIOH_COOKIE.getEncoded(name);wasWritten=(cv!=null&&cv==enc);idx++;if(!wasWritten){}}}},get:function(name,is_plain_text){var enc=DIGIOH_COOKIE.getEncoded(name);var useLZ=(typeof USE_LZ==='undefined'||USE_LZ==true);if(enc!==null&&typeof enc!=='undefined'){if(is_plain_text||!useLZ){return enc;}else{return LZString.decompressFromBase64(enc);}}
return null;},getEncoded:function(name){var nameEQ=name+"=";var ca=window.parent.document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1,c.length);}
if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;},erase:function(name){DIGIOH_COOKIE.setDecoded(name,'hi',-1);},eraseWithoutDomain:function(name){var date=new Date();date.setTime(date.getTime()+(-1*24*60*60*1000));var expires="; expires="+date.toGMTString();window.parent.document.cookie=name+"="+'hi'+expires+"; path=/";},eraseWithSpecificDomain:function(name,domain){var date=new Date();date.setTime(date.getTime()+(-1*24*60*60*1000));var expires="; expires="+date.toGMTString();window.parent.document.cookie=name+"="+'hi'+expires+"; path=/; domain="+domain;}};if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,'');};}
var DIGIOH_IS_ANALYTICS_IDENTIFY_DONE={geo:false,device:false};(function(window,document,$,undefined){var H=$("html"),W=$(window),D=$(document),F=$.fb_lightbox=function(){F.open.apply(this,arguments)},IE=navigator.userAgent.match(/msie/i),didUpdate=null,isTouch=document.createTouch!==undefined,isQuery=function(obj){return obj&&obj.hasOwnProperty&&obj instanceof $},isString=function(str){return str&&$.type(str)==="string"},isPercentage=function(str){return isString(str)&&str.indexOf("%")>0},isScrollable=function(el){return(el&&!(el.style.overflow&&el.style.overflow==="hidden")&&((el.clientWidth&&el.scrollWidth>el.clientWidth)||(el.clientHeight&&el.scrollHeight>el.clientHeight)))},getScalar=function(orig,dim){var value=parseInt(orig,10)||0;if(dim&&isPercentage(orig)){value=F.getViewport()[dim]/100*value}return Math.ceil(value)},getValue=function(value,dim){return getScalar(value,dim)+"px"};$.extend(F,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:true,autoHeight:false,autoWidth:false,autoResize:true,autoCenter:!isTouch,fitToView:true,aspectRatio:false,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:"html",headers:{"X-fb_lightbox":true}},iframe:{scrolling:"auto",preload:true},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:true,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fb_lightbox-wrap" tabIndex="-1"><div class="fb_lightbox-skin"><div class="fb_lightbox-outer"><div class="fb_lightbox-inner"></div></div></div></div>',image:'<img class="fb_lightbox-image" src="{href}" alt="" />',iframe:'<iframe id="fb_lightbox-frame{rnd}" name="fb_lightbox-frame{rnd}" class="fb_lightbox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(IE?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fb_lightbox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fb_lightbox-item fb_lightbox-close" href="javascript:;"></a>',next:'<a title="Next" class="fb_lightbox-nav fb_lightbox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fb_lightbox-nav fb_lightbox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:true,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:true,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:true,title:true},onCancel:$.noop,beforeLoad:$.noop,afterLoad:$.noop,beforeShow:$.noop,afterShow:$.noop,beforeChange:$.noop,beforeClose:$.noop,afterClose:$.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:false,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(group,opts){if(!group){return}if(!$.isPlainObject(opts)){opts={}}if(false===F.close(true)){return}if(!$.isArray(group)){group=isQuery(group)?$(group).get():[group]}$.each(group,function(i,element){var obj={},href,title,content,type,rez,hrefParts,selector;if($.type(element)==="object"){if(element.nodeType){element=$(element)}if(isQuery(element)){obj={href:element.data("fb_lightbox-href")||element.attr("href"),title:element.data("fb_lightbox-title")||element.attr("title"),isDom:true,element:element};if($.metadata){$.extend(true,obj,element.metadata())}}else{obj=element}}href=opts.href||obj.href||(isString(element)?element:null);title=opts.title!==undefined?opts.title:obj.title||"";content=opts.content||obj.content;type=content?"html":(opts.type||obj.type);if(!type&&obj.isDom){type=element.data("fb_lightbox-type");if(!type){rez=element.prop("class").match(/fb_lightbox\.(\w+)/);type=rez?rez[1]:null}}if(isString(href)){if(!type){if(F.isImage(href)){type="image"}else{if(F.isSWF(href)){type="swf"}else{if(href.charAt(0)==="#"){type="inline"}else{if(isString(element)){type="html";content=element}}}}}if(type==="ajax"){hrefParts=href.split(/\s+/,2);href=hrefParts.shift();selector=hrefParts.shift()}}if(!content){if(type==="inline"){if(href){content=$(isString(href)?href.replace(/.*(?=#[^\s]+$)/,""):href)}else{if(obj.isDom){content=element}}}else{if(type==="html"){content=href}else{if(!type&&!href&&obj.isDom){type="inline";content=element}}}}$.extend(obj,{href:href,type:type,content:content,title:title,selector:selector});group[i]=obj});F.opts=$.extend(true,{},F.defaults,opts);if(opts.keys!==undefined){F.opts.keys=opts.keys?$.extend({},F.defaults.keys,opts.keys):false}F.group=group;return F._start(F.opts.index)},cancel:function(){var coming=F.coming;if(!coming||false===F.trigger("onCancel")){return}F.hideLoading();if(F.ajaxLoad){F.ajaxLoad.abort()}F.ajaxLoad=null;if(F.imgPreload){F.imgPreload.onload=F.imgPreload.onerror=null}if(coming.wrap){coming.wrap.stop(true,true).trigger("onReset").remove()}F.coming=null;if(!F.current){F._afterZoomOut(coming)}},close:function(event){F.cancel();if(false===F.trigger("beforeClose")){return}F.unbindEvents();if(!F.isActive){return}if(!F.isOpen||event===true){$(".fb_lightbox-wrap").stop(true).trigger("onReset").remove();F._afterZoomOut()}else{F.isOpen=F.isOpened=false;F.isClosing=true;$(".fb_lightbox-item, .fb_lightbox-nav").remove();F.wrap.stop(true,true).removeClass("fb_lightbox-opened");F.transitions[F.current.closeMethod]()}},play:function(action){var clear=function(){clearTimeout(F.player.timer)},set=function(){clear();if(F.current&&F.player.isActive){F.player.timer=setTimeout(F.next,F.current.playSpeed)}},stop=function(){clear();D.unbind(".player");F.player.isActive=false;F.trigger("onPlayEnd")},start=function(){if(F.current&&(F.current.loop||F.current.index<F.group.length-1)){F.player.isActive=true;D.bind({"onCancel.player beforeClose.player":stop,"onUpdate.player":set,"beforeLoad.player":clear});set();F.trigger("onPlayStart")}};if(action===true||(!F.player.isActive&&action!==false)){start()}else{stop()}},next:function(direction){var current=F.current;if(current){if(!isString(direction)){direction=current.direction.next}F.jumpto(current.index+1,direction,"next")}},prev:function(direction){var current=F.current;if(current){if(!isString(direction)){direction=current.direction.prev}F.jumpto(current.index-1,direction,"prev")}},jumpto:function(index,direction,router){var current=F.current;if(!current){return}index=getScalar(index);F.direction=direction||current.direction[(index>=current.index?"next":"prev")];F.router=router||"jumpto";if(current.loop){if(index<0){index=current.group.length+(index%current.group.length)}index=index%current.group.length}if(current.group[index]!==undefined){F.cancel();F._start(index)}},reposition:function(e,onlyAbsolute){var current=F.current,wrap=current?current.wrap:null,pos;if(wrap){pos=F._getPosition(onlyAbsolute);if(e&&e.type==="scroll"){delete pos.position;wrap.stop(true,true).animate(pos,200)}else{wrap.css(pos);current.pos=$.extend({},current.dim,pos)}}},update:function(e){var type=(e&&e.type),anyway=!type||type==="orientationchange";if(anyway){clearTimeout(didUpdate);didUpdate=null}if(!F.isOpen||didUpdate){return}didUpdate=setTimeout(function(){var current=F.current;if(!current||F.isClosing){return}F.wrap.removeClass("fb_lightbox-tmp");if(anyway||type==="load"||(type==="resize"&&current.autoResize)){F._setDimension()}if(!(type==="scroll"&&current.canShrink)){F.reposition(e)}F.trigger("onUpdate");didUpdate=null},(anyway&&!isTouch?0:300))},toggle:function(action){if(F.isOpen){F.current.fitToView=$.type(action)==="boolean"?action:!F.current.fitToView;if(isTouch){F.wrap.removeAttr("style").addClass("fb_lightbox-tmp");F.trigger("onUpdate")}F.update()}},hideLoading:function(){D.unbind(".loading");$("#fb_lightbox-loading").remove()},showLoading:function(){var el,viewport;F.hideLoading();el=$('<div id="fb_lightbox-loading"><div></div></div>').click(F.cancel).appendTo("body");D.bind("keydown.loading",function(e){if((e.which||e.keyCode)===27){e.preventDefault();F.cancel()}});if(!F.defaults.fixed){viewport=F.getViewport();el.css({position:"absolute",top:(viewport.h*0.5)+viewport.y,left:(viewport.w*0.5)+viewport.x})}},getViewport:function(){var locked=(F.current&&F.current.locked)||false,rez={x:W.scrollLeft(),y:W.scrollTop()};if(locked){rez.w=locked[0].clientWidth;rez.h=locked[0].clientHeight}else{rez.w=isTouch&&window.innerWidth?window.innerWidth:W.width();rez.h=isTouch&&window.innerHeight?window.innerHeight:W.height()}return rez},unbindEvents:function(){if(F.wrap&&isQuery(F.wrap)){F.wrap.unbind(".fb")}D.unbind(".fb");W.unbind(".fb")},bindEvents:function(){var current=F.current,keys;if(!current){return}W.bind("orientationchange.fb"+(isTouch?"":" resize.fb")+(current.autoCenter&&!current.locked?" scroll.fb":""),F.update);keys=current.keys;if(keys){D.bind("keydown.fb",function(e){var code=e.which||e.keyCode,target=e.target||e.srcElement;if(code===27&&F.coming){return false}if(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&!(target&&(target.type||$(target).is("[contenteditable]")))){$.each(keys,function(i,val){if(current.group.length>1&&val[code]!==undefined){F[i](val[code]);e.preventDefault();return false}if($.inArray(code,val)>-1){F[i]();e.preventDefault();return false}})}})}if($.fn.mousewheel&&current.mouseWheel){F.wrap.bind("mousewheel.fb",function(e,delta,deltaX,deltaY){var target=e.target||null,parent=$(target),canScroll=false;while(parent.length){if(canScroll||parent.is(".fb_lightbox-skin")||parent.is(".fb_lightbox-wrap")){break}canScroll=isScrollable(parent[0]);parent=$(parent).parent()}if(delta!==0&&!canScroll){if(F.group.length>1&&!current.canShrink){if(deltaY>0||deltaX>0){F.prev(deltaY>0?"down":"left")}else{if(deltaY<0||deltaX<0){F.next(deltaY<0?"up":"right")}}e.preventDefault()}}})}},trigger:function(event,o){var ret,obj=o||F.coming||F.current;if(!obj){return}if($.isFunction(obj[event])){ret=obj[event].apply(obj,Array.prototype.slice.call(arguments,1))}if(ret===false){return false}if(obj.helpers){$.each(obj.helpers,function(helper,opts){if(opts&&F.helpers[helper]&&$.isFunction(F.helpers[helper][event])){F.helpers[helper][event]($.extend(true,{},F.helpers[helper].defaults,opts),obj)}})}D.trigger(event)},isImage:function(str){return isString(str)&&str.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(str){return isString(str)&&str.match(/\.(swf)((\?|#).*)?$/i)},_start:function(index){var coming={},obj,href,type,margin,padding;index=getScalar(index);obj=F.group[index]||null;if(!obj){return false}coming=$.extend(true,{},F.opts,obj);margin=coming.margin;padding=coming.padding;if($.type(margin)==="number"){coming.margin=[margin,margin,margin,margin]}if($.type(padding)==="number"){coming.padding=[padding,padding,padding,padding]}if(coming.modal){$.extend(true,coming,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{closeClick:false}}})}if(coming.autoSize){coming.autoWidth=coming.autoHeight=true}if(coming.width==="auto"){coming.autoWidth=true}if(coming.height==="auto"){coming.autoHeight=true}coming.group=F.group;coming.index=index;F.coming=coming;if(false===F.trigger("beforeLoad")){F.coming=null;return}type=coming.type;href=coming.href;if(!type){F.coming=null;if(F.current&&F.router&&F.router!=="jumpto"){F.current.index=index;return F[F.router](F.direction)}return false}F.isActive=true;if(type==="image"||type==="swf"){coming.autoHeight=coming.autoWidth=false;coming.scrolling="visible"}if(type==="image"){coming.aspectRatio=true}if(type==="iframe"&&isTouch){coming.scrolling="scroll"}coming.wrap=$(coming.tpl.wrap).addClass("fb_lightbox-"+(isTouch?"mobile":"desktop")+" fb_lightbox-type-"+type+" fb_lightbox-tmp "+coming.wrapCSS).appendTo(coming.parent||"body");$.extend(coming,{skin:$(".fb_lightbox-skin",coming.wrap),outer:$(".fb_lightbox-outer",coming.wrap),inner:$(".fb_lightbox-inner",coming.wrap)});$.each(["Top","Right","Bottom","Left"],function(i,v){coming.skin.css("padding"+v,getValue(coming.padding[i]))});F.trigger("onReady");if(type==="inline"||type==="html"){if(!coming.content||!coming.content.length){return F._error("content")}}else{if(!href){return F._error("href")}}if(type==="image"){F._loadImage()}else{if(type==="ajax"){F._loadAjax()}else{if(type==="iframe"){F._loadIframe()}else{F._afterLoad()}}}},_error:function(type){$.extend(F.coming,{type:"html",autoWidth:true,autoHeight:true,minWidth:0,minHeight:0,scrolling:"no",hasError:type,content:F.coming.tpl.error});F._afterLoad()},_loadImage:function(){var img=F.imgPreload=new Image();img.onload=function(){this.onload=this.onerror=null;F.coming.width=this.width/F.opts.pixelRatio;F.coming.height=this.height/F.opts.pixelRatio;F._afterLoad()};img.onerror=function(){this.onload=this.onerror=null;F._error("image")};img.src=F.coming.href;if(img.complete!==true){F.showLoading()}},_loadAjax:function(){var coming=F.coming;F.showLoading();F.ajaxLoad=$.ajax($.extend({},coming.ajax,{url:coming.href,error:function(jqXHR,textStatus){if(F.coming&&textStatus!=="abort"){F._error("ajax",jqXHR)}else{F.hideLoading()}},success:function(data,textStatus){if(textStatus==="success"){coming.content=data;F._afterLoad()}}}))},_loadIframe:function(){var coming=F.coming,iframe=$(coming.tpl.iframe.replace(/\{rnd\}/g,new Date().getTime())).attr("scrolling",isTouch?"auto":coming.iframe.scrolling).attr("src",coming.href);$(coming.wrap).bind("onReset",function(){try{$(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}});if(coming.iframe.preload){F.showLoading();iframe.one("load",function(){$(this).data("ready",1);if(!isTouch){$(this).bind("load.fb",F.update)}$(this).parents(".fb_lightbox-wrap").width("100%").removeClass("fb_lightbox-tmp").show();F._afterLoad()})}coming.content=iframe.appendTo(coming.inner);if(!coming.iframe.preload){F._afterLoad()}},_preloadImages:function(){var group=F.group,current=F.current,len=group.length,cnt=current.preload?Math.min(current.preload,len-1):0,item,i;for(i=1;i<=cnt;i+=1){item=group[(current.index+i)%len];if(item.type==="image"&&item.href){new Image().src=item.href}}},_afterLoad:function(){var coming=F.coming,previous=F.current,placeholder="fb_lightbox-placeholder",current,content,type,scrolling,href,embed;F.hideLoading();if(!coming||F.isActive===false){return}if(false===F.trigger("afterLoad",coming,previous)){coming.wrap.stop(true).trigger("onReset").remove();F.coming=null;return}if(previous){F.trigger("beforeChange",previous);previous.wrap.stop(true).removeClass("fb_lightbox-opened").find(".fb_lightbox-item, .fb_lightbox-nav").remove()}F.unbindEvents();current=coming;content=coming.content;type=coming.type;scrolling=coming.scrolling;$.extend(F,{wrap:current.wrap,skin:current.skin,outer:current.outer,inner:current.inner,current:current,previous:previous});href=current.href;switch(type){case "inline":case "ajax":case "html":if(current.selector){content=$("<div>").html(content).find(current.selector)}else{if(isQuery(content)){if(!content.data(placeholder)){content.data(placeholder,$('<div class="'+placeholder+'"></div>').insertAfter(content).hide())}content=content.show().detach();current.wrap.bind("onReset",function(){if($(this).find(content).length){content.hide().replaceAll(content.data(placeholder)).data(placeholder,false)}})}}break;case "image":content=current.tpl.image.replace("{href}",href);break;case "swf":content='<object id="fb_lightbox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+href+'"></param>';embed="";$.each(current.swf,function(name,val){content+='<param name="'+name+'" value="'+val+'"></param>';embed+=" "+name+'="'+val+'"'});content+='<embed src="'+href+'" type="application/x-shockwave-flash" width="100%" height="100%"'+embed+"></embed></object>";break}if(!(isQuery(content)&&content.parent().is(current.inner))){current.inner.append(content)}F.trigger("beforeShow");current.inner.css("overflow",scrolling==="yes"?"scroll":(scrolling==="no"?"hidden":scrolling));F._setDimension();F.reposition();F.isOpen=false;F.coming=null;F.bindEvents();if(!F.isOpened){$(".fb_lightbox-wrap").not(current.wrap).stop(true).trigger("onReset").remove()}else{if(previous.prevMethod){F.transitions[previous.prevMethod]()}}F.transitions[F.isOpened?current.nextMethod:current.openMethod]();F._preloadImages()},_setDimension:function(){var viewport=F.getViewport(),steps=0,canShrink=false,canExpand=false,wrap=F.wrap,skin=F.skin,inner=F.inner,current=F.current,width=current.width,height=current.height,minWidth=current.minWidth,minHeight=current.minHeight,maxWidth=current.maxWidth,maxHeight=current.maxHeight,scrolling=current.scrolling,scrollOut=current.scrollOutside?current.scrollbarWidth:0,margin=current.margin,wMargin=getScalar(margin[1]+margin[3]),hMargin=getScalar(margin[0]+margin[2]),wPadding,hPadding,wSpace,hSpace,origWidth,origHeight,origMaxWidth,origMaxHeight,ratio,width_,height_,maxWidth_,maxHeight_,iframe,body;wrap.add(skin).add(inner).width("auto").height("auto").removeClass("fb_lightbox-tmp");wPadding=getScalar(skin.outerWidth(true)-skin.width());hPadding=getScalar(skin.outerHeight(true)-skin.height());wSpace=wMargin+wPadding;hSpace=hMargin+hPadding;origWidth=isPercentage(width)?(viewport.w-wSpace)*getScalar(width)/100:width;origHeight=isPercentage(height)?(viewport.h-hSpace)*getScalar(height)/100:height;if(current.type==="iframe"){iframe=current.content;if(current.autoHeight&&iframe.data("ready")===1){try{if(iframe[0].contentWindow.document.location){inner.width(origWidth).height(9999);body=iframe.contents().find("body");if(scrollOut){body.css("overflow-x","hidden")}origHeight=body.outerHeight(true)}}catch(e){}}}else{if(current.autoWidth||current.autoHeight){inner.addClass("fb_lightbox-tmp");if(!current.autoWidth){inner.width(origWidth)}if(!current.autoHeight){inner.height(origHeight)}if(current.autoWidth){origWidth=inner.width()}if(current.autoHeight){origHeight=inner.height()}inner.removeClass("fb_lightbox-tmp")}}width=getScalar(origWidth);height=getScalar(origHeight);ratio=origWidth/origHeight;minWidth=getScalar(isPercentage(minWidth)?getScalar(minWidth,"w")-wSpace:minWidth);maxWidth=getScalar(isPercentage(maxWidth)?getScalar(maxWidth,"w")-wSpace:maxWidth);minHeight=getScalar(isPercentage(minHeight)?getScalar(minHeight,"h")-hSpace:minHeight);maxHeight=getScalar(isPercentage(maxHeight)?getScalar(maxHeight,"h")-hSpace:maxHeight);origMaxWidth=maxWidth;origMaxHeight=maxHeight;if(current.fitToView){maxWidth=Math.min(viewport.w-wSpace,maxWidth);maxHeight=Math.min(viewport.h-hSpace,maxHeight)}maxWidth_=viewport.w-wMargin;maxHeight_=viewport.h-hMargin;if(current.aspectRatio){if(width>maxWidth){width=maxWidth;height=getScalar(width/ratio)}if(height>maxHeight){height=maxHeight;width=getScalar(height*ratio)}if(width<minWidth){width=minWidth;height=getScalar(width/ratio)}if(height<minHeight){height=minHeight;width=getScalar(height*ratio)}}else{width=Math.max(minWidth,Math.min(width,maxWidth));if(current.autoHeight&&current.type!=="iframe"){inner.width(width);height=inner.height()}height=Math.max(minHeight,Math.min(height,maxHeight))}if(current.fitToView){inner.width(width).height(height);wrap.width(width+wPadding);width_=wrap.width();height_=wrap.height();if(current.aspectRatio){while((width_>maxWidth_||height_>maxHeight_)&&width>minWidth&&height>minHeight){if(steps++>19){break}height=Math.max(minHeight,Math.min(maxHeight,height-10));width=getScalar(height*ratio);if(width<minWidth){width=minWidth;height=getScalar(width/ratio)}if(width>maxWidth){width=maxWidth;height=getScalar(width/ratio)}inner.width(width).height(height);wrap.width(width+wPadding);width_=wrap.width();height_=wrap.height()}}else{width=Math.max(minWidth,Math.min(width,width-(width_-maxWidth_)));height=Math.max(minHeight,Math.min(height,height-(height_-maxHeight_)))}}if(scrollOut&&scrolling==="auto"&&height<origHeight&&(width+wPadding+scrollOut)<maxWidth_){width+=scrollOut}inner.width(width).height(height);wrap.width(width+wPadding);width_=wrap.width();height_=wrap.height();canShrink=(width_>maxWidth_||height_>maxHeight_)&&width>minWidth&&height>minHeight;canExpand=current.aspectRatio?(width<origMaxWidth&&height<origMaxHeight&&width<origWidth&&height<origHeight):((width<origMaxWidth||height<origMaxHeight)&&(width<origWidth||height<origHeight));$.extend(current,{dim:{width:getValue(width_),height:getValue(height_)},origWidth:origWidth,origHeight:origHeight,canShrink:canShrink,canExpand:canExpand,wPadding:wPadding,hPadding:hPadding,wrapSpace:height_-skin.outerHeight(true),skinSpace:skin.height()-height});if(!iframe&&current.autoHeight&&height>minHeight&&height<maxHeight&&!canExpand){inner.height("auto")}},_getPosition:function(onlyAbsolute){var current=F.current,viewport=F.getViewport(),margin=current.margin,width=F.wrap.width()+margin[1]+margin[3],height=F.wrap.height()+margin[0]+margin[2],rez={position:"absolute",top:margin[0],left:margin[3]};if(current.autoCenter&&current.fixed&&!onlyAbsolute&&height<=viewport.h&&width<=viewport.w){rez.position="fixed"}else{if(!current.locked){rez.top+=viewport.y;rez.left+=viewport.x}}rez.top=getValue(Math.max(rez.top,rez.top+((viewport.h-height)*current.topRatio)));rez.left=getValue(Math.max(rez.left,rez.left+((viewport.w-width)*current.leftRatio)));return rez},_afterZoomIn:function(){var current=F.current;if(!current){return}F.isOpen=F.isOpened=true;F.wrap.css("overflow","visible").addClass("fb_lightbox-opened");F.update();if(current.closeClick||(current.nextClick&&F.group.length>1)){F.inner.css("cursor","pointer").bind("click.fb",function(e){if(!$(e.target).is("a")&&!$(e.target).parent().is("a")){e.preventDefault();F[current.closeClick?"close":"next"]()}})}if(current.closeBtn){$(current.tpl.closeBtn).appendTo(F.skin).bind("click.fb",function(e){e.preventDefault();F.close()})}if(current.arrows&&F.group.length>1){if(current.loop||current.index>0){$(current.tpl.prev).appendTo(F.outer).bind("click.fb",F.prev)}if(current.loop||current.index<F.group.length-1){$(current.tpl.next).appendTo(F.outer).bind("click.fb",F.next)}}F.trigger("afterShow");if(!current.loop&&current.index===current.group.length-1){F.play(false)}else{if(F.opts.autoPlay&&!F.player.isActive){F.opts.autoPlay=false;F.play()}}},_afterZoomOut:function(obj){obj=obj||F.current;$(".fb_lightbox-wrap").trigger("onReset").remove();$.extend(F,{group:{},opts:{},router:false,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,outer:null,inner:null});F.trigger("afterClose",obj)}});F.transitions={getOrigPosition:function(){var current=F.current,element=current.element,orig=current.orig,pos={},width=50,height=50,hPadding=current.hPadding,wPadding=current.wPadding,viewport=F.getViewport();if(!orig&&current.isDom&&element.is(":visible")){orig=element.find("img:first");if(!orig.length){orig=element}}if(isQuery(orig)){pos=orig.offset();if(orig.is("img")){width=orig.outerWidth();height=orig.outerHeight()}}else{pos.top=viewport.y+(viewport.h-height)*current.topRatio;pos.left=viewport.x+(viewport.w-width)*current.leftRatio}if(F.wrap.css("position")==="fixed"||current.locked){pos.top-=viewport.y;pos.left-=viewport.x}pos={top:getValue(pos.top-hPadding*current.topRatio),left:getValue(pos.left-wPadding*current.leftRatio),width:getValue(width+wPadding),height:getValue(height+hPadding)};return pos},step:function(now,fx){var ratio,padding,value,prop=fx.prop,current=F.current,wrapSpace=current.wrapSpace,skinSpace=current.skinSpace;if(prop==="width"||prop==="height"){ratio=fx.end===fx.start?1:(now-fx.start)/(fx.end-fx.start);if(F.isClosing){ratio=1-ratio}padding=prop==="width"?current.wPadding:current.hPadding;value=now-padding;F.skin[prop](getScalar(prop==="width"?value:value-(wrapSpace*ratio)));F.inner[prop](getScalar(prop==="width"?value:value-(wrapSpace*ratio)-(skinSpace*ratio)))}},zoomIn:function(){var current=F.current,startPos=current.pos,effect=current.openEffect,elastic=effect==="elastic",endPos=$.extend({opacity:1},startPos);delete endPos.position;if(elastic){startPos=this.getOrigPosition();if(current.openOpacity){startPos.opacity=0.1}}else{if(effect==="fade"){startPos.opacity=0.1}}F.wrap.css(startPos).animate(endPos,{duration:effect==="none"?0:current.openSpeed,easing:current.openEasing,step:elastic?this.step:null,complete:F._afterZoomIn})},zoomOut:function(){var current=F.current,effect=current.closeEffect,elastic=effect==="elastic",endPos={opacity:0.1};if(elastic){endPos=this.getOrigPosition();if(current.closeOpacity){endPos.opacity=0.1}}F.wrap.animate(endPos,{duration:effect==="none"?0:current.closeSpeed,easing:current.closeEasing,step:elastic?this.step:null,complete:F._afterZoomOut})},changeIn:function(){var current=F.current,effect=current.nextEffect,startPos=current.pos,endPos={opacity:1},direction=F.direction,distance=200,field;startPos.opacity=0.1;if(effect==="elastic"){field=direction==="down"||direction==="up"?"top":"left";if(direction==="down"||direction==="right"){startPos[field]=getValue(getScalar(startPos[field])-distance);endPos[field]="+="+distance+"px"}else{startPos[field]=getValue(getScalar(startPos[field])+distance);endPos[field]="-="+distance+"px"}}if(effect==="none"){F._afterZoomIn()}else{F.wrap.css(startPos).animate(endPos,{duration:current.nextSpeed,easing:current.nextEasing,complete:F._afterZoomIn})}},changeOut:function(){var previous=F.previous,effect=previous.prevEffect,endPos={opacity:0.1},direction=F.direction,distance=200;if(effect==="elastic"){endPos[direction==="down"||direction==="up"?"top":"left"]=(direction==="up"||direction==="left"?"-":"+")+"="+distance+"px"}previous.wrap.animate(endPos,{duration:effect==="none"?0:previous.prevSpeed,easing:previous.prevEasing,complete:function(){$(this).trigger("onReset").remove()}})}};F.helpers.overlay={defaults:{closeClick:true,speedOut:200,showEarly:true,css:{},locked:!isTouch,fixed:true},overlay:null,fixed:false,el:$("html"),create:function(opts){opts=$.extend({},this.defaults,opts);if(this.overlay){this.close()}this.overlay=$('<div class="fb_lightbox-overlay"></div>').appendTo(F.coming?F.coming.parent:opts.parent);this.fixed=false;if(opts.fixed&&F.defaults.fixed){this.overlay.addClass("fb_lightbox-overlay-fixed");this.fixed=true}},open:function(opts){var that=this;opts=$.extend({},this.defaults,opts);if(this.overlay){this.overlay.unbind(".overlay").width("auto").height("auto")}else{this.create(opts)}if(!this.fixed){W.bind("resize.overlay",$.proxy(this.update,this));this.update()}if(opts.closeClick){this.overlay.bind("click.overlay",function(e){if($(e.target).hasClass("fb_lightbox-overlay")){if(F.isActive){F.close()}else{that.close()}return false}})}this.overlay.css(opts.css).show()},close:function(){var scrollV,scrollH;W.unbind("resize.overlay");if(this.el.hasClass("fb_lightbox-lock")){$(".fb_lightbox-margin").removeClass("fb_lightbox-margin");scrollV=W.scrollTop();scrollH=W.scrollLeft();this.el.removeClass("fb_lightbox-lock");W.scrollTop(scrollV).scrollLeft(scrollH)}$(".fb_lightbox-overlay").remove().hide();$.extend(this,{overlay:null,fixed:false})},update:function(){var width="100%",offsetWidth;this.overlay.width(width).height("100%");if(IE){offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(D.width()>offsetWidth){width=D.width()}}else{if(D.width()>W.width()){width=D.width()}}this.overlay.width(width).height(D.height())},onReady:function(opts,obj){var overlay=this.overlay;$(".fb_lightbox-overlay").stop(true,true);if(!overlay){this.create(opts)}if(opts.locked&&this.fixed&&obj.fixed){if(!overlay){this.margin=D.height()>W.height()?$("html").css("margin-right").replace("px",""):false}obj.locked=this.overlay.append(obj.wrap);obj.fixed=false}if(opts.showEarly===true){this.beforeShow.apply(this,arguments)}},beforeShow:function(opts,obj){var scrollV,scrollH;if(obj.locked){if(this.margin!==false){$("*").filter(function(){return($(this).css("position")==="fixed"&&!$(this).hasClass("fb_lightbox-overlay")&&!$(this).hasClass("fb_lightbox-wrap"))}).addClass("fb_lightbox-margin");this.el.addClass("fb_lightbox-margin")}scrollV=W.scrollTop();scrollH=W.scrollLeft();this.el.addClass("fb_lightbox-lock");W.scrollTop(scrollV).scrollLeft(scrollH)}this.open(opts)},onUpdate:function(){if(!this.fixed){this.update()}},afterClose:function(opts){if(this.overlay&&!F.coming){this.overlay.fadeOut(opts.speedOut,$.proxy(this.close,this))}}};F.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(opts){var current=F.current,text=current.title,type=opts.type,title,target;if($.isFunction(text)){text=text.call(current.element,current)}if(!isString(text)||$.trim(text)===""){return}title=$('<div class="fb_lightbox-title fb_lightbox-title-'+type+'-wrap">'+text+"</div>");switch(type){case "inside":target=F.skin;break;case "outside":target=F.wrap;break;case "over":target=F.inner;break;default:target=F.skin;title.appendTo("body");if(IE){title.width(title.width())}title.wrapInner('<span class="child"></span>');F.current.margin[2]+=Math.abs(getScalar(title.css("margin-bottom")));break}title[(opts.position==="top"?"prependTo":"appendTo")](target)}};$.fn.fb_lightbox=function(options){var index,that=$(this),selector=this.selector||"",run=function(e){var what=$(this).blur(),idx=index,relType,relVal;if(!(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&!what.is(".fb_lightbox-wrap")){relType=options.groupAttr||"data-fb_lightbox-group";relVal=what.attr(relType);if(!relVal){relType="rel";relVal=what.get(0)[relType]}if(relVal&&relVal!==""&&relVal!=="nofollow"){what=selector.length?$(selector):that;what=what.filter("["+relType+'="'+relVal+'"]');idx=what.index(this)}options.index=idx;if(F.open(what,options)!==false){e.preventDefault()}}};options=options||{};index=options.index||0;if(!selector||options.live===false){that.unbind("click.fb-start").bind("click.fb-start",run)}else{D.undelegate(selector,"click.fb-start").delegate(selector+":not('.fb_lightbox-item, .fb_lightbox-nav')","click.fb-start",run)}this.filter("[data-fb_lightbox-start=1]").trigger("click");return this};D.ready(function(){var w1,w2;if($.scrollbarWidth===undefined){$.scrollbarWidth=function(){var parent=$('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),child=parent.children(),width=child.innerWidth()-child.height(99).innerWidth();parent.remove();return width}}if($.support.fixedPosition===undefined){$.support.fixedPosition=(function(){var elem=$('<div style="position:fixed;top:20px;"></div>').appendTo("body"),fixed=(elem[0].offsetTop===20||elem[0].offsetTop===15);elem.remove();return fixed}())}$.extend(F.defaults,{scrollbarWidth:$.scrollbarWidth(),fixed:$.support.fixedPosition,parent:$("body")});w1=$(window).width();H.addClass("fb_lightbox-lock-test");w2=$(window).width();H.removeClass("fb_lightbox-lock-test");$("<style type='text/css'>.fb_lightbox-margin{margin-right:"+(w2-w1)+"px;}</style>").appendTo("head")})}(window.parent,window.parent.document,JQUERY_DIGIOH));JQUERY_DIGIOH.easing['jswing']=JQUERY_DIGIOH.easing['swing'];JQUERY_DIGIOH.extend(JQUERY_DIGIOH.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return JQUERY_DIGIOH.easing[JQUERY_DIGIOH.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-JQUERY_DIGIOH.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return JQUERY_DIGIOH.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return JQUERY_DIGIOH.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});(function($,window){function noop(){}
function genericCallback(data){lastValue=[data];}
function callIfDefined(method,object,parameters){return method&&method.apply(object.context||object,parameters);}
function qMarkOrAmp(url){return /\?/.test(url)?"&":"?";}
var
STR_ASYNC="async",STR_CHARSET="charset",STR_EMPTY="",STR_ERROR="error",STR_INSERT_BEFORE="insertBefore",STR_JQUERY_JSONP="_jqjsp",STR_ON="on",STR_ON_CLICK=STR_ON+"click",STR_ON_ERROR=STR_ON+STR_ERROR,STR_ON_LOAD=STR_ON+"load",STR_ON_READY_STATE_CHANGE=STR_ON+"readystatechange",STR_READY_STATE="readyState",STR_REMOVE_CHILD="removeChild",STR_SCRIPT_TAG="<script>",STR_SUCCESS="success",STR_TIMEOUT="timeout",win=window,Deferred=$.Deferred,head=$("head")[0]||document.documentElement,pageCache={},count=0,lastValue,xOptionsDefaults={callback:STR_JQUERY_JSONP,url:location.href},opera=win.opera,oldIE=!!$("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;function jsonp(xOptions){xOptions=$.extend({},xOptionsDefaults,xOptions);var successCallback=xOptions.success,errorCallback=xOptions.error,completeCallback=xOptions.complete,dataFilter=xOptions.dataFilter,callbackParameter=xOptions.callbackParameter,successCallbackName=xOptions.callback,cacheFlag=xOptions.cache,pageCacheFlag=xOptions.pageCache,charset=xOptions.charset,url=xOptions.url,data=xOptions.data,timeout=xOptions.timeout,pageCached,done=0,cleanUp=noop,supportOnload,supportOnreadystatechange,firstChild,script,scriptAfter,timeoutTimer;Deferred&&Deferred(function(defer){defer.done(successCallback).fail(errorCallback);successCallback=defer.resolve;errorCallback=defer.reject;}).promise(xOptions);xOptions.abort=function(){!(done++)&&cleanUp();};if(callIfDefined(xOptions.beforeSend,xOptions,[xOptions])===!1||done){return xOptions;}
url=url||STR_EMPTY;data=data?((typeof data)=="string"?data:$.param(data,xOptions.traditional)):STR_EMPTY;url+=data?(qMarkOrAmp(url)+data):STR_EMPTY;callbackParameter&&(url+=qMarkOrAmp(url)+encodeURIComponent(callbackParameter)+"=?");!cacheFlag&&!pageCacheFlag&&(url+=qMarkOrAmp(url)+"_"+(new Date()).getTime()+"=");url=url.replace(/=\?(&|$)/,"="+successCallbackName+"$1");function notifySuccess(json){if(!(done++)){cleanUp();pageCacheFlag&&(pageCache[url]={s:[json]});dataFilter&&(json=dataFilter.apply(xOptions,[json]));callIfDefined(successCallback,xOptions,[json,STR_SUCCESS,xOptions]);callIfDefined(completeCallback,xOptions,[xOptions,STR_SUCCESS]);}}
function notifyError(type){if(!(done++)){cleanUp();pageCacheFlag&&type!=STR_TIMEOUT&&(pageCache[url]=type);callIfDefined(errorCallback,xOptions,[xOptions,type]);callIfDefined(completeCallback,xOptions,[xOptions,type]);}}
if(pageCacheFlag&&(pageCached=pageCache[url])){pageCached.s?notifySuccess(pageCached.s[0]):notifyError(pageCached);}else{win[successCallbackName]=genericCallback;script=$(STR_SCRIPT_TAG)[0];script.id=STR_JQUERY_JSONP+count++;if(charset){script[STR_CHARSET]=charset;}
opera&&opera.version()<11.60?((scriptAfter=$(STR_SCRIPT_TAG)[0]).text="document.getElementById('"+script.id+"')."+STR_ON_ERROR+"()"):(script[STR_ASYNC]=STR_ASYNC);if(oldIE){script.htmlFor=script.id;script.event=STR_ON_CLICK;}
script[STR_ON_LOAD]=script[STR_ON_ERROR]=script[STR_ON_READY_STATE_CHANGE]=function(result){if(!script[STR_READY_STATE]||!/i/.test(script[STR_READY_STATE])){try{script[STR_ON_CLICK]&&script[STR_ON_CLICK]();}catch(_){}
result=lastValue;lastValue=0;result?notifySuccess(result[0]):notifyError(STR_ERROR);}};script.src=url;cleanUp=function(i){timeoutTimer&&clearTimeout(timeoutTimer);script[STR_ON_READY_STATE_CHANGE]=script[STR_ON_LOAD]=script[STR_ON_ERROR]=null;head[STR_REMOVE_CHILD](script);scriptAfter&&head[STR_REMOVE_CHILD](scriptAfter);};head[STR_INSERT_BEFORE](script,(firstChild=head.firstChild));scriptAfter&&head[STR_INSERT_BEFORE](scriptAfter,firstChild);timeoutTimer=timeout>0&&setTimeout(function(){notifyError(STR_TIMEOUT);},timeout);}
return xOptions;}
jsonp.setup=function(xOptions){$.extend(xOptionsDefaults,xOptions);};$.jsonp=jsonp;})(JQUERY_DIGIOH,window.parent);var DeviceAtlas=DeviceAtlas||{},DeviceAtlas=function(e,d,f,u){var c={apiVersion:"1.4",propsCache:"",cookieName:DeviceAtlas.cookieName||"DAPROPS",cookieExpiryDays:DeviceAtlas.cookieExpiryDays||1,cookieDomain:DeviceAtlas.cookieDomain||null,cookiePath:DeviceAtlas.cookiePath||"/",divStyle:null,ns:{svg:"http://www.w3.org/2000/svg"},cssPrfxs:["Webkit","Moz","O","ms","Khtml"],fncPrfxs:["webkit","moz","o","ms","khtml"],properties:DeviceAtlas.properties||{},getPropertiesAsString:function(){return this.propsCache},getBattery:function(){return"undefined"===typeof this.battery?null:this.battery}},g={},n={"js.accessDom":function(){return!!d.getElementById&&!!d.getElementsByTagName&&!!d.getElementsByName},cookieSupport:function(){return r()},"css.animations":function(){return k("animationName")},"css.columns":function(){return k("columnCount")},"css.transforms":function(){return!!t(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])},"css.transitions":function(){return k("transitionProperty")},deviceAspectRatio:function(){var a;a:{a="2/3 40/71 3/4 16/9 16/10 375/667 9/16 10/16".split(" ");if("undefined"!=typeof e.matchMedia)for(var b in a)if(e.matchMedia("(device-aspect-ratio:"+a[b]+")").matches){a=a[b]+"";break a}a=null}return a},devicePixelRatio:function(){var a=1;try{a=e.devicePixelRatio}catch(b){}return a+""},displayColorDepth:function(){return screen.colorDepth},flashCapable:function(){try{if(f.plugins&&0<f.plugins.length&&f.mimeTypes&&f.mimeTypes["application/x-shockwave-flash"]&&f.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0;if("function"==typeof ActiveXObject||"object"==typeof ActiveXObject){var a=["ShockwaveFlash.ShockwaveFlash.7","ShockwaveFlash.ShockwaveFlash.7","ShockwaveFlash.ShockwaveFlash"],b;for(b in a)try{return new ActiveXObject(a[b]),!0}catch(l){}}}catch(l){}return!1},"html.audio":function(){if(!d.createElement)return!1;var a,b=new Boolean;a=d.createElement("audio");try{if(b=!!a.canPlayType)b.ogg=a.canPlayType('audio/ogg; codecs="vorbis"'),b.mp3=a.canPlayType("audio/mpeg;"),b.wav=a.canPlayType('audio/wav; codecs="1"'),b.m4a=a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")}catch(l){}return b.valueOf()},"html.canvas":function(){if(!d.createElement)return!1;var a;a=d.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))},"html.inlinesvg":function(){if(!d.createElement)return!1;var a;a=d.createElement("div");a.innerHTML="<svg/>";return(a.firstChild&&a.firstChild.namespaceURI)==c.ns.svg},"html.svg":function(){return!!d.createElementNS&&!!d.createElementNS(c.ns.svg,"svg").createSVGRect},"html.video":function(){if(!d.createElement)return!1;var a,b=new Boolean;a=d.createElement("video");try{if(b=!!a.canPlayType)b.ogg=a.canPlayType('video/ogg; codecs="theora"'),b.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"')||a.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'),b.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"')}catch(l){}return b.valueOf()},"js.applicationCache":function(){return!!e.applicationCache},"js.deviceMotion":function(){return!!e.DeviceMotionEvent},"js.deviceOrientation":function(){return"js.deviceOrientation"in g?g["js.deviceOrientation"]:!1},"js.geoLocation":function(){return!!f.geolocation},"js.indexedDB":function(){return m(e,"indexedDB")},"js.json":function(){return"object"==typeof JSON&&"function"==typeof JSON.stringify},"js.localStorage":function(){try{return!!localStorage.getItem}catch(a){return!1}},"js.modifyCss":function(){if(!d.createElement)return!1;var a;a=d.createElement("div");if("object"!=typeof a.style||"undefined"==typeof a.style.display)return!1;a.style.display="none";return"none"==a.style.display},"js.modifyDom":function(){if(!d.createElement||!d.appendChild)return!1;var a,b;a=d.createElement("span");b=d.createElement("div");b.appendChild(a);return b==a.parentNode},"js.querySelector":function(){return!!d.querySelector},"js.sessionStorage":function(){try{return!!sessionStorage.getItem}catch(a){return!1}},"js.supportBasicJavaScript":function(){return"function"!=typeof alert||"function"!=typeof confirm||"function"!=typeof setTimeout||"function"!=typeof setInterval?!1:!!d.location&&!!d.forms},"js.supportConsoleLog":function(){return"object"==typeof console&&"function"==typeof console.log},"js.supportEventListener":function(){return!!e.addEventListener},"js.supportEvents":function(){var a={submit:"form",click:"input",change:"input",load:"img",select:"input"},b;for(b in a){var c;c=b;if(d.createElement){var h,e;h=d.createElement(a[b]);c="on"+c;e=c in h;e||(h.setAttribute||(h=d.createElement("div")),h.setAttribute&&h.removeAttribute&&(h.setAttribute(c,""),e="function"==typeof h[c]));c=e}else c=!1;if(!c)return!1}return!0},"js.touchEvents":function(){return"ontouchstart"in e},"js.webGl":function(){return!!e.WebGLRenderingContext},"js.webSockets":function(){return m(e,"WebSocket")},"js.webSqlDatabase":function(){return!!e.openDatabase},"js.webWorkers":function(){return!!e.Worker},"js.xhr":function(){return"function"==typeof XMLHttpRequest||"object"==typeof XMLHttpRequest},orientation:function(){return"undefined"!=typeof e.orientation?e.orientation:null},userMedia:function(){return m(f,"getUserMedia")},"js.battery":function(){if(!("js.battery"in g)){var a=f.battery||f.webkitBattery||f.mozBattery;a&&(c.battery=a)}return!!c.battery}},k=function(a){var b=a.charAt(0).toUpperCase()+a.substr(1);a=(a+" "+c.cssPrfxs.join(b+" ")+b).split(" ");return t(a)},t=function(a){if(!d.createElement)return null;null==c.divStyle&&(c.divStyle=d.createElement("div").style);if("undefined"==typeof c.divStyle)return null;for(var b in a)if("undefined"!=typeof c.divStyle[a[b]])return!0;return!1},m=function(a,b){if(a[b])return!0;for(var d=b.charAt(0).toUpperCase()+b.substr(1),e=-1,f=c.fncPrfxs.length;++e<f;)if(a[c.fncPrfxs[e]+d])return 1<f&&(c.fncPrfxs=[c.fncPrfxs[e]],c.cssPrfxs=[c.cssPrfxs[e]]),!0;return!1},p=function(a,b){var d;-1!=a.indexOf(".")?(d=a.split("."),"undefined"==typeof c[d[0]]&&(c[d[0]]={}),c[d[0]][d[1]]=b):c[a]=b;g[a]=b},r=function(){return"undefined"==typeof f.cookieEnabled&&"string"==typeof d.cookie?!0:!!f.cookieEnabled},q=function(a){if(r()){a=new Date;a.setDate(a.getDate()+
c.cookieExpiryDays);var b="";null!=c.cookieDomain&&(b=";domain="+c.cookieDomain);}};(function(){if(e.addEventListener&&e.removeEventListener){var a=function(b){null!=b&&null!=b.alpha&&(p("js.deviceOrientation",!0),q(g));e.removeEventListener("deviceorientation",a,!1)};e.addEventListener("deviceorientation",a,!1)}})();(function(){("undefined"===typeof c.battery||null==c.battery)&&f.getBattery&&f.getBattery().then(function(a){c.battery=a;p("js.battery",!0);q(g)},function(a){})})();(function(){var a,b;for(b in c.properties)n[b]=c.properties[b];for(b in n)a=n[b](),null!=a&&"undefined"!=typeof a&&p(b,a)})();c.propsCache=function(a){var b="",c,d;for(d in a)c=a[d],c="boolean"==typeof c?"b":"number"==typeof c?"i":"s",b+=c+d+":"+("b"==c?a[d]+0:a[d])+"|";return b.slice(0,-1)}(g);q(g);return c}(window,document,navigator);function DIGIOH_ANALYTICS($,showErrors,vendorGUID,isPreview,baseUrl){this.jQuery=$;this.ShowErrors=showErrors;this.BaseDomain=baseUrl;this.IsNewSession=true;this.IsNewVisitor=true;this.RanSetCurrent=false;this.PageviewStart=(new Date()).getTime();this.SessionStart=0;this.SessionLengthTicks=1800000;this.OverwriteCurrentCookie=false;this.PreviousPageviewTs=0;this.VARS={};this.VARS.VendorGuid=vendorGUID;this.VARS.IsLoaded=false;this.VARS.IsPreview=isPreview;this.VARS.current_page_url="";this.VARS.referring_website_url="";this.VARS.landing_page="";this.VARS.landing_page_ip="";this.VARS.date_of_visit=0;this.VARS.web_source="Direct Traffic";this.VARS.past_visits=0;this.VARS.page_visits=0;this.VARS.page_visits_session=0;this.VARS.pages_navigated="";this.VARS.search_engine="";this.VARS.device="";this.VARS.device_apple="";this.VARS.browser_type="";this.VARS.browser_version="";this.VARS.operating_system="";this.VARS.utm_campaign_source="";this.VARS.utm_campaign_medium="";this.VARS.utm_campaign_term="";this.VARS.utm_campaign_content="";this.VARS.utm_campaign_name="";this.VARS.total_time_seconds=0;this.VARS.active_time_seconds=0;this.VARS.idle_time_seconds=0;this.VARS.continent="";this.VARS.continent_name="";this.VARS.country="";this.VARS.country_name="";this.VARS.region_name="";this.VARS.state="";this.VARS.city="";this.VARS.ip_address="";this.VARS.zipcode="";this.VARS.latitude=0;this.VARS.longitude=0;this.VARS.metro_code="";this.VARS.time_zone="";this.VARS.area_code="";this.VARS.segments=[];this.VARS.scroll_percent=0;this.VARS.scroll_pixels=0;this.VARS.exit_intent="";this.VARS.click_jquery_selector={};this.VARS.hover_jquery_selector={};this.VARS.exists_jquery_selector={};this.VARS.lightbox_activity={};this.VARS.master_rules={};this.VARS.lightbox_events={};this.VARS.DeviceAtlas={};this.VARS.DeviceAtlas.primaryHardwareType="";this.VARS.DeviceAtlas.mobileDevice="";this.VARS.DeviceAtlas.isApp="";this.VARS.DeviceAtlas.isTablet="";this.VARS.DeviceAtlas.isMobilePhone="";this.VARS.DeviceAtlas.model="";this.VARS.DeviceAtlas.vendor="";this.VARS.DeviceAtlas.touchScreen="";this.VARS.DeviceAtlas.osName="";this.VARS.DeviceAtlas.osVersion="";this.VARS.DeviceAtlas.browserName="";this.VARS.DeviceAtlas.browserVersion="";this.VARS.DeviceAtlas.osAndroid="";this.VARS.DeviceAtlas.osiOs="";this.VARS.DeviceAtlas.isRobot="";this.VARS.DeviceAtlas.isBrowser="";this.VARS.geo_source="";this.VARS.device_source="";this.VARS.PagesNavigated=new Array();this.VARS.PastVisitsText="";}
DIGIOH_ANALYTICS.prototype.onDocumentReady=function(){try{this.setDevice();this.setCurrent();this.setPrevious();}
catch(error){this.logError(error,"onDocumentReady");}};DIGIOH_ANALYTICS.prototype.loadAllVars=function(){try{this.getCurrent();this.getPrevious();}
catch(error){this.logError(error,"loadAllVars");}};DIGIOH_ANALYTICS.prototype.getDeviceAtlasServerPropsMap=function(){try{var x={};x.ea='bjs.webGl';x.eb='bjs.geoLocation';x.ec='bjs.webSqlDatabase';x.ed='bjs.indexedDB';x.ef='bjs.webSockets';x.eg='bjs.localStorage';x.eh='bjs.sessionStorage';x.ei='bjs.webWorkers';x.ej='bjs.applicationCache';x.ek='bjs.supportBasicJavaScript';x.el='bjs.modifyDom';x.em='bjs.modifyCss';x.en='bjs.supportEvents';x.eo='bjs.touchEvents';x.ep='bjs.supportEventListener';x.eq='bjs.xhr';x.er='bjs.supportConsoleLog';x.es='bjs.json';x.et='bjs.deviceOrientation';x.eu='bjs.deviceMotion';x.ev='bjs.querySelector';x.ew='bjs.battery';x.ex='bjs.accessDom';x.fa='bhtml.canvas';x.fb='bhtml.video';x.fc='bhtml.audio';x.fd='bhtml.svg';x.fe='bhtml.inlinesvg';x.ga='bcss.animations';x.gb='bcss.columns';x.gc='bcss.transforms';x.ge='bcss.transitions';x.ba='js.webSockets';x.bb='js.deviceMotion';x.bd='js.applicationCache';x.bg='js.xhr';x.bi='js.deviceOrientation';x.bl='js.webWorkers';x.bm='js.querySelector';x.bp='js.json';x.bs='js.supportEventListener';x.bz='js.localStorage';x.cd='js.supportEvents';x.cl='js.touchEvents';x.ci='js.geoLocation';x.cr='js.webGl';x.cx='js.indexedDB';x.db='js.modifyCss';x.dc='js.webSqlDatabase';x.dg='js.sessionStorage';x.dh='js.supportConsoleLog';x.dq='js.modifyDom';x.ds='js.supportBasicJavaScript';x.dt='js.battery';x.du='js.accessDom';x.ck='html.svg';x.cn='html.inlinesvg';x.ch='html.video';x.bt='html.audio';x.df='html.canvas';x.dd='css.transforms';x.de='css.columns';x.bc='css.animations';x.bq='css.transitions';x.bu='image.Jpg';x.cc='image.Gif87';x.ce='image.Png';x.cu='image.Gif89a';x.ca='markup.xhtmlMp10';x.bw='markup.wml1';x.cm='markup.xhtmlBasic10';x.cy='markup.xhtmlMp12';x.cz='markup.xhtmlMp11';x.ha='iorientation';x.hb='idisplayColorDepth';x.hc='idevicePixelRatio';x.ia='bcookieSupport';x.ib='bflashCapable';x.ic='baccessDom';x.ie='buserMedia';x.ja='sdeviceAspectRatio';x.jb='sdevicePixelRatio';x.aa='touchScreen';x.ab='isBrowser';x.ac='isMobilePhone';x.ad='primaryHardwareType';x.ae='isFilter';x.af='mobileDevice';x.ag='isSpam';x.ah='isGamesConsole';x.ai='isMasqueradingAsDesktop';x.aj='botName';x.ak='marketingName';x.al='manufacturer';x.am='yearReleased';x.an='displayWidth';x.ao='displayHeight';x.ap='diagonalScreenSize';x.aq='displayPpi';x.ar='devicePixelRatio';x.as='displayColorDepth';x.at='nfc';x.au='camera';x.av='osProprietary';x.aw='developerPlatform';x.ax='developerPlatformVersion';x.ay='language';x.az='languageLocale';x.be='jsr139';x.bf='jqm';x.bh='uriSchemeSms';x.bj='id';x.bk='https';x.bn='umts';x.bo='usableDisplayWidth';x.br='supportsClientSide';x.bv='isSpam';x.bx='jsr118';x.by='hspaEvolved';x.cb='uriSchemeTel';x.cf='jsr37';x.cg='jsr30';x.cj='flashCapable';x.co='hsdpa';x.cp='memoryLimitMarkup';x.cq='memoryLimitDownload';x.cs='edge';x.ct='vCardDownload';x.cv='drmOmaCombinedDelivery';x.cw='usableDisplayHeight';x.da='drmOmaSeparateDelivery';x.di='gprs';x.dj='lteAdvanced';x.dk='lte';x.dl='memoryLimitEmbeddedMedia';x.dm='hscsd';x.dn='cookieSupport';x.do='uriSchemeSmsTo';x.dp='csd';x.dr='drmOmaForwardLock';x.dv='accessDom';x.dw='userMedia';x.dx='orientation';x.a='isRobot';x.b='osRim';x.c='isDownloader';x.d='osWindowsRt';x.e='isEReader';x.f='osWindowsMobile';x.g='isTablet';x.h='osVersion';x.i='osWindowsPhone';x.j='isFeedReader';x.k='vendor';x.l='osSymbian';x.m='browserVersion';x.n='browserName';x.o='model';x.p='isChecker';x.q='osiOs';x.r='osBada';x.s='isTV';x.t='osWebOs';x.u='isMediaPlayer';x.v='osAndroid';x.w='isSetTopBox';x.x='isApp';x.y='osName';x.z='browserRenderingEngine';return x;}
catch(err){this.logError(err,'getDeviceAtlasServerPropsMap');}}
DIGIOH_ANALYTICS.prototype.getDeviceAtlasServerPropsArr=function(){try{return['ea','eb','ec','ed','ef','eg','eh','ei','ej','ek','el','em','en','eo','ep','eq','er','es','et','eu','ev','ew','ex','fa','fb','fc','fd','fe','ga','gb','gc','ge','ba','bb','bd','bg','bi','bl','bm','bp','bs','bz','cd','cl','ci','cr','cx','db','dc','dg','dh','dq','ds','dt','du','ck','cn','ch','bt','df','dd','de','bc','bq','bu','cc','ce','cu','ca','bw','cm','cy','cz','ha','hb','hc','ia','ib','ic','ie','ja','jb','aa','ab','ac','ad','ae','af','ag','ah','ai','aj','ak','al','am','an','ao','ap','aq','ar','as','at','au','av','aw','ax','ay','az','be','bf','bh','bj','bk','bn','bo','br','bv','bx','by','cb','cf','cg','cj','co','cp','cq','cs','ct','cv','cw','da','di','dj','dk','dl','dm','dn','do','dp','dr','dv','dw','dx','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];}
catch(err){this.logError(err,'getDeviceAtlasServerPropsArr');}}
DIGIOH_ANALYTICS.prototype.getDeviceAtlasServerPropsInclude=function(){try{return ',primaryHardwareType,mobileDevice,isApp,isTablet,isMobilePhone,model,vendor,touchScreen,osName,osVersion,browserName,browserVersion,osAndroid,osiOs,isRobot,isBrowser,';}
catch(err){this.logError(err,'getDeviceAtlasServerPropsInclude');}}
DIGIOH_ANALYTICS.prototype.reduceDeviceAtlasServerProps=function(invalObj){try{if(typeof invalObj!=='object'||!invalObj){return{};}
var DEVICE_ATLAS_SERVER_PROPS_MAP=this.getDeviceAtlasServerPropsMap();var DEVICE_ATLAS_SERVER_PROPS_ARR=this.getDeviceAtlasServerPropsArr();var DEVICE_ATLAS_SERVER_PROPS_INCLUDE=this.getDeviceAtlasServerPropsInclude();var outval=invalObj;if(outval.hasOwnProperty('properties')&&typeof outval.properties==='object'&&outval.properties){outval=outval.properties;}
var prop='';for(var i=0;i<DEVICE_ATLAS_SERVER_PROPS_ARR.length;i++){prop=DEVICE_ATLAS_SERVER_PROPS_ARR[i];if(DEVICE_ATLAS_SERVER_PROPS_MAP.hasOwnProperty(prop)&&DEVICE_ATLAS_SERVER_PROPS_MAP[prop]&&outval.hasOwnProperty(DEVICE_ATLAS_SERVER_PROPS_MAP[prop])&&DEVICE_ATLAS_SERVER_PROPS_INCLUDE.indexOf(','+DEVICE_ATLAS_SERVER_PROPS_MAP[prop]+',')===-1){delete outval[DEVICE_ATLAS_SERVER_PROPS_MAP[prop]];}}
outval=JSON.stringify(outval);for(var i=0;i<DEVICE_ATLAS_SERVER_PROPS_ARR.length;i++){prop=DEVICE_ATLAS_SERVER_PROPS_ARR[i];if(DEVICE_ATLAS_SERVER_PROPS_MAP.hasOwnProperty(prop)&&DEVICE_ATLAS_SERVER_PROPS_MAP[prop]&&outval.indexOf('"'+DEVICE_ATLAS_SERVER_PROPS_MAP[prop]+'"')>=0){outval=outval.replace(('"'+DEVICE_ATLAS_SERVER_PROPS_MAP[prop]+'"'),('"'+prop+'"'));}}
outval=outval.replace(new RegExp(':false,','g'),':"-",');outval=outval.replace(new RegExp(':true,','g'),':"_",');outval=outval.replace(new RegExp(':false}','g'),':"-"}');outval=outval.replace(new RegExp(':true}','g'),':"_"}');return JSON.parse(outval);}
catch(err){this.logError(err,'reduceDeviceAtlasServerProps');return invalObj;}}
DIGIOH_ANALYTICS.prototype.expandDeviceAtlasServerProps=function(invalObj){try{if(typeof invalObj!=='object'||!invalObj){return{};}
var DEVICE_ATLAS_SERVER_PROPS_MAP=this.getDeviceAtlasServerPropsMap();var DEVICE_ATLAS_SERVER_PROPS_ARR=this.getDeviceAtlasServerPropsArr();var DEVICE_ATLAS_SERVER_PROPS_INCLUDE=this.getDeviceAtlasServerPropsInclude();var outval=invalObj;if(outval.hasOwnProperty('properties')&&typeof outval.properties==='object'&&outval.properties){outval=outval.properties;}
outval=JSON.stringify(outval);var prop='';for(var i=0;i<DEVICE_ATLAS_SERVER_PROPS_ARR.length;i++){prop=DEVICE_ATLAS_SERVER_PROPS_ARR[i];if(DEVICE_ATLAS_SERVER_PROPS_MAP.hasOwnProperty(prop)&&outval.indexOf('"'+prop+'"')>=0){outval=outval.replace(('"'+prop+'"'),('"'+DEVICE_ATLAS_SERVER_PROPS_MAP[prop]+'"'));}}
outval=outval.replace(new RegExp(':"-"}','g'),':false}');outval=outval.replace(new RegExp(':"_"}','g'),':true}');outval=outval.replace(new RegExp(':"-",','g'),':false,');outval=outval.replace(new RegExp(':"_",','g'),':true,');return JSON.parse(outval);}
catch(err){this.logError(err,'expandDeviceAtlasServerProps');return invalObj;}}
DIGIOH_ANALYTICS.prototype.expandDeviceAtlasServerPropsFromModulus=function(inval){try{if(inval===''||!inval){return '';}
var DEVICE_ATLAS_SERVER_PROPS_MAP=this.getDeviceAtlasServerPropsMap();var DEVICE_ATLAS_SERVER_PROPS_ARR=this.getDeviceAtlasServerPropsArr();var outval='{"'+inval.split('zzzz').join('"')+'"}';outval=outval.split('~').join('|#');outval=outval.split('*').join('|@');outval=outval.split('|').join('":"');outval=outval.split('$').join('":');outval=outval.split('@').join('_","');outval=outval.split('#').join('-","');outval=outval.split('%').join('","');outval=outval.split('^').join(',"');outval=outval.split('aaaa').join('~');outval=outval.split('bbbb').join('*');outval=outval.split('cccc').join('|');outval=outval.split('dddd').join('$');outval=outval.split('eeee').join('@');outval=outval.split('ffff').join('#');outval=outval.split('gggg').join('%');outval=outval.split('hhhh').join('^');outval=outval.split(':"-"').join(':false');outval=outval.split(':"_"').join(':true');var prop='';for(var i=0;i<DEVICE_ATLAS_SERVER_PROPS_ARR.length;i++){prop=DEVICE_ATLAS_SERVER_PROPS_ARR[i];if(DEVICE_ATLAS_SERVER_PROPS_MAP.hasOwnProperty(prop)){if(outval.indexOf(',"'+prop+'":')>=0){outval=outval.replace((',"'+prop+'":'),(',"'+DEVICE_ATLAS_SERVER_PROPS_MAP[prop]+'":'));}
else if(outval.indexOf('{"'+prop+'":')>=0){outval=outval.replace(('{"'+prop+'":'),('{"'+DEVICE_ATLAS_SERVER_PROPS_MAP[prop]+'":'));}}}
return outval;}
catch(err){this.logError(err,'expandDeviceAtlasServerPropsFromModulus');return inval;}}
DIGIOH_ANALYTICS.prototype.setGeoData=function(json){try{if(typeof json==='object'&&json.hasOwnProperty("geo")&&json.geo.hasOwnProperty("ip")&&json.geo.ip){this.VARS.ip_address=json.geo.ip;this.VARS.landing_page_ip=json.geo.ip;if(json.geo.hasOwnProperty("continent_code")&&json.geo.continent_code!=null)this.VARS.continent=json.geo.continent_code;if(json.geo.hasOwnProperty("continent_name")&&json.geo.continent_name!=null)this.VARS.continent_name=json.geo.continent_name;if(json.geo.hasOwnProperty("country_code")&&json.geo.country_code!=null)this.VARS.country=json.geo.country_code;if(json.geo.hasOwnProperty("country_name")&&json.geo.country_name!=null)this.VARS.country_name=json.geo.country_name;if(json.geo.hasOwnProperty("region_name")&&json.geo.region_name!=null)this.VARS.region_name=json.geo.region_name;if(json.geo.hasOwnProperty("region_code")&&json.geo.region_code!=null)this.VARS.state=json.geo.region_code;if(json.geo.hasOwnProperty("city")&&json.geo.city!=null)this.VARS.city=json.geo.city;if(json.geo.hasOwnProperty("zipcode")&&json.geo.zipcode!=null)this.VARS.zipcode=json.geo.zipcode;if(json.geo.hasOwnProperty("latitude")&&json.geo.latitude!=null)this.VARS.latitude=json.geo.latitude;if(json.geo.hasOwnProperty("longitude")&&json.geo.longitude!=null)this.VARS.longitude=json.geo.longitude;if(json.geo.hasOwnProperty("metro_code")&&json.geo.metro_code!=null)this.VARS.metro_code=json.geo.metro_code;if(json.geo.hasOwnProperty("time_zone")&&json.geo.time_zone!=null)this.VARS.time_zone=json.geo.time_zone;if(json.geo.hasOwnProperty("area_code")&&json.geo.area_code!=null)this.VARS.area_code=json.geo.area_code;this.VARS.geo_source="azure-maxmind";}}
catch(error){this.logError(error,"setGeoData");}};DIGIOH_ANALYTICS.prototype.setDeviceData=function(json){try{if(typeof json==='object'&&json.hasOwnProperty("da")&&json.da){var expanded=JSON.parse(this.expandDeviceAtlasServerPropsFromModulus(json.da));this.VARS.DeviceAtlas=expanded;this.logger('DIGIOH: successfully expanded the reduced device props from azure:');this.logger(this.VARS.DeviceAtlas);if(json.hasOwnProperty("devsrc")){this.VARS.device_source=json.devsrc;}else{this.VARS.device_source="unspecified";}}
else if(typeof json==='object'&&json.hasOwnProperty("device")&&typeof json.device==='object'&&json.device&&json.device.hasOwnProperty("properties")&&typeof json.device.properties==='object'&&json.device.properties&&json.device.properties.hasOwnProperty("primaryHardwareType")&&json.device.properties.primaryHardwareType){this.VARS.DeviceAtlas=json.device.properties;if(json.hasOwnProperty("devsrc")){this.VARS.device_source=json.devsrc;}else{this.VARS.device_source="unspecified";}}
else if(typeof json==='object'&&json.hasOwnProperty("device")&&typeof json.device==='object'&&json.device&&json.device.hasOwnProperty("primaryHardwareType")&&json.device.primaryHardwareType){this.VARS.DeviceAtlas=json.device;if(json.hasOwnProperty("devsrc")){this.VARS.device_source=json.devsrc;}else{this.VARS.device_source="unspecified";}}
if(this.VARS.DeviceAtlas!==null&&typeof this.VARS.DeviceAtlas==='object'){if(this.VARS.DeviceAtlas.hasOwnProperty('browserName')&&typeof this.VARS.DeviceAtlas.browserName==='string'){var bn=this.VARS.DeviceAtlas.browserName.toLowerCase();if(bn.indexOf('safari')>=0){this.VARS.browser_type='Safari';}
if(bn.indexOf('chrome')>=0){this.VARS.browser_type='Chrome';}
if(bn.indexOf('edge')>=0||bn.indexOf('explorer')>=0){this.VARS.browser_type='Internet Explorer';}
if(bn.indexOf('firefox')>=0){this.VARS.browser_type='Firefox';}
if(bn.indexOf('opera')>=0){this.VARS.browser_type='Opera';}}}}
catch(error){this.logError(error,"setDeviceData");}};DIGIOH_ANALYTICS.prototype.loadMasterRulesViewEvents=function(){try{var lbEvMap=this.VARS.lightbox_events;var foundViewEvent=false;var lastViewTimestamp=0;var viewTimestamp=0;var ignoreInline=false;if(typeof DIGIOH_LIGHTBOX_MASTER_RULES!=="undefined"&&(typeof DIGIOH_LIGHTBOX_MASTER_RULES.IgnoreForInlineBoxes==="undefined"||DIGIOH_LIGHTBOX_MASTER_RULES.IgnoreForInlineBoxes===true)){this.logger("IgnoreForInlineBoxes: Master rule ignoring inline lightboxes (view events).");ignoreInline=true;}
for(lbid in lbEvMap){var isInline=DIGIOH_API.LIGHTBOX.isInlineLightbox(lbid);if(ignoreInline&&isInline){this.logger('DIGIOH: loadMasterRulesViewEvents ==> ignoreInline ==> '+lbid);continue;}
else if(lbEvMap.hasOwnProperty(lbid)&&lbEvMap[lbid].hasOwnProperty('v')&&lbEvMap[lbid]['v']['c']>0&&lbEvMap[lbid]['v']['t'].length>0){foundViewEvent=true;this.logger('DIGIOH: loadMasterRulesViewEvents ==> foundViewEvent 1 ==> '+lbid);var ts_len=lbEvMap[lbid]['v']['t'].length;viewTimestamp=lbEvMap[lbid]['v']['t'][ts_len-1];if(lastViewTimestamp<viewTimestamp){lastViewTimestamp=viewTimestamp;}}else if(lbEvMap.hasOwnProperty(lbid)&&lbEvMap[lbid].hasOwnProperty('v')&&lbEvMap[lbid]['v']['c']>0&&lbEvMap[lbid]['v']['t'].length>0){foundViewEvent=true;this.logger('DIGIOH: loadMasterRulesViewEvents ==> foundViewEvent 2 ==> '+lbid);var ts_len=lbEvMap[lbid]['v']['t'].length;viewTimestamp=lbEvMap[lbid]['v']['t'][ts_len-1];if(lastViewTimestamp<viewTimestamp){lastViewTimestamp=viewTimestamp;}}}
if(this.IsNewVisitor){this.VARS.master_rules["Once per visitor"]=true;this.VARS.master_rules["Once per session"]=true;this.VARS.master_rules["Once per pageview"]=true;}else if(this.IsNewSession){this.VARS.master_rules["Once per visitor"]=!foundViewEvent;this.VARS.master_rules["Once per session"]=true;this.VARS.master_rules["Once per pageview"]=true;}else{this.VARS.master_rules["Once per visitor"]=!foundViewEvent;this.VARS.master_rules["Once per session"]=!foundViewEvent||(lastViewTimestamp<this.SessionStart);this.VARS.master_rules["Once per pageview"]=!foundViewEvent||(lastViewTimestamp<this.PageviewStart);}}
catch(error){this.logError(error,"loadMasterRulesViewEvents");}};DIGIOH_ANALYTICS.prototype.loadMasterRulesSubmitEvents=function(){try{var lbEvMap=this.VARS.lightbox_events;var foundSubmitEvent=false;var lastSubmitTimestamp=0;var submitTimestamp=0;var ignoreInline=false;if(typeof DIGIOH_LIGHTBOX_MASTER_RULES!=="undefined"&&(typeof DIGIOH_LIGHTBOX_MASTER_RULES.IgnoreForInlineBoxes==="undefined"||DIGIOH_LIGHTBOX_MASTER_RULES.IgnoreForInlineBoxes===true)){this.logger("IgnoreForInlineBoxes: Master rule ignoring inline lightboxes (submit events).");ignoreInline=true;}
for(lbid in lbEvMap){var isInline=DIGIOH_API.LIGHTBOX.isInlineLightbox(lbid);if(ignoreInline&&isInline){this.logger('DIGIOH: loadMasterRulesSubmitEvents ==> ignoreInline ==> '+lbid);}
else if(lbEvMap.hasOwnProperty(lbid)&&lbEvMap[lbid].hasOwnProperty('s')&&lbEvMap[lbid]['s']['c']>0){foundSubmitEvent=true;this.logger('DIGIOH: loadMasterRulesSubmitEvents ==> foundSubmitEvent ==> '+lbid);break;}}
this.VARS.master_rules["Until form is submitted"]=!foundSubmitEvent;}
catch(error){this.logError(error,"loadMasterRulesSubmitEvents");}};DIGIOH_ANALYTICS.prototype.loadLightboxActivity=function(){try{this.loadAllEventsByLightboxGuid();this.loadMasterRulesViewEvents();this.loadMasterRulesSubmitEvents();var lbEvMap=this.VARS.lightbox_events;var viewTimestamp=0;for(lbid in lbEvMap){if(lbEvMap.hasOwnProperty(lbid)){if(!this.VARS.lightbox_activity.hasOwnProperty(lbid)){this.VARS.lightbox_activity[lbid]={};}
this.VARS.lightbox_activity[lbid]["Until form is submitted"]=(!lbEvMap[lbid].hasOwnProperty('s')||lbEvMap[lbid]['s']['c']==0);this.VARS.lightbox_activity[lbid]["Until lightbox is closed"]=(!lbEvMap[lbid].hasOwnProperty('c')||lbEvMap[lbid]['c']['c']==0);if(lbEvMap[lbid].hasOwnProperty('v')&&lbEvMap[lbid]['v']['c']>0&&lbEvMap[lbid]['v']['t'].length>0){var ts_len=lbEvMap[lbid]['v']['t'].length;viewTimestamp=lbEvMap[lbid]['v']['t'][ts_len-1];this.VARS.lightbox_activity[lbid]["Days since last view"]=Math.floor((this.PageviewStart-viewTimestamp)/(1000*60*60*24));}else{viewTimestamp=0;this.VARS.lightbox_activity[lbid]["Days since last view"]=-1;}
if(this.IsNewVisitor){this.VARS.lightbox_activity[lbid]["Once per visitor"]=true;this.VARS.lightbox_activity[lbid]["Once per session"]=true;this.VARS.lightbox_activity[lbid]["Once per pageview"]=true;}else if(this.IsNewSession){this.VARS.lightbox_activity[lbid]["Once per visitor"]=(!lbEvMap[lbid].hasOwnProperty('v')||lbEvMap[lbid]['v']['c']==0);this.VARS.lightbox_activity[lbid]["Once per session"]=true;this.VARS.lightbox_activity[lbid]["Once per pageview"]=true;}else{this.VARS.lightbox_activity[lbid]["Once per visitor"]=(!lbEvMap[lbid].hasOwnProperty('v')||lbEvMap[lbid]['v']['c']==0);this.VARS.lightbox_activity[lbid]["Once per session"]=(!lbEvMap[lbid].hasOwnProperty('v')||lbEvMap[lbid]['v']['c']==0)||(viewTimestamp>0&&viewTimestamp<this.SessionStart);this.VARS.lightbox_activity[lbid]["Once per pageview"]=(!lbEvMap[lbid].hasOwnProperty('v')||lbEvMap[lbid]['v']['c']==0)||(viewTimestamp>0&&viewTimestamp<this.PageviewStart);}}}}
catch(error){this.logError(error,"loadLightboxActivity");}};DIGIOH_ANALYTICS.prototype.getBaseDomain=function(host){var baseName=this.getBaseDomainName(host);var baseDomain=host.substring(host.indexOf(baseName));return baseDomain;};DIGIOH_ANALYTICS.prototype.getBaseDomainName=function(url){try{var TLDs=["ac","ad","ae","aero","af","ag","ai","al","am","an","ao","aq","ar","arpa","as","asia","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","biz","bj","bm","bn","bo","br","bs","bt","bv","bw","by","bz","ca","cat","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","com","coop","cr","cu","cv","cx","cy","cz","de","dj","dk","dm","do","dz","ec","edu","ee","eg","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gov","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","info","int","io","iq","ir","is","it","je","jm","jo","jobs","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mg","mh","mil","mk","ml","mm","mn","mo","mobi","mp","mq","mr","ms","mt","mu","museum","mv","mw","mx","my","mz","na","name","nc","ne","net","nf","ng","ni","nl","no","np","nr","nu","nz","om","org","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","pro","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","st","su","sv","sy","sz","tc","td","tel","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","travel","tt","tv","tw","tz","ua","ug","uk","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","xn--0zwm56d","xn--11b5bs3a9aj6g","xn--3e0b707e","xn--45brj9c","xn--80akhbyknj4f","xn--90a3ac","xn--9t4b11yi5a","xn--clchc0ea0b2g2a9gcd","xn--deba0ad","xn--fiqs8s","xn--fiqz9s","xn--fpcrj9c3d","xn--fzc2c9e2c","xn--g6w251d","xn--gecrj9c","xn--h2brj9c","xn--hgbk6aj7f53bba","xn--hlcj6aya9esc7a","xn--j6w193g","xn--jxalpdlp","xn--kgbechtv","xn--kprw13d","xn--kpry57d","xn--lgbbat1ad8j","xn--mgbaam7a8h","xn--mgbayh7gpa","xn--mgbbh1a71e","xn--mgbc0a9azcg","xn--mgberp4a5d4ar","xn--o3cw4h","xn--ogbpf8fl","xn--p1ai","xn--pgbs0dh","xn--s9brj9c","xn--wgbh1c","xn--wgbl6a","xn--xkc2al3hye2a","xn--xkc2dl3a5ee0h","xn--yfro4i67o","xn--ygbi2ammx","xn--zckzah","xxx","ye","yt","za","zm","zw"].join();var parts=url.split('.');if(parts[0]==='www'&&parts[1]!=='com'){parts.shift();}
var ln=parts.length,i=ln,minLength=parts[parts.length-1].length,part;while(part=parts[--i]){if(i===0||i<ln-2||part.length<minLength||TLDs.indexOf(part)<0){return part;}}}
catch(error){this.logError(error,"getBaseDomainName");}};DIGIOH_ANALYTICS.prototype.formatDate=function(d){try{if(d.getMonth&&d.getDate&&d.getFullYear){var time=(1+d.getMonth())+"/"+d.getDate()+"/"+d.getFullYear()+" ";var hours=d.getHours();var minutes=this.padStr(d.getMinutes());if(hours>12)
time+=(hours-12)+":"+minutes+" PM";else if(hours==12)
time+="12:"+minutes+" PM";else if(hours==0)
time+="12:"+minutes+" AM";else
time+=hours+":"+minutes+" AM";return time;}
return "";}
catch(error){this.logError(error,"formatDate");}};DIGIOH_ANALYTICS.prototype.formatDateWithSeconds=function(d){try{var time=(1+d.getMonth())+"/"+d.getDate()+"/"+d.getFullYear()+" ";var hours=d.getHours();var minutes=this.padStr(d.getMinutes());var seconds=this.padStr(d.getSeconds());if(hours>12)
time+=(hours-12)+":"+minutes+":"+seconds+" PM";else if(hours==12)
time+="12:"+minutes+":"+seconds+" PM";else if(hours==0)
time+="12:"+minutes+":"+seconds+" AM";else
time+=hours+":"+minutes+":"+seconds+" AM";return time;}
catch(error){this.logError(error,"formatDateWithSeconds");}};DIGIOH_ANALYTICS.prototype.formatDateWithSecondsForSalesforce=function(d){try{return d.getFullYear()+"-"+this.padStr(1+d.getMonth())+"-"+d.getDate()+" "+this.padStr(d.getHours())+":"+this.padStr(d.getMinutes())+":"+this.padStr(d.getSeconds());}
catch(error){this.logError(error,"formatDateWithSecondsForSalesforce");}};DIGIOH_ANALYTICS.prototype.getReadableHMS=function(seconds){try{if(seconds<60){return seconds+" secs";}else if(seconds<3600){var minutes=Math.floor(seconds/60);seconds=seconds-(minutes*60);return minutes+" mins "+seconds+" secs";}else{var hours=Math.floor(seconds/3600);seconds=seconds-(hours*3600);var minutes=Math.floor(seconds/60);seconds=seconds-(minutes*60);return hours+" hrs "+minutes+" mins "+seconds+" secs";}}
catch(error){this.logError(error,"getReadableHMS");}};DIGIOH_ANALYTICS.prototype.padStr=function(i){try{return(i<10)?"0"+i:""+i;}
catch(error){this.logError(error,"padStr");}};DIGIOH_ANALYTICS.prototype.getSearchEngine=function(url){try{if(!url){return "";}
var bd=url.toLowerCase();if(bd.indexOf('http://')===0)
bd=bd.substring(7);else if(bd.indexOf('https://')===0)
bd=bd.substring(8);if(bd.indexOf('?')>0)
bd=bd.split('?')[0];if(bd.indexOf('/')>0)
bd=bd.split('/')[0];if(bd.indexOf('#')>0)
bd=bd.split('#')[0];if(bd.indexOf(':')>0)
bd=bd.split(':')[0];if(bd.indexOf('.google.')>=0||bd.indexOf('google.')===0)
return 'google';if(bd.indexOf('.bing.')>=0||bd.indexOf('bing.')===0)
return 'bing';if(bd.indexOf('.yahoo.')>=0||bd.indexOf('yahoo.')===0)
return 'yahoo';if(bd.indexOf('.ask.')>=0||bd.indexOf('ask.')===0)
return 'ask';if(bd.indexOf('.aol.')>=0||bd.indexOf('aol.')===0)
return 'aol';if(bd.indexOf('.myway.')>=0||bd.indexOf('myway.')===0)
return 'myway';if(bd.indexOf('.baidu.')>=0||bd.indexOf('baidu.')===0)
return 'baidu';if(bd.indexOf('.yandex.')>=0||bd.indexOf('yandex.')===0)
return 'yandex';if(bd.indexOf('.excite.')>=0)
return 'excite';if(bd.indexOf('.duckduckgo.')>=0||bd.indexOf('duckduckgo.')===0)
return 'duckduckgo';if(bd.indexOf('.lycos.')>=0)
return 'lycos';if(bd.indexOf('.wolframalpha.')>=0||bd.indexOf('wolframalpha.')===0)
return 'wolframalpha';if(bd.indexOf('.wow.com')>=0)
return 'wow';if(bd.indexOf('.webcrawler.')>=0||bd.indexOf('webcrawler.')===0)
return 'webcrawler';if(bd.indexOf('.mywebsearch.')>=0||bd.indexOf('mywebsearch.')===0)
return 'mywebsearch';if(bd.indexOf('.infospace.')>=0||bd.indexOf('infospace.')===0)
return 'infospace';if(bd.indexOf('.info.com')>=0)
return 'info';if(bd.indexOf('.contenko.')>=0)
return 'contenko';if(bd.indexOf('.dogpile.')>=0)
return 'dogpile';if(bd.indexOf('.alhea.')>=0)
return 'alhea';if(bd.indexOf('.ixquick.')>=0||bd.indexOf('ixquick.')===0)
return 'ixquick';return "";}
catch(error){this.logError(error,"getSearchEngine");return "";}};DIGIOH_ANALYTICS.prototype.isGoogleAdWordsUrl=function(landingUrl,referringUrl,search_engine){try{if(landingUrl&&(landingUrl.toLowerCase().indexOf('gclid=')>0||landingUrl.toLowerCase().indexOf('wbraid=')>0||landingUrl.toLowerCase().indexOf('gbraid=')>0))
return true;if(referringUrl&&referringUrl.toLowerCase().indexOf('/aclk?')>0)
return true;return false;}
catch(error){this.logError(error,"isGoogleAdWordsUrl");return false;}};DIGIOH_ANALYTICS.prototype.isFacebookUrl=function(url){try{if(!url){return false;}
var bd=url.toLowerCase();if(bd.indexOf('http://')===0)
bd=bd.substring(7);else if(bd.indexOf('https://')===0)
bd=bd.substring(8);if(bd.indexOf('?')>0)
bd=bd.split('?')[0];if(bd.indexOf('/')>0)
bd=bd.split('/')[0];if(bd.indexOf('#')>0)
bd=bd.split('#')[0];if(bd.indexOf(':')>0)
bd=bd.split(':')[0];if(bd.indexOf('.facebook.com')>=0||bd.indexOf('facebook.com')===0)
return true;else
return false;}
catch(error){this.logError(error,"isFacebookUrl");return false;}};DIGIOH_ANALYTICS.prototype.isAndroidAppUrl=function(url){try{if(!url){return false;}
var bd=url.toLowerCase();if(bd.indexOf('android-app://')===0)
return true;else
return false;}
catch(error){this.logError(error,"isAndroidAppUrl");return false;}};DIGIOH_ANALYTICS.prototype.removeUrlBeginning=function(url){try{if(url.length==0)return "";if(url.toLowerCase().indexOf('https://www.')==0)return url.substring(12);else if(url.toLowerCase().indexOf('http://www.')==0)return url.substring(11);else if(url.toLowerCase().indexOf('https://')==0)return url.substring(8);else if(url.toLowerCase().indexOf('http://')==0)return url.substring(7);else return url;}
catch(error){this.logError(error,"removeUrlBeginning");return "";}};DIGIOH_ANALYTICS.prototype.removeUrlProtocol=function(url){try{if(url.length==0)return "";if(url.toLowerCase().indexOf('https://')==0)return url.substring(8);else if(url.toLowerCase().indexOf('http://')==0)return url.substring(7);else return url;}
catch(error){this.logError(error,"removeUrlProtocol");}};DIGIOH_ANALYTICS.prototype.removeUrlEnding=function(url){try{if(url.length==0)return "";var ending=url.substring(url.length-1);if(ending=='/'||ending=='#'||ending=='?'||ending=='&'){url=url.substring(0,url.length-1);}
return url;}
catch(error){this.logError(error,"removeUrlEnding");}};DIGIOH_ANALYTICS.prototype.getUrlBaseDomain=function(url){try{if(url==undefined||url.length==0)return "";var a=url.split(/\/\//g)[1].split(/[:\/?#]/)[0].split('.');var f=(a.length>1?(a[a.length-2]+'.'+a[a.length-1]):"").toLowerCase();return f;}
catch(error){this.logError(error,"getUrlBaseDomain");}};DIGIOH_ANALYTICS.prototype.getUrlSubdomain=function(url){try{if(url.length==0)return "";return this.removeUrlBeginning(url).split(/[:\/?#]/)[0];}
catch(error){this.logError(error,"getUrlSubdomain");}};DIGIOH_ANALYTICS.prototype.doSubdomainsMatch=function(url1,url2){try{return(url1.length>0&&url2.length>0&&this.getUrlSubdomain(url1).toLowerCase()==this.getUrlSubdomain(url2).toLowerCase());}
catch(error){this.logError(error,"doSubdomainsMatch");}};DIGIOH_ANALYTICS.prototype.hasUTMCampaign=function(url){try{if(url.length>0&&url.indexOf('?')!==-1){var queryString=url.split('?')[1];if(queryString.length>0&&queryString.indexOf('=')!==-1){var queryVars=queryString.split('&');for(var i=0;i<queryVars.length;i++){var pair=queryVars[i].split('=');if(decodeURIComponent(pair[0]).toLowerCase()=="utm_campaign"){return true;}}}}}
catch(error){this.logError(error,"hasUTMCampaign");}
return false;};DIGIOH_ANALYTICS.prototype.isStringAnInteger=function(str){try{if(str.length==0)return false;return!isNaN(str);}
catch(error){this.logError(error,"isStringAnInteger");}
return false;};DIGIOH_ANALYTICS.prototype.updateLightboxActivity=function(eventKey,lbguid,timestamp){try{this.logger('updateLightboxActivity: '+eventKey+' ==> '+lbguid);var boxShortId='';if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(lbguid)&&DIGIOH_LIGHTBOX_IDS[lbguid]){boxShortId=DIGIOH_LIGHTBOX_IDS[lbguid];}
if(!this.VARS.lightbox_activity.hasOwnProperty(lbguid)){this.VARS.lightbox_activity[boxShortId]={};}else{this.VARS.lightbox_activity[boxShortId]=DIGIOH_API.LIGHTBOX.cloneObj(this.VARS.lightbox_activity[lbguid]);delete this.VARS.lightbox_activity[lbguid];}
var ignoreInline=false;if(typeof DIGIOH_LIGHTBOX_MASTER_RULES!=="undefined"&&(typeof DIGIOH_LIGHTBOX_MASTER_RULES.IgnoreForInlineBoxes==="undefined"||DIGIOH_LIGHTBOX_MASTER_RULES.IgnoreForInlineBoxes===true)){ignoreInline=true;}
var isInline=DIGIOH_API.LIGHTBOX.isInlineLightbox(lbguid);if(ignoreInline&&isInline){this.logger('DIGIOH: updateLightboxActivity ==> ignoreInline ==> '+lbguid);}
if(eventKey==='view'||eventKey==='v'){this.VARS.lightbox_activity[boxShortId]["Once per visitor"]=false;this.VARS.lightbox_activity[boxShortId]["Once per session"]=false;this.VARS.lightbox_activity[boxShortId]["Once per pageview"]=false;this.VARS.lightbox_activity[boxShortId]["Days since last view"]=0;if(!ignoreInline||!isInline){this.VARS.master_rules["Once per visitor"]=false;this.VARS.master_rules["Once per session"]=false;this.VARS.master_rules["Once per pageview"]=false;}}else if(eventKey=='submit'||eventKey==='s'){this.VARS.lightbox_activity[boxShortId]["Until form is submitted"]=false;if(!ignoreInline||!isInline){this.VARS.master_rules["Until form is submitted"]=false;}}else if(eventKey=='close'||eventKey==='c'){this.VARS.lightbox_activity[boxShortId]["Until lightbox is closed"]=false;}}
catch(error){this.logError(error,"updateLightboxActivity");}};DIGIOH_ANALYTICS.prototype.setLightboxEvent=function(eventKey,lbguid,isOptionalDelete){try{var cookieName="__bxevents";var timestamp=new Date().getTime();var boxShortId='';if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(lbguid)&&DIGIOH_LIGHTBOX_IDS[lbguid]){boxShortId=DIGIOH_LIGHTBOX_IDS[lbguid];}
var key=eventKey;if(key=='view'||key=='v')key='v';else if(key=='submit'||key=='s')key='s';else if(key=='redirect'||key=='r')key='r';else if(key=='download'||key=='d')key='d';else if(key=='close'||key=='c')key='c';if(!this.VARS.lightbox_events.hasOwnProperty(lbguid)&&!this.VARS.lightbox_events.hasOwnProperty(boxShortId)){this.VARS.lightbox_events[boxShortId]={'v':{'c':0,'t':[]},'s':{'c':0,'t':[]},'r':{'c':0,'t':[]},'d':{'c':0,'t':[]},'c':{'c':0,'t':[]}};}else if(this.VARS.lightbox_events.hasOwnProperty(lbguid)&&!this.VARS.lightbox_events.hasOwnProperty(boxShortId)){this.VARS.lightbox_events[boxShortId]=DIGIOH_API.LIGHTBOX.cloneObj(this.VARS.lightbox_events[lbguid]);delete this.VARS.lightbox_events[lbguid];}else if(this.VARS.lightbox_events.hasOwnProperty(lbguid)&&this.VARS.lightbox_events.hasOwnProperty(boxShortId)){delete this.VARS.lightbox_events[lbguid];}
if(this.VARS.lightbox_events[boxShortId].hasOwnProperty(eventKey)){this.VARS.lightbox_events[boxShortId][key]=DIGIOH_API.LIGHTBOX.cloneObj(this.VARS.lightbox_events[boxShortId][eventKey]);delete this.VARS.lightbox_events[boxShortId][eventKey];if(this.VARS.lightbox_events[boxShortId][key].hasOwnProperty('cnt')){this.VARS.lightbox_events[boxShortId][key]['c']=this.VARS.lightbox_events[boxShortId][key]['cnt']+1;delete this.VARS.lightbox_events[boxShortId][key]['cnt'];}else if(this.VARS.lightbox_events[boxShortId][key].hasOwnProperty('c')){this.VARS.lightbox_events[boxShortId][key]['c']++;}else{this.VARS.lightbox_events[boxShortId][key]['c']=1;}}else if(this.VARS.lightbox_events[boxShortId].hasOwnProperty(key)){this.VARS.lightbox_events[boxShortId][key]['c']++;}else{this.VARS.lightbox_events[boxShortId][key]={'c':1,'t':[]};}
if(this.VARS.lightbox_events[boxShortId][key].hasOwnProperty('ts')){this.VARS.lightbox_events[boxShortId][key]['t']=DIGIOH_API.LIGHTBOX.cloneObj(this.VARS.lightbox_events[boxShortId][key]['ts']);delete this.VARS.lightbox_events[boxShortId][key]['ts'];}else if(!this.VARS.lightbox_events[boxShortId][key].hasOwnProperty('t')){this.VARS.lightbox_events[boxShortId][key]['t']=[];}
this.VARS.lightbox_events[boxShortId][key]['t'].push(timestamp);if(DIGIOH_STORAGE.storage_type==='cookie'){while(this.VARS.lightbox_events[boxShortId][key]['t'].length>3){this.VARS.lightbox_events[boxShortId][key]['t'].splice(1,1);}}else{while(this.VARS.lightbox_events[boxShortId][key]['t'].length>20){this.VARS.lightbox_events[boxShortId][key]['t'].splice(1,1);}}
if(typeof isOptionalDelete!=='undefined'&&isOptionalDelete===true){this.VARS.lightbox_events[boxShortId][key]={'c':0,'t':[]};}
if(DIGIOH_STORAGE.storage_type==='cookie'){for(var bid in this.VARS.lightbox_events){if(this.VARS.lightbox_events.hasOwnProperty(bid)&&typeof this.VARS.lightbox_events[bid]==='object'&&this.VARS.lightbox_events[bid]!==null){if(this.VARS.lightbox_events[bid].hasOwnProperty('v')&&this.VARS.lightbox_events[bid]['v'].hasOwnProperty('t')){while(this.VARS.lightbox_events[bid]['v']['t'].length>3){this.VARS.lightbox_events[bid]['v']['t'].splice(1,1);}}
if(this.VARS.lightbox_events[bid].hasOwnProperty('s')&&this.VARS.lightbox_events[bid]['s'].hasOwnProperty('t')){while(this.VARS.lightbox_events[bid]['s']['t'].length>3){this.VARS.lightbox_events[bid]['s']['t'].splice(1,1);}}
if(this.VARS.lightbox_events[bid].hasOwnProperty('r')&&this.VARS.lightbox_events[bid]['r'].hasOwnProperty('t')){while(this.VARS.lightbox_events[bid]['r']['t'].length>3){this.VARS.lightbox_events[bid]['r']['t'].splice(1,1);}}
if(this.VARS.lightbox_events[bid].hasOwnProperty('d')&&this.VARS.lightbox_events[bid]['d'].hasOwnProperty('t')){while(this.VARS.lightbox_events[bid]['d']['t'].length>3){this.VARS.lightbox_events[bid]['d']['t'].splice(1,1);}}
if(this.VARS.lightbox_events[bid].hasOwnProperty('c')&&this.VARS.lightbox_events[bid]['c'].hasOwnProperty('t')){while(this.VARS.lightbox_events[bid]['c']['t'].length>3){this.VARS.lightbox_events[bid]['c']['t'].splice(1,1);}}}}}
this.updateLightboxActivity(eventKey,lbguid,timestamp);DIGIOH_STORAGE.data[cookieName]=this.VARS.lightbox_events;DIGIOH_STORAGE.set();this.logger('ANALYTICS.setLightboxEvent - '+eventKey+' ('+key+')'+', '+lbguid+' ('+boxShortId+'), '+this.VARS.lightbox_events[boxShortId][key]['t'].length);}
catch(error){this.logError(error,"setLightboxEvent");}};DIGIOH_ANALYTICS.prototype.parseLightboxEvents=function(boxEvents){var hashOrig={'view':{'cnt':0,'ts':[]},'submit':{'cnt':0,'ts':[]},'redirect':{'cnt':0,'ts':[]},'download':{'cnt':0,'ts':[]},'close':{'cnt':0,'ts':[]}};var hash={'v':{'c':0,'t':[]},'s':{'c':0,'t':[]},'r':{'c':0,'t':[]},'d':{'c':0,'t':[]},'c':{'c':0,'t':[]}};try{var parts=boxEvents.split('*');var event;for(var x=1;x<parts.length;x++){if(parts[x].indexOf(':')>0){event=parts[x].split(':');var key=event[0];if(key=='view')key='v';else if(key=='submit')key='s';else if(key=='redirect')key='r';else if(key=='download')key='d';else if(key=='close')key='c';if(event.length==3&&hash.hasOwnProperty(key)){if(this.isStringAnInteger(event[1])){hash[key]['c']=parseInt(event[1]);}
if(event[2].indexOf(',')>0){var tss=event[2].split(',');for(var y=0;y<tss.length;y++){if(this.isStringAnInteger(tss[y])){hash[key]['t'].push(parseInt(tss[y]));}}}else if(this.isStringAnInteger(event[2])){hash[key]['t'].push(parseInt(event[2]));}else{}}}}}
catch(error){this.logError(error,"parseLightboxEvents");}
return hash;};DIGIOH_ANALYTICS.prototype.loadAllEventsByLightboxGuid=function(){try{var cookieName="__bxevents";var cookieVal=DIGIOH_STORAGE.data[cookieName];var lbguid;var boxShortId='';var case2or3=false;if(cookieVal){if(typeof cookieVal==='string'&&cookieVal.indexOf('id:')>=0&&cookieVal.indexOf('{')===-1){if(cookieVal.indexOf('|')>0){var parts=cookieVal.split('|');for(var x=0;x<parts.length;x++){if(parts[x].indexOf('id:')==0&&parts[x].indexOf('*')>0){lbguid=parts[x].split('*')[0].split(':')[1];boxShortId='';if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(lbguid)&&DIGIOH_LIGHTBOX_IDS[lbguid]){boxShortId=DIGIOH_LIGHTBOX_IDS[lbguid];}
this.VARS.lightbox_events[boxShortId]=this.parseLightboxEvents(parts[x]);}}}else if(cookieVal.indexOf("id:")==0&&cookieVal.indexOf('*')>0){lbguid=cookieVal.split('*')[0].split(':')[1];this.VARS.lightbox_events[boxShortId]=this.parseLightboxEvents(cookieVal);}
DIGIOH_STORAGE.data[cookieName]=this.VARS.lightbox_events;DIGIOH_STORAGE.set();}else if(typeof cookieVal==='string'&&cookieVal.indexOf('{')===0){this.VARS.lightbox_events=JSON.parse(cookieVal);case2or3=true;}else if(typeof cookieVal==='object'&&cookieVal!==null){this.VARS.lightbox_events=cookieVal;case2or3=true;}
if(case2or3&&this.VARS.lightbox_events){for(var guid in this.VARS.lightbox_events){if(typeof guid==='string'&&guid.length>30&&this.VARS.lightbox_events.hasOwnProperty(guid)&&typeof this.VARS.lightbox_events[guid]==='object'){if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(guid)&&DIGIOH_LIGHTBOX_IDS[guid]){boxShortId=DIGIOH_LIGHTBOX_IDS[guid];this.VARS.lightbox_events[boxShortId]=DIGIOH_API.LIGHTBOX.cloneObj(this.VARS.lightbox_events[guid]);delete this.VARS.lightbox_events[guid];for(var eventKey in this.VARS.lightbox_events[boxShortId]){if(typeof guid==='string'&&eventKey.length>1&&this.VARS.lightbox_events[boxShortId].hasOwnProperty(eventKey)&&typeof this.VARS.lightbox_events[boxShortId][eventKey]==='object'){var key=eventKey;if(key=='view')key='v';else if(key=='submit')key='s';else if(key=='redirect')key='r';else if(key=='download')key='d';else if(key=='close')key='c';this.VARS.lightbox_events[boxShortId][key]=DIGIOH_API.LIGHTBOX.cloneObj(this.VARS.lightbox_events[boxShortId][eventKey]);delete this.VARS.lightbox_events[boxShortId][eventKey];if(this.VARS.lightbox_events[boxShortId][key].hasOwnProperty('cnt')){this.VARS.lightbox_events[boxShortId][key]['c']=this.VARS.lightbox_events[boxShortId][key]['cnt'];delete this.VARS.lightbox_events[boxShortId][key]['cnt'];}
if(this.VARS.lightbox_events[boxShortId][key].hasOwnProperty('ts')){this.VARS.lightbox_events[boxShortId][key]['t']=DIGIOH_API.LIGHTBOX.cloneObj(this.VARS.lightbox_events[boxShortId][key]['ts']);delete this.VARS.lightbox_events[boxShortId][key]['ts'];}}}}}}}}}
catch(error){this.logError(error,"loadAllEventsByLightboxGuid");}};DIGIOH_ANALYTICS.prototype.getLightboxEventCount=function(eventKey,lightboxGUID,isLightboxIndependent,excludeLightboxGUID){var eventCount=0;try{var lbEvMap=this.VARS.lightbox_events;var viewTimestamp=0;var boxShortId='';if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(lightboxGUID)&&DIGIOH_LIGHTBOX_IDS[lightboxGUID]){boxShortId=DIGIOH_LIGHTBOX_IDS[lightboxGUID];}
var excludeBoxShortId='';if(excludeLightboxGUID&&DIGIOH_LIGHTBOX_IDS.hasOwnProperty(excludeLightboxGUID)&&DIGIOH_LIGHTBOX_IDS[excludeLightboxGUID]){excludeBoxShortId=DIGIOH_LIGHTBOX_IDS[excludeLightboxGUID];}
var key=eventKey;if(key=='view')key='v';else if(key=='submit')key='s';else if(key=='redirect')key='r';else if(key=='download')key='d';else if(key=='close')key='c';for(lbid in lbEvMap){if((lbid==boxShortId||isLightboxIndependent)&&lbEvMap.hasOwnProperty(lbid)&&lbEvMap[lbid].hasOwnProperty(key)){if(!isLightboxIndependent&&lbid==boxShortId)
eventCount+=lbEvMap[lbid][key]['c'];else if(isLightboxIndependent&&excludeBoxShortId=='')
eventCount+=lbEvMap[lbid][key]['c'];else if(isLightboxIndependent&&excludeBoxShortId!=''&&excludeBoxShortId!=lbid)
eventCount+=lbEvMap[lbid][key]['c'];}}
return eventCount;}
catch(error){this.logError(error,"getLightboxEventCount");}
return eventCount;};DIGIOH_ANALYTICS.prototype.getEventCountByLightbox=function(eventKey,lightboxGUID){return this.getLightboxEventCount(eventKey,lightboxGUID,false,'');};DIGIOH_ANALYTICS.prototype.getEventCountAcrossAllLightboxes=function(eventKey){return this.getLightboxEventCount(eventKey,'',true,'');};DIGIOH_ANALYTICS.prototype.getEventCountAcrossAllLightboxesExcept=function(eventKey,excludeLightboxGUID){return this.getLightboxEventCount(eventKey,'',true,excludeLightboxGUID);};DIGIOH_ANALYTICS.prototype.setCurrent=function(){try{var maxCookieLength=3000000;var cookieName="__bxcurr";var cookieVal=DIGIOH_STORAGE.data[cookieName];var timestamp=new Date().getTime();var referring_url="";var search_engine="";if(window.parent.document.referrer&&window.parent.document.referrer.length>7){referring_url=window.parent.document.referrer;search_engine=this.getSearchEngine(referring_url);}
var current_url="";var domain_base="";var domain_ending="";var domain_protocol="";if(window.parent.location.href){current_url=window.parent.location.href;domain_protocol=window.parent.location.protocol;domain_base=window.parent.location.host;domain_ending=window.parent.location.pathname+window.parent.location.search+window.parent.location.hash;this.VARS.current_page_url=current_url;}
if(current_url.indexOf('/static/amp_iframe.html')>0&&typeof parent.PARENT_URL==='string'&&parent.PARENT_URL.indexOf('.')>0){if(parent.PARENT_URL.indexOf('://')>0){current_url=parent.PARENT_URL;domain_base=current_url.split('://')[1].split('/')[0].split('?')[0].split('#')[0];}else{current_url='https://'+parent.PARENT_URL;domain_base=parent.PARENT_URL.split('/')[0].split('?')[0].split('#')[0];}
this.VARS.current_page_url=current_url;}
var areMatchingDomains=this.doSubdomainsMatch(referring_url,current_url);var foundReferrer=referring_url.length>0;if(cookieVal){if(areMatchingDomains){this.OverwriteCurrentCookie=false;}
else if(this.isGoogleAdWordsUrl(current_url,referring_url,search_engine)){this.OverwriteCurrentCookie=true;}
else if(foundReferrer&&this.isFacebookUrl(referring_url)){this.OverwriteCurrentCookie=true;}
else if(foundReferrer&&search_engine!==""){this.OverwriteCurrentCookie=true;this.VARS.search_engine=search_engine;}
else if(foundReferrer&&!areMatchingDomains){this.OverwriteCurrentCookie=true;}}
else{cookieVal="";this.OverwriteCurrentCookie=true;}
if(this.VARS.IsPreview){this.OverwriteCurrentCookie=true;}
var cobj={};if(typeof cookieVal==='object'&&cookieVal!==null){cobj=cookieVal;}
else if(typeof cookieVal==='string'&&cookieVal.length>1&&cookieVal.indexOf('{')===0&&cookieVal.substring(cookieVal.length-1)==='}'){cobj=JSON.parse(cookieVal);}
this.PreviousPageviewTs=0;if(cobj.hasOwnProperty('ppts')){this.PreviousPageviewTs=cobj['ppts'];}
cobj['ppts']=timestamp;if(this.PreviousPageviewTs==0&&cobj.hasOwnProperty('lts')){this.PreviousPageviewTs=cobj['lts'];}
this.VARS.page_visits=0;if(cobj.hasOwnProperty('pvcnt')){this.VARS.page_visits=cobj['pvcnt']+1;cobj['pvcnt']=cobj['pvcnt']+1;}else{this.VARS.page_visits=1;cobj['pvcnt']=1;}
this.IsNewSession=false;if(timestamp-this.PreviousPageviewTs>this.SessionLengthTicks){this.SessionStart=timestamp;this.IsNewSession=true;}
else if(cobj.hasOwnProperty('ss')){this.SessionStart=cobj['ss'];this.IsNewSession=false;}
if(this.SessionStart==0){this.SessionStart=timestamp;this.IsNewSession=true;}
this.VARS.page_visits_session=0;if(this.IsNewSession){cobj['ss']=this.SessionStart;this.VARS.page_visits_session=1;cobj['pvscnt']=1;this.logger("New Session: "+new Date(this.SessionStart).toLocaleString());}
else{if(cobj.hasOwnProperty('pvscnt')){this.VARS.page_visits_session=cobj['pvscnt']+1;cobj['pvscnt']=cobj['pvscnt']+1;}else{this.VARS.page_visits_session=1;cobj['pvscnt']=1;}
this.logger("Existing Session: "+new Date(this.SessionStart).toLocaleString());}
var max_url_length=300;if(typeof DIGIOH_STORAGE_TYPE==='string'&&DIGIOH_STORAGE_TYPE==='local_storage')
max_url_length=5000;if(this.OverwriteCurrentCookie||!cobj.hasOwnProperty('rurl'))cobj['rurl']=((referring_url.length>max_url_length)?referring_url.substr(0,max_url_length):referring_url);if(this.OverwriteCurrentCookie||!cobj.hasOwnProperty('lurl'))cobj['lurl']=((domain_ending.length>max_url_length)?domain_ending.substr(0,max_url_length):domain_ending);if(this.OverwriteCurrentCookie||!cobj.hasOwnProperty('lts'))cobj['lts']=timestamp;if(this.OverwriteCurrentCookie||!cobj.hasOwnProperty('ppts'))cobj['ppts']=timestamp;if(this.OverwriteCurrentCookie||!cobj.hasOwnProperty('pvcnt'))cobj['pvcnt']=this.VARS.page_visits;if(this.OverwriteCurrentCookie||!cobj.hasOwnProperty('ss'))cobj['ss']=this.SessionStart;if(cobj.hasOwnProperty('dom'))delete cobj['dom'];if(cobj.hasOwnProperty('prot'))delete cobj['prot'];if(cobj.hasOwnProperty('dev'))delete cobj['dev'];if(cobj.hasOwnProperty('os'))delete cobj['os'];if(cobj.hasOwnProperty('bt'))delete cobj['bt'];if(cobj.hasOwnProperty('bv'))delete cobj['bv'];if(cobj.hasOwnProperty('ip'))delete cobj['ip'];if(cobj.hasOwnProperty('geo_co'))delete cobj['geo_co'];if(cobj.hasOwnProperty('geo_cc'))delete cobj['geo_cc'];if(cobj.hasOwnProperty('geo_cn'))delete cobj['geo_cn'];if(cobj.hasOwnProperty('geo_rn'))delete cobj['geo_rn'];if(cobj.hasOwnProperty('geo_s'))delete cobj['geo_s'];if(cobj.hasOwnProperty('geo_c'))delete cobj['geo_c'];if(cobj.hasOwnProperty('geo_z'))delete cobj['geo_z'];if(cobj.hasOwnProperty('geo_lat'))delete cobj['geo_lat'];if(cobj.hasOwnProperty('geo_lon'))delete cobj['geo_lon'];if(cobj.hasOwnProperty('geo_mc'))delete cobj['geo_mc'];if(cobj.hasOwnProperty('geo_tz'))delete cobj['geo_tz'];if(cobj.hasOwnProperty('geo_ac'))delete cobj['geo_ac'];var purlsArr=[];if(cobj.hasOwnProperty('purl')){if(cobj['purl'].length>1){purlsArr=cobj['purl'].join('|').split('|');}else if(cobj['purl'].length===1){purlsArr.push(cobj['purl'][0]);}}else if(DIGIOH_STORAGE.storage_type==='cookie'){purlsArr=DIGIOH_LOCAL_STORAGE.getManual('xdibx_pgsnavurls');if(typeof purlsArr==='string'&&purlsArr.length>4&&purlsArr.indexOf('[')<0){purlsArr=JSON.parse(LZString.decompressFromBase64(purlsArr));}else if(typeof purlsArr==='string'&&purlsArr.length>4&&purlsArr.indexOf('[')>=0){purlsArr=JSON.parse(purlsArr);}}
if(!this.OverwriteCurrentCookie&&domain_ending.length>0){if(!purlsArr.length){purlsArr=[domain_ending];}
else{var purls=purlsArr.join('|');if(domain_ending.length>0&&purls.indexOf(domain_ending)===-1&&(purls.length+domain_ending.length)<50000){purlsArr.push(domain_ending);}}}
if(DIGIOH_STORAGE.storage_type==='cookie'){DIGIOH_LOCAL_STORAGE.setManual('xdibx_pgsnavurls',purlsArr);if(cobj.hasOwnProperty('purl'))delete cobj['purl'];}else{cobj['purl']=purlsArr;}
if(typeof DIGIOH_BUGSNAG!=='undefined'&&DIGIOH_BUGSNAG!==null){var actualLenth=JSON.stringify(cobj).length;if(actualLenth>maxCookieLength){DIGIOH_BUGSNAG.notify(this.VARS.VendorGuid+"_LocalStorage_"+maxCookieLength,this.VARS.VendorGuid+" LocalStorage length greater than "+maxCookieLength+" ("+actualLenth+")");}}
DIGIOH_STORAGE.data[cookieName]=cobj;DIGIOH_STORAGE.set();this.RanSetCurrent=true;}
catch(error){this.logError(error,"setCurrent");}};DIGIOH_ANALYTICS.prototype.getCurrent=function(){try{var cookieName="__bxcurr";var cookieVal=DIGIOH_STORAGE.data[cookieName];if(cookieVal){var cobj={};if(typeof cookieVal==='string'&&cookieVal.length>1&&cookieVal.indexOf('{')===0&&cookieVal.substring(cookieVal.length-1)==='}'){cobj=JSON.parse(cookieVal);}else if(typeof cookieVal==='object'&&cookieVal!==null){cobj=cookieVal;}
var domain_protocol=window.parent.location.protocol;var domain_base=window.parent.location.host;this.logger('getCurrent > domain_base = '+domain_base);if(cobj.hasOwnProperty('lurl')){this.VARS.landing_page=domain_protocol+"//"+domain_base+cobj['lurl'];}
var refUrl=cobj.hasOwnProperty('rurl')&&cobj['rurl']?cobj['rurl']:'';this.VARS.referring_website_url=refUrl;var search_engine=this.getSearchEngine(refUrl);this.VARS.search_engine=search_engine;var isAdWords=false;var isSearchEngine=false;if(this.isFacebookUrl(refUrl)){this.VARS.web_source="Facebook";}else if(this.isAndroidAppUrl(refUrl)){this.VARS.web_source="Android App";}else if(this.isGoogleAdWordsUrl(this.VARS.landing_page,refUrl,search_engine)){this.VARS.web_source="Google AdWords";isAdWords=true;}else if(search_engine!==""){this.VARS.web_source="Organic Search";isSearchEngine=true;}
try{if(this.VARS.landing_page||cobj.hasOwnProperty('lurl')){if(this.VARS.referring_website_url.length>0&&this.VARS.web_source!="Google AdWords"&&this.VARS.web_source!="Organic Search"&&!this.doSubdomainsMatch(this.VARS.referring_website_url,this.VARS.landing_page)){this.VARS.web_source="Referring Website";}
if(this.VARS.landing_page.length>0&&this.VARS.landing_page.indexOf('?')!==-1){var queryString=this.VARS.landing_page.split('?')[1];if(queryString.length>0&&queryString.indexOf('=')!==-1){var queryVars=queryString.split('&');for(var i=0;i<queryVars.length;i++){var pair=queryVars[i].split('=');var pairKey=decodeURIComponent(pair[0]).toLowerCase();if(pairKey=="utm_source"||pairKey=="utm_campaign_source"||pairKey=="campaign_source"){this.VARS.utm_campaign_source=decodeURIComponent(pair[1]).split("+").join(" ");}
else if(pairKey=="utm_medium"||pairKey=="utm_campaign_medium"||pairKey=="campaign_medium"){this.VARS.utm_campaign_medium=decodeURIComponent(pair[1]).split("+").join(" ");}
else if(pairKey=="utm_term"||pairKey=="utm_campaign_term"||pairKey=="campaign_term"){this.VARS.utm_campaign_term=decodeURIComponent(pair[1]).split("+").join(" ");}
else if(pairKey=="utm_content"||pairKey=="utm_campaign_content"||pairKey=="campaign_content"){this.VARS.utm_campaign_content=decodeURIComponent(pair[1]).split("+").join(" ");}
else if(pairKey=="utm_campaign"||pairKey=="utm_campaign_name"||pairKey=="campaign_name"){this.VARS.utm_campaign_name=decodeURIComponent(pair[1]).split("+").join(" ");}}}}}}
catch(err){}
if(!this.VARS.ip_address&&cobj.hasOwnProperty('ip')&&cobj['ip']){this.VARS.ip_address=cobj['ip'];this.VARS.landing_page_ip=this.VARS.ip_address;}
if(!this.VARS.device&&cobj.hasOwnProperty('dev')&&cobj['dev'])
this.VARS.device=cobj['dev'];if(!this.VARS.operating_system&&cobj.hasOwnProperty('os')&&cobj['os'])
this.VARS.operating_system=cobj['os'];if(!this.VARS.browser_type&&cobj.hasOwnProperty('bt')&&cobj['bt'])
this.VARS.browser_type=cobj['bt'];if(!this.VARS.browser_version&&cobj.hasOwnProperty('bv')&&cobj['bv'])
this.VARS.browser_version=cobj['bv'];if(!this.VARS.date_of_visit&&cobj.hasOwnProperty('lts')&&cobj['lts'])
this.VARS.date_of_visit=cobj['lts'];if(!this.VARS.continent&&cobj.hasOwnProperty('geo_co')&&cobj['geo_co'])
this.VARS.continent=cobj['geo_co'];if(!this.VARS.country&&cobj.hasOwnProperty('geo_cc')&&cobj['geo_cc'])
this.VARS.country=cobj['geo_cc'];if(!this.VARS.country_name&&cobj.hasOwnProperty('geo_cn')&&cobj['geo_cn'])
this.VARS.country_name=cobj['geo_cn'];if(!this.VARS.region_name&&cobj.hasOwnProperty('geo_rn')&&cobj['geo_rn'])
this.VARS.region_name=cobj['geo_rn'];if(!this.VARS.state&&cobj.hasOwnProperty('geo_s')&&cobj['geo_s'])
this.VARS.state=cobj['geo_s'];if(!this.VARS.city&&cobj.hasOwnProperty('geo_c')&&cobj['geo_c'])
this.VARS.city=cobj['geo_c'];if(!this.VARS.zipcode&&cobj.hasOwnProperty('geo_z')&&cobj['geo_z'])
this.VARS.zipcode=cobj['geo_z'];if(!this.VARS.latitude&&cobj.hasOwnProperty('geo_lat')&&cobj['geo_lat'])
this.VARS.latitude=cobj['geo_lat'];if(!this.VARS.longitude&&cobj.hasOwnProperty('geo_lon')&&cobj['geo_lon'])
this.VARS.longitude=cobj['geo_lon'];if(!this.VARS.metro_code&&cobj.hasOwnProperty('geo_mc')&&cobj['geo_mc'])
this.VARS.metro_code=cobj['geo_mc'];if(!this.VARS.time_zone&&cobj.hasOwnProperty('geo_tz')&&cobj['geo_tz'])
this.VARS.time_zone=cobj['geo_tz'];if(!this.VARS.area_code&&cobj.hasOwnProperty('geo_ac')&&cobj['geo_ac'])
this.VARS.area_code=cobj['geo_ac'];var pvCurr='';var pvTempArray=new Array();var pvResultArray=new Array();if(this.VARS.landing_page.length>0){this.VARS.pages_navigated=this.VARS.landing_page+"|";pvResultArray.push(this.VARS.landing_page);}
if(DIGIOH_STORAGE.storage_type==='cookie'){pvTempArray=DIGIOH_LOCAL_STORAGE.getManual('xdibx_pgsnavurls');}
else if(cobj.hasOwnProperty('purl')&&cobj['purl'].length>0){pvTempArray=cobj['purl'];}
if(typeof pvTempArray==='object'&&pvTempArray.length>0){for(var i=0;i<pvTempArray.length;i++){if(pvTempArray[i].length>0){pvCurr=domain_protocol+"//"+domain_base+pvTempArray[i];pvResultArray.push(pvCurr);this.VARS.pages_navigated+=pvCurr+"|";}}
if(this.VARS.pages_navigated.indexOf("|")>=0){this.VARS.pages_navigated=this.VARS.pages_navigated.substring(0,this.VARS.pages_navigated.length-1);}
this.VARS.PagesNavigated=pvResultArray;}else if(this.VARS.landing_page.length>0){this.VARS.pages_navigated=this.VARS.landing_page;this.VARS.PagesNavigated=new Array();this.VARS.PagesNavigated.push(this.VARS.landing_page);}
if(this.VARS.pages_navigated.length===0||this.VARS.PagesNavigated.length===0){if(this.VARS.current_page_url.length>0){this.VARS.pages_navigated=this.VARS.current_page_url;this.VARS.PagesNavigated=new Array();this.VARS.PagesNavigated.push(this.VARS.current_page_url);}}
if(this.VARS.pages_navigated.length>0&&this.VARS.pages_navigated.indexOf(this.VARS.current_page_url)<0){this.VARS.pages_navigated+="|"+this.VARS.current_page_url;if(typeof this.VARS.PagesNavigated==='object'&&this.VARS.PagesNavigated){this.VARS.PagesNavigated.push(this.VARS.current_page_url);}}
if(this.VARS.PagesNavigated.length>=2&&this.VARS.PagesNavigated[0]==this.VARS.PagesNavigated[1])
{this.VARS.PagesNavigated.shift();}
this.logger('getCurrent > this.VARS.pages_navigated > '+this.VARS.pages_navigated.length);this.logger(this.VARS.pages_navigated);this.logger(this.VARS.PagesNavigated);if(this.VARS.date_of_visit>0){this.VARS.date_of_visit=new Date(this.VARS.date_of_visit);}else{this.VARS.date_of_visit=new Date();}}}
catch(error){this.logError(error,"getCurrent");}
return false;};DIGIOH_ANALYTICS.prototype.getCurrentEncoded=function(){try{return DIGIOH_COOKIE.getEncoded("__bxcurr");}
catch(error){this.logError(error,"getCurrentEncoded");}};DIGIOH_ANALYTICS.prototype.setPrevious=function(){try{var cookieName="__bxprev";var cookieVal=DIGIOH_STORAGE.data[cookieName];var timestamp=new Date().getTime();if(cookieVal&&((typeof cookieVal==='string'&&cookieVal.length>0)||(typeof cookieVal==='object'&&cookieVal.hasOwnProperty('days')))){this.IsNewVisitor=false;if(!this.VARS.IsPreview){var cobj={};if(typeof cookieVal==='object'){cobj=cookieVal;}
else if(typeof cookieVal==='string'&&cookieVal.indexOf('{')>=0&&cookieVal.indexOf('{')<=2){cobj=JSON.parse(cookieVal);}
if(cobj&&cobj.hasOwnProperty('days')){var allDays=cobj['days'];var prev=new Date(allDays[allDays.length-1]);prev=new Date(prev.getFullYear(),prev.getMonth(),prev.getDate(),0,0,0,0);var curr=new Date(timestamp);curr=new Date(curr.getFullYear(),curr.getMonth(),curr.getDate(),0,0,0,0);if(curr.getTime()>prev.getTime()){allDays.push(timestamp);if(DIGIOH_STORAGE.storage_type==='cookie'){while(allDays.length>5){allDays.splice(1,1);}}else{while(allDays.length>100){allDays.splice(1,1);}}
cobj['days']=allDays;DIGIOH_STORAGE.data[cookieName]=cobj;DIGIOH_STORAGE.set();}}
else if(typeof cookieVal==='string'&&cookieVal.length>0&&cookieVal.indexOf('|')>=0){var allDays=cookieVal.split("|");var prev=new Date(parseInt(allDays[allDays.length-1]));prev=new Date(prev.getFullYear(),prev.getMonth(),prev.getDate(),0,0,0,0);var curr=new Date(timestamp);curr=new Date(curr.getFullYear(),curr.getMonth(),curr.getDate(),0,0,0,0);if(curr.getTime()>prev.getTime()){allDays.push(timestamp+'');if(DIGIOH_STORAGE.storage_type==='cookie'){while(allDays.length>5){allDays.splice(1,1);}}else{while(allDays.length>100){allDays.splice(1,1);}}
var cobj={};cobj['days']=[];for(var i=0;i<allDays.length;i++){cobj['days'].push(parseInt(allDays[i]));}
DIGIOH_STORAGE.data[cookieName]=cobj;DIGIOH_STORAGE.set();}}}}
else{var cobj={};cobj['days']=[timestamp];DIGIOH_STORAGE.data[cookieName]=cobj;DIGIOH_STORAGE.set();}}
catch(error){this.logError(error,"setPrevious");}};DIGIOH_ANALYTICS.prototype.getPrevious=function(){try{var cookieName="__bxprev";var cookieVal=DIGIOH_STORAGE.data[cookieName];if(cookieVal){var cobj={};if(typeof cookieVal==='object'){cobj=cookieVal;}
else if(typeof cookieVal==='string'&&cookieVal.length>0&&cookieVal.indexOf('{')>=0&&cookieVal.indexOf('{')<=2){cobj=JSON.parse(cookieVal);}
if(cobj&&cobj.hasOwnProperty('days')){var timestamp_array=cobj['days'];this.VARS.past_visits=timestamp_array.length-1;for(var i=1;i<timestamp_array.length;i++){this.VARS.PastVisitsText+=this.formatDate(new Date(timestamp_array[i]));if(i<timestamp_array.length-1){this.VARS.PastVisitsText+=", ";}}}else{this.VARS.past_visits=0;this.VARS.PastVisitsText=this.formatDate(new Date().getTime());}}else{this.VARS.past_visits=0;this.VARS.PastVisitsText=this.formatDate(new Date().getTime());}}
catch(error){this.logError(error,"getPrevious");}};DIGIOH_ANALYTICS.prototype.getPreviousEncoded=function(){try{return DIGIOH_COOKIE.getEncoded("__bxprev");}
catch(error){this.logError(error,"getPreviousEncoded");}};DIGIOH_ANALYTICS.prototype.setDevice=function(){try{var headerValue=navigator.userAgent||navigator.vendor||window.opera;var mobileDevice="";var isMobileDevice=false;if(/(android|bb\d+|meego).+mobile|android|ipad|playbook|silk|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(headerValue)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(headerValue.substr(0,4))){isMobileDevice=true;}
if(isMobileDevice){if(/ipad/i.test(headerValue))mobileDevice="iPad";else if(/ipod/i.test(headerValue))mobileDevice="iPod";else if(/iphone/i.test(headerValue))mobileDevice="iPhone";else if(/android/i.test(headerValue))mobileDevice="Android";else if(/kindle/i.test(headerValue))mobileDevice="Kindle";else if(/blackberry|symbian/i.test(headerValue))mobileDevice="BlackBerry";else if(/windows (ce|phone)|iemobile/i.test(headerValue))mobileDevice="Windows Mobile";this.VARS.device="Phone/Tablet";}else{this.VARS.device="Desktop/Laptop";}
var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"unknown";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknown";this.OS=this.searchString(this.dataOS)||"unknown"},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string;var dataProp=data[i].prop;this.versionSearchString=data[i].versionSearch||data[i].identity;if(dataString){if(dataString.indexOf(data[i].subString)!==-1)return data[i].identity}else if(dataProp)return data[i].identity}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index==-1)return;return parseFloat(dataString.substring(index+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();if(BrowserDetect.OS&&BrowserDetect.OS.length>0&&BrowserDetect.OS!="unknown"){if(BrowserDetect.OS=="Mac"){this.VARS.operating_system="Apple";}else if(BrowserDetect.OS.indexOf("iPhone")>-1){this.VARS.operating_system="Apple";this.VARS.device="Phone/Tablet";}else{this.VARS.operating_system=BrowserDetect.OS;}}else{this.VARS.operating_system="";}
if(mobileDevice!=""){this.VARS.device="Phone/Tablet";if(mobileDevice=="iPad"||mobileDevice=="iPod"||mobileDevice=="iPhone"){this.VARS.operating_system="Apple";this.VARS.device_apple=mobileDevice;}else if(mobileDevice=="Android"){this.VARS.operating_system="Android";}else if(mobileDevice=="Windows Mobile"){this.VARS.operating_system="Windows";}else if(mobileDevice=="Kindle"){this.VARS.operating_system="Kindle";}else if(mobileDevice=="BlackBerry"){this.VARS.operating_system="BlackBerry";}}
if(BrowserDetect.browser&&BrowserDetect.browser.length>0&&BrowserDetect.browser!="unknown"){if(this.VARS.browser_type===''){if(BrowserDetect.browser=="Explorer"){this.VARS.browser_type="Internet Explorer";}else if(BrowserDetect.browser=="Mozilla"&&this.VARS.operating_system=="Windows"){this.VARS.browser_type="Internet Explorer";}else{this.VARS.browser_type=BrowserDetect.browser;}}
if(BrowserDetect.version&&BrowserDetect.version!="unknown"){this.VARS.browser_version=BrowserDetect.version;}else{this.VARS.browser_version=0;}}}
catch(error){this.logError(error,"setDevice");}};DIGIOH_ANALYTICS.prototype.logger=function(msg,isJson){try{DIGIOH_API.log(msg);}
catch(e2){}};DIGIOH_ANALYTICS.prototype.logError=function(e,function_name){DIGIOH_API.logErrorFromAnalytics(e,function_name);};if(window.parent.document&&window.parent.document.getElementById(DIGIOH_VENDOR_GUID)!==null){window.parent.document.getElementById(DIGIOH_VENDOR_GUID).style.display='none';}
(function(window,document,iframewin,LZString){var STOPWATCH=new Date().getTime();var VENDOR_GUID=DIGIOH_VENDOR_GUID;var IS_PREVIEW=(typeof DIGIOH_IS_PREVIEW!=="undefined"&&DIGIOH_IS_PREVIEW===true);var IS_DEV=(typeof DIGIOH_IS_DEV!=="undefined"&&DIGIOH_IS_DEV==true);var IS_QA=(typeof DIGIOH_IS_QA!=="undefined"&&DIGIOH_IS_QA==true);var PROTOCOL=DIGIOH_API.CONFIG.PROTOCOL;var PROTOCOL_USER_OVERRIDE=DIGIOH_API.CONFIG.PROTOCOL_USER_OVERRIDE;var CLOSE_BUTTON_URL=PROTOCOL_USER_OVERRIDE+"cdn.jsdelivr.net/fancybox/2.1.5/fancybox_sprite.png";var BASE_URL=PROTOCOL_USER_OVERRIDE+document.location.href.split('/')[2];if(BASE_URL.indexOf('?')>0)BASE_URL=BASE_URL.split('?')[0];if(BASE_URL.indexOf('#')>0)BASE_URL=BASE_URL.split('#')[0];var SHOW_ERRORS=(typeof console!=="undefined"&&typeof DIGIOH_USE_CONSOLE!=="undefined"&&DIGIOH_USE_CONSOLE)||IS_DEV||IS_QA;var LIGHTBOX_GUID='';var CLIENT_GUID='';var KEEN_CLIENT='';var KEEN_CLIENT_2='';var WIDGET_DIV='';var CURRENT_IFRAME_SRC='';var SIDEBAR_ELEMENT_ID='';var CHILD_READY={};var GEO_IP={};var GEO_LOADED=false;var GEO_LOADING=false;var CLICK_SELECTORS=new Array();var HOVER_SELECTORS=new Array();var EXISTS_SELECTORS=new Array();var SCROLL_BOXES_ARR=new Array();var EXIT_BOXES_ARR=new Array();var TIME_BOXES_ARR=new Array();var LOADED_LIGHTBOXES=[];var ORIGINAL_ATTRIBUTES={};var KEEN_SCHEMA={};var LIGHTBOX_OPEN_TIME=0;var CURR_SCROLL_TOP=0;var TEASER_LIGHTBOX_GUIDS={};var FOCUSED_SIDEBAR_BANNER_GUIDS={};var PREVENT_SIDEBAR_CLOSE_GUIDS={};var ELIGIBLE_SIDEBAR_CLOSE_SCROLL_GUIDS={};var ELIGIBLE_SIDEBAR_CLOSE_SCROLL_SIDS={};var IS_REDIRECTING_PARENT=false;var IS_PREVIEW_EVENT=false;var CURR_TIME=0;var WAS_IMPRESSION_REGISTERED={};var WAS_REDIRECT_REGISTERED={};var WAS_SUBMIT_REGISTERED={};var WAS_DOWNLOAD_REGISTERED={};var WAS_CUSTOM_EVENT_REGISTERED={};var LIGHTBOX_TO_VARIATION_MAP={};var PRELOADED_LIGHTBOXES=[];var PRELOADED_LIGHTBOXES_LOADED=[];var TERMINATED_LIGHTBOXES={};var EFFECTS=DIGIOH_LIGHTBOX_EFFECTS;var CONDITION_SELECTOR_BOXES_MAP={};var SIDEBAR_CLOSE_MAP={};var BANNER_CLOSE_MAP={};var LOADED_BOX_DOM_ID_MAP={};var MOBILE_SCROLL_TOP_MAP={};var COOKIES_DISABLED=false;var DIGIOH_IDENTITY_CHILD_IFRAME=null;var DIGIOH_IS_READY=false;var CONDITIONS_OUTPUT={};var jqWin;var jqDoc;var body;var TS_EVAL_PREV={};var SS_EVAL_PREV={};var IDLE_PERIOD=5;var IDLE_INTERVAL=0;var TOTAL_INTERVAL=0;var IDLE_TIME=0;var TOTAL_TIME=0;var ERROR_LOG_TEMP_ARR=[];var AB_BOXES_TAKE_MAP={};var AB_BOXES_SKIP_MAP={};var BLIP_ARR=[];var BLIP_MATCHED=-1;var FirebaseRef=null;var IsFirebaseRefSet=false;var FirebaseTimeOffset=0;var IsFirebaseTimeSet=false;var IsFirebaseLoaded=false;var AfterDomLoadedHasRun=false;var FANCY_REPOSITION_LOCKED={};var CURRENT_PAGE_DIMS_RESPONSIVE={};var CURRENT_PAGE_DIMS={};var CURRENT_PAGE={};var ANALYTICS_JSONP_RESPONSE={};var INIT_DEPENDENT_SCRIPTS_HAS_RUN=false;var IS_LIGHTBOX_CLOSING={};var isEmbedInlineLightboxConditionsFormsFinished=false;var DIGIOH_LIGHTBOX_INLINE_DISPLAYED=[];var TEXT_ERROR_LOG_ARR=[];if(typeof DIGIOH_LIGHTBOX_NAMES==='undefined'){DIGIOH_LIGHTBOX_NAMES={};}
if(typeof DIGIOH_LIGHTBOX_IDS==='undefined'){DIGIOH_LIGHTBOX_IDS={};}
if(typeof DIGIOH_LIGHTBOX_TEASER_PRELOAD_ARR==='undefined'){DIGIOH_LIGHTBOX_TEASER_PRELOAD_ARR=[];}
if(typeof DIGIOH_LIGHTBOX_TEASER_FOLLOW_ME_ARR==='undefined'){DIGIOH_LIGHTBOX_TEASER_FOLLOW_ME_ARR=[];}
if(typeof DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR==='undefined'){DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR=[];}
if(typeof DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR==='undefined'){DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR=[];}
if(typeof DIGIOH_LIGHTBOX_INLINE_DEPENDENT_ARR==='undefined'){DIGIOH_LIGHTBOX_INLINE_DEPENDENT_ARR=[];}
function hideEmbedDivContainer(){var wd=document.getElementById(VENDOR_GUID);if(wd!==null)wd.style.display='none';}
function appendFbDigiohCss(){var h=document.head||document.getElementsByTagName('head')[0];var l=document.createElement('link');l.type='text/css';l.rel='stylesheet';l.media='screen';l.href=DIGIOH_API.CONFIG.BOX_BASE_URL+'/static/fb_lightbox.2.1.5.css'+'?cb='+DIGIOH_CACHE_VERSION;h.appendChild(l);}
function preloadEffectsImages(){if(typeof DIGIOH_EFFECTS_IMAGE_CACHE_ARR!=="undefined"&&DIGIOH_EFFECTS_IMAGE_CACHE_ARR.length>0){var preloadedImages=new Array();for(var i=0;i<DIGIOH_EFFECTS_IMAGE_CACHE_ARR.length;i++){preloadedImages[i]=new Image();preloadedImages[i].src=DIGIOH_API.CONFIG.S3_BASE_URL+"/vendors/"+VENDOR_GUID+"/uploads/"+DIGIOH_EFFECTS_IMAGE_CACHE_ARR[i];}
var preloadedCloseButton=new Image();preloadedCloseButton.src=CLOSE_BUTTON_URL;}}
function preloadSettingsImages(){if(typeof DIGIOH_SETTINGS_IMAGE_CACHE_ARR!=="undefined"&&DIGIOH_SETTINGS_IMAGE_CACHE_ARR.length>0){var preloadedImages=new Array();for(var i=0;i<DIGIOH_SETTINGS_IMAGE_CACHE_ARR.length;i++){preloadedImages[i]=new Image();preloadedImages[i].src=DIGIOH_API.CONFIG.S3_BASE_URL+"/vendors/"+VENDOR_GUID+"/uploads/"+DIGIOH_SETTINGS_IMAGE_CACHE_ARR[i];}}}
var generateGuidWithTimestamp=function(){var ts=new Date().getTime();return generateGuid()+'-'+ts;}
var generateGuid=function(){var uuid='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16);});return uuid;}
function loadClientGuid(){try{if(!DIGIOH_STORAGE.data.hasOwnProperty("__bxcid")||typeof DIGIOH_STORAGE.data["__bxcid"]!=='string'||DIGIOH_STORAGE.data["__bxcid"].length<7){DIGIOH_STORAGE.data["__bxcid"]=generateGuidWithTimestamp();}
CLIENT_GUID=DIGIOH_STORAGE.data["__bxcid"];}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"loadClientGuid");}}
var getClientGuid=function(){return CLIENT_GUID;};var removeOldCookieData=function(foundData){try{var cookieVal='';if(!foundData){cookieVal=DIGIOH_COOKIE.get(DIGIOH_VENDOR_GUID);if(cookieVal==null||cookieVal.length==0){cookieVal=DIGIOH_COOKIE.get('xdibx');}
if(cookieVal!==null&&cookieVal.length>0&&cookieVal.indexOf("{")>=0&&cookieVal.indexOf("{")<=2){var json=JSON.parse(cookieVal);if(typeof json==='object'&&json!==null&&json.hasOwnProperty('__bxcurr')){DIGIOH_STORAGE.data=json;DIGIOH_STORAGE.set();foundData=true;}}}
if(!foundData){DIGIOH_STORAGE.data={};cookieVal=DIGIOH_COOKIE.get("__bxcurr");if(cookieVal!==null&&cookieVal.length>0&&cookieVal.indexOf("{")>=0&&cookieVal.indexOf("{")<=2){DIGIOH_STORAGE.data["__bxcurr"]=JSON.parse(cookieVal);}else if(cookieVal!==null&&cookieVal){DIGIOH_STORAGE.data["__bxcurr"]=cookieVal;}else{DIGIOH_STORAGE.data["__bxcurr"]={};}
cookieVal=DIGIOH_COOKIE.get("__bxprev");if(cookieVal!==null&&cookieVal.length>0&&cookieVal.indexOf("{")>=0&&cookieVal.indexOf("{")<=2){DIGIOH_STORAGE.data["__bxprev"]=JSON.parse(cookieVal);}else if(cookieVal!==null&&cookieVal){DIGIOH_STORAGE.data["__bxprev"]=cookieVal;}else{DIGIOH_STORAGE.data["__bxprev"]={};}
cookieVal=DIGIOH_COOKIE.get("__bxevents");if(cookieVal!==null&&cookieVal.length>0&&cookieVal.indexOf("{")>=0&&cookieVal.indexOf("{")<=2){DIGIOH_STORAGE.data["__bxevents"]=JSON.parse(cookieVal);}else if(cookieVal!==null&&cookieVal){DIGIOH_STORAGE.data["__bxevents"]=cookieVal;}else{DIGIOH_STORAGE.data["__bxevents"]={};}
cookieVal=DIGIOH_COOKIE.getEncoded("__bxcid");if(cookieVal!==null&&cookieVal.length>0){DIGIOH_STORAGE.data["__bxcid"]=cookieVal;DIGIOH_API.log('found existing client_id: '+cookieVal);}else{DIGIOH_STORAGE.data["__bxcid"]=generateGuidWithTimestamp();DIGIOH_API.log('generated new client_id: '+DIGIOH_STORAGE.data["__bxcid"]);}
DIGIOH_STORAGE.set();}
if(DIGIOH_STORAGE.storage_type==='local_storage'||(DIGIOH_STORAGE.storage_type==='cross_domain'&&DIGIOH_CROSS_DOMAIN.isWorking)){if(DIGIOH_COOKIE.get(DIGIOH_VENDOR_GUID,true)!==null)
DIGIOH_COOKIE.erase(DIGIOH_VENDOR_GUID);if(DIGIOH_COOKIE.get('xdibx',true)!==null)
DIGIOH_COOKIE.erase('xdibx');}
if(!DIGIOH_STORAGE.data.hasOwnProperty("__bxcurr")){DIGIOH_STORAGE.data["__bxcurr"]={};}
if(!DIGIOH_STORAGE.data.hasOwnProperty("__bxprev")){DIGIOH_STORAGE.data["__bxprev"]={};}
if(!DIGIOH_STORAGE.data.hasOwnProperty("__bxevents")){DIGIOH_STORAGE.data["__bxevents"]={};}
if(!DIGIOH_STORAGE.data.hasOwnProperty("__bxcid")){DIGIOH_STORAGE.data["__bxcid"]=generateGuidWithTimestamp();}
DIGIOH_COOKIE.erase('__bxcurr');DIGIOH_COOKIE.erase('__bxprev');DIGIOH_COOKIE.erase('__bxevents');DIGIOH_COOKIE.erase('__bxcid');DIGIOH_COOKIE.erase('__bxtest');DIGIOH_COOKIE.erase('__lbxcurr');DIGIOH_COOKIE.erase('__lbxprev');DIGIOH_COOKIE.erase('__lbxevents');DIGIOH_COOKIE.erase('__lbxcid');if(DIGIOH_STORAGE.storage_type==='local_storage'||DIGIOH_STORAGE.storage_type==='cross_domain'){DIGIOH_COOKIE.erase('xdibx');}
afterDomLoadedAndStorageLoadedAndPostMessageInit();}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"removeOldCookieData");afterDomLoadedAndStorageLoadedAndPostMessageInit();}};var loadAllClientSideDataFromClientStorage=function(){try{DIGIOH_API.log('loadAllClientSideDataFromClientStorage() --> storage_type = '+DIGIOH_STORAGE.storage_type);DIGIOH_STORAGE.get(function(val){var foundData=false;var useLZ=(typeof USE_LZ==='undefined'||USE_LZ==true);if(typeof val==='string'&&val.length>7){var jsonStr=val;if(useLZ||val.indexOf('{')<0){jsonStr=LZString.decompressFromBase64(val);}
if(jsonStr&&jsonStr.indexOf('{')===0){DIGIOH_API.log('compressed / json : '+val.length+' / '+jsonStr.length);var json=JSON.parse(jsonStr);if(typeof json==='object'&&json!==null&&json.hasOwnProperty('__bxcurr')){DIGIOH_STORAGE.data=json;foundData=true;DIGIOH_API.log(DIGIOH_STORAGE.data);}}}
removeOldCookieData(foundData);});}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"loadAllClientSideDataFromClientStorage");removeOldCookieData(false);}};function setIsCrossDomainStorageWorking(cnt){try{var testVal='abcxyz';DIGIOH_CROSS_DOMAIN.setManual('__bxtest',testVal);DIGIOH_CROSS_DOMAIN.getManual('__bxtest',function(val){DIGIOH_CROSS_DOMAIN.isWorkingFinished=true;var useLZ=(typeof USE_LZ==='undefined'||USE_LZ==true);if(typeof val==='string'&&useLZ&&LZString.decompressFromBase64(val)===testVal){DIGIOH_CROSS_DOMAIN.isWorking=true;}else if(typeof val==='string'&&!useLZ&&val===testVal){DIGIOH_CROSS_DOMAIN.isWorking=true;}else{DIGIOH_CROSS_DOMAIN.isWorking=false;}
if(!DIGIOH_CROSS_DOMAIN.isWorking&&cnt<5){if(useLZ){DIGIOH_API.log('setIsCrossDomainStorageWorking failed: cnt='+cnt+', val='+LZString.decompressFromBase64(val)+', testVal='+testVal);}else{DIGIOH_API.log('setIsCrossDomainStorageWorking failed: cnt='+cnt+', val='+val+', testVal='+testVal);}
var newCnt=cnt+1;setTimeout(setIsCrossDomainStorageWorking,1000,newCnt);}else{DIGIOH_API.log('setIsCrossDomainStorageWorking('+cnt+') ==> succeeded');loadAllClientSideDataFromClientStorage();}});}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"setIsCrossDomainStorageWorking");DIGIOH_CROSS_DOMAIN.isWorking=false;DIGIOH_API.log('setIsCrossDomainStorageWorking exception: cnt='+cnt);loadAllClientSideDataFromClientStorage();}}
var areCookiesDisabled=function(){try{if(COOKIES_DISABLED){return true;}
DIGIOH_COOKIE.setDecoded('__bxtest','xyz');var cv=DIGIOH_COOKIE.getEncoded('__bxtest');if(cv!==null&&cv==='xyz'){COOKIES_DISABLED=false;DIGIOH_COOKIE.erase('__bxtest');return false;}else{COOKIES_DISABLED=true;return true;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"areCookiesDisabled");COOKIES_DISABLED=true;return true;}};function setKeenSchemaAfterDevice(){if(typeof KEEN_SCHEMA==='object'&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.primaryHardwareType){KEEN_SCHEMA.device_atlas={primaryHardwareType:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.primaryHardwareType,isApp:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.isApp,isTablet:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.isTablet,isMobilePhone:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.isMobilePhone,model:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.model,vendor:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.vendor,touchScreen:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.touchScreen,osName:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.osName,osVersion:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.osVersion,browserName:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.browserName,browserVersion:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.browserVersion,osAndroid:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.osAndroid,osiOs:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.osiOs,device_source:DIGIOH_LIGHTBOX_ANALYTICS.VARS.device_source};}}
function setKeenSchemaAfterGeo(){if(typeof KEEN_SCHEMA==='object'&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.ip_address&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.ip_address.length>=7){KEEN_SCHEMA.geoip={ip_address:DIGIOH_LIGHTBOX_ANALYTICS.VARS.ip_address,continent_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.continent,country_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.country,country_name:DIGIOH_LIGHTBOX_ANALYTICS.VARS.country_name,region_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.state,region_name:DIGIOH_LIGHTBOX_ANALYTICS.VARS.region_name,city:DIGIOH_LIGHTBOX_ANALYTICS.VARS.city,zipcode:DIGIOH_LIGHTBOX_ANALYTICS.VARS.zipcode,metro_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.metro_code,time_zone:DIGIOH_LIGHTBOX_ANALYTICS.VARS.time_zone,area_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.area_code,latitude:DIGIOH_LIGHTBOX_ANALYTICS.VARS.latitude,longitude:DIGIOH_LIGHTBOX_ANALYTICS.VARS.longitude,geo_source:DIGIOH_LIGHTBOX_ANALYTICS.VARS.geo_source,blip_matched:BLIP_MATCHED};}}
function tryLoadMaxmind(){try{var frameSrc=DIGIOH_API.CONFIG.BOX_BASE_URL+'/static/maxmind.html#'+encodeURIComponent(document.location.href);body.append("<iframe title='maxmind iframe' src='"+frameSrc+"' sandbox='allow-same-origin allow-top-navigation allow-scripts' width='1' height='1' frameborder='0' scrolling='no' style='position: absolute; right: -10px; top: -10px;'></iframe>");}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"tryLoadMaxmind");}}
function checkDocumentReadyState(){try{if(document.readyState==="complete"||document.readyState==="loaded"||document.readyState==="interactive"){logger("STOPWATCH (DOMContentLoaded) - "+Math.ceil((new Date().getTime()-STOPWATCH)/1000));afterDomLoaded();}else{setTimeout(checkDocumentReadyState,250);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"checkDocumentReadyState");}}
function afterScriptLoaded(){try{cfPageview();DIGIOH_API.trySessionPrint();DIGIOH_STORAGE.setStorageType();initKeen();logger("STOPWATCH (afterScriptLoaded) - "+Math.ceil((new Date().getTime()-STOPWATCH)/1000));if(localStorage.getItem('digioh_print_all')==='true'){DIGIOH_API.printAll();}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"afterScriptLoaded");}
try{JQUERY_DIGIOH(document).ready(function(){logger("STOPWATCH ($(document).ready) - "+Math.ceil((new Date().getTime()-STOPWATCH)/1000));afterDomLoaded();});checkDocumentReadyState();if(typeof ClientJsDomMaxWaitSeconds==='number'&&ClientJsDomMaxWaitSeconds>0){setTimeout(function(){logger("STOPWATCH (ClientJsDomMaxWaitSeconds) - "+Math.ceil((new Date().getTime()-STOPWATCH)/1000));afterDomLoaded();},ClientJsDomMaxWaitSeconds*1000);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"afterScriptLoaded");}}
function afterDomLoaded(){try{if(!AfterDomLoadedHasRun){AfterDomLoadedHasRun=true;logger("STOPWATCH (afterDomLoaded) - "+Math.ceil((new Date().getTime()-STOPWATCH)/1000));initPostMessageReceiver();if(DIGIOH_STORAGE.storage_type==='cross_domain'){DIGIOH_CROSS_DOMAIN.callbacks['999999999']=function(val){logger('identityChildReady999999999: '+val);setIsCrossDomainStorageWorking(0);};createIdentityIframe();setTimeout(function(){if(!DIGIOH_CROSS_DOMAIN.isWorkingFinished){logger('Calling setIsCrossDomainStorageWorking using short circuit!!!!');setIsCrossDomainStorageWorking(0);}else{logger('DIGIOH_CROSS_DOMAIN.isWorkingFinished: '+DIGIOH_CROSS_DOMAIN.isWorkingFinished.toString()+' (skipping short circuit)');}},2000);}
else if(DIGIOH_STORAGE.storage_type==='local_storage'){loadAllClientSideDataFromClientStorage();}
else if(DIGIOH_STORAGE.storage_type==='cookie'){loadAllClientSideDataFromClientStorage();}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"afterDomLoaded");}}
function afterDomLoadedAndStorageLoadedAndPostMessageInit(){try{loadClientGuid();jqWin=JQUERY_DIGIOH(window);jqDoc=JQUERY_DIGIOH(document);body=JQUERY_DIGIOH('body');if(JQUERY_DIGIOH('.digioh-lightbox-container').length){WIDGET_DIV=JQUERY_DIGIOH("div.digioh-lightbox-container:first");WIDGET_DIV.hide();}
preloadEffectsImages();preloadSettingsImages();initBugsnag();DIGIOH_LIGHTBOX_ANALYTICS=new DIGIOH_ANALYTICS(JQUERY_DIGIOH,SHOW_ERRORS,VENDOR_GUID,IS_PREVIEW,BASE_URL);initDigiohVars();if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.ip_address!==''){if(JQUERY_DIGIOH.inArray(DIGIOH_LIGHTBOX_ANALYTICS.VARS.ip_address,BLIP_ARR)>-1){BLIP_MATCHED=1;}else{BLIP_MATCHED=0;}}
analyticsGeoDeviceCDP();}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"afterDomLoadedAndStorageLoadedAndPostMessageInit");}}
function embedInlineLightboxAlwaysForms(){try{for(var i=0;i<DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR.length;i++){if(!DIGIOH_API.contains(DIGIOH_LIGHTBOX_INLINE_DISPLAYED,DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR[i])&&!AB_BOXES_SKIP_MAP.hasOwnProperty(DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR[i])){embedInlineLightboxForm(DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR[i]);}}
logger('embedInlineLightboxAlwaysForms: '+DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR.length);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"embedInlineLightboxAlwaysForms");}}
var embedInlineLightboxForm=async function(lid){try{if(!IS_PREVIEW){if(EFFECTS[lid].inline.position_using=='jquery_selector'){var jquery_selector=EFFECTS[lid].inline.jquery_selector;if(!EFFECTS[lid].inline.jquery_selector||!JQUERY_DIGIOH(EFFECTS[lid].inline.jquery_selector).length){logger('embedInlineLightboxForm: jquery_selector not found for '+lid+'('+jquery_selector+') short circuit return');return false;}}
else if(EFFECTS[lid].inline.position_using=='smart_tag'||EFFECTS[lid].inline.position_using=='google_amp'){var smart_tag='';if(var_id===lid){smart_tag='#variation-inline-form-'+var_id;}else{smart_tag='#lightbox-inline-form-'+lid;}
if(!JQUERY_DIGIOH(smart_tag).length){logger('embedInlineLightboxForm: smart_tag not found for '+lid+'('+smart_tag+') short circuit return');return false;}}}
var bpRes=await loadBreakpointsFile(lid);logger('embedInlineLightboxForm breakpoint_file_loaded, bpRes = '+bpRes);setPixelThreshold(lid,true);if(EFFECTS[lid].inline.removal_rules==='remove'){if(DIGIOH_LIGHTBOX_ANALYTICS.getEventCountByLightbox("submit",lid)>0||DIGIOH_LIGHTBOX_ANALYTICS.getEventCountByLightbox("redirect",lid)>0){logger('DIGIOH: Inline Form - Removal Rules - remove after conversion - '+lid);return false;}}
var var_id='';var orig_lid=lid;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lid)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[lid];var_id=lid;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lid];}
if(var_id!==''&&var_id.length>7){lid=var_id;}
if(!IS_PREVIEW||IS_DEV){if(doesInlineLightboxHaveCustomJsType(lid,'display')||doesInlineLightboxHaveCustomJsType(lid,'all')){var customJsAppsResult=runCustomJsLinkedApps('BeforeDisplay',orig_lid,var_id);logger('JS_PARENT_APPS.runCustomJsBeforeLightboxDisplay - '+lid);if(customJsAppsResult===false){logger('JS_PARENT_APPS.runCustomJsBeforeLightboxDisplay - prevented lightbox '+lid+' from being displayed');return false;}
var customJsSuperResult=DIGIOH_CUSTOM_JS_SUPER.runCustomJsBeforeLightboxDisplay(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_GLOBAL.runCustomJsBeforeLightboxDisplay - '+lid);if(!customJsSuperResult){logger('JS_GLOBAL.runCustomJsBeforeLightboxDisplay - prevented lightbox '+lid+' from being displayed');return false;}
var customJsResult=DIGIOH_CUSTOM_JS.runCustomJsBeforeLightboxDisplay(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_PARENT.runCustomJsBeforeLightboxDisplay - '+lid);if(!customJsResult){logger('JS_PARENT.runCustomJsBeforeLightboxDisplay - prevented lightbox '+lid+' from being displayed');return false;}}}
var style='';var pref=getPagePref(lid);var is_responsive=false;if(EFFECTS[lid].hasOwnProperty(pref+'responsive')&&EFFECTS[lid][pref+'responsive'].use){is_responsive=true;}else{style+="width:"+getBoxWidth(lid)+"px;";style+="height:"+getBoxHeight(lid)+"px;";}
style+="z-index:9938010;";if(EFFECTS[lid].inline.border.style==='none'||EFFECTS[lid].inline.border.width==='0'||EFFECTS[lid].inline.border.width===0){style+='border-style:none;';style+='border-width:0px;';}else{style+='border-color:'+EFFECTS[lid].inline.border.color+';';style+='border-style:'+EFFECTS[lid].inline.border.style+';';style+='border-width:'+EFFECTS[lid].inline.border.width+'px;';style+='border-radius:'+EFFECTS[lid].inline.border.radius+'px;';}
var resPreloadIframe=false;if(IS_PREVIEW){style+='position:absolute;';if(is_responsive){style+='top:0;';style+='left:0;';}else{style+='top:50%;';style+='left:50%;';style+='margin-top:'+(1-Math.round(getBoxHeight(lid)/2))+'px;';style+='margin-left:'+(1-Math.round(getBoxWidth(lid)/2))+'px;';}
if(EFFECTS[lid].inline.css.indexOf(':')>0&&EFFECTS[lid].inline.css.indexOf(';')>0){style+=EFFECTS[lid].inline.css;}
resPreloadIframe=await preloadIframe(lid,style,'','','');}else if(EFFECTS[lid].inline.position_using=='absolute'||EFFECTS[lid].inline.position_using=='fixed'){style+='position:'+EFFECTS[lid].inline.position_using+';';if(EFFECTS[lid].inline.position.top>0||EFFECTS[lid].inline.position.bottom==0){style+='top:'+EFFECTS[lid].inline.position.top+'px;';}else{style+='bottom:'+EFFECTS[lid].inline.position.bottom+'px;';}
if(EFFECTS[lid].inline.position.left>0||EFFECTS[lid].inline.position.right==0){style+='left:'+EFFECTS[lid].inline.position.left+'px;';}else{style+='right:'+EFFECTS[lid].inline.position.right+'px;';}
if(EFFECTS[lid].inline.css.indexOf(':')>0&&EFFECTS[lid].inline.css.indexOf(';')>0){style+=EFFECTS[lid].inline.css;}
resPreloadIframe=await preloadIframe(lid,style,'','','');}else if(EFFECTS[lid].inline.position_using=='jquery_selector'){var jquery_selector=EFFECTS[lid].inline.jquery_selector;var jquery_method=EFFECTS[lid].inline.jquery_method;var clear='';if(!JQUERY_DIGIOH(jquery_selector).length){logger('embedInlineLightboxForm: jquery_selector not found for '+lid+'('+jquery_selector+')');return false;}
if(EFFECTS[lid].inline.margin.top>0)
style+='margin-top:'+EFFECTS[lid].inline.margin.top+'px;';if(EFFECTS[lid].inline.margin.right>0)
style+='margin-right:'+EFFECTS[lid].inline.margin.right+'px;';if(EFFECTS[lid].inline.margin.bottom>0)
style+='margin-bottom:'+EFFECTS[lid].inline.margin.bottom+'px;';if(EFFECTS[lid].inline.margin.left>0)
style+='margin-left:'+EFFECTS[lid].inline.margin.left+'px;';if(EFFECTS[lid].inline.float!=='none'&&EFFECTS[lid].inline.float!==''){style+='float:'+EFFECTS[lid].inline.float+';';if(EFFECTS[lid].inline.clear!=='none'&&EFFECTS[lid].inline.clear!==''){clear='<div style="float:none;clear:'+EFFECTS[lid].inline.clear+';"></div>';}}
if(EFFECTS[lid].inline.css.indexOf(':')>0&&EFFECTS[lid].inline.css.indexOf(';')>0){style+=EFFECTS[lid].inline.css;}
resPreloadIframe=await preloadIframe(lid,style,jquery_selector,jquery_method,clear);}else if(EFFECTS[lid].inline.position_using=='smart_tag'||EFFECTS[lid].inline.position_using=='google_amp'){var jquery_selector='';if(var_id===lid){jquery_selector='#variation-inline-form-'+var_id;}else{jquery_selector='#lightbox-inline-form-'+lid;}
if(!JQUERY_DIGIOH(jquery_selector).length){return false;}
var jquery_method=EFFECTS[lid].inline.jquery_method||'append';style+='margin-top:'+EFFECTS[lid].inline.margin.top+'px;';style+='margin-right:'+EFFECTS[lid].inline.margin.right+'px;';style+='margin-bottom:'+EFFECTS[lid].inline.margin.bottom+'px;';style+='margin-left:'+EFFECTS[lid].inline.margin.left+'px;';if(EFFECTS[lid].inline.css.indexOf(':')>0&&EFFECTS[lid].inline.css.indexOf(';')>0){style+=EFFECTS[lid].inline.css;}
resPreloadIframe=await preloadIframe(lid,style,jquery_selector,jquery_method,'');}else if(EFFECTS[lid].inline.position_using=='custom_function'){resPreloadIframe=await preloadIframe(lid,style,'','','');}else{logger('found no effects for inline form');}
logger('embedInlineLightboxForm breakpoint_file_preload_iframe_complete, async resPreloadIframe = '+resPreloadIframe);return resPreloadIframe;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"embedInlineLightboxForm");logger('DIGIOH::::embedInlineLightboxForm('+lid+') ==> FAIL:EXCEPTION');return false;}}
function initDigiohVars(){try{if(typeof DIGIOH_VARS==='undefined'){DIGIOH_VARS={};}
try{var useLZ=(typeof USE_LZ==='undefined'||USE_LZ==true);if(typeof DIGIOH_BLIP_LZ!=='undefined'&&useLZ){BLIP_ARR=JSON.parse(LZString.decompressFromBase64(DIGIOH_BLIP_LZ));}}
catch(e1){BLIP_ARR=[];logErrorText("DIGIOH_BLIP_LZ_INITDIGIOHVARS","DIGIOH_BLIP_LZ_INITDIGIOHVARS");}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initDigiohVars");}}
function initDependentScripts(){try{if(!INIT_DEPENDENT_SCRIPTS_HAS_RUN){INIT_DEPENDENT_SCRIPTS_HAS_RUN=true;initAnalytics();initFancyboxEffects();runCustomJsLinkedApps('AfterDocReady','','');customJsSuperOnDocumentReadyCallback();}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initDependentScripts");}}
function runCustomJsLinkedApps(trigger,orig_lid,var_id){if(typeof CJSAPPS_PARENT!=='undefined'&&CJSAPPS_PARENT!==null&&typeof CJSAPPS_ARR!=='undefined'&&CJSAPPS_ARR!==null&&CJSAPPS_ARR.length>0){for(var i=0;i<CJSAPPS_ARR.length;i++){var appId=CJSAPPS_ARR[i];if(CJSAPPS_PARENT.hasOwnProperty(appId)&&CJSAPPS_PARENT[appId].hasOwnProperty(trigger)){var res=false;if(trigger=='AfterDocReady')
res=CJSAPPS_PARENT[appId][trigger](window.DIGIOH_API,window,document,JQUERY_DIGIOH,getCustomJsMetadata(''));else
res=CJSAPPS_PARENT[appId][trigger](window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('CJSAPPS_PARENT: '+appId+', '+trigger);logger(res);if(res===false)
return false;}}
return true;}}
var customJsSuperOnDocumentReadyCallback=function(){try{var customJsSuperResult=true;if(!IS_PREVIEW||IS_DEV){customJsSuperResult=DIGIOH_CUSTOM_JS_SUPER.runCustomJsOnDocumentReady(window.DIGIOH_API,window,document,JQUERY_DIGIOH,getCustomJsMetadata(''));logger('JS_GLOBAL.runCustomJsOnDocumentReady()');}
if(typeof customJsSuperResult==='string'&&customJsSuperResult.indexOf('async_retry')===0){logger('JS_GLOBAL.customJsSuperOnDocumentReadyCallback() - async_retry - retrying in 300ms...');setTimeout(function(){customJsSuperOnDocumentReadyCallback();},300);}else if(typeof customJsSuperResult==='string'&&customJsSuperResult.indexOf('async_callback')===0){logger('JS_GLOBAL.customJsSuperOnDocumentReadyCallback() - async_callback - waiting for callback...');return;}else{logger('JS_GLOBAL.customJsSuperOnDocumentReadyCallback()');customJsSuperOnDocumentReadyComplete(customJsSuperResult);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"customJsSuperOnDocumentReadyCallback");}}
function customJsSuperOnDocumentReadyComplete(customJsSuperResult){try{logger("STOPWATCH (customJsSuperOnDocumentReadyComplete) - "+Math.ceil((new Date().getTime()-STOPWATCH)/1000));if(typeof customJsSuperResult!=='boolean'||customJsSuperResult===true){customJsOnDocumentReadyCallback();}else{logger('JS_GLOBAL.runCustomJsOnDocumentReady() returned false, execution of JS has been stopped.  Checking for embedded inline forms...');setEligibleInlineLightboxesAfterDocReadyFalseCustomJS();if(DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR.length>0||DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR.length>0){initABSplitTests();initVariations();initLightboxActivity();buildConditionSelectorsToBoxesMap();embedInlineLightboxAlwaysForms();embedInlineLightboxConditionsForms();}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"customJsSuperOnDocumentReadyComplete");}}
var customJsOnDocumentReadyCallback=function(){try{var customJsResult=true;if(!IS_PREVIEW||IS_DEV){customJsResult=DIGIOH_CUSTOM_JS.runCustomJsOnDocumentReady(window.DIGIOH_API,window,document,JQUERY_DIGIOH,getCustomJsMetadata(''));logger('DIGIOH: DIGIOH_CUSTOM_JS.runCustomJsOnDocumentReady()');}
if(typeof customJsResult==='string'&&customJsResult.indexOf('async_retry')===0){logger('DIGIOH: customJsOnDocumentReadyCallback() - async_retry - retrying in 300ms...');setTimeout(function(){customJsOnDocumentReadyCallback();},300);}else if(typeof customJsResult==='string'&&customJsResult.indexOf('async_callback')===0){logger('DIGIOH: customJsOnDocumentReadyCallback() - async_callback - waiting for callback...');return;}else{logger('DIGIOH: customJsOnDocumentReadyCallback()');customJsOnDocumentReadyComplete(customJsResult);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"customJsOnDocumentReadyCallback");}}
function customJsOnDocumentReadyComplete(customJsResult){try{logger("STOPWATCH (customJsOnDocumentReadyComplete) - "+Math.ceil((new Date().getTime()-STOPWATCH)/1000));if(typeof customJsResult!=='boolean'||customJsResult===true){initConditions();}else{logger('DIGIOH_CUSTOM_JS.runCustomJsOnDocumentReady() returned false, execution of JS has been stopped.  Checking for embedded inline forms...');setEligibleInlineLightboxesAfterDocReadyFalseCustomJS();if(DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR.length>0||DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR.length>0){initABSplitTests();initVariations();initLightboxActivity();buildConditionSelectorsToBoxesMap();embedInlineLightboxAlwaysForms();embedInlineLightboxConditionsForms();}}
DIGIOH_IS_READY=true;JQUERY_DIGIOH(document).trigger('DIGIOH_CONDITIONS_FINISHED',{});}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"customJsOnDocumentReadyComplete");}}
function setEligibleInlineLightboxesAfterDocReadyFalseCustomJS(){try{var NEW_ALWAYS_ARR=[];for(var i=0;i<DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR.length;i++){cjs=EFFECTS[DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR[i]].inline.custom_js_rules;if(cjs!=='all'&&cjs.indexOf('ready')===-1){NEW_ALWAYS_ARR.push(DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR[i]);}}
DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR=NEW_ALWAYS_ARR;var NEW_CONDITIONS_ARR=[];var cjs='';for(var i=0;i<DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR.length;i++){cjs=EFFECTS[DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR[i]].inline.custom_js_rules;if(cjs!=='all'&&cjs.indexOf('ready')===-1){NEW_CONDITIONS_ARR.push(DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR[i]);}}
DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR=NEW_CONDITIONS_ARR;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"setEligibleInlineLightboxesAfterDocReadyFalseCustomJS");}}
function doesInlineLightboxHaveCustomJsType(lid,cjsType){try{var idxArrAlways=JQUERY_DIGIOH.inArray(lid,DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR);var idxArrConditions=JQUERY_DIGIOH.inArray(lid,DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR);var cjsVal='';if(idxArrAlways>=0){cjsVal=EFFECTS[DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR[idxArrAlways]].inline.custom_js_rules;}else if(idxArrConditions>=0){cjsVal=EFFECTS[DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR[idxArrConditions]].inline.custom_js_rules;}
var foundType=(cjsVal.indexOf(cjsType)>=0);return foundType;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"doesInlineLightboxHaveCustomJsType");}}
function cleanTextForLogging(txt){try{if(typeof txt==='string'){return txt.trim().split(' ').join('_').toUpperCase().replace(/[^a-zA-Z0-9]/g,'');}else if(typeof txt==='number'){return(txt+'').trim();}else{return 'NA';}}catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"cleanTextForLogging");return txt;}}
function padStr(i){try{return(i<10)?("0"+i):(""+i);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"padStr");}}
function getAnalyticsEndpointAzure(test){try{if(typeof test!=='undefined'&&test){return PROTOCOL_USER_OVERRIDE+'lightboxapitest.azurewebsites.net';}
return DIGIOH_API.CONFIG.API_BASE_URL;}
catch(e){return DIGIOH_API.CONFIG.API_BASE_URL;}}
function analyticsGeoDeviceCDP(){try{if(IS_PREVIEW){initDependentScripts();}else{var vendorShortId=VENDOR_GUID||'empty';if(typeof DIGIOH_VENDOR_SHORT_ID!=='undefined'){vendorShortId=DIGIOH_VENDOR_SHORT_ID;}
var hostname='empty';if(window&&window.location&&window.location.hostname){hostname=window.location.hostname;}
var test=false;if(typeof CDP_VARS==='object'&&CDP_VARS&&CDP_VARS.hasOwnProperty('enabled')&&CDP_VARS.enabled===1&&JSON.stringify(DIGIOH_LIGHTBOX_CONDITIONS).indexOf('E_segments')>=0){if(!DIGIOH_API.CDP){DIGIOH_API.CDP={};}
DIGIOH_API.CDP.segments=[];getDIUID(vendorShortId,hostname,test,0);}
else{var url_geo_device=getAnalyticsEndpointAzure(test)+'/z9gd/'+vendorShortId+'/'+hostname+'/jsonp/z?cb='+(new Date().getTime());callGeoDeviceCDP(url_geo_device,'',{});tryInitGADigioh(false);}
if(DIGIOH_API.hasOwnProperty('analyticsRecipientSegments')){DIGIOH_API.analyticsRecipientSegments();}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"analyticsGeoDeviceCDP");initDependentScripts();}}
var tryInitGADigioh=function(send_pv,esp_id){try{if(typeof send_pv==='undefined'){send_pv=false;}
if(window.ga&&window.ga.create){DIGIOH_API.GoogleAnalytics.is_ga_universal=true;if(typeof CDP_VARS==='object'&&CDP_VARS&&CDP_VARS.hasOwnProperty('enabled')&&CDP_VARS.enabled===1&&CDP_VARS.ua_tracking_id){DIGIOH_API.GoogleAnalytics.trackerArr=window.ga.getAll();if(DIGIOH_API.GoogleAnalytics.trackerArr&&DIGIOH_API.GoogleAnalytics.trackerArr.length){for(var i=0;i<DIGIOH_API.GoogleAnalytics.trackerArr.length;i++){if(DIGIOH_API.GoogleAnalytics.trackerArr[i].get('trackingId')===CDP_VARS.ua_tracking_id){DIGIOH_API.GoogleAnalytics.tracker=DIGIOH_API.GoogleAnalytics.trackerArr[i];DIGIOH_CUSTOM_JS.log('DIGIOH: Using GA Account: '+DIGIOH_API.GoogleAnalytics.tracker.get('trackingId'));break;}}}}
else if(window.ga.getAll().length){DIGIOH_API.GoogleAnalytics.tracker=window.ga.getAll()[0];DIGIOH_CUSTOM_JS.log('DIGIOH: Using GA Account: '+DIGIOH_API.GoogleAnalytics.tracker.get('trackingId'));}
logger('DIGIOH: Using Google Universal Analytics');if(send_pv&&typeof CDP_VARS==='object'&&CDP_VARS&&CDP_VARS.hasOwnProperty('dimension')&&CDP_VARS.dimension){var extra={'nonInteraction':1};extra['dimension'+CDP_VARS.dimension]=DIGIOH_API.LIGHTBOX.DIGIOH_COOKIE.getEncoded("_diuid_")||top.localStorage.getItem("_diuid_");if(esp_id){extra['dimension'+CDP_VARS.dimension]+='||||'+esp_id;}
sendGAEvent('DIGIOH','Link User','Log DIUID to GA',1,extra);}}
else if(window._gaq&&typeof window._gaq._getAsyncTracker==='function'){DIGIOH_API.GoogleAnalytics.is_ga_classic=true;DIGIOH_API.GoogleAnalytics.tracker=window._gaq._getAsyncTracker();logger('DIGIOH: Using Google Classic Analytics');if(send_pv&&typeof CDP_VARS==='object'&&CDP_VARS&&CDP_VARS.hasOwnProperty('dimension')&&CDP_VARS.dimension){var extra={'nonInteraction':1};extra['dimension'+CDP_VARS.dimension]=DIGIOH_API.LIGHTBOX.DIGIOH_COOKIE.getEncoded("_diuid_")||top.localStorage.getItem("_diuid_");if(esp_id){extra['dimension'+CDP_VARS.dimension]+='||||'+esp_id;}
sendGAEvent('DIGIOH','Link User','Log DIUID to GA',1,extra);}}
else if(DIGIOH_API.GoogleAnalytics.num_checks<25){DIGIOH_API.GoogleAnalytics.num_checks++;setTimeout(function(){tryInitGADigioh(send_pv,esp_id);},500);}else{logger('DIGIOH: Unable to find Google Analytics (Classic or Universal)');}
logger('DIGIOH: tryInitGADigioh (internal)');}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"tryInitGADigioh");}};var sendGAEvent=function(cat,act,lab,val,extra,ua_tracking_id){try{var tempTracker='';if(typeof ua_tracking_id==='string'&&ua_tracking_id.length>4&&ua_tracking_id.indexOf('UA-')===0&&DIGIOH_API.GoogleAnalytics.is_ga_universal){if(!DIGIOH_API.GoogleAnalytics.tracker||DIGIOH_API.GoogleAnalytics.tracker.get('trackingId')!==ua_tracking_id){DIGIOH_API.GoogleAnalytics.trackerArr=window.ga.getAll();if(DIGIOH_API.GoogleAnalytics.trackerArr&&DIGIOH_API.GoogleAnalytics.trackerArr.length){for(var i=0;i<DIGIOH_API.GoogleAnalytics.trackerArr.length;i++){if(DIGIOH_API.GoogleAnalytics.trackerArr[i].get('trackingId')===ua_tracking_id){tempTracker=DIGIOH_API.GoogleAnalytics.trackerArr[i];if(!DIGIOH_API.GoogleAnalytics.tracker)
DIGIOH_API.GoogleAnalytics.tracker=DIGIOH_API.GoogleAnalytics.trackerArr[i];logger('DIGIOH: Using GA Account: '+tempTracker.get('trackingId'));break;}}}}}
if(!tempTracker&&DIGIOH_API.GoogleAnalytics.tracker)
tempTracker=DIGIOH_API.GoogleAnalytics.tracker;if(tempTracker){if(typeof extra==='object'&&extra!==null&&extra!=={}){if(typeof val!=='number'){val=1;}
tempTracker.send('event',cat,act,lab,val,extra);logger('DIGIOH: Sent GA Event: '+cat+', '+act+', '+lab+', '+val+', '+JSON.stringify(extra));}else if(typeof val!=='undefined'&&val!==null&&val!==''){tempTracker.send('event',cat,act,lab,val);logger('DIGIOH: Sent GA Event: '+cat+', '+act+', '+lab+', '+val);}else{tempTracker.send('event',cat,act,lab);logger('DIGIOH: Sent GA Event: '+cat+', '+act+', '+lab);}}
else{setTimeout(function(){sendGAEvent(cat,act,lab,val,extra,ua_tracking_id);},1000);logger('DIGIOH: Did NOT send GA Event, tracker not found!  Trying again in 1 second.');}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"sendGAEvent");}};function generateDIUID(){try{var cn='_diuid_';var diuid=top.localStorage.getItem(cn);if(!diuid){var cv="; "+top.document.cookie;var parts=cv.split("; "+cn+"=");if(parts.length==2){diuid=parts.pop().split(";").shift();if(diuid){top.localStorage.setItem(cn,diuid);}}}
if(!diuid){diuid='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16);});diuid=diuid.split('-').join('')+new Date().getTime();top.localStorage.setItem(cn,diuid);var d=new Date();d.setTime(d.getTime()+(3650*24*60*60*1000));var expires="expires="+d.toUTCString();top.document.cookie=cn+"="+diuid+";"+expires+";path=/";}
DIGIOH_API.GoogleAnalytics.is_new_diuid=true;logger('CODE_DIUID: '+diuid);return diuid;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"generateDIUID");}}
function getDIUID(vendorShortId,hostname,test,cnt){try{var diuid=DIGIOH_API.LIGHTBOX.DIGIOH_COOKIE.getEncoded("_diuid_")||top.localStorage.getItem("_diuid_");logger('getDIUID: '+diuid);var isCDPEmbedTypeBlankOrCode=(typeof CDP_VARS!=='object'||!CDP_VARS||!CDP_VARS.hasOwnProperty('embed_type')||!CDP_VARS.embed_type||CDP_VARS.embed_type==='code');if(!diuid&&cnt<20){if(isCDPEmbedTypeBlankOrCode){generateDIUID();getDIUID(vendorShortId,hostname,test,cnt+1);}else{setTimeout(function(){getDIUID(vendorShortId,hostname,test,cnt+1);},300);}}
else if(!diuid&&cnt>=20){generateDIUID();getDIUID(vendorShortId,hostname,test,cnt+1);}
else if(diuid){var send_pv=DIGIOH_API.GoogleAnalytics.is_new_diuid&&isCDPEmbedTypeBlankOrCode;var call_geo_device=true;if(typeof diuid==='string'&&diuid.length>30){logger('Found_DIUID: '+diuid);var cookieName="__cdp";var cookieVal=DIGIOH_STORAGE.data[cookieName];var cobj={};if(typeof cookieVal==='object'&&cookieVal!==null){cobj=cookieVal;}
else if(typeof cookieVal==='string'&&cookieVal.length>1&&cookieVal.indexOf('{')===0&&cookieVal.substring(cookieVal.length-1)==='}'){cobj=JSON.parse(cookieVal);}
logger(cobj);var customJsCdpEspIdResult='_empty_';if(!IS_PREVIEW||IS_DEV){customJsCdpEspIdResult=DIGIOH_CUSTOM_JS.runCustomJsCdpEspId(window.DIGIOH_API,window,document,JQUERY_DIGIOH,getCustomJsMetadata(''));logger('DIGIOH: DIGIOH_CUSTOM_JS.runCustomJsCdpEspId(): '+customJsCdpEspIdResult);}
var esp_param_val='';if(customJsCdpEspIdResult!==null&&customJsCdpEspIdResult!==undefined&&customJsCdpEspIdResult!==''&&customJsCdpEspIdResult!=='_empty_'){esp_param_val=customJsCdpEspIdResult.toString();}
else if(typeof CDP_VARS==='object'&&CDP_VARS&&CDP_VARS.hasOwnProperty('esp_params')&&CDP_VARS.esp_params&&CDP_VARS.esp_params.indexOf(',')>0){var items=CDP_VARS.esp_params.split(',');for(var i=0;i<items.length;i++){esp_param_val=getUrlParam(items[i].split(' ').join(''));if(esp_param_val){break;}}}
else if(typeof CDP_VARS==='object'&&CDP_VARS&&CDP_VARS.hasOwnProperty('esp_params')&&CDP_VARS.esp_params){esp_param_val=getUrlParam(CDP_VARS.esp_params);}
if(esp_param_val===null||esp_param_val===undefined)
esp_param_val='';if(typeof esp_param_val!=='string')
esp_param_val=esp_param_val.toString();if(typeof CDP_VARS==='object'&&CDP_VARS)
CDP_VARS.esp_param_val=esp_param_val;var update_esp_id=false;if(esp_param_val.length>0)
update_esp_id=true;var timestamp=new Date().getTime();if(cobj.hasOwnProperty("ts")&&cobj["ts"]&&timestamp-cobj["ts"]<=3600000){if(cobj.hasOwnProperty("segs")&&cobj["segs"]){DIGIOH_API.CDP.segments=cobj["segs"];DIGIOH_API.GET_ANALYTICS().VARS.segments=cobj["segs"];}
if(cobj.hasOwnProperty("esp_id")&&cobj["esp_id"]==esp_param_val){update_esp_id=false;}}
else if(!cobj.hasOwnProperty("ts")||(cobj["ts"]&&timestamp-cobj["ts"]>3600000)){var url_geo_device_cdp=getAnalyticsEndpointAzure(test)+'/z9gdc/'+diuid+'/'+vendorShortId+'/'+hostname+'/jsonp/z?cb='+(new Date().getTime())+(esp_param_val?'&espid='+esp_param_val:'');callGeoDeviceCDP(url_geo_device_cdp,esp_param_val,cobj);call_geo_device=false;update_esp_id=false;}
if(update_esp_id){var url_update_cdp=getAnalyticsEndpointAzure(test)+'/z9uc/'+diuid+'/'+vendorShortId+'/'+hostname+'/jsonp/z?cb='+(new Date().getTime())+'&espid='+esp_param_val;callUpdateCDP(url_update_cdp,esp_param_val,cobj);}
if(esp_param_val.length>0){tryInitGADigioh(true,esp_param_val);}else{tryInitGADigioh(send_pv);}}
else{tryInitGADigioh(send_pv);}
if(call_geo_device){var url_geo_device=getAnalyticsEndpointAzure(test)+'/z9gd/'+vendorShortId+'/'+hostname+'/jsonp/z?cb='+(new Date().getTime());callGeoDeviceCDP(url_geo_device,'',{});}}
else{var url_geo_device_2=getAnalyticsEndpointAzure(test)+'/z9gd/'+vendorShortId+'/'+hostname+'/jsonp/z?cb='+(new Date().getTime());callGeoDeviceCDP(url_geo_device_2,'',{});tryInitGADigioh(false);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getDIUID");}}
function callGeoDeviceCDP(url,esp_param_val,cobj){try{setTimeout(function(){analyticsRunAfterIdentify(true);},7000);url+="&dre=l";JQUERY_DIGIOH.ajax({dataType:'jsonp',url:url,success:function(json){if(json&&typeof json==='object'&&json!==null&&json.hasOwnProperty('success')&&json.success){logger('callGeoDeviceCDP ==> success');logger(json);}else{logger('callGeoDeviceCDP ==> failure');logger(json);}
if(json.dre&&json.dre=='l'){json=JSON.parse(DIGIOH_API.LIGHTBOX.LZString.decompressFromBase64(json.response));}
if(json.hasOwnProperty("geo")&&typeof json.geo==='object'&&json.geo.hasOwnProperty("ip")&&json.geo.ip){if(JQUERY_DIGIOH.inArray(json.geo.ip,BLIP_ARR)>-1){json.geo.blip_matched=1;BLIP_MATCHED=1;}else{json.geo.blip_matched=0;BLIP_MATCHED=0;}}
if(json.hasOwnProperty("rand")&&typeof json['rand']=='number'){DIGIOH_API.RANDOM_GLOBAL=json['rand'];DIGIOH_API.RANDOM_GLOBAL_SOURCE='api';}
else{DIGIOH_API.RANDOM_GLOBAL=getRandomInt(1,1000001);DIGIOH_API.RANDOM_GLOBAL_SOURCE='js';}
logger('DIGIOH_API.RANDOM_GLOBAL: '+DIGIOH_API.RANDOM_GLOBAL);logger('DIGIOH_API.RANDOM_GLOBAL_SOURCE: '+DIGIOH_API.RANDOM_GLOBAL_SOURCE);if(json.hasOwnProperty("ts")&&typeof json['ts']=='number'){DIGIOH_API.TIME_GLOBAL=json['ts'];DIGIOH_API.TIME_GLOBAL_SOURCE='api';}
else{DIGIOH_API.TIME_GLOBAL=Date.now();DIGIOH_API.TIME_GLOBAL_SOURCE='js';}
logger('DIGIOH_API.TIME_GLOBAL: '+DIGIOH_API.TIME_GLOBAL+' (vs JS timestamp = '+Date.now()+')');logger('DIGIOH_API.TIME_GLOBAL_SOURCE: '+DIGIOH_API.TIME_GLOBAL_SOURCE);if(json.hasOwnProperty("geo")&&typeof json.geo==='object'){DIGIOH_LIGHTBOX_ANALYTICS.setGeoData(json);setKeenSchemaAfterGeo();DIGIOH_IS_ANALYTICS_IDENTIFY_DONE['geo']=true;}
if(json.hasOwnProperty("da")&&typeof json.da==='string'){DIGIOH_LIGHTBOX_ANALYTICS.setDeviceData(json);setKeenSchemaAfterDevice();DIGIOH_IS_ANALYTICS_IDENTIFY_DONE['device']=true;}
if(json.hasOwnProperty("cdp")){if(typeof json["cdp"]==='string'&&json["cdp"]){if(json["cdp"].indexOf('|')>0){DIGIOH_API.CDP.segments=json["cdp"].split('|');DIGIOH_API.GET_ANALYTICS().VARS.segments=json["cdp"].split('|');}else{DIGIOH_API.CDP.segments.push(json["cdp"]);DIGIOH_API.GET_ANALYTICS().VARS.segments.push(json["cdp"]);}}
cobj["segs"]=DIGIOH_API.CDP.segments;cobj["ts"]=new Date().getTime();if(esp_param_val)
cobj["esp_id"]=esp_param_val;DIGIOH_STORAGE.data["__cdp"]=cobj;DIGIOH_STORAGE.set();DIGIOH_IS_ANALYTICS_IDENTIFY_DONE['cdp']=true;}
analyticsRunAfterIdentify(false);},error:function(htmltext,textStatus,errorThrown){logger('callGeoDeviceCDP ==> error - '+url);logger(textStatus);logger(htmltext);logger(errorThrown);DIGIOH_IS_ANALYTICS_IDENTIFY_DONE['geo']=true;DIGIOH_IS_ANALYTICS_IDENTIFY_DONE['device']=true;DIGIOH_IS_ANALYTICS_IDENTIFY_DONE['cdp']=true;analyticsRunAfterIdentify(false);}});}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"callGeoDeviceCDP");DIGIOH_IS_ANALYTICS_IDENTIFY_DONE['geo']=true;DIGIOH_IS_ANALYTICS_IDENTIFY_DONE['device']=true;DIGIOH_IS_ANALYTICS_IDENTIFY_DONE['cdp']=true;analyticsRunAfterIdentify(false);}}
function callUpdateCDP(url,esp_param_val,cobj){try{JQUERY_DIGIOH.ajax({dataType:'jsonp',url:url,success:function(json){if(json&&typeof json==='object'&&json!==null&&json.hasOwnProperty('success')&&json.success){logger('callUpdateCDP ==> success');logger(json);}else{logger('callUpdateCDP ==> failure');logger(json);}
cobj["ts"]=new Date().getTime();cobj["esp_id"]=esp_param_val;DIGIOH_STORAGE.data["__cdp"]=cobj;DIGIOH_STORAGE.set();},error:function(htmltext,textStatus,errorThrown){logger('callUpdateCDP ==> error - '+url);}});}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"callUpdateCDP");}}
var analyticsRunAfterIdentify=function(force){try{var is_done=true;for(var prop in DIGIOH_IS_ANALYTICS_IDENTIFY_DONE){if(DIGIOH_IS_ANALYTICS_IDENTIFY_DONE.hasOwnProperty(prop)&&!DIGIOH_IS_ANALYTICS_IDENTIFY_DONE[prop]){is_done=false;}}
if(is_done){initDependentScripts();}
else if(force){initDependentScripts();}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"analyticsRunAfterIdentify");initDependentScripts();}};function analyticsEvent(eventType,boxGUID,variationGUID,splitGUID){try{var vendorShortId=VENDOR_GUID||'empty';var boxShortId=boxGUID||'empty';var variationShortId=variationGUID||'empty';var splitShortId=splitGUID||'empty';if(typeof DIGIOH_VENDOR_SHORT_ID!=='undefined'){vendorShortId=DIGIOH_VENDOR_SHORT_ID;}
if(eventType!=='pageview'&&boxGUID&&DIGIOH_LIGHTBOX_IDS.hasOwnProperty(boxGUID)&&DIGIOH_LIGHTBOX_IDS[boxGUID]){boxShortId=DIGIOH_LIGHTBOX_IDS[boxGUID];}
if(eventType!=='pageview'&&variationGUID&&DIGIOH_LIGHTBOX_IDS.hasOwnProperty(variationGUID)&&DIGIOH_LIGHTBOX_IDS[variationGUID]){variationShortId=DIGIOH_LIGHTBOX_IDS[variationGUID];}
if(eventType!=='pageview'&&typeof DIGIOH_SPLIT_TESTS_ARR!=='undefined'&&DIGIOH_SPLIT_TESTS_ARR.length){for(var i=0;i<DIGIOH_SPLIT_TESTS_ARR.length;i++){if(DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('split_short_id')&&DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('split_guid')&&DIGIOH_SPLIT_TESTS_ARR[i]['split_guid']==splitGUID){splitShortId=DIGIOH_SPLIT_TESTS_ARR[i]['split_short_id'];break;}}}
var hostname='empty';if(window&&window.location&&window.location.hostname){hostname=window.location.hostname;}
var ids={};ids.uid=vendorShortId;ids.uguid=VENDOR_GUID;ids.bid=boxShortId;ids.bguid=boxGUID;ids.vid=variationShortId;ids.vguid=variationGUID;ids.sid=splitShortId;ids.sguid=splitGUID;var pathRewrite='/';var et='';if(eventType=='pageview'){pathRewrite='/z9v/'+vendorShortId+'/'+hostname;et='p';}
if(eventType=='display'){pathRewrite='/z9d/'+vendorShortId+'/'+boxShortId+'/'+variationShortId+'/'+splitShortId+'/'+hostname;et='i';}
if(eventType=='submit'){pathRewrite='/z9s/'+vendorShortId+'/'+boxShortId+'/'+variationShortId+'/'+splitShortId+'/'+hostname;et='s';}
if(eventType=='redirect'){pathRewrite='/z9r/'+vendorShortId+'/'+boxShortId+'/'+variationShortId+'/'+splitShortId+'/'+hostname;et='r';}
if(eventType=='download'){pathRewrite='/z9w/'+vendorShortId+'/'+boxShortId+'/'+variationShortId+'/'+splitShortId+'/'+hostname;et='d';}
if(pathRewrite==='/')
return;if(eventType!=='submit'){var i=document.createElement("img");i.width=1;i.height=1;i.src=(DIGIOH_API.CONFIG.BOX_BASE_URL+'/z9g/digibox.gif?c='+(new Date().getTime())+'&h='+encodeURIComponent(hostname)+'&e='+et+'&u='+vendorShortId+'&b='+boxShortId+'&v='+variationShortId+'&s='+splitShortId);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"analyticsEvent");}}
function analyticsDisplay(boxGUID,variationGUID,splitGUID){analyticsEvent('display',boxGUID,variationGUID,splitGUID);}
function analyticsSubmit(boxGUID,variationGUID,splitGUID){analyticsEvent('submit',boxGUID,variationGUID,splitGUID);}
function analyticsRedirect(boxGUID,variationGUID,splitGUID){analyticsEvent('redirect',boxGUID,variationGUID,splitGUID);}
function analyticsDownload(boxGUID,variationGUID,splitGUID){analyticsEvent('download',boxGUID,variationGUID,splitGUID);}
function analyticsLightboxDisplay(lbid){try{var var_id='';var orig_lid=lbid;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lbid)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[lbid];var_id=lbid;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lbid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lbid];}
var splitId='empty';if(var_id.length>7&&AB_BOXES_TAKE_MAP.hasOwnProperty(var_id)){splitId=AB_BOXES_TAKE_MAP[var_id];}else if(AB_BOXES_TAKE_MAP.hasOwnProperty(orig_lid)){splitId=AB_BOXES_TAKE_MAP[orig_lid];}
if(var_id===''){var_id='empty';}
if(!WAS_IMPRESSION_REGISTERED.hasOwnProperty(orig_lid)){WAS_IMPRESSION_REGISTERED[orig_lid]=0;}
WAS_IMPRESSION_REGISTERED[orig_lid]++;if(WAS_IMPRESSION_REGISTERED[orig_lid]>10){logErrorText("MAX_DISPLAY_COUNT_REACHED","MAX_DISPLAY_COUNT_REACHED");return;}
if(!IS_PREVIEW){if(BLIP_MATCHED===1){logErrorText("BLIP_MATCHED_INVALID_DISPLAY","BLIP_MATCHED_INVALID_DISPLAY");return;}}
analyticsDisplay(orig_lid,var_id,splitId);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"analyticsLightboxDisplay");}}
function initBugsnag(){if(typeof DIGIOH_BUGSNAG!=='undefined'&&DIGIOH_BUGSNAG!==null){processStoredExceptions();}}
function initKeen(){try{KEEN_CLIENT=new Keen({projectId:"53ab77e2c9e1637d8a000000",writeKey:DIGIOH_KEEN_WRITE_KEY});}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initKeen");}}
function initKeen2(){try{KEEN_CLIENT_2=new Keen({projectId:'58ac97f58db53dfda8a88662',writeKey:'2423E50F591F96B78CC8CC2434EE076D85F6A17251188536CE621FEDC71E7F8F030C191915774ACAEE91B3927D45F29CA621652AE08BD36B70BBAE5C5AF43FD7F2ED6C3CDB88D5CE84B973DD7CC4335661CDEE112E618628032BB2F855CE6576'});}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initKeen2");}}
function initKeenSchema(){try{KEEN_SCHEMA={cache_version:DIGIOH_CACHE_VERSION,is_preview:IS_PREVIEW,ip_address:"${keen.ip}",user_agent:"${keen.user_agent}",vendor_id:VENDOR_GUID,client_id:CLIENT_GUID,referrer_url:document.referrer,page_url:document.location.href,geoip:{ip_address:DIGIOH_LIGHTBOX_ANALYTICS.VARS.ip_address,continent_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.continent,country_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.country,country_name:DIGIOH_LIGHTBOX_ANALYTICS.VARS.country_name,region_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.state,region_name:DIGIOH_LIGHTBOX_ANALYTICS.VARS.region_name,city:DIGIOH_LIGHTBOX_ANALYTICS.VARS.city,zipcode:DIGIOH_LIGHTBOX_ANALYTICS.VARS.zipcode,metro_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.metro_code,time_zone:DIGIOH_LIGHTBOX_ANALYTICS.VARS.time_zone,area_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.area_code,latitude:DIGIOH_LIGHTBOX_ANALYTICS.VARS.latitude,longitude:DIGIOH_LIGHTBOX_ANALYTICS.VARS.longitude,geo_source:DIGIOH_LIGHTBOX_ANALYTICS.VARS.geo_source,blip_matched:BLIP_MATCHED},device:{hardware:DIGIOH_LIGHTBOX_ANALYTICS.VARS.device,os:DIGIOH_LIGHTBOX_ANALYTICS.VARS.operating_system,browser_type:DIGIOH_LIGHTBOX_ANALYTICS.VARS.browser_type,browser_version:DIGIOH_LIGHTBOX_ANALYTICS.VARS.browser_version},entry_point:{referrer_url:DIGIOH_LIGHTBOX_ANALYTICS.VARS.referring_website_url,landing_page_url:DIGIOH_LIGHTBOX_ANALYTICS.VARS.landing_page,landing_page_ip:DIGIOH_LIGHTBOX_ANALYTICS.VARS.landing_page_ip,landing_page_date:DIGIOH_LIGHTBOX_ANALYTICS.VARS.date_of_visit,web_source:DIGIOH_LIGHTBOX_ANALYTICS.VARS.web_source,past_visits:DIGIOH_LIGHTBOX_ANALYTICS.VARS.past_visits,page_visits:DIGIOH_LIGHTBOX_ANALYTICS.VARS.page_visits,search_engine:DIGIOH_LIGHTBOX_ANALYTICS.VARS.search_engine,utm_campaign_source:DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_source,utm_campaign_medium:DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_medium,utm_campaign_term:DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_term,utm_campaign_content:DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_content,utm_campaign_name:DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_name}};KEEN_SCHEMA.keen={};KEEN_SCHEMA.keen.addons=[{name:"keen:ip_to_geo",input:{ip:"ip_address"},output:"ip_to_geo_addon"},{name:"keen:ua_parser",input:{ua_string:"user_agent"},output:"ua_parser_addon"},{name:"keen:url_parser",input:{url:"page_url"},output:"url_parser_addon"},{name:"keen:referrer_parser",input:{referrer_url:"referrer_url",page_url:"page_url"},output:"referrer_parser_addon"}];if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.latitude&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.longitude){KEEN_SCHEMA.keen.location={};KEEN_SCHEMA.keen.location.coordinates=[DIGIOH_LIGHTBOX_ANALYTICS.VARS.latitude,DIGIOH_LIGHTBOX_ANALYTICS.VARS.longitude];}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initKeenSchema");}}
function mergeObjectData(obj1,obj2){var obj3={};for(var attrname in obj1){obj3[attrname]=obj1[attrname];}
for(var attrname in obj2){obj3[attrname]=obj2[attrname];}
logger(obj3,true);return obj3;}
function cfPageview(){try{if(typeof window.SENT_LIGHTBOX_PV!=='undefined'&&window.SENT_LIGHTBOX_PV===true){return;}}
catch(e){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
try{var vendorShortId=VENDOR_GUID||'empty';if(typeof DIGIOH_VENDOR_SHORT_ID!=='undefined'){vendorShortId=DIGIOH_VENDOR_SHORT_ID;}
var hostname='empty';if(window&&window.location&&window.location.hostname){hostname=window.location.hostname;}
var i=document.createElement("img");i.width=1;i.height=1;i.src=(DIGIOH_API.CONFIG.BOX_BASE_URL+'/z9g/digibox.gif?c='+(new Date().getTime())+'&h='+encodeURIComponent(hostname)+'&e=p'+'&u='+vendorShortId);window.SENT_LIGHTBOX_PV=true;try{if(typeof window.RECAPTURE_LIGHTBOX_PV!=='undefined'&&window.RECAPTURE_LIGHTBOX_PV===true){window.RECAPTURE_LIGHTBOX_PV=false;window.SENT_LIGHTBOX_PV=false;setTimeout(cfPageview,1000);}}
catch(e){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}}
catch(e){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);logErrorText("cfPageview_EXCEPTION","cfPageview_EXCEPTION");}}
function keenLightboxDisplay(boxGUID,variationGUID,splitGUID){try{if(DIGIOH_API.CONFIG.REGION!=='US'){return;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logErrorText("keenLightboxDisplayJSONP_EXCEPTION","keenLightboxDisplayJSONP_EXCEPTION");}}
function keenLightboxCoupon(lid,coupon_meta_data){try{if(DIGIOH_API.CONFIG.REGION!=='US'){return;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logErrorText("keenLightboxCoupon_EXCEPTION","keenLightboxCoupon_EXCEPTION");}}
function prepareExtraDataObject(extra_data,orig_lid,var_id,sid,ab_test_id){extra_data=extra_data||{};extra_data['attributes']={'user_id':DIGIOH_VENDOR_SHORT_ID,'user_guid':VENDOR_GUID,'box_id':DIGIOH_API.getBoxID(orig_lid),'box_guid':orig_lid,'box_name':'','variation_id':'','variation_name':'','variation_guid':var_id,'client_id':CLIENT_GUID,'submission_id':sid,'ab_test_id':ab_test_id};if(DIGIOH_LIGHTBOX_NAMES.hasOwnProperty(orig_lid)){extra_data.attributes.box_name=DIGIOH_LIGHTBOX_NAMES[orig_lid];}else{extra_data.attributes.box_name='';}
if(DIGIOH_LIGHTBOX_NAMES.hasOwnProperty(var_id)){extra_data.attributes.variation_name=DIGIOH_LIGHTBOX_NAMES[var_id];}else{extra_data.attributes.variation_name='';}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(var_id)){extra_data.attributes.variation_id=DIGIOH_LIGHTBOX_IDS[var_id];}else{extra_data.attributes.variation_id='';}
if(extra_data.hasOwnProperty('analytics')&&typeof extra_data.analytics==='object'&&extra_data.analytics!==null){if(extra_data.analytics.hasOwnProperty('VendorGuid')){delete extra_data.analytics.VendorGuid;}
if(extra_data.analytics.hasOwnProperty('IsLoaded')){delete extra_data.analytics.IsLoaded;}
if(extra_data.analytics.hasOwnProperty('segments')){delete extra_data.analytics.segments;}
if(extra_data.analytics.hasOwnProperty('scroll_percent')){delete extra_data.analytics.scroll_percent;}
if(extra_data.analytics.hasOwnProperty('scroll_pixels')){delete extra_data.analytics.scroll_pixels;}
if(extra_data.analytics.hasOwnProperty('exit_intent')){delete extra_data.analytics.exit_intent;}
if(extra_data.analytics.hasOwnProperty('click_jquery_selector')){delete extra_data.analytics.click_jquery_selector;}
if(extra_data.analytics.hasOwnProperty('hover_jquery_selector')){delete extra_data.analytics.hover_jquery_selector;}
if(extra_data.analytics.hasOwnProperty('exists_jquery_selector')){delete extra_data.analytics.exists_jquery_selector;}
if(extra_data.analytics.hasOwnProperty('lightbox_activity')){delete extra_data.analytics.lightbox_activity;}
if(extra_data.analytics.hasOwnProperty('master_rules')){delete extra_data.analytics.master_rules;}
if(extra_data.analytics.hasOwnProperty('lightbox_events')){delete extra_data.analytics.lightbox_events;}
if(extra_data.analytics.hasOwnProperty('IsPreview')){extra_data.analytics.is_preview=extra_data.analytics.IsPreview;delete extra_data.analytics.IsPreview;}}
if(extra_data.hasOwnProperty('form')&&typeof extra_data.form==='object'&&extra_data.form!==null){for(var field in extra_data.form){if(extra_data.form.hasOwnProperty(field)){if(field.indexOf('custom_')===0&&extra_data.form[field]===''){delete extra_data.form[field];}}}}
if(extra_data.hasOwnProperty('quiz')&&typeof extra_data.quiz==='object'&&extra_data.quiz!==null){extra_data.quiz=extra_data.quiz;delete extra_data.quiz;}
return extra_data;}
function keenLightboxSubmit(form_data,lid,sid,extra_data){try{if(DIGIOH_API.CONFIG.REGION!=='US'){return;}
var var_id='';var orig_lid=lid;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lid)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[lid];var_id=lid;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lid];}
var ab_test_id='';if(var_id!=''&&AB_BOXES_TAKE_MAP.hasOwnProperty(var_id)){ab_test_id=AB_BOXES_TAKE_MAP[var_id];}else if(AB_BOXES_TAKE_MAP.hasOwnProperty(orig_lid)){ab_test_id=AB_BOXES_TAKE_MAP[orig_lid];}
if(!WAS_SUBMIT_REGISTERED.hasOwnProperty(orig_lid)){WAS_SUBMIT_REGISTERED[orig_lid]=0;}
WAS_SUBMIT_REGISTERED[orig_lid]++;if(!IS_PREVIEW){if(BLIP_MATCHED===1){logErrorText("BLIP_MATCHED_INVALID_SUBMIT","BLIP_MATCHED_INVALID_SUBMIT");return;}}
var vendorShortId=VENDOR_GUID||'empty';var boxShortId=orig_lid||'empty';var variationShortId=var_id||'empty';var splitShortId=ab_test_id||'empty';if(typeof DIGIOH_VENDOR_SHORT_ID!=='undefined'){vendorShortId=DIGIOH_VENDOR_SHORT_ID;}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(orig_lid)&&DIGIOH_LIGHTBOX_IDS[orig_lid]){boxShortId=DIGIOH_LIGHTBOX_IDS[orig_lid];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(var_id)&&DIGIOH_LIGHTBOX_IDS[var_id]){variationShortId=DIGIOH_LIGHTBOX_IDS[var_id];}
if(typeof DIGIOH_SPLIT_TESTS_ARR!=='undefined'&&DIGIOH_SPLIT_TESTS_ARR.length){for(var i=0;i<DIGIOH_SPLIT_TESTS_ARR.length;i++){if(DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('split_short_id')&&DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('split_guid')&&DIGIOH_SPLIT_TESTS_ARR[i]['split_guid']==ab_test_id){splitShortId=DIGIOH_SPLIT_TESTS_ARR[i]['split_short_id'];break;}}}
var integration_map={};if(window.DIGIOH_API.LIGHTBOX.hasOwnProperty('INTEGRATION_MAP')&&window.DIGIOH_API.LIGHTBOX.INTEGRATION_MAP!==null&&typeof window.DIGIOH_API.LIGHTBOX.INTEGRATION_MAP==='object'){integration_map=window.DIGIOH_API.LIGHTBOX.INTEGRATION_MAP;}
updateKeenSchemaBeforeSending();var lightbox_submit=KEEN_SCHEMA;lightbox_submit.cache_version=DIGIOH_CACHE_VERSION;lightbox_submit.is_preview=IS_PREVIEW;lightbox_submit.ip_address="${keen.ip}";lightbox_submit.user_agent="${keen.user_agent}";lightbox_submit.vendor_id=VENDOR_GUID;lightbox_submit.client_id=CLIENT_GUID;lightbox_submit.event_id=generateGuidWithTimestamp();lightbox_submit.submission_id=sid;lightbox_submit.lightbox_id=orig_lid;lightbox_submit.variation_id=var_id;lightbox_submit.ab_test_id=ab_test_id;lightbox_submit.uid=vendorShortId;lightbox_submit.bid=boxShortId;lightbox_submit.vid=variationShortId;lightbox_submit.sid=splitShortId;lightbox_submit.lightbox_open_time=TOTAL_TIME-LIGHTBOX_OPEN_TIME;lightbox_submit.page_total_time=TOTAL_TIME;lightbox_submit.page_active_time=TOTAL_TIME-IDLE_TIME;lightbox_submit.page_idle_time=IDLE_TIME;lightbox_submit.impressions_on_page=(WAS_IMPRESSION_REGISTERED.hasOwnProperty(orig_lid)?WAS_IMPRESSION_REGISTERED[orig_lid]:0);lightbox_submit.submits_on_page=WAS_SUBMIT_REGISTERED[orig_lid];lightbox_submit.integration_map=integration_map;if(var_id&&EFFECTS.hasOwnProperty(var_id)){lightbox_submit.widget_type=EFFECTS[var_id].widget_type;}else{lightbox_submit.widget_type=EFFECTS[orig_lid].widget_type;}
if(DIGIOH_LIGHTBOX_NAMES.hasOwnProperty(orig_lid)){lightbox_submit.lightbox_name=DIGIOH_LIGHTBOX_NAMES[orig_lid];}
if(DIGIOH_LIGHTBOX_NAMES.hasOwnProperty(var_id)){lightbox_submit.variation_name=DIGIOH_LIGHTBOX_NAMES[var_id];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(orig_lid)){lightbox_submit.lightbox_short_id=DIGIOH_LIGHTBOX_IDS[orig_lid];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(var_id)){lightbox_submit.variation_short_id=DIGIOH_LIGHTBOX_IDS[var_id];}
lightbox_submit.extra_data=LZString.compressToBase64(JSON.stringify(prepareExtraDataObject(extra_data,orig_lid,var_id,sid,ab_test_id)));var submit_schema=mergeObjectData(lightbox_submit,form_data);var dataStorageType="";var obfuscatedFieldsArr=[];if(typeof DIGIOH_DATA_STORAGE_TYPE_BY_BOX_OBJ==='object'){if(var_id&&var_id.indexOf('var')===0&&DIGIOH_DATA_STORAGE_TYPE_BY_BOX_OBJ.hasOwnProperty(var_id)&&DIGIOH_DATA_STORAGE_TYPE_BY_BOX_OBJ[var_id]){if(DIGIOH_DATA_STORAGE_TYPE_BY_BOX_OBJ[var_id]==='none'){return;}else if(DIGIOH_DATA_STORAGE_TYPE_BY_BOX_OBJ[var_id]!=='all'){obfuscatedFieldsArr=DIGIOH_DATA_STORAGE_TYPE_BY_BOX_OBJ[var_id].split(',');}}else if(DIGIOH_DATA_STORAGE_TYPE_BY_BOX_OBJ.hasOwnProperty(orig_lid)&&DIGIOH_DATA_STORAGE_TYPE_BY_BOX_OBJ[orig_lid]){if(DIGIOH_DATA_STORAGE_TYPE_BY_BOX_OBJ[orig_lid]==='none'){return;}else if(DIGIOH_DATA_STORAGE_TYPE_BY_BOX_OBJ[orig_lid]!=='all'){obfuscatedFieldsArr=DIGIOH_DATA_STORAGE_TYPE_BY_BOX_OBJ[orig_lid].split(',');}}}
if(obfuscatedFieldsArr.length>0){if(DIGIOH_API.contains(obfuscatedFieldsArr,'ip')){submit_schema.geoip.ip_address="****";if(submit_schema.keen.addons.length>0&&submit_schema.keen.addons[0].name=="keen:ip_to_geo"){submit_schema.keen.addons.shift();delete submit_schema.ip_address;}}
if(DIGIOH_API.contains(obfuscatedFieldsArr,'city')){submit_schema.geoip.city="****";}
if(DIGIOH_API.contains(obfuscatedFieldsArr,'state')){submit_schema.geoip.region_code="**";submit_schema.geoip.region_name="****";}
if(DIGIOH_API.contains(obfuscatedFieldsArr,'country')){submit_schema.geoip.country_code="**";submit_schema.geoip.country_name="****";}
if(DIGIOH_API.contains(obfuscatedFieldsArr,'zip')){submit_schema.geoip.zipcode="****";}
if(DIGIOH_API.contains(obfuscatedFieldsArr,'ip')||DIGIOH_API.contains(obfuscatedFieldsArr,'city')||DIGIOH_API.contains(obfuscatedFieldsArr,'state')||DIGIOH_API.contains(obfuscatedFieldsArr,'country')||DIGIOH_API.contains(obfuscatedFieldsArr,'zip')){delete submit_schema.geoip.latitude;delete submit_schema.geoip.longitude;if(submit_schema.keen.hasOwnProperty('location')){delete submit_schema.keen.location;}}
if(DIGIOH_API.contains(obfuscatedFieldsArr,'email')&&submit_schema.hasOwnProperty('email')&&submit_schema.email){if(!submit_schema.email.contains('@')||submit_schema.email.split('@')[0].length<1){submit_schema.email="***@***.***";}else{var emstart=submit_schema.email.split('@')[0];submit_schema.email=emstart.substr(0,1)+"****"+emstart.slice(-1)+"@"+submit_schema.email.split('@')[1];}}
if(DIGIOH_API.contains(obfuscatedFieldsArr,'name')&&submit_schema.hasOwnProperty('name')&&submit_schema.name){submit_schema.name="****";}
if(DIGIOH_API.contains(obfuscatedFieldsArr,'first_name')&&submit_schema.hasOwnProperty('first_name')&&submit_schema.first_name){submit_schema.first_name="****";}
if(DIGIOH_API.contains(obfuscatedFieldsArr,'last_name')&&submit_schema.hasOwnProperty('last_name')&&submit_schema.last_name){submit_schema.last_name="****";}
if(DIGIOH_API.contains(obfuscatedFieldsArr,'phone')&&submit_schema.hasOwnProperty('phone')&&submit_schema.phone){submit_schema.phone="****";}
for(var i=1;i<=20;i++){var custom_n='custom_'+i;if(DIGIOH_API.contains(obfuscatedFieldsArr,custom_n)&&submit_schema.hasOwnProperty(custom_n)&&submit_schema[custom_n]){submit_schema[custom_n]="****";}}}
if(window.DIGIOH_API.LIGHTBOX.hasOwnProperty('keen_custom_js_data')){submit_schema.custom_js_data=window.DIGIOH_API.LIGHTBOX.keen_custom_js_data;}
KEEN_CLIENT.addEvent("lightbox_submit",submit_schema,function(res,e){if(res&&typeof res==='object'&&res.hasOwnProperty('created')&&res.created===true){logger('keenLightboxSubmit: success!');logger(res);}else if(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logErrorText("keenLightboxSubmit_ERROR","keenLightboxSubmit_ERROR");}
else{logErrorText("keenLightboxSubmit_ERROR_OTHER","keenLightboxSubmit_ERROR_OTHER");}});}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logErrorText("keenLightboxSubmit_EXCEPTION","keenLightboxSubmit_EXCEPTION");}}
function keenLightboxRedirect(lid){try{if(DIGIOH_API.CONFIG.REGION!=='US'){return;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logErrorText("keenLightboxRedirect_EXCEPTION","keenLightboxRedirect_EXCEPTION");}}
function keenLightboxDownload(lid){try{if(DIGIOH_API.CONFIG.REGION!=='US'){return;}
var var_id='';var orig_lid=lid;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lid)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[lid];var_id=lid;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lid];}
var ab_test_id='';if(var_id!=''&&AB_BOXES_TAKE_MAP.hasOwnProperty(var_id)){ab_test_id=AB_BOXES_TAKE_MAP[var_id];}else if(AB_BOXES_TAKE_MAP.hasOwnProperty(orig_lid)){ab_test_id=AB_BOXES_TAKE_MAP[orig_lid];}
if(!WAS_DOWNLOAD_REGISTERED.hasOwnProperty(orig_lid)){WAS_DOWNLOAD_REGISTERED[orig_lid]=0;}
WAS_DOWNLOAD_REGISTERED[orig_lid]++;if(!IS_PREVIEW){if(BLIP_MATCHED===1){logErrorText("BLIP_MATCHED_INVALID_DOWNLOAD","BLIP_MATCHED_INVALID_DOWNLOAD");return;}}
var vendorShortId=VENDOR_GUID||'empty';var boxShortId=orig_lid||'empty';var variationShortId=var_id||'empty';var splitShortId=ab_test_id||'empty';if(typeof DIGIOH_VENDOR_SHORT_ID!=='undefined'){vendorShortId=DIGIOH_VENDOR_SHORT_ID;}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(orig_lid)&&DIGIOH_LIGHTBOX_IDS[orig_lid]){boxShortId=DIGIOH_LIGHTBOX_IDS[orig_lid];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(var_id)&&DIGIOH_LIGHTBOX_IDS[var_id]){variationShortId=DIGIOH_LIGHTBOX_IDS[var_id];}
if(typeof DIGIOH_SPLIT_TESTS_ARR!=='undefined'&&DIGIOH_SPLIT_TESTS_ARR.length){for(var i=0;i<DIGIOH_SPLIT_TESTS_ARR.length;i++){if(DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('split_short_id')&&DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('split_guid')&&DIGIOH_SPLIT_TESTS_ARR[i]['split_guid']==ab_test_id){splitShortId=DIGIOH_SPLIT_TESTS_ARR[i]['split_short_id'];break;}}}
updateKeenSchemaBeforeSending();var lightbox_download=KEEN_SCHEMA;lightbox_download.cache_version=DIGIOH_CACHE_VERSION;lightbox_download.is_preview=IS_PREVIEW;lightbox_download.ip_address="${keen.ip}";lightbox_download.user_agent="${keen.user_agent}";lightbox_download.vendor_id=VENDOR_GUID;lightbox_download.client_id=CLIENT_GUID;lightbox_download.event_id=generateGuidWithTimestamp();lightbox_download.lightbox_id=orig_lid;lightbox_download.variation_id=var_id;lightbox_download.ab_test_id=ab_test_id;lightbox_download.uid=vendorShortId;lightbox_download.bid=boxShortId;lightbox_download.vid=variationShortId;lightbox_download.sid=splitShortId;lightbox_download.page_total_time=TOTAL_TIME;lightbox_download.page_active_time=TOTAL_TIME-IDLE_TIME;lightbox_download.page_idle_time=IDLE_TIME;lightbox_download.impressions_on_page=(WAS_IMPRESSION_REGISTERED.hasOwnProperty(orig_lid)?WAS_IMPRESSION_REGISTERED[orig_lid]:0);lightbox_download.downloads_on_page=WAS_DOWNLOAD_REGISTERED[orig_lid];if(var_id&&EFFECTS.hasOwnProperty(var_id)){lightbox_download.widget_type=EFFECTS[var_id].widget_type;}else{lightbox_download.widget_type=EFFECTS[orig_lid].widget_type;}
if(DIGIOH_LIGHTBOX_NAMES.hasOwnProperty(orig_lid)){lightbox_download.lightbox_name=DIGIOH_LIGHTBOX_NAMES[orig_lid];}
if(DIGIOH_LIGHTBOX_NAMES.hasOwnProperty(var_id)){lightbox_download.variation_name=DIGIOH_LIGHTBOX_NAMES[var_id];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(orig_lid)){lightbox_download.lightbox_short_id=DIGIOH_LIGHTBOX_IDS[orig_lid];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(var_id)){lightbox_download.variation_short_id=DIGIOH_LIGHTBOX_IDS[var_id];}
if(window.DIGIOH_API.LIGHTBOX.hasOwnProperty('keen_custom_js_data')){lightbox_download.custom_js_data=window.DIGIOH_API.LIGHTBOX.keen_custom_js_data;}
KEEN_CLIENT.addEvent("lightbox_download",lightbox_download,function(res,e){if(res&&typeof res==='object'&&res.hasOwnProperty('created')&&res.created===true){logger('keenLightboxDownload: success!');logger(res);}else if(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logErrorText("keenLightboxDownload_ERROR","keenLightboxDownload_ERROR");}
else{logErrorText("keenLightboxDownload_ERROR_OTHER","keenLightboxDownload_ERROR_OTHER");}});LIGHTBOX_OPEN_TIME=TOTAL_TIME;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logErrorText("keenLightboxDownload_EXCEPTION","keenLightboxDownload_EXCEPTION");}}
function getExtraPageNumberFromEPString(epStr){var pNum='';if(epStr.indexOf('ep')===0){for(var x=2;x<epStr.length;x++){if('1234567890'.indexOf(epStr.substr(x,1))>=0)
pNum+=epStr.substr(x,1);else
break;}}
return pNum;}
function keenLightboxPageChange(lid,page_prefix){try{if(DIGIOH_API.CONFIG.REGION!=='US'){return;}
var var_id='';var orig_lid=lid;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lid)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[lid];var_id=lid;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lid];}
var ab_test_id='';if(var_id!=''&&AB_BOXES_TAKE_MAP.hasOwnProperty(var_id)){ab_test_id=AB_BOXES_TAKE_MAP[var_id];}else if(AB_BOXES_TAKE_MAP.hasOwnProperty(orig_lid)){ab_test_id=AB_BOXES_TAKE_MAP[orig_lid];}
if(!IS_PREVIEW){if(BLIP_MATCHED===1){logErrorText("BLIP_MATCHED_INVALID_PAGE_CHANGE","BLIP_MATCHED_INVALID_PAGE_CHANGE");return;}}
if(page_prefix===''||page_prefix==='main'){page_prefix='main_page';}else if(page_prefix==='thx'||page_prefix==='thx_'){page_prefix='thank_you_page';}
else if(page_prefix.indexOf('ep')===0){var pNum=getExtraPageNumberFromEPString(page_prefix);page_prefix='extra_page_'+pNum;}
var vendorShortId=VENDOR_GUID||'empty';var boxShortId=orig_lid||'empty';var variationShortId=var_id||'empty';var splitShortId=ab_test_id||'empty';if(typeof DIGIOH_VENDOR_SHORT_ID!=='undefined'){vendorShortId=DIGIOH_VENDOR_SHORT_ID;}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(orig_lid)&&DIGIOH_LIGHTBOX_IDS[orig_lid]){boxShortId=DIGIOH_LIGHTBOX_IDS[orig_lid];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(var_id)&&DIGIOH_LIGHTBOX_IDS[var_id]){variationShortId=DIGIOH_LIGHTBOX_IDS[var_id];}
if(typeof DIGIOH_SPLIT_TESTS_ARR!=='undefined'&&DIGIOH_SPLIT_TESTS_ARR.length){for(var i=0;i<DIGIOH_SPLIT_TESTS_ARR.length;i++){if(DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('split_short_id')&&DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('split_guid')&&DIGIOH_SPLIT_TESTS_ARR[i]['split_guid']==ab_test_id){splitShortId=DIGIOH_SPLIT_TESTS_ARR[i]['split_short_id'];break;}}}
updateKeenSchemaBeforeSending();var lightbox_page_change=KEEN_SCHEMA;lightbox_page_change.cache_version=DIGIOH_CACHE_VERSION;lightbox_page_change.is_preview=IS_PREVIEW;lightbox_page_change.ip_address="${keen.ip}";lightbox_page_change.user_agent="${keen.user_agent}";lightbox_page_change.vendor_id=VENDOR_GUID;lightbox_page_change.client_id=CLIENT_GUID;lightbox_page_change.event_id=generateGuidWithTimestamp();lightbox_page_change.lightbox_id=orig_lid;lightbox_page_change.variation_id=var_id;lightbox_page_change.ab_test_id=ab_test_id;lightbox_page_change.uid=vendorShortId;lightbox_page_change.bid=boxShortId;lightbox_page_change.vid=variationShortId;lightbox_page_change.sid=splitShortId;lightbox_page_change.page_total_time=TOTAL_TIME;lightbox_page_change.page_active_time=TOTAL_TIME-IDLE_TIME;lightbox_page_change.page_idle_time=IDLE_TIME;lightbox_page_change.impressions_on_page=(WAS_IMPRESSION_REGISTERED.hasOwnProperty(orig_lid)?WAS_IMPRESSION_REGISTERED[orig_lid]:0);lightbox_page_change.page_name=page_prefix;if(var_id&&EFFECTS.hasOwnProperty(var_id)){lightbox_page_change.widget_type=EFFECTS[var_id].widget_type;}else{lightbox_page_change.widget_type=EFFECTS[orig_lid].widget_type;}
if(DIGIOH_LIGHTBOX_NAMES.hasOwnProperty(orig_lid)){lightbox_page_change.lightbox_name=DIGIOH_LIGHTBOX_NAMES[orig_lid];}
if(DIGIOH_LIGHTBOX_NAMES.hasOwnProperty(var_id)){lightbox_page_change.variation_name=DIGIOH_LIGHTBOX_NAMES[var_id];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(orig_lid)){lightbox_page_change.lightbox_short_id=DIGIOH_LIGHTBOX_IDS[orig_lid];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(var_id)){lightbox_page_change.variation_short_id=DIGIOH_LIGHTBOX_IDS[var_id];}
if(window.DIGIOH_API.LIGHTBOX.hasOwnProperty('keen_custom_js_data')){lightbox_page_change.custom_js_data=window.DIGIOH_API.LIGHTBOX.keen_custom_js_data;}
KEEN_CLIENT.addEvent("lightbox_page_change",lightbox_page_change,function(res,e){if(res&&typeof res==='object'&&res.hasOwnProperty('created')&&res.created===true){logger('keenLightboxPageChange: success!');logger(res);}else if(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logErrorText("keenLightboxPageChange_ERROR","keenLightboxPageChange_ERROR");}
else{logErrorText("keenLightboxPageChange_ERROR_OTHER","keenLightboxPageChange_ERROR_OTHER");}});LIGHTBOX_OPEN_TIME=TOTAL_TIME;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logErrorText("keenLightboxPageChange_EXCEPTION","keenLightboxPageChange_EXCEPTION");}}
var keenLightboxDebug=function(lid,additional_data_obj){try{var var_id='';var orig_lid=lid;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lid)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[lid];var_id=lid;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lid];}
var ab_test_id='';if(var_id!=''&&AB_BOXES_TAKE_MAP.hasOwnProperty(var_id)){ab_test_id=AB_BOXES_TAKE_MAP[var_id];}else if(AB_BOXES_TAKE_MAP.hasOwnProperty(orig_lid)){ab_test_id=AB_BOXES_TAKE_MAP[orig_lid];}
var vendorShortId=VENDOR_GUID||'empty';var boxShortId=orig_lid||'empty';var variationShortId=var_id||'empty';var splitShortId=ab_test_id||'empty';if(typeof DIGIOH_VENDOR_SHORT_ID!=='undefined'){vendorShortId=DIGIOH_VENDOR_SHORT_ID;}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(orig_lid)&&DIGIOH_LIGHTBOX_IDS[orig_lid]){boxShortId=DIGIOH_LIGHTBOX_IDS[orig_lid];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(var_id)&&DIGIOH_LIGHTBOX_IDS[var_id]){variationShortId=DIGIOH_LIGHTBOX_IDS[var_id];}
if(typeof DIGIOH_SPLIT_TESTS_ARR!=='undefined'&&DIGIOH_SPLIT_TESTS_ARR.length){for(var i=0;i<DIGIOH_SPLIT_TESTS_ARR.length;i++){if(DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('split_short_id')&&DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('split_guid')&&DIGIOH_SPLIT_TESTS_ARR[i]['split_guid']==ab_test_id){splitShortId=DIGIOH_SPLIT_TESTS_ARR[i]['split_short_id'];break;}}}
updateKeenSchemaBeforeSending();var lightbox_debug=KEEN_SCHEMA;lightbox_debug.cache_version=DIGIOH_CACHE_VERSION;lightbox_debug.is_preview=IS_PREVIEW;lightbox_debug.ip_address="${keen.ip}";lightbox_debug.user_agent="${keen.user_agent}";lightbox_debug.vendor_id=VENDOR_GUID;lightbox_debug.client_id=CLIENT_GUID;lightbox_debug.event_id=generateGuidWithTimestamp();lightbox_debug.lightbox_id=orig_lid;lightbox_debug.variation_id=var_id;lightbox_debug.ab_test_id=ab_test_id;lightbox_debug.uid=vendorShortId;lightbox_debug.bid=boxShortId;lightbox_debug.vid=variationShortId;lightbox_debug.sid=splitShortId;lightbox_debug.page_total_time=TOTAL_TIME;lightbox_debug.page_active_time=TOTAL_TIME-IDLE_TIME;lightbox_debug.page_idle_time=IDLE_TIME;lightbox_debug.impressions_on_page=(WAS_IMPRESSION_REGISTERED.hasOwnProperty(orig_lid)?WAS_IMPRESSION_REGISTERED[orig_lid]:0);if(DIGIOH_LIGHTBOX_NAMES.hasOwnProperty(orig_lid)){lightbox_debug.lightbox_name=DIGIOH_LIGHTBOX_NAMES[orig_lid];}
if(DIGIOH_LIGHTBOX_NAMES.hasOwnProperty(var_id)){lightbox_debug.variation_name=DIGIOH_LIGHTBOX_NAMES[var_id];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(orig_lid)){lightbox_debug.lightbox_short_id=DIGIOH_LIGHTBOX_IDS[orig_lid];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(var_id)){lightbox_debug.variation_short_id=DIGIOH_LIGHTBOX_IDS[var_id];}
if(window.DIGIOH_API.LIGHTBOX.hasOwnProperty('keen_custom_js_data')){lightbox_debug.custom_js_data=window.DIGIOH_API.LIGHTBOX.keen_custom_js_data;}
if(typeof additional_data_obj!=='undefined'&&additional_data_obj!==null){var debug_schema=mergeObjectData(lightbox_debug,additional_data_obj);KEEN_CLIENT.addEvent("lightbox_debug",debug_schema);}else{KEEN_CLIENT.addEvent("lightbox_debug",lightbox_debug);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"keenLightboxDebug");}};function updateKeenSchemaBeforeSending(){try{KEEN_SCHEMA.geoip={ip_address:DIGIOH_LIGHTBOX_ANALYTICS.VARS.ip_address,continent_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.continent,country_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.country,country_name:DIGIOH_LIGHTBOX_ANALYTICS.VARS.country_name,region_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.state,region_name:DIGIOH_LIGHTBOX_ANALYTICS.VARS.region_name,city:DIGIOH_LIGHTBOX_ANALYTICS.VARS.city,zipcode:DIGIOH_LIGHTBOX_ANALYTICS.VARS.zipcode,metro_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.metro_code,time_zone:DIGIOH_LIGHTBOX_ANALYTICS.VARS.time_zone,area_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.area_code,latitude:DIGIOH_LIGHTBOX_ANALYTICS.VARS.latitude,longitude:DIGIOH_LIGHTBOX_ANALYTICS.VARS.longitude,geo_source:DIGIOH_LIGHTBOX_ANALYTICS.VARS.geo_source,blip_matched:BLIP_MATCHED};KEEN_SCHEMA.device_atlas={primaryHardwareType:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.primaryHardwareType,isApp:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.isApp,isTablet:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.isTablet,isMobilePhone:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.isMobilePhone,model:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.model,vendor:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.vendor,touchScreen:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.touchScreen,osName:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.osName,osVersion:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.osVersion,browserName:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.browserName,browserVersion:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.browserVersion,osAndroid:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.osAndroid,osiOs:DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.osiOs,device_source:DIGIOH_LIGHTBOX_ANALYTICS.VARS.device_source};KEEN_SCHEMA.device={hardware:DIGIOH_LIGHTBOX_ANALYTICS.VARS.device,os:DIGIOH_LIGHTBOX_ANALYTICS.VARS.operating_system,browser_type:DIGIOH_LIGHTBOX_ANALYTICS.VARS.browser_type,browser_version:DIGIOH_LIGHTBOX_ANALYTICS.VARS.browser_version};KEEN_SCHEMA.entry_point={referrer_url:DIGIOH_LIGHTBOX_ANALYTICS.VARS.referring_website_url,landing_page_url:DIGIOH_LIGHTBOX_ANALYTICS.VARS.landing_page,landing_page_ip:DIGIOH_LIGHTBOX_ANALYTICS.VARS.landing_page_ip,landing_page_date:DIGIOH_LIGHTBOX_ANALYTICS.VARS.date_of_visit,web_source:DIGIOH_LIGHTBOX_ANALYTICS.VARS.web_source,past_visits:DIGIOH_LIGHTBOX_ANALYTICS.VARS.past_visits,page_visits:DIGIOH_LIGHTBOX_ANALYTICS.VARS.page_visits,search_engine:DIGIOH_LIGHTBOX_ANALYTICS.VARS.search_engine,utm_campaign_source:DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_source,utm_campaign_medium:DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_medium,utm_campaign_term:DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_term,utm_campaign_content:DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_content,utm_campaign_name:DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_name};}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"updateKeenSchemaBeforeSending");}}
function postToKeen(post_query,lid,sid,extra_data){try{var src=DIGIOH_API.CONFIG.SUBMIT_BASE_URL+"/Keen/PostToKeen2";var src3=DIGIOH_API.CONFIG.SUBMITCUS_BASE_URL+"/Keen/PostToKeen3";if(DIGIOH_API.CONFIG.REGION=='US'&&(IS_DEV||DIGIOH_API.contains(window.location.host,"robert.lightbox")||DIGIOH_API.contains(window.location.host,"-robert.az")||DIGIOH_API.contains(window.location.host,"robert.digioh")))
src=DIGIOH_API.CONFIG.ROB_BASE_URL+"/Keen/PostToKeenR2";if(window.location.host.indexOf("beta2")===0||window.location.href.indexOf("digiohbeta2")>0)
src=DIGIOH_API.CONFIG.BETA2_BASE_URL+"/Keen/PostToKeenB2";else if(window.location.host.indexOf("beta")===0||window.location.href.indexOf("digiohbeta")>0)
src=DIGIOH_API.CONFIG.BETA_BASE_URL+"/Keen/PostToKeenB";var submitSynchronously=localStorage.getItem('BOX_SUBMIT_SYNC');if(submitSynchronously){src=src.split('/Keen/')[0]+'/Keen/SubmitAndProcess';src3='';}
const betaSiteRx=/^(|robert|keith|brian|bishoy|beta2?)\.digioh.com$|^localhost:/;if(betaSiteRx.test(window.location.host)){src='https://'+window.location.host+'/Keen/SubmitAndProcess';src3='';}
logger('postToKeen: '+src);var var_id='';var orig_lid=lid;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lid)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[lid];var_id=lid;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lid];}
var ab_test_id='';if(var_id!=''&&AB_BOXES_TAKE_MAP.hasOwnProperty(var_id)){ab_test_id=AB_BOXES_TAKE_MAP[var_id];}else if(AB_BOXES_TAKE_MAP.hasOwnProperty(orig_lid)){ab_test_id=AB_BOXES_TAKE_MAP[orig_lid];}
if(!IS_PREVIEW){if(BLIP_MATCHED===1){logger("BLIP_MATCHED_INVALID_SUBMIT_POSTTOKEEN","BLIP_MATCHED_INVALID_SUBMIT_POSTTOKEEN");return;}}
var delay_integration=false;if(post_query.indexOf('delay_integration_3_minutes')>0){logger('delay_integration_3_minutes')
delay_integration=true;}
var required_params='';required_params+='_uid='+VENDOR_GUID+'&';required_params+='_lid='+orig_lid+'&';required_params+='_vid='+var_id+'&';required_params+='_tid='+ab_test_id+'&';required_params+='_cid='+CLIENT_GUID+'&';required_params+='_sid='+sid+'&';extra_data=prepareExtraDataObject(extra_data,orig_lid,var_id,sid,ab_test_id);if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.hasOwnProperty('isRobot')&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.isRobot){required_params+='_bot=1&';}else{required_params+='_bot=0&';}
if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.hasOwnProperty('isBrowser')&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.isBrowser){required_params+='_bro=1&';}else{required_params+='_bro=0&';}
var form=LZString.compressToBase64(required_params+post_query).split('+').join('%2B');var query="?_form="+form;var extended_data={};extended_data.g={};var qsext="";qsext+=(DIGIOH_LIGHTBOX_ANALYTICS.VARS.city||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.region_name||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.country||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.country_name||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.continent||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.ip_address||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.zipcode||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.web_source||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.search_engine||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.page_visits||'0');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.past_visits||'0');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.referring_website_url||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.landing_page||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.current_page_url||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.device||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.browser_type||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.browser_version||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.operating_system||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.date_of_visit||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_source||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_medium||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_term||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_content||'');qsext+="|_-_|"+(DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_name||'');if(IS_DEV)qsext+="|_-_|1";else qsext+="|_-_|0";if(IS_PREVIEW)qsext+="|_-_|1";else qsext+="|_-_|0";var ext=LZString.compressToBase64(qsext).split('+').join('%2B');query+="&_ext="+ext;var iov='';if(window.DIGIOH_API.LIGHTBOX.hasOwnProperty('INTEGRATION_MAP')&&window.DIGIOH_API.LIGHTBOX.INTEGRATION_MAP!==null&&typeof window.DIGIOH_API.LIGHTBOX.INTEGRATION_MAP==='object'){var iov='';for(var iprop in window.DIGIOH_API.LIGHTBOX.INTEGRATION_MAP){if(window.DIGIOH_API.LIGHTBOX.INTEGRATION_MAP.hasOwnProperty(iprop)){if(iov!==''){iov+='|';}
iov+=iprop+'='+window.DIGIOH_API.LIGHTBOX.INTEGRATION_MAP[iprop];}}
if(iov!==''){iov=LZString.compressToBase64(iov).split('+').join('%2B');query+="&_iov="+iov;}}
var query_plain='';query_plain+="&_uid="+DIGIOH_VENDOR_SHORT_ID;query_plain+="&_bid="+DIGIOH_API.getBoxID(orig_lid);query_plain+="&_ice="+(DIGIOH_API.isCaptchaEnabled(lid)?'1':'0');query+=query_plain;if(DIGIOH_API.CONFIG.USE_SUBMIT_POST){if(!delay_integration){DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH.post(src+'?is_post=1'+query_plain,{_form:form,_ext:ext,_iov:iov,_extra:LZString.compressToBase64(JSON.stringify(extra_data))},function(data){logger(data);});}
if(src3&&(DIGIOH_API.CONFIG.REGION=='US'||DIGIOH_API.CONFIG.SUBMITCUS_BASE_URL.indexOf('skipendpoint')<0)){DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH.post(src3+'?is_post=1'+query_plain,{_form:form,_ext:ext,_iov:iov,_extra:LZString.compressToBase64(JSON.stringify(extra_data))},function(data3){logger(data3);});}}else{if(!delay_integration){var img=new Image();img.src=(src+query);}
if(src3&&(DIGIOH_API.CONFIG.REGION=='US'||DIGIOH_API.CONFIG.SUBMITCUS_BASE_URL.indexOf('skipendpoint')<0)){var img3=new Image();img3.src=(src3+query);}}
analyticsSubmit(orig_lid,var_id,ab_test_id);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"postToKeen");}}
function initAnalytics(){try{DIGIOH_LIGHTBOX_ANALYTICS.onDocumentReady();DIGIOH_LIGHTBOX_ANALYTICS.loadAllVars();DIGIOH_LIGHTBOX_ANALYTICS.VARS.IsLoaded=true;startIdleTimer();initKeenSchema();}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initAnalytics");}}
var onPageUrlChanged=function(url,send_pv_event,update_pv_based_vars,use_master_rules,re_calc_ab_tests){return onInfiniteScrollPageChanged(url,send_pv_event,update_pv_based_vars,use_master_rules,re_calc_ab_tests);};var onInfiniteScrollPageChanged=function(url,send_pv_event,update_pv_based_vars,use_master_rules,re_calc_ab_tests){var cobj={};var cookieName="__bxcurr";var cookieVal=DIGIOH_STORAGE.data[cookieName];if(cookieVal){if(typeof cookieVal==='string'&&cookieVal.length>1&&cookieVal.indexOf('{')===0&&cookieVal.substring(cookieVal.length-1)==='}'){cobj=JSON.parse(cookieVal);}else if(typeof cookieVal==='object'&&cookieVal!==null){cobj=cookieVal;}}
if(typeof url!=='string'||url.indexOf('://')<=0){url=window.parent.location.href;}
if(send_pv_event){window.SENT_LIGHTBOX_PV=false;cfPageview();}
TS_EVAL_PREV={};SS_EVAL_PREV={};TOTAL_TIME=0;IDLE_TIME=0;DIGIOH_LIGHTBOX_ANALYTICS.VARS.total_time_seconds=0;DIGIOH_LIGHTBOX_ANALYTICS.VARS.active_time_seconds=0;DIGIOH_LIGHTBOX_ANALYTICS.VARS.idle_time_seconds=0;var foundUpdate=false;if(url&&url!==DIGIOH_LIGHTBOX_ANALYTICS.VARS.current_page_url){var domain_base=window.parent.location.host;var domain_ending=url.replace("https://"+domain_base,"").replace("http://"+domain_base,"");DIGIOH_LIGHTBOX_ANALYTICS.VARS.current_page_url=url;DIGIOH_LIGHTBOX_ANALYTICS.VARS.pages_navigated+="|"+url;DIGIOH_LIGHTBOX_ANALYTICS.VARS.PagesNavigated.push(url);if(DIGIOH_STORAGE.storage_type==='cookie'){var pvTempArray=DIGIOH_LOCAL_STORAGE.getManual('xdibx_pgsnavurls');if(pvTempArray){pvTempArray.push(domain_ending);DIGIOH_LOCAL_STORAGE.setManual('xdibx_pgsnavurls',pvTempArray);}}else{cobj['purl'].push(domain_ending);}
foundUpdate=true;}
if(update_pv_based_vars){DIGIOH_LIGHTBOX_ANALYTICS.VARS.page_visits++;cobj['pvcnt']=DIGIOH_LIGHTBOX_ANALYTICS.VARS.page_visits;DIGIOH_LIGHTBOX_ANALYTICS.VARS.page_visits_session++;cobj['pvscnt']=DIGIOH_LIGHTBOX_ANALYTICS.VARS.page_visits_session;foundUpdate=true;}
recheckExistsSelectors();initClickSelectors();initHoverSelectors();embedInlineLightboxAlwaysForms();embedInlineLightboxConditionsForms();if(re_calc_ab_tests){initABSplitTests();initVariations();}
if(foundUpdate){DIGIOH_STORAGE.data[cookieName]=cobj;DIGIOH_STORAGE.set();}
if(!use_master_rules||checkLightboxMasterRules()){checkConditionsLoad();logger('onPageChanged('+url+')');}};function embedInlineLightboxConditionsForms(){try{for(var i=0;i<DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR.length;i++){if(IS_PREVIEW||checkConditions('',DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR[i],'',false)===DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR[i]){if(!DIGIOH_API.contains(DIGIOH_LIGHTBOX_INLINE_DISPLAYED,DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR[i])){embedInlineLightboxForm(DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR[i]);}
else{logger('DIGIOH::::embedInlineLightboxConditionsForms('+DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR[i]+') ==> FAIL 2');}}
else{logger('DIGIOH::::embedInlineLightboxConditionsForms('+DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR[i]+') ==> FAIL 3');}}
logger('ran embedInlineLightboxConditionsForms('+DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR.length+')');}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"embedInlineLightboxConditionsForms");}}
var closeAllInlineForms=function(){try{for(var i=0;i<DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR.length;i++){closeInline(DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR[i]);}
for(var i=0;i<DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR.length;i++){closeInline(DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR[i]);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"closeAllInlineForms");}};var reDisplayInlineForm=function(lid){try{if(DIGIOH_API.contains(PRELOADED_LIGHTBOXES,lid)){PRELOADED_LIGHTBOXES=DIGIOH_API.remove(PRELOADED_LIGHTBOXES,lid);}
if(DIGIOH_API.contains(DIGIOH_LIGHTBOX_INLINE_DISPLAYED,lid)){DIGIOH_LIGHTBOX_INLINE_DISPLAYED=DIGIOH_API.remove(DIGIOH_LIGHTBOX_INLINE_DISPLAYED,lid);}
embedInlineLightboxForm(lid);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"redisplayInlineForm");}};var isActiveBox=function(lbid){try{return JQUERY_DIGIOH.inArray(lbid,LOADED_LIGHTBOXES)>=0;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"isActiveBox");}};function keepSendingResizeToChildUntilReceived(resize_obj,lbid,retry_delay,cnt){try{var resizeReceivedByChild=sendMessageToIframe(resize_obj,lbid);if(!resizeReceivedByChild&&cnt*retry_delay<5000){if(EFFECTS[lbid].widget_type==='inline'||isActiveBox(lbid))
window.setTimeout(function(){keepSendingResizeToChildUntilReceived(resize_obj,lbid,retry_delay,cnt+1);},retry_delay);}else if(cnt>0&&resizeReceivedByChild){logger('DIGIOH:  keepSendingResizeToChildUntilReceived: '+cnt+' misses before SUCCEEDING: '+lbid);}else if(!resizeReceivedByChild&&cnt*retry_delay>=5000){}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"keepSendingResizeToChildUntilReceived");}}
function keepSendingEventNotificationToChildUntilReceived(notify_obj,lbid,retry_delay,cnt){try{var wasMessageReceivedByChild=sendMessageToIframe(notify_obj,lbid);if(!wasMessageReceivedByChild&&cnt*retry_delay<5000){if(EFFECTS[lbid].widget_type==='inline'||isActiveBox(lbid))
window.setTimeout(function(){keepSendingEventNotificationToChildUntilReceived(notify_obj,lbid,retry_delay,cnt+1);},retry_delay);}else if(cnt>0&&wasMessageReceivedByChild){logger('DIGIOH:  keepSendingEventNotificationToChildUntilReceived: '+cnt+' misses before SUCCEEDING: '+lbid);}else if(!wasMessageReceivedByChild&&cnt*retry_delay>=5000){}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"keepSendingEventNotificationToChildUntilReceived");}}
function getPagePref(lbid){try{var pref='';if(CURRENT_PAGE.hasOwnProperty(lbid)&&CURRENT_PAGE[lbid]!==''&&CURRENT_PAGE[lbid]!=='main'&&CURRENT_PAGE[lbid]){pref=CURRENT_PAGE[lbid];}
return pref;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getPagePref");return '';}}
var responsiveResizeCheck=function(trigger_source,lid){try{if(typeof lid!=='string'||lid.length<20){for(var b=0;b<LOADED_LIGHTBOXES.length;b++){if(LOADED_LIGHTBOXES[b]&&LOADED_LIGHTBOXES[b].length>20&&isActiveBox(LOADED_LIGHTBOXES[b])){responsiveResizeCheck(trigger_source,LOADED_LIGHTBOXES[b]);}}
for(var i=0;i<DIGIOH_LIGHTBOX_INLINE_DISPLAYED.length;i++){var lbid=DIGIOH_LIGHTBOX_INLINE_DISPLAYED[i];var var_id='';var orig_lid=lbid;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lbid)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[lbid];var_id=lbid;}
else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lbid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lbid];}
if(var_id!==''&&var_id.length>7){lbid=var_id;}
var dom_id=getLightboxDomId(lbid);var pref=getPagePref(lbid);var inlinePixelVersionChangeDetected=setPixelThreshold(lbid,true);if(inlinePixelVersionChangeDetected){logger('inlinePixelVersionChangeDetected: '+lbid);var pg='';if(CURRENT_PAGE.hasOwnProperty(lbid)){pg=CURRENT_PAGE[lbid];}
sendMessageToIframe({sender:'lightbox',action:'pixel_version_changed',page:pg},lbid);logger('responsiveResizeCheck_inline:pixel_version_changed: '+lbid+', page='+pg);var widthAndHeight='';var widthAndHeightInlineResponsive='';var responsiveScale='';if(DIGIOH_USE_RESPONSIVE&&EFFECTS[lbid].hasOwnProperty(pref+'responsive')&&EFFECTS[lbid][pref+'responsive'].use){JQUERY_DIGIOH('#'+dom_id).css({'width':getResponsiveBoxWidthPercent(lbid)+'%','height':getResponsiveBoxHeightPercent(lbid)+'%','max-width':getResponsiveBoxWidthMax(lbid)+'px','min-width':getResponsiveBoxWidthMin(lbid)+'px','max-height':getResponsiveBoxHeightMax(lbid)+'px','min-height':getResponsiveBoxHeightMin(lbid)+'px'});}
else if(!DIGIOH_USE_RESPONSIVE&&EFFECTS[lbid].hasOwnProperty(pref+'responsive')&&EFFECTS[lbid][pref+'responsive'].use){var bw=getBoxWidth(lbid);var bh=getBoxHeight(lbid);JQUERY_DIGIOH('#'+dom_id).css({'width':'100%','height':bh+'px','max-width':'10000px','min-width':bw+'px','max-height':bh+'px','min-height':bh+'px'});}
else{var bw=getBoxWidth(lbid);var bh=getBoxHeight(lbid);JQUERY_DIGIOH('#'+dom_id).css({'width':bw+'px','height':bh+'px','min-width':bw+'px','min-height':bh+'px','max-height':bh+'px'});}
setBoxToScrollMode(lbid,pg,'pixel_version_changed');}
if(EFFECTS.hasOwnProperty(lbid)&&EFFECTS[lbid].widget_type==='inline'&&EFFECTS[lbid].hasOwnProperty(pref+'responsive')&&EFFECTS[lbid][pref+'responsive'].use&&JQUERY_DIGIOH('#'+dom_id).length){inlineResponsiveResizing(lbid,dom_id,(new Date().getTime()),0,0);}}}
else if(lid&&lid!==''&&EFFECTS.hasOwnProperty(lid)&&EFFECTS[lid].widget_type!=='inline'){var pixelVersionChangeDetected=setPixelThreshold(lid,true);if(pixelVersionChangeDetected){logger('pixelVersionChangeDetected: '+lid);var pg='';if(CURRENT_PAGE.hasOwnProperty(lid)){pg=CURRENT_PAGE[lid];}
sendMessageToIframe({sender:'lightbox',action:'pixel_version_changed',page:pg},lid);setBoxToScrollMode(lid,pg,'pixel_version_changed');}
var dom_id=getLightboxDomId(lid);var pref=getPagePref(lid);if(EFFECTS[lid].hasOwnProperty(pref+'responsive')&&EFFECTS[lid][pref+'responsive'].use){var dims_obj=getActualBoxWidthAndHeight(lid);CURRENT_PAGE_DIMS_RESPONSIVE[lid]={width:dims_obj.width,height:dims_obj.height};if(EFFECTS[lid].widget_type==='sidebar'){if(FOCUSED_SIDEBAR_BANNER_GUIDS.hasOwnProperty(lid)&&FOCUSED_SIDEBAR_BANNER_GUIDS[lid]&&isMobile()){if(trigger_source==='mobile_orientation_change'){JQUERY_DIGIOH('#'+dom_id).attr('style',getSidebarPositionMobileFocused(EFFECTS[lid].sidebar,lid));}else{return;}}else{JQUERY_DIGIOH('#'+dom_id).attr('style',getSidebarPositionAfterAnimation(EFFECTS[lid].sidebar,lid));}}
if(EFFECTS[lid].widget_type==='banner'){if(FOCUSED_SIDEBAR_BANNER_GUIDS.hasOwnProperty(lid)&&FOCUSED_SIDEBAR_BANNER_GUIDS[lid]&&isMobile()){if(trigger_source==='mobile_orientation_change'){JQUERY_DIGIOH('#'+dom_id).attr('style',getBannerPositionMobileFocused(EFFECTS[lid].banner,lid));}else{return;}}else{JQUERY_DIGIOH('#'+dom_id).attr('style',getBannerPosition(EFFECTS[lid].banner,lid));}
if(!EFFECTS[lid].banner.hasOwnProperty('placement')||EFFECTS[lid].banner.placement!=='bottom'){if(JQUERY_DIGIOH('#banner-spacer-'+lid).length){var banner_height=getResponsiveBoxHeight(lid);JQUERY_DIGIOH('#banner-spacer-'+lid).height(banner_height);}}}
if(EFFECTS[lid].widget_type==='fancybox'){FANCY_REPOSITION_LOCKED[lid]=true;var left_new=Math.round(((jqWin.width()-dims_obj.width)/2)+jqWin.scrollLeft());var top_new=Math.round(((jqWin.height()-dims_obj.height)/2)+jqWin.scrollTop());var wrap=JQUERY_DIGIOH('.fb_lightbox-wrap').filter(':first');wrap.css({'left':left_new,'top':top_new,'width':dims_obj.width+'px','height':dims_obj.height+'px'});JQUERY_DIGIOH('#'+dom_id).css({'left':left_new,'top':top_new,'width':dims_obj.width+'px','height':dims_obj.height+'px'});}
keepSendingResizeToChildUntilReceived({sender:'lightbox',action:'dimensions_changed',widget_type:EFFECTS[lid].widget_type,width:dims_obj.width,height:dims_obj.height},lid,100,0);}
else{var dims_obj=getActualBoxWidthAndHeight(lid);if(EFFECTS[lid].widget_type==='sidebar'){if(FOCUSED_SIDEBAR_BANNER_GUIDS.hasOwnProperty(lid)&&FOCUSED_SIDEBAR_BANNER_GUIDS[lid]&&isMobile()){if(trigger_source==='mobile_orientation_change'){JQUERY_DIGIOH('#'+dom_id).attr('style',getSidebarPositionMobileFocused(EFFECTS[lid].sidebar,lid));}else{return;}}else{JQUERY_DIGIOH('#'+dom_id).attr('style',getSidebarPositionAfterAnimation(EFFECTS[lid].sidebar,lid));}}
if(EFFECTS[lid].widget_type==='banner'){if(FOCUSED_SIDEBAR_BANNER_GUIDS.hasOwnProperty(lid)&&FOCUSED_SIDEBAR_BANNER_GUIDS[lid]&&isMobile()){if(trigger_source==='mobile_orientation_change'){JQUERY_DIGIOH('#'+dom_id).attr('style',getBannerPositionMobileFocused(EFFECTS[lid].banner,lid));}else{return;}}else{JQUERY_DIGIOH('#'+dom_id).attr('style',getBannerPosition(EFFECTS[lid].banner,lid));}
if(!EFFECTS[lid].banner.hasOwnProperty('placement')||EFFECTS[lid].banner.placement!=='bottom'){if(JQUERY_DIGIOH('#banner-spacer-'+lid).length){var banner_height=JQUERY_DIGIOH('#'+dom_id).height();JQUERY_DIGIOH('#banner-spacer-'+lid).height(banner_height);}}}
if(EFFECTS[lid].widget_type==='fancybox'){FANCY_REPOSITION_LOCKED[lid]=true;var left_new=Math.round(((jqWin.width()-dims_obj.width)/2)+jqWin.scrollLeft());var top_new=Math.round(((jqWin.height()-dims_obj.height)/2)+jqWin.scrollTop());var m=getResponsiveScaleMultiplier(lid);var wrap=JQUERY_DIGIOH('.fb_lightbox-wrap').filter(':first');wrap.css({'left':left_new,'top':top_new,'width':dims_obj.width+'px','height':dims_obj.height+'px','transform':'scale('+m+')','-webkit-transform':'scale('+m+')','-moz-transform':'scale('+m+')','-ms-transform':'scale('+m+')','-o-transform':'scale('+m+')'});JQUERY_DIGIOH('#'+dom_id).css({'left':left_new,'top':top_new,'width':dims_obj.width+'px','height':dims_obj.height+'px','transform':'scale('+m+')','-webkit-transform':'scale('+m+')','-moz-transform':'scale('+m+')','-ms-transform':'scale('+m+')','-o-transform':'scale('+m+')'});}}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"responsiveResizeCheck");}};function getiOSWindowWidth(){return window.outerWidth;}
function doOnOrientationChange(){try{responsiveResizeCheck('mobile_orientation_change');window.setTimeout(function(){responsiveResizeCheck('mobile_orientation_change');},350);window.setTimeout(function(){responsiveResizeCheck('mobile_orientation_change');},850);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"doOnOrientationChange");}}
function responsiveResizeOnWindowResize(){try{jqWin.resize(function(){responsiveResizeCheck('window_resize');setBoxToScrollMode('','','window_resize');});}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"responsiveResizeOnWindowResize");}}
var cloneObj=function(obj){var copy;if(null==obj||"object"!=typeof obj)return obj;if(obj instanceof Date){copy=new Date();copy.setTime(obj.getTime());return copy;}
if(obj instanceof Array){copy=[];for(var i=0,len=obj.length;i<len;i++){copy[i]=cloneObj(obj[i]);}
return copy;}
if(obj instanceof Object){copy={};for(var attr in obj){if(obj.hasOwnProperty(attr)&&attr!=='__proto__')copy[attr]=cloneObj(obj[attr]);}
return copy;}
throw new Error("Unable to copy obj! Its type isn't supported.");};function initConditions(){try{var box_test_id=getUrlParam('box_test_id');var box_test_name=getUrlParam('box_test_name');var lbid='';if(IS_PREVIEW){try{var isPrintFlagSet=localStorage.getItem(PRINT_ALL_FLAG_NAME);localStorage.clear();var cookies=parent.document.cookie.split(";");for(var i=0;i<cookies.length;i++){if('AnalyticsCustom'!=cookies[i].split("=")[0]){DIGIOH_COOKIE.erase(cookies[i].split("=")[0]);logger('Preview.initConditions.eraseCookie: '+cookies[i].split("=")[0]);}}
if(isPrintFlagSet){localStorage.setItem(PRINT_ALL_FLAG_NAME,"true");}
logger('Preview.clearDataLayer, erase cookies, erase LS, for Preview');}
catch(ce){logError(ce,"initConditions.clearDataLayer.clearCookies");}}
if(window.DIGIOH_MOBILE_SDK_BOX_ID){if(DIGIOH_LIGHTBOX_IDS){for(var guid in DIGIOH_LIGHTBOX_IDS){if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(guid)&&DIGIOH_LIGHTBOX_IDS[guid]===window.DIGIOH_MOBILE_SDK_BOX_ID){lbid=guid;break;}}}
if(lbid){loadLightbox(lbid);}else{logger('The Box you are trying to display is currently turned OFF.');}}
else if(box_test_id&&box_test_name){if(DIGIOH_LIGHTBOX_IDS){for(var guid in DIGIOH_LIGHTBOX_IDS){if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(guid)&&DIGIOH_LIGHTBOX_IDS[guid]===box_test_id){lbid=guid;break;}}
if(lbid){if(!EFFECTS.hasOwnProperty(lbid)||!EFFECTS[lbid]){logger('**DIGIOH_DEFAULT_EFFECTS() were required in Test Mode**');var w={};w.widget_type="sidebar";w.sidebar={};w.sidebar.css_positioning="fixed";w.sidebar.position="center-center";w.sidebar.speed={"open":100,"close":100};w.sidebar.animation={open:"fade",close:"fade"};w.sidebar.easing={open:"swing",close:"swing"};w.sidebar.close_button={display:false};w.sidebar.auto_close={"click":false,"time":0,"scroll_up":0,"scroll_down":0};w.sidebar.teaser={display:false};EFFECTS[lbid]=w;DIGIOH_LIGHTBOX_EFFECTS[lbid]=w;}
var box_brst_scrsht=getUrlParam('box_brst_scrsht');if(box_brst_scrsht&&box_brst_scrsht==='y'){if(EFFECTS[lbid].widget_type=="sidebar"){EFFECTS[lbid].sidebar.css_positioning='absolute';}else if(EFFECTS[lbid].widget_type=="banner"){EFFECTS[lbid].banner.css_positioning='absolute';}}
if(window.location.href.indexOf('lightbox-jquery-selector-generator')>0&&EFFECTS[lbid].widget_type==='inline'){DIGIOH_API.activeInlineSelectorGeneratorBox=lbid;}
else if(EFFECTS[lbid].widget_type==='inline'){if(!EFFECTS[lbid].hasOwnProperty('sidebar')){EFFECTS[lbid].sidebar={};EFFECTS[lbid].sidebar.animation={};EFFECTS[lbid].sidebar.easing={};EFFECTS[lbid].sidebar.auto_close={click:true,time:0,scroll_up:0,scroll_down:0};EFFECTS[lbid].sidebar.close_button={display:true,type:'default',image:'',position:'top-right',offset_x:-18,offset_y:-18};EFFECTS[lbid].sidebar.css='';EFFECTS[lbid].sidebar.css_positioning='absolute';EFFECTS[lbid].sidebar.speed={open:400,close:400};EFFECTS[lbid].sidebar.teaser={display:false,display_on_page_load:false};}
EFFECTS[lbid].widget_type='sidebar';EFFECTS[lbid].sidebar.position='center-center';EFFECTS[lbid].sidebar.animation.open='fade';EFFECTS[lbid].sidebar.animation.close='fade';EFFECTS[lbid].sidebar.easing.open='swing';EFFECTS[lbid].sidebar.easing.close='swing';EFFECTS[lbid].sidebar.overlay={};EFFECTS[lbid].sidebar.overlay.close_click=false;EFFECTS[lbid].sidebar.overlay.background={color:"rgba(255, 255, 255, 0)",gradient:"rgba(255, 255, 255, 0)",image:"",position:"left top",repeat:"no-repeat",use_gradient:false,use_image:false};EFFECTS[lbid].sidebar.css_positioning='absolute';responsiveResizeOnWindowResize();logger("loadLightbox: initConditions > box_test > inline, "+lbid);loadLightbox(lbid);}
else{responsiveResizeOnWindowResize();logger("loadLightbox: initConditions > box_test > non-inline, "+lbid);loadLightbox(lbid);}}else{alert('The Box you are trying to test is currently turned OFF, or it does not have any Conditions assigned to it.  In order to test a Box on your site, you must first turn the Box ON, add at least 1 Condition to it, and then Publish.  Note: only YOU will see this alert message, your visitors will NEVER see this message.');}}}
else if(!IS_PREVIEW){initABSplitTests();initVariations();initLightboxActivity();buildConditionSelectorsToBoxesMap();responsiveResizeOnWindowResize();if(isMobile()||isTablet()){window.addEventListener('orientationchange',doOnOrientationChange);DIGIOH_API.PREVIOUS_WINDOW_WIDTH=getiOSWindowWidth();DIGIOH_API.previousOrientation=window.orientation;window.setInterval(function(){if(Math.abs(DIGIOH_API.PREVIOUS_WINDOW_WIDTH-getiOSWindowWidth())>50||window.orientation!==DIGIOH_API.previousOrientation){DIGIOH_API.PREVIOUS_WINDOW_WIDTH=getiOSWindowWidth();DIGIOH_API.previousOrientation=window.orientation;doOnOrientationChange();}},500);}
initExistsSelectors();embedInlineLightboxAlwaysForms();embedInlineLightboxConditionsForms();logger('DIGIOH: checkLightboxMasterRules() called from initConditions()');if(checkLightboxMasterRules()){preloadLightboxes();if(VENDOR_GUID!=="13511-7341134d-8e07-40ab-b595-a3d69d7a4501"||document.location.href.indexOf("ecospaints.net/shop-by-color-reds")!==-1){checkConditionsPreloadTeasers();}
initClickSelectors();initHoverSelectors();initScrollSelectors();initExitSelectors();checkConditionsLoad();logger('DIGIOH_LIGHTBOX_ANALYTICS.VARS ==>');logger(DIGIOH_LIGHTBOX_ANALYTICS.VARS,true);}}
else{initVariations();responsiveResizeOnWindowResize();if(isMobile()||isTablet()){window.addEventListener('orientationchange',doOnOrientationChange);}
lbid=LIGHTBOX_GUID_PREVIEW;if(typeof IS_VARIATION_PREVIEW!=='undefined'&&IS_VARIATION_PREVIEW==='true'&&VARIATION_GUID_PREVIEW&&VARIATION_GUID_PREVIEW.length>7){if(!LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lbid)){LIGHTBOX_TO_VARIATION_MAP[lbid]=VARIATION_GUID_PREVIEW;}
if(!DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(VARIATION_GUID_PREVIEW)){DIGIOH_VARIATION_TO_BOX_MAP[VARIATION_GUID_PREVIEW]=LIGHTBOX_GUID_PREVIEW;}
lbid=VARIATION_GUID_PREVIEW;LIGHTBOX_GUID_PREVIEW=VARIATION_GUID_PREVIEW;if(DIGIOH_API.contains(DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR,VARIATION_GUID_PREVIEW)){DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR=[lbid,VARIATION_GUID_PREVIEW];}
else if(DIGIOH_API.contains(DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR,VARIATION_GUID_PREVIEW)){DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR=[lbid,VARIATION_GUID_PREVIEW];}}
embedInlineLightboxAlwaysForms();embedInlineLightboxConditionsForms();if(!EFFECTS.hasOwnProperty(lbid)||!EFFECTS[lbid]){logger('**DIGIOH_DEFAULT_EFFECTS() were required in Preview**');var w={};w.widget_type="sidebar";w.sidebar={};w.sidebar.css_positioning="fixed";w.sidebar.position="center-center";w.sidebar.speed={"open":100,"close":100};w.sidebar.animation={open:"fade",close:"fade"};w.sidebar.easing={open:"swing",close:"swing"};w.sidebar.close_button={display:false};w.sidebar.auto_close={"click":false,"time":0,"scroll_up":0,"scroll_down":0};w.sidebar.teaser={display:false};var settings=DIGIOH_API.GET_SETTINGS(lbid);if(settings&&settings.hasOwnProperty('is_core_prq')&&settings.is_core_prq){var md=[];if(settings.hasOwnProperty('prq_gsheet_url')&&settings.prq_gsheet_url){md.push({'k':'prq_gsheet_url','v':settings.prq_gsheet_url});}
if(settings.hasOwnProperty('results_redirect_url_shopify')&&settings.results_redirect_url_shopify){md.push({'k':'results_redirect_url_shopify','v':settings.results_redirect_url_shopify});}
w.sidebar.metadata_kvps=md;}
EFFECTS[lbid]=w;DIGIOH_LIGHTBOX_EFFECTS[lbid]=w;}
if(JQUERY_DIGIOH.inArray(lbid,DIGIOH_LIGHTBOX_PRELOAD_ARR)<0)
DIGIOH_LIGHTBOX_PRELOAD_ARR.push(lbid);var effects=EFFECTS[lbid];IS_PREVIEW_EVENT=(IS_PREVIEW_CLICK||IS_PREVIEW_HOVER||IS_PREVIEW_SCROLL||IS_PREVIEW_EXIT);preloadLightboxes();if(VENDOR_GUID!="13511-7341134d-8e07-40ab-b595-a3d69d7a4501"||document.location.href.indexOf("ecospaints.net/shop-by-color-reds")!==-1){if(effects.widget_type=="sidebar"&&effects.sidebar.teaser&&effects.sidebar.teaser.display_on_page_load){openTeaser(effects.sidebar.teaser,lbid);}else if(effects.widget_type=="fancybox"&&effects.fancybox.teaser&&effects.fancybox.teaser.display_on_page_load){openTeaser(effects.fancybox.teaser,lbid);}}
lbid='';if(typeof IS_PREVIEW_CLICK!=="undefined"&&IS_PREVIEW_CLICK){JQUERY_DIGIOH("#preview_click_selector").click(function(e){e.preventDefault();DIGIOH_LIGHTBOX_ANALYTICS.VARS.click_jquery_selector["#preview_click_selector"]=true;logger("loadLightbox: initConditions > Preview > click_jquery_selector, "+LIGHTBOX_GUID_PREVIEW);loadLightbox(LIGHTBOX_GUID_PREVIEW);DIGIOH_LIGHTBOX_ANALYTICS.VARS.click_jquery_selector["#preview_click_selector"]=false;});}else if(typeof IS_PREVIEW_HOVER!=="undefined"&&IS_PREVIEW_HOVER){DIGIOH_LIGHTBOX_ANALYTICS.VARS.hover_jquery_selector["#preview_hover_selector"]=false;JQUERY_DIGIOH("#preview_hover_selector").mouseenter(function(){DIGIOH_LIGHTBOX_ANALYTICS.VARS.hover_jquery_selector["#preview_hover_selector"]=true;logger("loadLightbox: initConditions > Preview > hover_jquery_selector, "+LIGHTBOX_GUID_PREVIEW);loadLightbox(LIGHTBOX_GUID_PREVIEW);}).mouseleave(function(){DIGIOH_LIGHTBOX_ANALYTICS.VARS.hover_jquery_selector["#preview_hover_selector"]=false;});}else if(typeof IS_PREVIEW_SCROLL!=="undefined"&&IS_PREVIEW_SCROLL){DIGIOH_LIGHTBOX_ANALYTICS.VARS.scroll_pixels_prev=0;DIGIOH_LIGHTBOX_ANALYTICS.VARS.scroll_pixels=0;jqWin.scroll(function(){DIGIOH_LIGHTBOX_ANALYTICS.VARS.scroll_pixels=Math.round(jqWin.scrollTop());if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.scroll_pixels<DIGIOH_LIGHTBOX_ANALYTICS.VARS.scroll_pixels_prev){DIGIOH_LIGHTBOX_ANALYTICS.VARS.scroll_pixels_prev=DIGIOH_LIGHTBOX_ANALYTICS.VARS.scroll_pixels;}
if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.scroll_pixels>=300+DIGIOH_LIGHTBOX_ANALYTICS.VARS.scroll_pixels_prev){DIGIOH_LIGHTBOX_ANALYTICS.VARS.scroll_pixels_prev=DIGIOH_LIGHTBOX_ANALYTICS.VARS.scroll_pixels;logger("loadLightbox: initConditions > Preview > scroll_pixels, "+LIGHTBOX_GUID_PREVIEW);loadLightbox(LIGHTBOX_GUID_PREVIEW);}});}else if(typeof IS_PREVIEW_EXIT!=="undefined"&&IS_PREVIEW_EXIT){var mousex=-1;var mousey=-1;var lastmousex=-1;var lastmousey=-1;var lastmousetime;var mousetravel=0;var directionx='';var directiony='';var pageWidth=jqWin.width();var pageHeight=jqWin.height();var yOffset=jqWin.scrollTop();jqDoc.mousemove(function(e){mousex=e.pageX;mousey=e.pageY;if(lastmousex>-1){mousetravel=Math.max(Math.abs(mousex-lastmousex),Math.abs(mousey-lastmousey));if(mousex<lastmousex)directionx='left';else directionx='right';if(mousey<lastmousey)directiony='up';else directiony='down';}
lastmousex=mousex;lastmousey=mousey;});jqDoc.mouseleave(function(){var yOffset=jqWin.scrollTop();if(directiony=='up'&&mousey<yOffset+20&&mousetravel>3){logger("loadLightbox: initConditions > Preview > exit_intent, "+LIGHTBOX_GUID_PREVIEW);loadLightbox(LIGHTBOX_GUID_PREVIEW);}else if(directiony=='down'&&mousey>pageHeight+yOffset-20&&mousetravel>3){logger("loadLightbox: initConditions > Preview > exit_intent, "+LIGHTBOX_GUID_PREVIEW);loadLightbox(LIGHTBOX_GUID_PREVIEW);}else if(directionx=='right'&&mousex>pageWidth-20&&mousetravel>3){logger("loadLightbox: initConditions > Preview > exit_intent, "+LIGHTBOX_GUID_PREVIEW);loadLightbox(LIGHTBOX_GUID_PREVIEW);}else if(directionx=='left'&&mousex<20&&mousetravel>3){logger("loadLightbox: initConditions > Preview > exit_intent, "+LIGHTBOX_GUID_PREVIEW);loadLightbox(LIGHTBOX_GUID_PREVIEW);}});jqWin.resize(function(){pageWidth=jqWin.width();pageHeight=jqWin.height();yOffset=jqWin.scrollTop();});}else{lbid=LIGHTBOX_GUID_PREVIEW;}
if(EFFECTS[LIGHTBOX_GUID_PREVIEW].hasOwnProperty('iframe')&&EFFECTS[LIGHTBOX_GUID_PREVIEW]['iframe']['use_custom']){if(typeof DigiohPreviewOnScriptLoaded!=="undefined"){DigiohPreviewOnScriptLoaded();}
if(!IS_PREVIEW_EVENT){window.setTimeout(function(){logger("loadLightbox: initConditions > Preview > iframe.use_custom, "+LIGHTBOX_GUID_PREVIEW);loadLightbox(LIGHTBOX_GUID_PREVIEW);},500);}}
if(typeof DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS==='object'){lbid=LIGHTBOX_GUID_PREVIEW;var bb='';var ptArr=[];if(DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS.hasOwnProperty(lbid)){for(var prop in DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS[lbid]){if(DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS[lbid].hasOwnProperty(prop)){if(JQUERY_DIGIOH.inArray(parseInt(prop),ptArr)===-1){ptArr.push(parseInt(prop));}}}}
if(ptArr.length>0){ptArr.sort(function(a,b){return a-b;});var breakpoint_bar_position='bottom';if(effects.widget_type=="sidebar"&&effects.sidebar.position.indexOf('bottom-')===0||effects.widget_type=="banner"&&effects.banner.placement==='bottom')
breakpoint_bar_position='top';var currHeight=jqWin.height();var prevWidth=0;for(var i=0;i<ptArr.length;i++){bb+="<a href='javascript:window.resizeTo([BP2], "+currHeight+");' style='display:inline-block;cursor:pointer;float:left;width:[BP1]px;height:35px;line-height:35px;text-align:center;border-right:3px solid white;color:white;background-color:black;'>Breakpoint [BP2]px</a>";bb=bb.split('[BP2]').join(ptArr[i].toString()).replace('[BP1]',(ptArr[i]-prevWidth-3).toString());prevWidth=ptArr[i];}
bb+="<a href='javascript:window.resizeTo([BP2], "+currHeight+");' style='display:inline-block;cursor:pointer;float:left;width:[BP1]px;height:35px;line-height:35px;text-align:center;color:white;background-color:black;'>Main &rarr;</a>";bb=bb.split('[BP2]').join((prevWidth+300).toString()).replace('[BP1]',(280).toString());JQUERY_DIGIOH("body").css('overflow-x','hidden').prepend("<div id='breakpoint_bar' style='min-width:"+(prevWidth+300)+"px;z-index:9998010;position:fixed;"+breakpoint_bar_position+":0px;background-color:black;width:100%;height:35px;'>"+bb+"<div style='float:none;clear:both;'></div></div>");}}}
logger("STOPWATCH (initConditions finished) - "+Math.ceil((new Date().getTime()-STOPWATCH)/1000));}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initConditions");}}
function buildConditionSelectorsToBoxesMap(){try{var rule_prop='';var rule_operator='';var rule_val='';var rule_set=[];var lbid='';var event_type='';CONDITION_SELECTOR_BOXES_MAP['click']={};CONDITION_SELECTOR_BOXES_MAP['hover']={};CONDITION_SELECTOR_BOXES_MAP['exists']={};for(var i=0;i<DIGIOH_LIGHTBOX_CONDITIONS.length;i++){DIGIOH_LIGHTBOX_CONDITIONS[i].has_only_load_rules=false;DIGIOH_LIGHTBOX_CONDITIONS[i].has_exists_rules=false;DIGIOH_LIGHTBOX_CONDITIONS[i].has_click_rules=false;DIGIOH_LIGHTBOX_CONDITIONS[i].has_hover_rules=false;DIGIOH_LIGHTBOX_CONDITIONS[i].has_scroll_rules=false;DIGIOH_LIGHTBOX_CONDITIONS[i].has_exit_rules=false;DIGIOH_LIGHTBOX_CONDITIONS[i].has_time_rules=false;lbid=DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid;var found_non_load_rules_in_or_block=false;var found_or_block_with_only_load_rules=false;var found_non_load_rules_in_or_block_ruleset=false;var found_or_block_with_only_load_rules_ruleset=false;for(var x=0;x<DIGIOH_LIGHTBOX_CONDITIONS[i].conditions.length;x++){found_non_load_rules_in_or_block=false;for(var y=0;y<DIGIOH_LIGHTBOX_CONDITIONS[i].conditions[x].length;y++){rule_prop=DIGIOH_LIGHTBOX_CONDITIONS[i].conditions[x][y]['p'];rule_operator=DIGIOH_LIGHTBOX_CONDITIONS[i].conditions[x][y]['o'];rule_val=DIGIOH_LIGHTBOX_CONDITIONS[i].conditions[x][y]['v'];rule_set=DIGIOH_LIGHTBOX_CONDITIONS[i].conditions[x][y]['s'];event_type='';if(rule_prop=='I_total_time_seconds'||rule_prop=='I_active_time_seconds'||rule_prop=='I_idle_time_seconds'){DIGIOH_LIGHTBOX_CONDITIONS[i].has_time_rules=true;found_non_load_rules_in_or_block=true;if(JQUERY_DIGIOH.inArray(lbid,TIME_BOXES_ARR)==-1){TIME_BOXES_ARR.push(lbid);}}else if(rule_prop=='I_scroll_percent'||rule_prop=='I_scroll_pixels'){DIGIOH_LIGHTBOX_CONDITIONS[i].has_scroll_rules=true;found_non_load_rules_in_or_block=true;if(JQUERY_DIGIOH.inArray(lbid,SCROLL_BOXES_ARR)==-1){SCROLL_BOXES_ARR.push(lbid);}}else if(rule_prop=='E_exit_intent'){DIGIOH_LIGHTBOX_CONDITIONS[i].has_exit_rules=true;found_non_load_rules_in_or_block=true;if(JQUERY_DIGIOH.inArray(lbid,EXIT_BOXES_ARR)==-1){EXIT_BOXES_ARR.push(lbid);}}else if(rule_prop=='C_click_jquery_selector'){DIGIOH_LIGHTBOX_CONDITIONS[i].has_click_rules=true;found_non_load_rules_in_or_block=true;event_type='click';}else if(rule_prop=='C_hover_jquery_selector'){DIGIOH_LIGHTBOX_CONDITIONS[i].has_hover_rules=true;found_non_load_rules_in_or_block=true;event_type='hover';}else if(rule_prop=='C_exists_jquery_selector'){DIGIOH_LIGHTBOX_CONDITIONS[i].has_exists_rules=true;found_non_load_rules_in_or_block=true;event_type='exists';}
else if(rule_prop==='R_ruleset'&&DIGIOH_LIGHTBOX_RULESETS.hasOwnProperty(rule_val)){for(var w=0;w<DIGIOH_LIGHTBOX_RULESETS[rule_val].length;w++){found_non_load_rules_in_or_block_ruleset=false;for(var z=0;z<DIGIOH_LIGHTBOX_RULESETS[rule_val][w].length;z++){var ruleset_prop=DIGIOH_LIGHTBOX_RULESETS[rule_val][w][z]['p'];var ruleset_operator=DIGIOH_LIGHTBOX_RULESETS[rule_val][w][z]['o'];var ruleset_val=DIGIOH_LIGHTBOX_RULESETS[rule_val][w][z]['v'];var ruleset_set=DIGIOH_LIGHTBOX_RULESETS[rule_val][w][z]['s'];if(ruleset_prop=='I_total_time_seconds'||ruleset_prop=='I_active_time_seconds'||ruleset_prop=='I_idle_time_seconds'){DIGIOH_LIGHTBOX_CONDITIONS[i].has_time_rules=true;found_non_load_rules_in_or_block_ruleset=true;if(JQUERY_DIGIOH.inArray(lbid,TIME_BOXES_ARR)==-1){TIME_BOXES_ARR.push(lbid);}}else if(ruleset_prop=='I_scroll_percent'||ruleset_prop=='I_scroll_pixels'){DIGIOH_LIGHTBOX_CONDITIONS[i].has_scroll_rules=true;found_non_load_rules_in_or_block_ruleset=true;if(JQUERY_DIGIOH.inArray(lbid,SCROLL_BOXES_ARR)==-1){SCROLL_BOXES_ARR.push(lbid);}}else if(ruleset_prop=='E_exit_intent'){DIGIOH_LIGHTBOX_CONDITIONS[i].has_exit_rules=true;found_non_load_rules_in_or_block_ruleset=true;if(JQUERY_DIGIOH.inArray(lbid,EXIT_BOXES_ARR)==-1){EXIT_BOXES_ARR.push(lbid);}}else if(ruleset_prop=='C_click_jquery_selector'){DIGIOH_LIGHTBOX_CONDITIONS[i].has_click_rules=true;found_non_load_rules_in_or_block_ruleset=true;event_type='click';}else if(ruleset_prop=='C_hover_jquery_selector'){DIGIOH_LIGHTBOX_CONDITIONS[i].has_hover_rules=true;found_non_load_rules_in_or_block_ruleset=true;event_type='hover';}else if(ruleset_prop=='C_exists_jquery_selector'){DIGIOH_LIGHTBOX_CONDITIONS[i].has_exists_rules=true;found_non_load_rules_in_or_block_ruleset=true;event_type='exists';}
if(event_type!=''&&ruleset_prop.indexOf('C_')===0&&ruleset_prop.indexOf('jquery_selector')>0){if(ruleset_operator=='in_set'||ruleset_operator=='not_in_set'){for(var k=0;k<ruleset_set.length;k++){if(ruleset_set[k]!=''){if(!CONDITION_SELECTOR_BOXES_MAP[event_type].hasOwnProperty(ruleset_set[k])){CONDITION_SELECTOR_BOXES_MAP[event_type][ruleset_set[k]]=[lbid];}else if(JQUERY_DIGIOH.inArray(lbid,CONDITION_SELECTOR_BOXES_MAP[event_type][ruleset_set[k]])==-1){CONDITION_SELECTOR_BOXES_MAP[event_type][ruleset_set[k]].push(lbid);}
if(event_type=='click'&&JQUERY_DIGIOH.inArray(ruleset_set[k],CLICK_SELECTORS)==-1){CLICK_SELECTORS.push(ruleset_set[k]);}else if(event_type=='hover'&&JQUERY_DIGIOH.inArray(ruleset_set[k],HOVER_SELECTORS)==-1){HOVER_SELECTORS.push(ruleset_set[k]);}else if(event_type=='exists'&&JQUERY_DIGIOH.inArray(ruleset_set[k],EXISTS_SELECTORS)==-1){EXISTS_SELECTORS.push(ruleset_set[k]);}}}}
else{if(ruleset_val!=''){if(!CONDITION_SELECTOR_BOXES_MAP[event_type].hasOwnProperty(ruleset_val)){CONDITION_SELECTOR_BOXES_MAP[event_type][ruleset_val]=[lbid];}else if(JQUERY_DIGIOH.inArray(lbid,CONDITION_SELECTOR_BOXES_MAP[event_type][ruleset_val])==-1){CONDITION_SELECTOR_BOXES_MAP[event_type][ruleset_val].push(lbid);}
if(event_type=='click'&&JQUERY_DIGIOH.inArray(ruleset_val,CLICK_SELECTORS)==-1){CLICK_SELECTORS.push(ruleset_val);}else if(event_type=='hover'&&JQUERY_DIGIOH.inArray(ruleset_val,HOVER_SELECTORS)==-1){HOVER_SELECTORS.push(ruleset_val);}else if(event_type=='exists'&&JQUERY_DIGIOH.inArray(ruleset_val,EXISTS_SELECTORS)==-1){EXISTS_SELECTORS.push(ruleset_val);}}}}}
if(!found_non_load_rules_in_or_block_ruleset){found_or_block_with_only_load_rules_ruleset=true;}}}
else{found_or_block_with_only_load_rules_ruleset=true;}
if(!found_non_load_rules_in_or_block&&found_or_block_with_only_load_rules_ruleset){found_or_block_with_only_load_rules=true;}
if(event_type!=''&&rule_prop!=='R_ruleset'){if(rule_operator=='in_set'||rule_operator=='not_in_set'){for(var k=0;k<rule_set.length;k++){if(rule_set[k]!=''){if(!CONDITION_SELECTOR_BOXES_MAP[event_type].hasOwnProperty(rule_set[k])){CONDITION_SELECTOR_BOXES_MAP[event_type][rule_set[k]]=[lbid];}else if(JQUERY_DIGIOH.inArray(lbid,CONDITION_SELECTOR_BOXES_MAP[event_type][rule_set[k]])==-1){CONDITION_SELECTOR_BOXES_MAP[event_type][rule_set[k]].push(lbid);}
if(event_type=='click'&&JQUERY_DIGIOH.inArray(rule_set[k],CLICK_SELECTORS)==-1){CLICK_SELECTORS.push(rule_set[k]);}else if(event_type=='hover'&&JQUERY_DIGIOH.inArray(rule_set[k],HOVER_SELECTORS)==-1){HOVER_SELECTORS.push(rule_set[k]);}else if(event_type=='exists'&&JQUERY_DIGIOH.inArray(rule_set[k],EXISTS_SELECTORS)==-1){EXISTS_SELECTORS.push(rule_set[k]);}}}}
else{if(rule_val!=''){if(!CONDITION_SELECTOR_BOXES_MAP[event_type].hasOwnProperty(rule_val)){CONDITION_SELECTOR_BOXES_MAP[event_type][rule_val]=[lbid];}else if(JQUERY_DIGIOH.inArray(lbid,CONDITION_SELECTOR_BOXES_MAP[event_type][rule_val])==-1){CONDITION_SELECTOR_BOXES_MAP[event_type][rule_val].push(lbid);}
if(event_type=='click'&&JQUERY_DIGIOH.inArray(rule_val,CLICK_SELECTORS)==-1){CLICK_SELECTORS.push(rule_val);}else if(event_type=='hover'&&JQUERY_DIGIOH.inArray(rule_val,HOVER_SELECTORS)==-1){HOVER_SELECTORS.push(rule_val);}else if(event_type=='exists'&&JQUERY_DIGIOH.inArray(rule_val,EXISTS_SELECTORS)==-1){EXISTS_SELECTORS.push(rule_val);}}}}
else if(rule_prop==='R_ruleset'){}}}
DIGIOH_LIGHTBOX_CONDITIONS[i].has_only_load_rules=!(DIGIOH_LIGHTBOX_CONDITIONS[i].has_click_rules||DIGIOH_LIGHTBOX_CONDITIONS[i].has_hover_rules||DIGIOH_LIGHTBOX_CONDITIONS[i].has_scroll_rules||DIGIOH_LIGHTBOX_CONDITIONS[i].has_exit_rules||DIGIOH_LIGHTBOX_CONDITIONS[i].has_time_rules);DIGIOH_LIGHTBOX_CONDITIONS[i].has_or_block_with_only_load_rules=found_or_block_with_only_load_rules;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"buildConditionSelectorsToBoxesMap");}}
function doConditionsUseGeo(){try{var rule_prop='';for(var i=0;i<DIGIOH_LIGHTBOX_CONDITIONS.length;i++){for(var x=0;x<DIGIOH_LIGHTBOX_CONDITIONS[i].conditions.length;x++){for(var y=0;y<DIGIOH_LIGHTBOX_CONDITIONS[i].conditions[x].length;y++){rule_prop=DIGIOH_LIGHTBOX_CONDITIONS[i].conditions[x][y]['p'];if(rule_prop=='E_continent'||rule_prop=='E_country'||rule_prop=='E_state'||rule_prop=='S_city'||rule_prop=='S_ip_address'||rule_prop=='S_zipcode'||rule_prop=='I_latitude'||rule_prop=='I_longitude'||rule_prop=='S_metro_code'||rule_prop=='S_area_code'){return true;}}}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"doConditionsUseGeo");}
return false;}
function getRandomInt(min,max){var res=Math.floor(Math.random()*(max-min))+min;if(res>=max)res--;return res;}
function initVariations(){var keepVariation=false;for(var variation_guid in DIGIOH_VARIATION_TO_BOX_MAP){if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(variation_guid)&&DIGIOH_VARIATION_TO_BOX_MAP[variation_guid].length>7){if(AB_BOXES_SKIP_MAP.hasOwnProperty(variation_guid)){keepVariation=false;}else if(AB_BOXES_TAKE_MAP.hasOwnProperty(variation_guid)){keepVariation=true;}else if(DIGIOH_PRIMARY_VARIATIONS_ARR.length>0&&DIGIOH_PRIMARY_VARIATIONS_ARR.join(',').indexOf(variation_guid)>=0){keepVariation=true;}else{keepVariation=false;}
if(!keepVariation){if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(variation_guid)){delete DIGIOH_VARIATION_TO_BOX_MAP[variation_guid];}}}}
for(var variation_guid in DIGIOH_VARIATION_TO_BOX_MAP){if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(variation_guid)&&DIGIOH_VARIATION_TO_BOX_MAP[variation_guid].length>7){if(AB_BOXES_SKIP_MAP.hasOwnProperty(variation_guid)){keepVariation=false;}else if(AB_BOXES_TAKE_MAP.hasOwnProperty(variation_guid)){keepVariation=true;}else if(DIGIOH_PRIMARY_VARIATIONS_ARR.length>0&&DIGIOH_PRIMARY_VARIATIONS_ARR.join(',').indexOf(variation_guid)>=0){keepVariation=true;}else{keepVariation=false;}
if(keepVariation){LIGHTBOX_TO_VARIATION_MAP[DIGIOH_VARIATION_TO_BOX_MAP[variation_guid]]=variation_guid;}}}}
var initABSplitTests=function(){try{if(typeof DIGIOH_SPLIT_TESTS_ARR==='undefined'){return false;}
var utcNowMillisJs=new Date().getTime();var foundMatch=false;var lpMax=1000000;for(var i=0;i<DIGIOH_SPLIT_TESTS_ARR.length;i++){var tp=getRandomInt(1,101);var lp=getRandomInt(1,lpMax+1);var dist=0;var test_type='multivariate';var skip=false;if(DIGIOH_API&&DIGIOH_API.hasOwnProperty('RANDOM_GLOBAL')&&DIGIOH_API.RANDOM_GLOBAL){lp=DIGIOH_API.RANDOM_GLOBAL;}
if(!DIGIOH_STORAGE.data.hasOwnProperty("__bxabtest"))
DIGIOH_STORAGE.data["__bxabtest"]={};if(!DIGIOH_STORAGE.data["__bxabtest"].hasOwnProperty(DIGIOH_SPLIT_TESTS_ARR[i].split_short_id))
DIGIOH_STORAGE.data["__bxabtest"][DIGIOH_SPLIT_TESTS_ARR[i].split_short_id]={};if(!DIGIOH_STORAGE.data["__bxabtest"][DIGIOH_SPLIT_TESTS_ARR[i].split_short_id].hasOwnProperty('end_date'))
DIGIOH_STORAGE.data["__bxabtest"][DIGIOH_SPLIT_TESTS_ARR[i].split_short_id]={"tp":tp,"lp":lp,"end_date":DIGIOH_SPLIT_TESTS_ARR[i].end_date};if(DIGIOH_SPLIT_TESTS_ARR[i].end_date<=utcNowMillisJs){delete DIGIOH_STORAGE.data["__bxabtest"][DIGIOH_SPLIT_TESTS_ARR[i].split_short_id];}else if(typeof DIGIOH_VENDOR_SHORT_ID!=='undefined'&&DIGIOH_VENDOR_SHORT_ID&&DIGIOH_VENDOR_SHORT_ID.toString()!='1'){tp=DIGIOH_STORAGE.data["__bxabtest"][DIGIOH_SPLIT_TESTS_ARR[i].split_short_id].tp;lp=DIGIOH_STORAGE.data["__bxabtest"][DIGIOH_SPLIT_TESTS_ARR[i].split_short_id].lp;if(lp<=100)lpMax=100;}
if(!DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('test_type')||DIGIOH_SPLIT_TESTS_ARR[i].test_type==='multivariate'){test_type='multivariate';}else if(DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('test_type')&&DIGIOH_SPLIT_TESTS_ARR[i].test_type==='box_variation'){test_type='box_variation';}else if(DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('test_type')&&DIGIOH_SPLIT_TESTS_ARR[i].test_type==='variation_variation'){test_type='variation_variation';}else{logger('Skipping AB Test (No Test Type Specified): '+DIGIOH_SPLIT_TESTS_ARR[i].name);skip=true;}
if(!skip&&DIGIOH_SPLIT_TESTS_ARR[i].start_date>=utcNowMillisJs){logger('Skipping AB Test ('+test_type+') (Start Date): '+DIGIOH_SPLIT_TESTS_ARR[i].name);skip=true;}
if(!skip&&DIGIOH_SPLIT_TESTS_ARR[i].end_date<=utcNowMillisJs){logger('Skipping AB Test ('+test_type+') (End Date): '+DIGIOH_SPLIT_TESTS_ARR[i].name);skip=true;}
if(!skip&&DIGIOH_SPLIT_TESTS_ARR[i].traffic_percent<tp){logger('Skipping AB Test ('+test_type+') (Traffic Percent): '+DIGIOH_SPLIT_TESTS_ARR[i].name+', and associated Lightboxes...');if(test_type=='multivariate'){var box_guids=DIGIOH_SPLIT_TESTS_ARR[i].box_guids.split(',');for(var j=0;j<box_guids.length;j++){AB_BOXES_SKIP_MAP[box_guids[j]]=DIGIOH_SPLIT_TESTS_ARR[i].split_guid;logger('Skipping Lightbox : '+box_guids[j]);}}
skip=true;}
if(skip){if(DIGIOH_SPLIT_TESTS_ARR[i].variation_guids.length>0){var var_guids=DIGIOH_SPLIT_TESTS_ARR[i].variation_guids.split(',');for(var j=0;j<var_guids.length;j++){if(DIGIOH_SPLIT_TESTS_ARR[i].primary_variation_guids.indexOf(var_guids[j])===-1){AB_BOXES_SKIP_MAP[var_guids[j]]=DIGIOH_SPLIT_TESTS_ARR[i].split_guid;}}}
continue;}
if(test_type=='multivariate'){var box_guids=DIGIOH_SPLIT_TESTS_ARR[i].box_guids.split(',');var box_weights=(DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('box_weights')&&DIGIOH_SPLIT_TESTS_ARR[i].box_weights.indexOf(',')>0)?DIGIOH_SPLIT_TESTS_ARR[i].box_weights.split(','):[];if(box_guids.length<2){logger('Skipping AB Test (Multivariate) (Box GUIDs length = '+box_guids.length+', min 2): '+DIGIOH_SPLIT_TESTS_ARR[i].name);continue;}
var matchedBoxGuid='';foundMatch=false;dist=lpMax/box_guids.length;var pctCheckedSoFar=0;for(var k=0;k<box_guids.length;k++){var isOutsideRange=true;if(box_weights.length===box_guids.length){dist=lpMax*parseInt(box_weights[k])/100;isOutsideRange=lp<pctCheckedSoFar||lp>(pctCheckedSoFar+dist);pctCheckedSoFar+=dist;}else{isOutsideRange=(k*dist>lp)||((k+1)*dist<lp);}
if(foundMatch){AB_BOXES_SKIP_MAP[box_guids[k]]=DIGIOH_SPLIT_TESTS_ARR[i].split_guid;logger('Skipped Lightbox (Multivariate) ('+box_guids[k]+') for AB Test ('+DIGIOH_SPLIT_TESTS_ARR[i].split_guid+')');}else if(isOutsideRange){AB_BOXES_SKIP_MAP[box_guids[k]]=DIGIOH_SPLIT_TESTS_ARR[i].split_guid;logger('Skipped Lightbox (Multivariate) ('+box_guids[k]+') for AB Test ('+DIGIOH_SPLIT_TESTS_ARR[i].split_guid+')');}else{AB_BOXES_TAKE_MAP[box_guids[k]]=DIGIOH_SPLIT_TESTS_ARR[i].split_guid;foundMatch=true;matchedBoxGuid=box_guids[k];logger('Activated Lightbox (Multivariate) ('+box_guids[k]+') for AB Test ('+DIGIOH_SPLIT_TESTS_ARR[i].split_guid+')');}}
if(!foundMatch){if(AB_BOXES_SKIP_MAP.hasOwnProperty(box_guids[0])){delete AB_BOXES_SKIP_MAP[box_guids[0]];logger('Removed Lightbox (Multivariate) ('+box_guids[0]+') from Skipped Map, for AB Test ('+DIGIOH_SPLIT_TESTS_ARR[i].split_guid+')');}
AB_BOXES_TAKE_MAP[box_guids[0]]=DIGIOH_SPLIT_TESTS_ARR[i].split_guid;matchedBoxGuid=box_guids[0];logger('Defaulting to first Lightbox in AB Test, due to no match of lp: '+lp);logger('Activated Lightbox (Multivariate) ('+box_guids[0]+') for AB Test ('+DIGIOH_SPLIT_TESTS_ARR[i].split_guid+')');}
if(matchedBoxGuid.length>7){for(var var_guid in DIGIOH_VARIATION_TO_BOX_MAP){if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(var_guid)&&DIGIOH_VARIATION_TO_BOX_MAP[var_guid]==matchedBoxGuid){AB_BOXES_SKIP_MAP[var_guid]=DIGIOH_SPLIT_TESTS_ARR[i].split_guid;}}}}else if(test_type=='box_variation'){var box_guid=DIGIOH_SPLIT_TESTS_ARR[i].box_guids;var variation_guid=DIGIOH_SPLIT_TESTS_ARR[i].variation_guids;if(box_guid.length<7||box_guid.indexOf(',')>=0){logger('Skipping AB Test (Box vs. Variation) (Box GUID invalid): '+box_guid+', for AB Test: '+DIGIOH_SPLIT_TESTS_ARR[i].name);continue;}
if(variation_guid.length<=1||variation_guid.indexOf(',')>=0){logger('Skipping AB Test (Box vs. Variation) (Variation GUID invalid): '+variation_guid+', for AB Test: '+DIGIOH_SPLIT_TESTS_ARR[i].name);continue;}
if(lp<=(lpMax/2)){AB_BOXES_TAKE_MAP[box_guid]=DIGIOH_SPLIT_TESTS_ARR[i].split_guid;AB_BOXES_SKIP_MAP[variation_guid]=DIGIOH_SPLIT_TESTS_ARR[i].split_guid;logger('Activated Lightbox (Lightbox vs. Variation) ('+box_guid+') for AB Test ('+DIGIOH_SPLIT_TESTS_ARR[i].split_guid+')');logger('Skipping Variation (Lightbox vs. Variation) ('+variation_guid+') for AB Test ('+DIGIOH_SPLIT_TESTS_ARR[i].split_guid+')');}else{AB_BOXES_TAKE_MAP[variation_guid]=DIGIOH_SPLIT_TESTS_ARR[i].split_guid;logger('Activated Variation (Lightbox vs. Variation) ('+variation_guid+') for AB Test ('+DIGIOH_SPLIT_TESTS_ARR[i].split_guid+')');logger('Skipping Lightbox (Lightbox vs. Variation) ('+box_guid+') for AB Test ('+DIGIOH_SPLIT_TESTS_ARR[i].split_guid+')');}}else if(test_type=='variation_variation'){var box_guid=DIGIOH_SPLIT_TESTS_ARR[i].box_guids;var variation_guids=DIGIOH_SPLIT_TESTS_ARR[i].variation_guids.split(',');if(box_guid.length<7||box_guid.indexOf(',')>=0){logger('Skipping AB Test (Variation vs. Variation) (Box GUID invalid): '+box_guid+', for AB Test: '+DIGIOH_SPLIT_TESTS_ARR[i].name);continue;}
if(variation_guids.length!=2){logger('Skipping AB Test (Variation vs. Variation) (Variation GUIDs = '+DIGIOH_SPLIT_TESTS_ARR[i].variation_guids+', must be 2 variations): '+DIGIOH_SPLIT_TESTS_ARR[i].name);continue;}
if(lp<=(lpMax/2)){AB_BOXES_TAKE_MAP[variation_guids[0]]=DIGIOH_SPLIT_TESTS_ARR[i].split_guid;AB_BOXES_SKIP_MAP[variation_guids[1]]=DIGIOH_SPLIT_TESTS_ARR[i].split_guid;logger('initABSplitTests: id = '+DIGIOH_SPLIT_TESTS_ARR[i].split_short_id);logger('initABSplitTests: lp = '+lp);logger('initABSplitTests: chosen variation '+variation_guids[0]);logger('initABSplitTests: skipped variation '+variation_guids[1]);}else{AB_BOXES_TAKE_MAP[variation_guids[1]]=DIGIOH_SPLIT_TESTS_ARR[i].split_guid;AB_BOXES_SKIP_MAP[variation_guids[0]]=DIGIOH_SPLIT_TESTS_ARR[i].split_guid;logger('initABSplitTests: id = '+DIGIOH_SPLIT_TESTS_ARR[i].split_short_id);logger('initABSplitTests: lp = '+lp);logger('initABSplitTests: chosen variation '+variation_guids[1]);logger('initABSplitTests: skipped variation '+variation_guids[0]);}}}
for(var prop in DIGIOH_STORAGE.data["__bxabtest"]){if(DIGIOH_STORAGE.data["__bxabtest"].hasOwnProperty(prop)){foundMatch=false;for(var i=0;i<DIGIOH_SPLIT_TESTS_ARR.length;i++){if(DIGIOH_SPLIT_TESTS_ARR[i].split_short_id==prop){foundMatch=true;}}
if(!foundMatch)
delete DIGIOH_STORAGE.data["__bxabtest"][prop];}}
DIGIOH_STORAGE.set();}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initABSplitTests");}
return '';};var checkConditions=function(hook,lbguidToMatch,selector,multi){var multiArr=[];try{var foundMatch=false;if(typeof lbguidToMatch==='undefined'||!lbguidToMatch)
lbguidToMatch='';if(typeof selector==='undefined'||!selector)
selector='';if(typeof multi==='undefined'||multi!==true||!multi)
multi=false;for(var i=0;i<DIGIOH_LIGHTBOX_CONDITIONS.length;i++){if(lbguidToMatch===''&&AB_BOXES_SKIP_MAP.hasOwnProperty(DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid)){continue;}else if(lbguidToMatch===''&&isInlineLightbox(DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid)){continue;}
if(lbguidToMatch!==''){if(DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid===lbguidToMatch){foundMatch=evalConditions(DIGIOH_LIGHTBOX_CONDITIONS[i].conditions,DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid,DIGIOH_LIGHTBOX_ANALYTICS.VARS,false,false,false);if(foundMatch&&!multi){return DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid;}else if(!foundMatch&&!multi){return '';}else if(foundMatch&&multi){return[DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid];}else if(!foundMatch&&multi){return[''];}}}else if(selector!==''&&typeof selector==='string'&&selector.length>1){if(CONDITION_SELECTOR_BOXES_MAP.hasOwnProperty(hook)&&CONDITION_SELECTOR_BOXES_MAP[hook].hasOwnProperty(selector)&&JQUERY_DIGIOH.inArray(DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid,CONDITION_SELECTOR_BOXES_MAP[hook][selector])>-1){foundMatch=evalConditions(DIGIOH_LIGHTBOX_CONDITIONS[i].conditions,DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid,DIGIOH_LIGHTBOX_ANALYTICS.VARS,false,false,false);}}else if(hook==='load'&&(DIGIOH_LIGHTBOX_CONDITIONS[i].has_only_load_rules||DIGIOH_LIGHTBOX_CONDITIONS[i].has_or_block_with_only_load_rules)){foundMatch=evalConditions(DIGIOH_LIGHTBOX_CONDITIONS[i].conditions,DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid,DIGIOH_LIGHTBOX_ANALYTICS.VARS,false,false,false);logger('evalConditions:load:hook='+hook+':'+foundMatch+":"+DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid);}else if(hook==='exists'&&DIGIOH_LIGHTBOX_CONDITIONS[i].has_exists_rules){foundMatch=evalConditions(DIGIOH_LIGHTBOX_CONDITIONS[i].conditions,DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid,DIGIOH_LIGHTBOX_ANALYTICS.VARS,false,false,false);logger('evalConditions:exists:hook='+hook+':'+foundMatch+":"+DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid);}else if(hook==='click'&&DIGIOH_LIGHTBOX_CONDITIONS[i].has_click_rules){foundMatch=evalConditions(DIGIOH_LIGHTBOX_CONDITIONS[i].conditions,DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid,DIGIOH_LIGHTBOX_ANALYTICS.VARS,false,false,false);logger('evalConditions:click:hook='+hook+':'+foundMatch+":"+DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid);}else if(hook==='hover'&&DIGIOH_LIGHTBOX_CONDITIONS[i].has_hover_rules){foundMatch=evalConditions(DIGIOH_LIGHTBOX_CONDITIONS[i].conditions,DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid,DIGIOH_LIGHTBOX_ANALYTICS.VARS,false,false,false);logger('evalConditions:hover:hook='+hook+':'+foundMatch+":"+DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid);}else if(hook==='scroll'&&DIGIOH_LIGHTBOX_CONDITIONS[i].has_scroll_rules){foundMatch=evalConditions(DIGIOH_LIGHTBOX_CONDITIONS[i].conditions,DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid,DIGIOH_LIGHTBOX_ANALYTICS.VARS,false,false,false);logger('evalConditions:scroll:hook='+hook+':'+foundMatch+":"+DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid);}else if(hook==='exit'&&DIGIOH_LIGHTBOX_CONDITIONS[i].has_exit_rules){foundMatch=evalConditions(DIGIOH_LIGHTBOX_CONDITIONS[i].conditions,DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid,DIGIOH_LIGHTBOX_ANALYTICS.VARS,false,false,false);logger('evalConditions:exit:hook='+hook+':'+foundMatch+":"+DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid);}else if(hook==='time'&&DIGIOH_LIGHTBOX_CONDITIONS[i].has_time_rules){foundMatch=evalConditions(DIGIOH_LIGHTBOX_CONDITIONS[i].conditions,DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid,DIGIOH_LIGHTBOX_ANALYTICS.VARS,false,false,false);logger('evalConditions:time:hook='+hook+":"+DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid);}
if(foundMatch&&!multi){return DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid;}else if(foundMatch&&multi){multiArr.push(DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid);}
foundMatch=false;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"checkConditions");}
if(multi){if(multiArr.length===0)return[''];else return multiArr;}else{return '';}};function evalConditions(conditions,lbid,vars,eval_preload_teaser,is_follow_me_teaser,is_ruleset){if(typeof AB_BOXES_SKIP_MAP!=='undefined'&&AB_BOXES_SKIP_MAP.hasOwnProperty(lbid)){return false;}
if(typeof is_follow_me_teaser==='undefined'||!is_follow_me_teaser){is_follow_me_teaser=false;}
var short_id=lbid;var or_blocks=[];var or_block_json=[];var json_rule={};try{var skip_device_rules=false;for(var x=0;x<conditions.length;x++){or_blocks[x]=true;or_block_json[x]=[];for(var y=0;y<conditions[x].length;y++){json_rule={};if(!conditions[x][y].hasOwnProperty('k')){conditions[x][y]['k']='';}
if(conditions[x][y]['p']==='R_ruleset'&&conditions[x][y]['v']){if(DIGIOH_LIGHTBOX_RULESETS.hasOwnProperty(conditions[x][y]['v'])){if(conditions[x][y]['o']==='does_not_equal'){json_rule.rule_result=!evalConditions(DIGIOH_LIGHTBOX_RULESETS[conditions[x][y]['v']],lbid,vars,eval_preload_teaser,is_follow_me_teaser,true);}else{json_rule.rule_result=evalConditions(DIGIOH_LIGHTBOX_RULESETS[conditions[x][y]['v']],lbid,vars,eval_preload_teaser,is_follow_me_teaser,true);}
json_rule.rule_message='Ruleset ID: '+conditions[x][y]['v'];json_rule.rule_error=false;json_rule.rule_func='evalConditions for Ruleset';}else{json_rule.rule_result=false;json_rule.rule_message='Ruleset ID: '+conditions[x][y]['v']+' was not found in RULESETS.  Check to make sure that Ruleset ID '+conditions[x][y]['v']+' has valid Conditions within it.';json_rule.rule_error=true;json_rule.rule_func='evalConditions for Ruleset (skipped)';}
json_rule.rule_prop='R_ruleset';json_rule.rule_operator='';json_rule.rule_val='';json_rule.rule_set=[];json_rule.rule_visual='';json_rule.is_preload_teaser_eval=eval_preload_teaser;json_rule.is_follow_me_teaser=is_follow_me_teaser;}
else{json_rule=evalRule(conditions[x][y]['p'],conditions[x][y]['o'],conditions[x][y]['s'],conditions[x][y]['v'],conditions[x][y]['sd'],conditions[x][y]['ed'],conditions[x][y]['k'],lbid,vars,eval_preload_teaser,is_follow_me_teaser,skip_device_rules);}
or_block_json[x].push(json_rule);if(!json_rule.rule_result){or_blocks[x]=false;break;}}
if(or_blocks[x]===true){if(!is_ruleset){if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(lbid)){short_id=DIGIOH_LIGHTBOX_IDS[lbid]+'';}
if(eval_preload_teaser){CONDITIONS_OUTPUT[short_id]='---------------------------------'+'\n';CONDITIONS_OUTPUT[short_id]+='Teaser Preload Conditions Succeeded for Lightbox '+short_id+'\n';CONDITIONS_OUTPUT[short_id]+='---------------------------------'+'\n';}else{CONDITIONS_OUTPUT[short_id]='---------------------------------'+'\n';CONDITIONS_OUTPUT[short_id]+='Conditions Succeeded for Lightbox '+short_id+'\n';CONDITIONS_OUTPUT[short_id]+=JSON.stringify(or_block_json,null,2)+'\n';CONDITIONS_OUTPUT[short_id]+='---------------------------------'+'\n';}}
return true;}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"evalConditions");}
if(!is_ruleset){if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(lbid)){short_id=DIGIOH_LIGHTBOX_IDS[lbid]+'';}
if(eval_preload_teaser){CONDITIONS_OUTPUT[short_id]='---------------------------------'+'\n';CONDITIONS_OUTPUT[short_id]+='Teaser Preload Conditions Failed for Lightbox '+short_id+'\n';CONDITIONS_OUTPUT[short_id]+='---------------------------------'+'\n';}else{CONDITIONS_OUTPUT[short_id]='---------------------------------'+'\n';CONDITIONS_OUTPUT[short_id]+='Conditions Failed for Lightbox '+short_id+'\n';CONDITIONS_OUTPUT[short_id]+=JSON.stringify(or_block_json,null,2)+'\n';CONDITIONS_OUTPUT[short_id]+='---------------------------------'+'\n';}}
return false;}
var printConditionsOutput=function(short_id){try{if(typeof console==='undefined'){return;}
if(typeof short_id==='number'){short_id=short_id+'';}
if(typeof short_id==='string'&&short_id.length>30&&DIGIOH_LIGHTBOX_IDS.hasOwnProperty(short_id)){short_id=DIGIOH_LIGHTBOX_IDS[short_id]+'';}
if(typeof short_id==='string'&&CONDITIONS_OUTPUT.hasOwnProperty(short_id)){console.log('printConditionsOutput: '+short_id+'\n\n\n');console.log(CONDITIONS_OUTPUT[short_id]);}
else if(typeof short_id==='string'&&!CONDITIONS_OUTPUT.hasOwnProperty(short_id)){console.log('printConditionsOutput: '+short_id);console.log('CONDITIONS not yet evaluated for Lightbox '+short_id);}
else{console.log('printConditionsOutput: ALL BOXES'+'\n\n\n');for(var prop in CONDITIONS_OUTPUT){if(CONDITIONS_OUTPUT.hasOwnProperty(prop)){console.log(CONDITIONS_OUTPUT[prop]+'\n\n\n');}}}
if(typeof short_id!=='string'||short_id.length<4){for(var z=0;z<DIGIOH_LIGHTBOX_CONDITIONS.length;z++){if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(DIGIOH_LIGHTBOX_CONDITIONS[z].lightbox_guid)){var sidCond=DIGIOH_LIGHTBOX_IDS[DIGIOH_LIGHTBOX_CONDITIONS[z].lightbox_guid];var foundMatch=false;for(var sid in CONDITIONS_OUTPUT){if(CONDITIONS_OUTPUT.hasOwnProperty(sid)&&sid===sidCond){foundMatch=true;}}
if(!foundMatch){console.log('---------------------------------');if(typeof AB_BOXES_SKIP_MAP!=='undefined'&&AB_BOXES_SKIP_MAP.hasOwnProperty(DIGIOH_LIGHTBOX_CONDITIONS[z].lightbox_guid)){console.log('CONDITIONS not evaluated for Lightbox '+sidCond+'.  Skipped Lightbox because it is in a Split Test and was not chosen '+sidCond);}else{console.log('CONDITIONS not evaluated for Lightbox '+sidCond);}
console.log('---------------------------------'+'\n\n\n');}}}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"printConditionsOutput");}};function evalRule(rule_prop,rule_operator,rule_set,rule_val,rule_start_date,rule_end_date,key_name,lbid,vars,eval_preload_teaser,is_follow_me_teaser,skip_device_rules){if(typeof is_follow_me_teaser==='undefined'||!is_follow_me_teaser){is_follow_me_teaser=false;}
var res={};res.rule_func='evalRule';res.rule_prop=rule_prop;res.rule_operator=rule_operator;res.rule_val=rule_val;res.rule_set=rule_set;res.rule_visual='';res.rule_message='';res.rule_error=false;res.rule_result=false;res.is_preload_teaser_eval=eval_preload_teaser;res.is_follow_me_teaser=is_follow_me_teaser;if(eval_preload_teaser){if(is_follow_me_teaser){if(rule_prop=='I_total_time_seconds'||rule_prop=='I_active_time_seconds'||rule_prop=='I_idle_time_seconds'||rule_prop=='I_scroll_percent'||rule_prop=='I_scroll_pixels'||rule_prop=='C_click_jquery_selector'||rule_prop=='C_hover_jquery_selector'||rule_prop=='E_exit_intent'||rule_prop=='E_visitor_activity_visitor'||rule_prop=='E_visitor_activity_session'||rule_prop=='E_visitor_activity_pageview'){res.rule_message='teaser follow me is automatically evaluated as true for the following rule event types:  time, scroll, click, hover, exit, max displays per pageview, max displays per session, max displays per visitor';res.rule_visual=res.rule_message;res.rule_result=true;return res;}}
if(!is_follow_me_teaser){if(rule_prop=='I_total_time_seconds'||rule_prop=='I_active_time_seconds'||rule_prop=='I_idle_time_seconds'||rule_prop=='I_scroll_percent'||rule_prop=='I_scroll_pixels'||rule_prop=='C_click_jquery_selector'||rule_prop=='C_hover_jquery_selector'||rule_prop=='E_exit_intent'){res.rule_message='teaser preloading is automatically evaluated as true for the following rule event types:  time, scroll, click, hover, exit';res.rule_visual=res.rule_message;res.rule_result=true;return res;}}}
if(rule_prop=='E_lightbox_activity'){var boxShortId='';if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(lbid)&&DIGIOH_LIGHTBOX_IDS[lbid]){boxShortId=DIGIOH_LIGHTBOX_IDS[lbid];}
if(!vars.lightbox_events.hasOwnProperty(boxShortId)){res.rule_message='no events found for this lightbox, so continue displaying';res.rule_visual=res.rule_message;res.rule_result=true;return res;}else if(rule_operator=='equals'){var rv='';if(rule_val=='view')rv='v';if(rule_val=='submit')rv='s';if(rule_val=='redirect')rv='r';if(rule_val=='download')rv='d';if(rule_val=='close')rv='c';if(!vars.lightbox_events[boxShortId].hasOwnProperty(rv)||vars.lightbox_events[boxShortId][rv]['c']==0){res.rule_message='no '+rule_val+' events found for this lightbox, so continue displaying';res.rule_visual=res.rule_message;res.rule_result=true;return res;}
else if(eval_preload_teaser&&is_follow_me_teaser&&rule_val=='close'){res.rule_message='continue displaying follow me teaser, even though lightbox close events were found';res.rule_visual=res.rule_message;res.rule_result=true;return res;}
else{res.rule_message=vars.lightbox_events[boxShortId][rv]['c']+' '+rule_val+' events found for this lightbox, so stop displaying';res.rule_visual=res.rule_message;res.rule_result=false;return res;}}else if(rule_operator=='in_set'){for(var x=0;x<rule_set.length;x++){var rv='';if(rule_set[x]=='view')rv='v';if(rule_set[x]=='submit')rv='s';if(rule_set[x]=='redirect')rv='r';if(rule_set[x]=='download')rv='d';if(rule_set[x]=='close')rv='c';if(vars.lightbox_events[boxShortId].hasOwnProperty(rv)&&vars.lightbox_events[boxShortId][rv]['c']>0){if(eval_preload_teaser&&is_follow_me_teaser){if(rule_set[x]!='close'){res.rule_message=vars.lightbox_events[boxShortId][rv]['c']+' '+rule_set[x]+' events found for this lightbox, so stop displaying follow me teaser';res.rule_visual=res.rule_message;res.rule_result=false;return res;}}
else{res.rule_message=vars.lightbox_events[boxShortId][rv]['c']+' '+rule_set[x]+' events found for this lightbox, so stop displaying';res.rule_visual=res.rule_message;res.rule_result=false;return res;}}}
res.rule_message='no matching events found for this lightbox, so continue displaying';res.rule_visual=res.rule_message;res.rule_result=true;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
if(rule_prop=='D_date_range'){var curr_date=new Date();var compare_date=(curr_date.getMonth()+1)+'/'+curr_date.getDate()+'/'+curr_date.getFullYear();return evalRuleDate(rule_prop,rule_operator,rule_start_date,rule_end_date,compare_date);}
if(rule_prop=='D_date_of_visit'){var compare_date=(vars.date_of_visit.getMonth()+1)+'/'+vars.date_of_visit.getDate()+'/'+vars.date_of_visit.getFullYear();return evalRuleDate(rule_prop,rule_operator,rule_start_date,rule_end_date,compare_date);}
if(rule_prop=='E_visitor_activity_visitor'){var boxShortId='';if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(lbid)&&DIGIOH_LIGHTBOX_IDS[lbid]){boxShortId=DIGIOH_LIGHTBOX_IDS[lbid];}
if(!vars.lightbox_events.hasOwnProperty(boxShortId)){res.rule_message='no displays found for this lightbox, so continue displaying';res.rule_visual=res.rule_message;res.rule_result=true;return res;}else if(rule_operator=='equals'){if(!vars.lightbox_events[boxShortId].hasOwnProperty('v')){res.rule_message='no displays found for this lightbox, so continue displaying';res.rule_visual=res.rule_message;res.rule_result=true;return res;}else if(vars.lightbox_events[boxShortId]['v']['c']<parseInt(rule_val)){res.rule_message=vars.lightbox_events[boxShortId]['v']['c']+' displays found for this lightbox, so continue displaying (max of '+rule_val+' displays per visitor)';res.rule_visual=res.rule_message;res.rule_result=true;return res;}else{res.rule_message=vars.lightbox_events[boxShortId]['v']['c']+' displays found for this lightbox, so stop displaying (max of '+rule_val+' displays allowed per visitor)';res.rule_visual=res.rule_message;res.rule_result=false;return res;}}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
if(rule_prop=='E_visitor_activity_session'){var boxShortId='';if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(lbid)&&DIGIOH_LIGHTBOX_IDS[lbid]){boxShortId=DIGIOH_LIGHTBOX_IDS[lbid];}
if(!vars.lightbox_events.hasOwnProperty(boxShortId)){res.rule_message='no session displays found for this lightbox, so continue displaying';res.rule_visual=res.rule_message;res.rule_result=true;return res;}else if(rule_operator=='equals'){if(!vars.lightbox_events[boxShortId].hasOwnProperty('v')||!vars.lightbox_events[boxShortId]['v'].hasOwnProperty('t')||vars.lightbox_events[boxShortId]['v']['t'].length==0){res.rule_message='no session displays found for this lightbox, so continue displaying';res.rule_visual=res.rule_message;res.rule_result=true;return res;}
var session_display_cnt=0;for(var x=0;x<vars.lightbox_events[boxShortId]['v']['t'].length;x++){if(vars.lightbox_events[boxShortId]['v']['t'][x]>=DIGIOH_LIGHTBOX_ANALYTICS.SessionStart){session_display_cnt++;}}
if(session_display_cnt<parseInt(rule_val)){res.rule_message=session_display_cnt+' session displays found for this lightbox, so continue displaying (max of '+rule_val+' displays allowed per session)';res.rule_visual=res.rule_message;res.rule_result=true;return res;}else{res.rule_message=session_display_cnt+' session displays found for this lightbox, so stop displaying (max of '+rule_val+' displays allowed per session)';res.rule_visual=res.rule_message;res.rule_result=false;return res;}}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
if(rule_prop=='E_visitor_activity_pageview'){var boxShortId='';if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(lbid)&&DIGIOH_LIGHTBOX_IDS[lbid]){boxShortId=DIGIOH_LIGHTBOX_IDS[lbid];}
if(!vars.lightbox_events.hasOwnProperty(boxShortId)){res.rule_message='no current page displays found for this lightbox, so continue displaying';res.rule_visual=res.rule_message;res.rule_result=true;return res;}else if(rule_operator=='equals'){if(!vars.lightbox_events[boxShortId].hasOwnProperty('v')||!vars.lightbox_events[boxShortId]['v'].hasOwnProperty('t')||vars.lightbox_events[boxShortId]['v']['t'].length==0){res.rule_message='no current page displays found for this lightbox, so continue displaying';res.rule_visual=res.rule_message;res.rule_result=true;return res;}
var pageview_display_cnt=0;for(var x=0;x<vars.lightbox_events[boxShortId]['v']['t'].length;x++){if(vars.lightbox_events[boxShortId]['v']['t'][x]>=DIGIOH_LIGHTBOX_ANALYTICS.PageviewStart){pageview_display_cnt++;}}
if(pageview_display_cnt<parseInt(rule_val)){res.rule_message=pageview_display_cnt+' session displays found for this lightbox, so continue displaying (max of '+rule_val+' displays allowed per pageview)';res.rule_visual=res.rule_message;res.rule_result=true;return res;}else{res.rule_message=pageview_display_cnt+' session displays found for this lightbox, so stop displaying (max of '+rule_val+' displays allowed per pageview)';res.rule_visual=res.rule_message;res.rule_result=false;return res;}}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
if(rule_prop=='I_page_visits'){return evalRuleInt(rule_prop,rule_operator,rule_set,rule_val,vars.page_visits);}
if(rule_prop=='I_page_visits_session'){return evalRuleInt(rule_prop,rule_operator,rule_set,rule_val,vars.page_visits_session);}
if(rule_prop=='I_past_visits'){return evalRuleInt(rule_prop,rule_operator,rule_set,rule_val,vars.past_visits);}
if(rule_prop=='I_days_since_last_view'){var boxShortId='';if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(lbid)&&DIGIOH_LIGHTBOX_IDS[lbid]){boxShortId=DIGIOH_LIGHTBOX_IDS[lbid];}
if(!vars.lightbox_activity.hasOwnProperty(boxShortId)||vars.lightbox_activity[boxShortId]["Days since last view"]==-1){res.rule_message='no displays found for this lightbox, so continue displaying';res.rule_visual=res.rule_message;res.rule_result=true;return res;}
return evalRuleInt(rule_prop,rule_operator,rule_set,rule_val,vars.lightbox_activity[boxShortId]["Days since last view"]);}
if(rule_prop=='I_total_time_seconds'){return evalRuleInt(rule_prop,rule_operator,rule_set,rule_val,vars.total_time_seconds);}
if(rule_prop=='I_active_time_seconds'){return evalRuleInt(rule_prop,rule_operator,rule_set,rule_val,vars.active_time_seconds);}
if(rule_prop=='I_idle_time_seconds'){return evalRuleInt(rule_prop,rule_operator,rule_set,rule_val,vars.idle_time_seconds);}
if(rule_prop=='I_scroll_percent'){return evalRuleInt(rule_prop,rule_operator,rule_set,rule_val,vars.scroll_percent);}
if(rule_prop=='I_scroll_pixels'){return evalRuleInt(rule_prop,rule_operator,rule_set,rule_val,vars.scroll_pixels);}
if(rule_prop=='I_browser_version'){if(isNaN(vars.browser_version)){res.rule_message='browser version is Not a Number (NaN), so evaluate to false';res.rule_visual=res.rule_message;res.rule_result=false;return res;}
var browser_version=Math.floor(parseFloat(vars.browser_version));return evalRuleInt(rule_prop,rule_operator,rule_set,rule_val,browser_version);}
if(rule_prop=='I_latitude'){if(isNaN(vars.latitude)){res.rule_message='latitude is Not a Number (NaN), so evaluate to false';res.rule_visual=res.rule_message;res.rule_result=false;return res;}
var latitude=Math.floor(parseFloat(vars.latitude));return evalRuleInt(rule_prop,rule_operator,rule_set,rule_val,latitude);}
if(rule_prop=='I_longitude'){if(isNaN(vars.longitude)){res.rule_message='longitude is Not a Number (NaN), so evaluate to false';res.rule_visual=res.rule_message;res.rule_result=false;return res;}
var longitude=Math.floor(parseFloat(vars.longitude));return evalRuleInt(rule_prop,rule_operator,rule_set,rule_val,longitude);}
if(rule_prop=='E_web_source'){return evalRuleEnum(rule_prop,rule_operator,rule_set,rule_val,vars.web_source);}
if(rule_prop=='E_segments'){return evalRuleEnumSegments(rule_prop,rule_operator,rule_set,rule_val,vars.segments);}
if(rule_prop=='E_search_engine'){return evalRuleEnum(rule_prop,rule_operator,rule_set,rule_val,vars.search_engine);}
if(rule_prop=='E_device'){return evalRuleDeviceEnum(rule_prop,rule_operator,rule_set,rule_val,vars.device);}
if(rule_prop=='E_browser_type'){return evalRuleEnum(rule_prop,rule_operator,rule_set,rule_val,vars.browser_type);}
if(rule_prop=='E_operating_system'){return evalRuleEnum(rule_prop,rule_operator,rule_set,rule_val,vars.operating_system);}
if(rule_prop=='E_language'){return evalRuleEnumLanguage(rule_prop,rule_operator,rule_set,rule_val);}
if(rule_prop=='E_country'){return evalRuleEnum(rule_prop,rule_operator,rule_set,rule_val,vars.country);}
if(rule_prop=='E_state'){return evalRuleEnum(rule_prop,rule_operator,rule_set,rule_val,vars.state);}
if(rule_prop=='E_continent'){return evalRuleEnum(rule_prop,rule_operator,rule_set,rule_val,vars.continent);}
if(rule_prop=='S_lytics'){var lytics_elems=[];try{var lytics_cookie=DIGIOH_COOKIE.get('ly_segs',true);if(lytics_cookie!==null&&typeof lytics_cookie==='string'&&lytics_cookie.length>0){lytics_cookie=decodeURIComponent(lytics_cookie);var lytics_json=JSON.parse(lytics_cookie);for(var seg in lytics_json){lytics_elems.push(lytics_json[seg]);}}else{}}
catch(e){console.log('S_lytics - error parsing cookie');}
return evalRuleStringMultiVal(rule_prop,rule_operator,rule_set,rule_val,lytics_elems);}
if(rule_prop=='S_current_page_url'){return evalRuleUrl(rule_prop,rule_operator,rule_set,rule_val,vars.current_page_url);}
if(rule_prop=='S_referring_website_url'){return evalRuleUrl(rule_prop,rule_operator,rule_set,rule_val,vars.referring_website_url);}
if(rule_prop=='S_landing_page'){return evalRuleUrl(rule_prop,rule_operator,rule_set,rule_val,vars.landing_page);}
if(rule_prop=='S_pages_navigated'){return evalRulePagesNavigated(rule_prop,rule_operator,rule_set,rule_val,vars.pages_navigated);}
if(rule_prop=='S_current_page_url_host'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,window.parent.location.hostname);}
if(rule_prop=='S_current_page_url_path'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,window.parent.location.pathname);}
if(rule_prop=='S_current_page_url_protocol'){const currentWebsiteProtocol=window.parent.location.protocol.replace(':','');rule_val=rule_val&&rule_val.includes(':')?rule_val.replace(':','').toLowerCase():'';return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,currentWebsiteProtocol);}
if(rule_prop=='S_current_page_url_query'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,window.parent.location.search);}
if(rule_prop=='S_current_page_url_hash'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,window.parent.location.hash);}
if(rule_prop=='S_city'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,vars.city);}
if(rule_prop=='S_ip_address'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,vars.ip_address);}
if(rule_prop=='S_zipcode'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,vars.zipcode);}
if(rule_prop=='S_metro_code'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,vars.metro_code);}
if(rule_prop=='S_area_code'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,vars.area_code);}
if(rule_prop=='S_utm_campaign_name'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,vars.utm_campaign_name);}
if(rule_prop=='S_utm_campaign_source'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,vars.utm_campaign_source);}
if(rule_prop=='S_utm_campaign_content'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,vars.utm_campaign_content);}
if(rule_prop=='S_utm_campaign_term'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,vars.utm_campaign_term);}
if(rule_prop=='S_utm_campaign_medium'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,vars.utm_campaign_medium);}
if(rule_prop=='C_click_jquery_selector'){if(rule_operator=='equals'){if(rule_val==''){res.rule_visual='you entered a blank jquery click selector, which will automatically evaluate to false';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_result=(vars.click_jquery_selector.hasOwnProperty(rule_val)&&vars.click_jquery_selector[rule_val]==true);res.rule_visual='jquery click selector ('+rule_val+') occurred ('+res.rule_result+')';res.rule_message=res.rule_visual;return res;}}else if(rule_operator=='in_set'){for(var x=0;x<rule_set.length;x++){if(rule_set[x]!=''&&vars.click_jquery_selector.hasOwnProperty(rule_set[x])&&vars.click_jquery_selector[rule_set[x]]==true){res.rule_result=true;res.rule_visual='jquery click selector ('+rule_set[x]+') from group item number ('+x+') occurred ('+res.rule_result+')';res.rule_message=res.rule_visual;return res;}}
res.rule_result=false;res.rule_visual='jquery click selector from set did not occur';res.rule_message=res.rule_visual;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
if(rule_prop=='C_hover_jquery_selector'){if(rule_operator=='equals'){if(rule_val==''){res.rule_visual='you entered a blank jquery hover selector, which will automatically evaluate to false';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_result=(vars.hover_jquery_selector.hasOwnProperty(rule_val)&&vars.hover_jquery_selector[rule_val]==true);res.rule_visual='jquery hover selector ('+rule_val+') occurred ('+res.rule_result+')';res.rule_message=res.rule_visual;return res;}}else if(rule_operator=='in_set'){for(var x=0;x<rule_set.length;x++){if(rule_set[x]!=''&&vars.hover_jquery_selector.hasOwnProperty(rule_set[x])&&vars.hover_jquery_selector[rule_set[x]]==true){res.rule_result=true;res.rule_visual='jquery hover selector ('+rule_set[x]+') from group item number ('+x+') occurred ('+res.rule_result+')';res.rule_message=res.rule_visual;return res;}}
res.rule_result=false;res.rule_visual='jquery hover selector from set did not occur';res.rule_message=res.rule_visual;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
if(rule_prop=='C_exists_jquery_selector'){if(rule_operator=='equals'){if(rule_val==''){res.rule_visual='you entered a blank jquery exists selector, which will automatically evaluate to false';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_result=(vars.exists_jquery_selector.hasOwnProperty(rule_val)&&vars.exists_jquery_selector[rule_val]==true);res.rule_visual='jquery exists selector ('+rule_val+') exists ('+res.rule_result+')';res.rule_message=res.rule_visual;return res;}}else if(rule_operator=='does_not_equal'){if(rule_val==''){res.rule_visual='you entered a blank jquery exists selector, which will automatically evaluate to false';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_result=(!vars.exists_jquery_selector.hasOwnProperty(rule_val)||vars.exists_jquery_selector[rule_val]==false);res.rule_visual='jquery exists selector ('+rule_val+') does not exist ('+res.rule_result+')';res.rule_message=res.rule_visual;return res;}}else if(rule_operator=='in_set'){for(var x=0;x<rule_set.length;x++){if(rule_set[x]!=''&&vars.exists_jquery_selector.hasOwnProperty(rule_set[x])&&vars.exists_jquery_selector[rule_set[x]]==true){res.rule_result=true;res.rule_visual='jquery exists selector ('+rule_set[x]+') from group item number ('+x+') exists ('+res.rule_result+') (success)';res.rule_message=res.rule_visual;return res;}}
res.rule_result=false;res.rule_visual='jquery exists selector from set did not occur (failure)';res.rule_message=res.rule_visual;return res;}else if(rule_operator=='not_in_set'){for(var x=0;x<rule_set.length;x++){if(rule_set[x]!=''&&vars.exists_jquery_selector.hasOwnProperty(rule_set[x])&&vars.exists_jquery_selector[rule_set[x]]==true){res.rule_result=false;res.rule_visual='jquery exists selector ('+rule_set[x]+') from group item number ('+x+') exists ('+res.rule_result+') (failure)';res.rule_message=res.rule_visual;return res;}}
res.rule_result=true;res.rule_visual='jquery exists selector from set did not occur (success)';res.rule_message=res.rule_visual;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
if(rule_prop=='E_exit_intent'){return evalRuleEnum(rule_prop,rule_operator,rule_set,rule_val,vars.exit_intent);}
if(rule_prop=='L_any_other_box'){if(rule_operator=='equals'){var occurrances=DIGIOH_LIGHTBOX_ANALYTICS.getEventCountAcrossAllLightboxesExcept(rule_val,lbid);res.rule_result=(occurrances>0);res.rule_visual=rule_val+' event has occurred '+occurrances+' times across all other lightboxes, so this rule is evaluated as '+res.rule_result;res.rule_message=res.rule_visual;return res;}else if(rule_operator=='does_not_equal'){var occurrances=DIGIOH_LIGHTBOX_ANALYTICS.getEventCountAcrossAllLightboxesExcept(rule_val,lbid);res.rule_result=(occurrances==0);res.rule_visual=rule_val+' event has occurred '+occurrances+' times across all other lightboxes, so this rule is evaluated as '+res.rule_result;res.rule_message=res.rule_visual;return res;}else if(rule_operator=='in_set'){for(var x=0;x<rule_set.length;x++){var occurrances=DIGIOH_LIGHTBOX_ANALYTICS.getEventCountAcrossAllLightboxesExcept(rule_set[x],lbid);if(occurrances>0){res.rule_result=true;res.rule_visual=rule_set[x]+' event from group has occurred '+occurrances+' times across all other lightboxes, so this rule is evaluated as '+res.rule_result;res.rule_message=res.rule_visual;return res;}}
res.rule_result=false;res.rule_visual='no events from group have occurred across all other lightboxes, so this rule is evaluated as '+res.rule_result;res.rule_message=res.rule_visual;return res;}else if(rule_operator=='not_in_set'){for(var x=0;x<rule_set.length;x++){var occurrances=DIGIOH_LIGHTBOX_ANALYTICS.getEventCountAcrossAllLightboxesExcept(rule_set[x],lbid);if(occurrances>0){res.rule_result=false;res.rule_visual=rule_set[x]+' event from group has occurred '+occurrances+' times across all other lightboxes, so this rule is evaluated as '+res.rule_result;res.rule_message=res.rule_visual;return res;}}
res.rule_result=true;res.rule_visual='no events from group have occurred across all other lightboxes, so this rule is evaluated as '+res.rule_result;res.rule_message=res.rule_visual;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
if(rule_prop.indexOf('L_other_box_')==0){var other_lbguid=rule_prop.split('_')[3];if(rule_operator=='equals'){var occurrances=DIGIOH_LIGHTBOX_ANALYTICS.getEventCountByLightbox(rule_val,other_lbguid);res.rule_result=(occurrances>0);res.rule_visual=rule_val+' event has occurred '+occurrances+' times for other lightbox guid '+other_lbguid+', so this rule is evaluated as '+res.rule_result;res.rule_message=res.rule_visual;return res;}else if(rule_operator=='does_not_equal'){var occurrances=DIGIOH_LIGHTBOX_ANALYTICS.getEventCountByLightbox(rule_val,other_lbguid);res.rule_result=(occurrances==0);res.rule_visual=rule_val+' event has occurred '+occurrances+' times for other lightbox guid '+other_lbguid+', so this rule is evaluated as '+res.rule_result;res.rule_message=res.rule_visual;return res;}else if(rule_operator=='in_set'){for(var x=0;x<rule_set.length;x++){var occurrances=DIGIOH_LIGHTBOX_ANALYTICS.getEventCountByLightbox(rule_set[x],other_lbguid);if(occurrances>0){res.rule_result=true;res.rule_visual=rule_set[x]+' event from group has occurred '+occurrances+' times for other lightbox guid '+other_lbguid+', so this rule is evaluated as '+res.rule_result;res.rule_message=res.rule_visual;return res;}}
res.rule_result=false;res.rule_visual='no events from group for other lightbox guid '+other_lbguid+' have occurred, so this rule is evaluated as '+res.rule_result;res.rule_message=res.rule_visual;return res;}else if(rule_operator=='not_in_set'){for(var x=0;x<rule_set.length;x++){var occurrances=DIGIOH_LIGHTBOX_ANALYTICS.getEventCountByLightbox(rule_set[x],other_lbguid);if(occurrances>0){res.rule_result=false;res.rule_visual=rule_set[x]+' event from group has occurred '+occurrances+' times for other lightbox guid '+other_lbguid+', so this rule is evaluated as '+res.rule_result;res.rule_message=res.rule_visual;return res;}}
res.rule_result=true;res.rule_visual='no events in from group for other lightbox guid '+other_lbguid+' have occurred, so this rule is evaluated as '+res.rule_result;res.rule_message=res.rule_visual;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
if(rule_prop=='K_cookie'||rule_prop=='K_local_storage'||rule_prop=='K_session_storage'){if(!key_name){res.rule_result=false;res.rule_visual='Key Name was not specified.';res.rule_message=res.rule_visual;return res;}
var storageVal='';try{if(rule_prop=='K_cookie'){storageVal=DIGIOH_COOKIE.getEncoded(key_name);}else if(rule_prop=='K_local_storage'){storageVal=window.localStorage.getItem(key_name);}else if(rule_prop=='K_session_storage'){storageVal=window.sessionStorage.getItem(key_name);}}
catch(err_storage){res.rule_result=false;res.rule_error=true;res.rule_message=rule_prop+' - ERROR::::'+err_storage.message;return res;}
if(rule_operator==='exists'){if(storageVal===null||typeof storageVal==='undefined'){res.rule_result=false;res.rule_visual='Key does not exist.';res.rule_message=res.rule_visual;return res;}else{res.rule_result=true;res.rule_visual='Key exists.';res.rule_message=res.rule_visual;return res;}}
if(rule_operator==='does_not_exist'){if(storageVal===null||typeof storageVal==='undefined'){res.rule_result=true;res.rule_visual='Key does not exist.';res.rule_message=res.rule_visual;return res;}else{res.rule_result=false;res.rule_visual='Key exists.';res.rule_message=res.rule_visual;return res;}}
if(typeof storageVal!=='string'){if(rule_operator==='does_not_contain'||rule_operator==='does_not_start_with'||rule_operator==='does_not_end_with'||rule_operator==='does_not_equal'){res.rule_result=true;res.rule_visual='Key does not exist.';res.rule_message=res.rule_visual;return res;}else{res.rule_result=false;res.rule_visual='Key does not exist.';res.rule_message=res.rule_visual;return res;}}
if(rule_operator!=='greater_than'&&rule_operator!=='less_than'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,storageVal);}else{if(!isStringAnInteger(storageVal)){res.rule_result=false;res.rule_error=true;res.rule_message='value is not a number';return res;}
return evalRuleInt(rule_prop,rule_operator,rule_set,rule_val,parseInt(storageVal));}}
if(rule_prop=='J_javascript_variable'||rule_prop=='J_custom_condition'){if(!key_name){res.rule_result=false;res.rule_visual='Variable Name was not specified.';res.rule_message=res.rule_visual;return res;}
var jsVar='';try{jsVar=looseJsonParseVar(key_name);}
catch(err_jsvar){res.rule_result=false;res.rule_error=true;res.rule_message='J_javascript_variable - ERROR::::'+err_jsvar.message;return res;}
if((rule_operator==='equals'||rule_operator==='not_equals')&&(rule_val=='true'||rule_val=='false'||rule_val==true||rule_val==false)){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val.toString().toLowerCase(),jsVar.toString().toLowerCase());}else if(rule_operator!=='greater_than'&&rule_operator!=='less_than'){return evalRuleString(rule_prop,rule_operator,rule_set,rule_val,jsVar);}else{if(!isStringAnInteger(jsVar)){res.rule_result=false;res.rule_error=true;res.rule_message='value is not a number';return res;}
return evalRuleInt(rule_prop,rule_operator,rule_set,rule_val,parseInt(jsVar));}}
if(rule_prop=='J_javascript_function'){if(!rule_val){res.rule_result=false;res.rule_visual='JS Function was not specified.';res.rule_message=res.rule_visual;return res;}
var jsFunc='';try{jsFunc=looseJsonParseFunc(rule_val);}
catch(err_jsfunc){res.rule_result=false;res.rule_error=true;res.rule_message='J_javascript_function - ERROR::::'+err_jsfunc.message;return res;}
res.rule_result=(jsFunc===true);res.rule_error=!res.rule_result;return res;}}
function looseJsonParseVar(obj){return Function('window','return (window.'+obj+')')(window.parent);}
function looseJsonParseFunc(obj){return Function("'use strict';"+obj+"")();}
function evalRuleStringMultiVal(rule_prop,rule_operator,rule_set,rule_val,compare_arr){var res={};res.rule_func='evalRuleStringMultiVal';res.rule_prop=rule_prop;res.rule_operator=rule_operator;res.rule_set=rule_set;res.rule_val=rule_val;res.rule_compare_val=compare_arr;res.rule_visual='';res.rule_message='';res.rule_error=false;res.rule_result=false;try{if(rule_operator=='equals'){res.rule_visual='Array EQUALS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=JQUERY_DIGIOH.inArray(rule_val,compare_arr)>-1;return res;}else if(rule_operator=='does_not_equal'){res.rule_visual='Array DOES NOT EQUAL '+rule_val;res.rule_message=res.rule_visual;res.rule_result=JQUERY_DIGIOH.inArray(rule_val,compare_arr)===-1;return res;}else if(rule_operator=='starts_with'){if(rule_val==''){res.rule_visual='Array STARTS WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual='Array STARTS WITH '+rule_val;res.rule_message=res.rule_visual;var fm=false;for(var c=0;c<compare_arr.length;c++){if(stringStartsWith(compare_arr[c],rule_val)){fm=true;}}
res.rule_result=fm;return res;}}else if(rule_operator=='does_not_start_with'){if(rule_val==''){res.rule_visual='Array DOES NOT START WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual='Array DOES NOT START WITH '+rule_val;res.rule_message=res.rule_visual;var fm=false;for(var c=0;c<compare_arr.length;c++){if(stringStartsWith(compare_arr[c],rule_val)){fm=true;}}
res.rule_result=!fm;return res;}}else if(rule_operator=='ends_with'){if(rule_val==''){res.rule_visual='Array ENDS WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual='Array ENDS WITH '+rule_val;res.rule_message=res.rule_visual;var fm=false;for(var c=0;c<compare_arr.length;c++){if(stringEndsWith(compare_arr[c],rule_val)){fm=true;}}
res.rule_result=fm;return res;}}else if(rule_operator=='does_not_end_with'){if(rule_val==''){res.rule_visual='Array DOES NOT END WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual='Array DOES NOT END WITH '+rule_val;res.rule_message=res.rule_visual;var fm=false;for(var c=0;c<compare_arr.length;c++){if(stringEndsWith(compare_arr[c],rule_val)){fm=true;}}
res.rule_result=!fm;return res;}}else if(rule_operator=='contains'){if(rule_val==''){res.rule_visual='Array CONTAINS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual='Array CONTAINS '+rule_val;res.rule_message=res.rule_visual;var fm=false;for(var c=0;c<compare_arr.length;c++){if(compare_arr[c].indexOf(rule_val)>=0){fm=true;}}
res.rule_result=fm;return res;}}else if(rule_operator=='does_not_contain'){if(rule_val==''){res.rule_visual='Array DOES NOT CONTAIN '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual='Array DOES NOT CONTAIN '+rule_val;res.rule_message=res.rule_visual;var fm=false;for(var c=0;c<compare_arr.length;c++){if(compare_arr[c].indexOf(rule_val)>=0){fm=true;}}
res.rule_result=!fm;return res;}}else if(rule_operator=='in_set'){for(var x=0;x<rule_set.length;x++){for(var y=0;y<compare_arr.length;y++){if(compare_arr[y]==rule_set[x]){res.rule_visual='Array MATCHED VALUE #'+x+' IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}}}
res.rule_visual='Array MATCHED NO VALUES IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else if(rule_operator=='not_in_set'){for(var x=0;x<rule_set.length;x++){for(var y=0;y<compare_arr.length;y++){if(compare_arr[y]==rule_set[x]){res.rule_visual='Array MATCHED VALUE #'+x+' IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}}}
res.rule_visual='Array MATCHED NO VALUES IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}else if(rule_operator=='in_set_contains'){for(var x=0;x<rule_set.length;x++){for(var y=0;y<compare_arr.length;y++){if(rule_set[x]!=''&&compare_arr[y].indexOf(rule_set[x])>=0){res.rule_visual='Array CONTAINS VALUE #'+x+' IN GROUP ('+rule_set[x]+') (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}}}
res.rule_visual='Array CONTAINS NO VALUES IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else if(rule_operator=='not_in_set_contains'){for(var x=0;x<rule_set.length;x++){for(var y=0;y<compare_arr.length;y++){if(rule_set[x]!=''&&compare_arr[y].indexOf(rule_set[x])>=0){res.rule_visual='Array CONTAINS VALUE #'+x+' IN GROUP ('+rule_set[x]+') (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}}}
res.rule_visual='Array CONTAINS NO VALUES IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"evalRuleStringMultiVal");res.rule_error=true;res.rule_result=false;res.rule_message=e.message;return res;}}
function evalRuleString(rule_prop,rule_operator,rule_set,rule_val,compare_val){var res={};res.rule_func='evalRuleString';res.rule_prop=rule_prop;res.rule_operator=rule_operator;res.rule_set=rule_set;res.rule_val=rule_val;res.rule_compare_val=compare_val;res.rule_visual='';res.rule_message='';res.rule_error=false;res.rule_result=false;try
{if(typeof compare_val!=='string')
{if(typeof(compare_val)!='undefined'){compare_val=''+compare_val;}
else{compare_val='';}
res.rule_compare_val=compare_val;}
if(rule_operator=='equals'){res.rule_visual=compare_val+' EQUALS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val==rule_val);return res;}else if(rule_operator=='does_not_equal'){res.rule_visual=compare_val+' DOES NOT EQUAL '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val!=rule_val);return res;}else if(rule_operator=='starts_with'){if(rule_val==''){res.rule_visual=compare_val+' STARTS WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' STARTS WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=stringStartsWith(compare_val,rule_val);return res;}}else if(rule_operator=='does_not_start_with'){if(rule_val==''){res.rule_visual=compare_val+' DOES NOT START WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' DOES NOT START WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=!stringStartsWith(compare_val,rule_val);return res;}}else if(rule_operator=='ends_with'){if(rule_val==''){res.rule_visual=compare_val+' ENDS WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' ENDS WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=stringEndsWith(compare_val,rule_val);return res;}}else if(rule_operator=='does_not_end_with'){if(rule_val==''){res.rule_visual=compare_val+' DOES NOT END WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' DOES NOT END WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=!stringEndsWith(compare_val,rule_val);return res;}}else if(rule_operator=='contains'){if(rule_val==''){res.rule_visual=compare_val+' CONTAINS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' CONTAINS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val.indexOf(rule_val)>=0);return res;}}else if(rule_operator=='does_not_contain'){if(rule_val==''){res.rule_visual=compare_val+' DOES NOT CONTAIN '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' DOES NOT CONTAIN '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val.indexOf(rule_val)==-1);return res;}}else if(rule_operator=='in_set'){for(var x=0;x<rule_set.length;x++){if(compare_val==rule_set[x]){res.rule_visual=compare_val+' MATCHED VALUE #'+x+' IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}}
res.rule_visual=compare_val+' MATCHED NO VALUES IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else if(rule_operator=='not_in_set'){for(var x=0;x<rule_set.length;x++){if(compare_val==rule_set[x]){res.rule_visual=compare_val+' MATCHED VALUE #'+x+' IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}}
res.rule_visual=compare_val+' MATCHED NO VALUES IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}else if(rule_operator=='in_set_contains'){for(var x=0;x<rule_set.length;x++){if(rule_set[x]!=''&&compare_val.indexOf(rule_set[x])>=0){res.rule_visual=compare_val+' CONTAINS VALUE #'+x+' IN GROUP ('+rule_set[x]+') (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}}
res.rule_visual=compare_val+' CONTAINS NO VALUES IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else if(rule_operator=='not_in_set_contains'){for(var x=0;x<rule_set.length;x++){if(rule_set[x]!=''&&compare_val.indexOf(rule_set[x])>=0){res.rule_visual=compare_val+' CONTAINS VALUE #'+x+' IN GROUP ('+rule_set[x]+') (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}}
res.rule_visual=compare_val+' CONTAINS NO VALUES IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"evalRuleString");logger(res);res.rule_error=true;res.rule_result=false;res.rule_message=e.message;return res;}}
function evalRulePagesNavigated(rule_prop,rule_operator,rule_set,rule_val,compare_val){var res={};res.rule_func='evalRulePagesNavigated';res.rule_prop=rule_prop;res.rule_operator=rule_operator;res.rule_set=rule_set;res.rule_val=rule_val;res.rule_compare_val=compare_val;res.rule_visual='';res.rule_message='';res.rule_error=false;res.rule_result=false;try{if(rule_operator=='equals'){res.rule_visual=compare_val+' EQUALS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=compareUrlEqualityWithAndWithoutTrailingSlash(compare_val,rule_val);return res;}else if(rule_operator=='does_not_equal'){res.rule_visual=compare_val+' DOES NOT EQUAL '+rule_val;res.rule_message=res.rule_visual;res.rule_result=!compareUrlEqualityWithAndWithoutTrailingSlash(compare_val,rule_val);return res;}else if(rule_operator=='starts_with'){if(rule_val==''){res.rule_visual=compare_val+' STARTS WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' STARTS WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=stringStartsWith(compare_val.toLowerCase(),rule_val.toLowerCase());return res;}}else if(rule_operator=='does_not_start_with'){if(rule_val==''){res.rule_visual=compare_val+' DOES NOT START WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' DOES NOT START WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=!stringStartsWith(compare_val.toLowerCase(),rule_val.toLowerCase());return res;}}else if(rule_operator=='ends_with'){if(rule_val==''){res.rule_visual=compare_val+' ENDS WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' ENDS WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=compareUrlEndingWithAndWithoutTrailingSlash(compare_val,rule_val);return res;}}else if(rule_operator=='does_not_end_with'){if(rule_val==''){res.rule_visual=compare_val+' DOES NOT END WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' DOES NOT END WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=!compareUrlEndingWithAndWithoutTrailingSlash(compare_val,rule_val);return res;}}else if(rule_operator=='contains'){if(rule_val==''){res.rule_visual=compare_val+' CONTAINS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' CONTAINS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val.toLowerCase().indexOf(rule_val.toLowerCase())>=0);return res;}}else if(rule_operator=='does_not_contain'){if(rule_val==''){res.rule_visual=compare_val+' DOES NOT CONTAIN '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' DOES NOT CONTAIN '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val.toLowerCase().indexOf(rule_val.toLowerCase())==-1);return res;}}else if(rule_operator=='in_set'){var compare_set=[];if(DIGIOH_API.contains(compare_val,'|')){compare_set=compare_val.split('|');}else if(compare_val){compare_set.push(compare_val);}
for(var x=0;x<rule_set.length;x++){for(s=0;s<compare_set.length;s++){if(compareUrlEqualityWithAndWithoutTrailingSlash(compare_set[s],rule_set[x])){res.rule_visual=compare_set[s]+' MATCHED VALUE #'+x+' IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}}}
res.rule_visual=compare_set[s]+' MATCHED NO VALUES IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else if(rule_operator=='not_in_set'){var compare_set=[];if(DIGIOH_API.contains(compare_val,'|')){compare_set=compare_val.split('|');}else if(compare_val){compare_set.push(compare_val);}
for(var x=0;x<rule_set.length;x++){for(s=0;s<compare_set.length;s++){if(compareUrlEqualityWithAndWithoutTrailingSlash(compare_set[s],rule_set[x])){res.rule_visual=compare_set[s]+' MATCHED VALUE #'+x+' IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}}}
res.rule_visual=compare_set[s]+' MATCHED NO VALUES IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}else if(rule_operator=='in_set_contains'){var compare_set=[];if(DIGIOH_API.contains(compare_val,'|')){compare_set=compare_val.split('|');}else if(compare_val){compare_set.push(compare_val);}
for(var x=0;x<rule_set.length;x++){for(s=0;s<compare_set.length;s++){if(rule_set[x]!=''&&compare_set[s].toLowerCase().indexOf(rule_set[x].toLowerCase())>=0){res.rule_visual=compare_set[s]+' CONTAINS VALUE #'+x+' IN GROUP ('+rule_set[x]+') (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}}}
res.rule_visual=compare_set[s]+' CONTAINS NO VALUES IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else if(rule_operator=='not_in_set_contains'){var compare_set=[];if(DIGIOH_API.contains(compare_val,'|')){compare_set=compare_val.split('|');}else if(compare_val){compare_set.push(compare_val);}
for(var x=0;x<rule_set.length;x++){for(s=0;s<compare_set.length;s++){if(rule_set[x]!=''&&compare_set[s].toLowerCase().indexOf(rule_set[x].toLowerCase())>=0){res.rule_visual=compare_set[s]+' CONTAINS VALUE #'+x+' IN GROUP ('+rule_set[x]+') (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}}}
res.rule_visual=compare_set[s]+' CONTAINS NO VALUES IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"evalRulePagesNavigated");res.rule_error=true;res.rule_result=false;res.rule_message=e.message;return res;}}
function evalRuleUrl(rule_prop,rule_operator,rule_set,rule_val,compare_val){var res={};res.rule_func='evalRuleUrl';res.rule_prop=rule_prop;res.rule_operator=rule_operator;res.rule_set=rule_set;res.rule_val=rule_val;res.rule_compare_val=compare_val;res.rule_visual='';res.rule_message='';res.rule_error=false;res.rule_result=false;try{if(rule_operator=='equals'){res.rule_visual=compare_val+' EQUALS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=compareUrlEqualityWithAndWithoutTrailingSlash(compare_val,rule_val);return res;}else if(rule_operator=='does_not_equal'){res.rule_visual=compare_val+' DOES NOT EQUAL '+rule_val;res.rule_message=res.rule_visual;res.rule_result=!compareUrlEqualityWithAndWithoutTrailingSlash(compare_val,rule_val);return res;}else if(rule_operator=='starts_with'){if(rule_val==''){res.rule_visual=compare_val+' STARTS WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' STARTS WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=stringStartsWith(compare_val.toLowerCase(),rule_val.toLowerCase());return res;}}else if(rule_operator=='does_not_start_with'){if(rule_val==''){res.rule_visual=compare_val+' DOES NOT START WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' DOES NOT START WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=!stringStartsWith(compare_val.toLowerCase(),rule_val.toLowerCase());return res;}}else if(rule_operator=='ends_with'){if(rule_val==''){res.rule_visual=compare_val+' ENDS WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' ENDS WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=compareUrlEndingWithAndWithoutTrailingSlash(compare_val,rule_val);return res;}}else if(rule_operator=='does_not_end_with'){if(rule_val==''){res.rule_visual=compare_val+' DOES NOT END WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' DOES NOT END WITH '+rule_val;res.rule_message=res.rule_visual;res.rule_result=!compareUrlEndingWithAndWithoutTrailingSlash(compare_val,rule_val);return res;}}else if(rule_operator=='contains'){if(rule_val==''){res.rule_visual=compare_val+' CONTAINS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' CONTAINS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val.toLowerCase().indexOf(rule_val.toLowerCase())>=0);return res;}}else if(rule_operator=='does_not_contain'){if(rule_val==''){res.rule_visual=compare_val+' DOES NOT CONTAIN '+rule_val;res.rule_message=res.rule_visual;res.rule_result=false;return res;}else{res.rule_visual=compare_val+' DOES NOT CONTAIN '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val.toLowerCase().indexOf(rule_val.toLowerCase())==-1);return res;}}else if(rule_operator=='in_set'){for(var x=0;x<rule_set.length;x++){if(compareUrlEqualityWithAndWithoutTrailingSlash(compare_val,rule_set[x])){res.rule_visual=compare_val+' MATCHED VALUE #'+x+' IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}}
res.rule_visual=compare_val+' MATCHED NO VALUES IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else if(rule_operator=='not_in_set'){for(var x=0;x<rule_set.length;x++){if(compareUrlEqualityWithAndWithoutTrailingSlash(compare_val,rule_set[x])){res.rule_visual=compare_val+' MATCHED VALUE #'+x+' IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}}
res.rule_visual=compare_val+' MATCHED NO VALUES IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}else if(rule_operator=='in_set_contains'){for(var x=0;x<rule_set.length;x++){if(rule_set[x]!=''&&compare_val.toLowerCase().indexOf(rule_set[x].toLowerCase())>=0){res.rule_visual=compare_val+' CONTAINS VALUE #'+x+' IN GROUP ('+rule_set[x]+') (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}}
res.rule_visual=compare_val+' CONTAINS NO VALUES IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else if(rule_operator=='not_in_set_contains'){for(var x=0;x<rule_set.length;x++){if(rule_set[x]!=''&&compare_val.toLowerCase().indexOf(rule_set[x].toLowerCase())>=0){res.rule_visual=compare_val+' CONTAINS VALUE #'+x+' IN GROUP ('+rule_set[x]+') (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}}
res.rule_visual=compare_val+' CONTAINS NO VALUES IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"evalRuleUrl");res.rule_error=true;res.rule_result=false;res.rule_message=e.message;return res;}}
function evalRuleDeviceEnum(rule_prop,rule_operator,rule_set,rule_val,compare_val_orig){var res={};res.rule_func='evalRuleDeviceEnum';res.rule_prop=rule_prop;res.rule_operator=rule_operator;res.rule_set=rule_set;res.rule_val=rule_val;res.rule_compare_val=compare_val_orig;res.rule_visual='';res.rule_message='';res.rule_error=false;res.rule_result=false;var compare_val=compare_val_orig;try{if(rule_operator=='equals'){if(rule_val&&rule_val.indexOf('Desktop/Laptop')===-1&&rule_val.indexOf('Phone/Tablet')===-1){if(isPhone()){compare_val='Phone';}else if(isTablet()){compare_val='Tablet';}else{compare_val='Desktop';}}else{compare_val=compare_val_orig;}
res.rule_visual=compare_val+' EQUALS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val==rule_val);return res;}else if(rule_operator=='does_not_equal'){if(rule_val&&rule_val.indexOf('Desktop/Laptop')===-1&&rule_val.indexOf('Phone/Tablet')===-1){if(isPhone()){compare_val='Phone';}else if(isTablet()){compare_val='Tablet';}else{compare_val='Desktop';}}else{compare_val=compare_val_orig;}
res.rule_visual=compare_val+' DOES NOT EQUAL '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val!=rule_val);return res;}else if(rule_operator=='in_set'){for(var x=0;x<rule_set.length;x++){if(rule_set[x]&&rule_set[x].indexOf('Desktop/Laptop')===-1&&rule_set[x].indexOf('Phone/Tablet')===-1){if(isPhone()){compare_val='Phone';}else if(isTablet()){compare_val='Tablet';}else{compare_val='Desktop';}}else{compare_val=compare_val_orig;}
if(compare_val==rule_set[x]){res.rule_visual=compare_val+' MATCHED VALUE #'+x+' IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}}
res.rule_visual=compare_val+' MATCHED NO VALUES IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else if(rule_operator=='not_in_set'){for(var x=0;x<rule_set.length;x++){if(rule_set[x]&&rule_set[x].indexOf('Desktop/Laptop')===-1&&rule_set[x].indexOf('Phone/Tablet')===-1){if(isPhone()){compare_val='Phone';}else if(isTablet()){compare_val='Tablet';}else{compare_val='Desktop';}}else{compare_val=compare_val_orig;}
if(compare_val==rule_set[x]){res.rule_visual=compare_val+' MATCHED VALUE #'+x+' IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}}
res.rule_visual=compare_val+' MATCHED NO VALUES IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"evalRuleDeviceEnum");res.rule_visual='ERROR: '+e.message;res.rule_error=true;res.rule_result=false;res.rule_message=e.message;return res;}}
var getBrowserLanguages=function(){if(typeof navigator==='object'){var t='anguage',n=navigator,f;f=n['l'+t+'s'];return f&&f.length?f:(t=n['l'+t]||n['browserL'+t]||n['userL'+t])?[t]:t;}};function evalRuleEnumLanguage(rule_prop,rule_operator,rule_set,rule_val){var compare_val_orig='en';var langs=getBrowserLanguages();if(typeof langs==='object'&&langs!=null&&langs.length>0)
compare_val_orig=langs[0];var res={};res.rule_func='evalRuleEnumLanguage';res.rule_prop=rule_prop;res.rule_operator=rule_operator;res.rule_set=rule_set;res.rule_val=rule_val;res.rule_compare_val=compare_val_orig;res.rule_visual='';res.rule_message='';res.rule_error=false;res.rule_result=false;var compare_val=compare_val_orig;try{if(rule_operator=='equals'){if(rule_val&&rule_val.indexOf('_')===-1)
compare_val=compare_val_orig.split('-')[0];else
compare_val=compare_val_orig.split('-').join('_');res.rule_visual=compare_val+' EQUALS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val.toLowerCase()==rule_val.toLowerCase());return res;}else if(rule_operator=='does_not_equal'){if(rule_val&&rule_val.indexOf('_')===-1)
compare_val=compare_val_orig.split('-')[0];else
compare_val=compare_val_orig.split('-').join('_');res.rule_visual=compare_val+' DOES NOT EQUAL '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val.toLowerCase()!=rule_val.toLowerCase());return res;}else if(rule_operator=='in_set'){for(var x=0;x<rule_set.length;x++){if(rule_set[x]&&rule_set[x].indexOf('_')===-1)
compare_val=compare_val_orig.split('-')[0];else
compare_val=compare_val_orig.split('-').join('_');if(compare_val.toLowerCase()==rule_set[x].toLowerCase()){res.rule_visual=compare_val+' MATCHED VALUE #'+x+' IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}}
res.rule_visual=compare_val+' MATCHED NO VALUES IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else if(rule_operator=='not_in_set'){for(var x=0;x<rule_set.length;x++){if(rule_set[x]&&rule_set[x].indexOf('_')===-1)
compare_val=compare_val_orig.split('-')[0];else
compare_val=compare_val_orig.split('-').join('_');if(compare_val.toLowerCase()==rule_set[x].toLowerCase()){res.rule_visual=compare_val+' MATCHED VALUE #'+x+' IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}}
res.rule_visual=compare_val+' MATCHED NO VALUES IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"evalRuleEnumLanguage");res.rule_visual='ERROR: '+e.message;res.rule_error=true;res.rule_result=false;res.rule_message=e.message;return res;}}
function evalRuleEnum(rule_prop,rule_operator,rule_set,rule_val,compare_val){var res={};res.rule_func='evalRuleEnum';res.rule_prop=rule_prop;res.rule_operator=rule_operator;res.rule_set=rule_set;res.rule_val=rule_val;res.rule_compare_val=compare_val;res.rule_visual='';res.rule_message='';res.rule_error=false;res.rule_result=false;try{if(rule_operator=='equals'){res.rule_visual=compare_val+' EQUALS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val==rule_val);return res;}else if(rule_operator=='does_not_equal'){res.rule_visual=compare_val+' DOES NOT EQUAL '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val!=rule_val);return res;}else if(rule_operator=='in_set'){for(var x=0;x<rule_set.length;x++){if(compare_val==rule_set[x]){res.rule_visual=compare_val+' MATCHED VALUE #'+x+' IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}}
res.rule_visual=compare_val+' MATCHED NO VALUES IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else if(rule_operator=='not_in_set'){for(var x=0;x<rule_set.length;x++){if(compare_val==rule_set[x]){res.rule_visual=compare_val+' MATCHED VALUE #'+x+' IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}}
res.rule_visual=compare_val+' MATCHED NO VALUES IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"evalRuleEnum");res.rule_error=true;res.rule_result=false;res.rule_message=e.message;return res;}}
function evalRuleEnumSegments(rule_prop,rule_operator,rule_set,rule_val,compare_val){var res={};res.rule_func='evalRuleEnumSegments';res.rule_prop=rule_prop;res.rule_operator=rule_operator;res.rule_set=rule_set;res.rule_val=rule_val;res.rule_compare_val=compare_val;res.rule_visual='';res.rule_message='';res.rule_error=false;res.rule_result=false;try{if(typeof CDP_VARS==='object'&&CDP_VARS&&CDP_VARS.hasOwnProperty('enabled')&&CDP_VARS.enabled){if(rule_operator==='equals'){res.rule_visual='['+compare_val.join(',')+']'+' EQUALS/CONTAINS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(JQUERY_DIGIOH.inArray(rule_val,compare_val)!==-1);return res;}else if(rule_operator==='does_not_equal'){res.rule_visual='['+compare_val.join(',')+']'+' DOES NOT EQUAL/CONTAIN '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(JQUERY_DIGIOH.inArray(rule_val,compare_val)===-1);return res;}else if(rule_operator==='in_set'){for(var x=0;x<rule_set.length;x++){if(JQUERY_DIGIOH.inArray(rule_val,compare_val)!==-1){res.rule_visual='['+compare_val.join(',')+']'+' MATCHED/CONTAINED VALUE #'+x+' IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}}
res.rule_visual='['+compare_val.join(',')+']'+' MATCHED/CONTAINED NO VALUES IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else if(rule_operator==='not_in_set'){for(var x=0;x<rule_set.length;x++){if(JQUERY_DIGIOH.inArray(rule_val,compare_val)!==-1){res.rule_visual='['+compare_val.join(',')+']'+' MATCHED/CONTAINED VALUE #'+x+' IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}}
res.rule_visual='['+compare_val.join(',')+']'+' MATCHED/CONTAINED NO VALUES IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
else{if(DIGIOH_API.recipientSegmentsResult&&!DIGIOH_API.recipientSegmentsResult.found){res.rule_visual='API RESULT NOT FOUND (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}
var root_domain=window.location.host;if(window.location.host.split('.').length>2){var temp=window.location.host.split('.').reverse();root_domain=temp[1]+'.'+temp[0];}
if(rule_operator==='equals'){if(!DIGIOH_API.contains(rule_val,root_domain)){res.rule_visual='ROOT DOMAIN DID NOT MATCH (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}
rule_val=rule_val.split(' (')[0];res.rule_visual='['+compare_val.join(',')+']'+' EQUALS/CONTAINS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(JQUERY_DIGIOH.inArray(rule_val,compare_val)!==-1);return res;}else if(rule_operator==='does_not_equal'){if(!DIGIOH_API.contains(rule_val,root_domain)){res.rule_visual='ROOT DOMAIN DID NOT MATCH (failure)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}
rule_val=rule_val.split(' (')[0];res.rule_visual='['+compare_val.join(',')+']'+' DOES NOT EQUAL/CONTAIN '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(JQUERY_DIGIOH.inArray(rule_val,compare_val)===-1);return res;}else if(rule_operator==='in_set'){for(var x=0;x<rule_set.length;x++){if(!DIGIOH_API.contains(rule_set[x],root_domain)){continue;}
rule_val=rule_set[x].split(' (')[0];if(JQUERY_DIGIOH.inArray(rule_val,compare_val)!==-1){res.rule_visual='['+compare_val.join(',')+']'+' MATCHED/CONTAINED VALUE #'+x+' IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}}
res.rule_visual='['+compare_val.join(',')+']'+' MATCHED/CONTAINED NO VALUES IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else if(rule_operator==='not_in_set'){for(var x=0;x<rule_set.length;x++){if(!DIGIOH_API.contains(rule_set[x],root_domain)){continue;}
rule_val=rule_set[x].split(' (')[0];if(JQUERY_DIGIOH.inArray(rule_val,compare_val)!==-1){res.rule_visual='['+compare_val.join(',')+']'+' MATCHED/CONTAINED VALUE #'+x+' IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}}
res.rule_visual='['+compare_val.join(',')+']'+' MATCHED/CONTAINED NO VALUES IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"evalRuleEnumSegments");res.rule_error=true;res.rule_result=false;res.rule_message=e.message;return res;}}
function evalRuleInt(rule_prop,rule_operator,rule_set,rule_val,compare_val){var res={};res.rule_func='evalRuleInt';res.rule_prop=rule_prop;res.rule_operator=rule_operator;res.rule_set=rule_set;res.rule_val=rule_val;res.rule_compare_val=compare_val;res.rule_visual='';res.rule_message='';res.rule_error=false;res.rule_result=false;try{if(rule_operator=='equals'){if(!isStringAnInteger(rule_val)){res.rule_error=true;res.rule_message='value is not a number';return res;}else{res.rule_visual=compare_val+' EQUALS '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val==parseInt(rule_val));return res;}}else if(rule_operator=='does_not_equal'){if(!isStringAnInteger(rule_val)){res.rule_error=true;res.rule_message='value is not a number';return res;}else{res.rule_visual=compare_val+' DOES NOT EQUAL '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val!=parseInt(rule_val));return res;}}else if(rule_operator=='less_than'){if(!isStringAnInteger(rule_val)){res.rule_error=true;res.rule_message='value is not a number';return res;}else{res.rule_visual=compare_val+' LESS THAN '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val<parseInt(rule_val));return res;}}else if(rule_operator=='greater_than'){if(!isStringAnInteger(rule_val)){res.rule_error=true;res.rule_message='value is not a number';return res;}else{res.rule_visual=compare_val+' GREATER THAN '+rule_val;res.rule_message=res.rule_visual;res.rule_result=(compare_val>parseInt(rule_val));return res;}}else if(rule_operator=='in_set'){for(var x=0;x<rule_set.length;x++){if(isStringAnInteger(rule_set[x])&&compare_val==parseInt(rule_set[x])){res.rule_visual=compare_val+' MATCHED VALUE #'+x+' IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}}
res.rule_visual=compare_val+' MATCHED NO VALUES IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}else if(rule_operator=='not_in_set'){for(var x=0;x<rule_set.length;x++){if(isStringAnInteger(rule_set[x])&&compare_val==parseInt(rule_set[x])){res.rule_visual=compare_val+' MATCHED VALUE #'+x+' IN GROUP (failure)';res.rule_message=res.rule_visual;res.rule_result=false;return res;}}
res.rule_visual=compare_val+' MATCHED NO VALUES IN GROUP (success)';res.rule_message=res.rule_visual;res.rule_result=true;return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"evalRuleInt");res.rule_error=true;res.rule_result=false;res.rule_message=e.message;return res;}}
function evalRuleDate(rule_prop,rule_operator,rule_start_date,rule_end_date,compare_date){var res={};res.rule_func='evalRuleDate';res.rule_prop=rule_prop;res.rule_operator=rule_operator;res.rule_start_date=rule_start_date;res.rule_end_date=rule_end_date;res.rule_compare_date=compare_date;res.rule_visual='';res.rule_message='';res.rule_error=false;res.rule_result=false;try{var start_date_parts=[];var end_date_parts=[];var compare_date_parts=[];var start;var end;var compare;if(compare_date.indexOf('/')==-1){res.rule_message='comparison date in invalid format, does not contain slash: '+compare_date;res.rule_error=true;return res;}
compare_date_parts=compare_date.split('/');if(compare_date_parts.length!=3){res.rule_message='comparison date in invalid format, less than 3 date parts: '+compare_date;res.rule_error=true;return res;}
compare=new Date(parseInt(compare_date_parts[2]),parseInt(compare_date_parts[0]-1),parseInt(compare_date_parts[1]),0,0,0);if(rule_start_date.indexOf('/')==-1){res.rule_message='start date in invalid format, does not contain slash: '+rule_start_date;res.rule_error=true;return res;}
start_date_parts=rule_start_date.split('/');if(start_date_parts.length!=3){res.rule_message='start date in invalid format, less than 3 date parts: '+rule_start_date;res.rule_error=true;return res;}
start=new Date(parseInt(start_date_parts[2]),parseInt(start_date_parts[0]-1),parseInt(start_date_parts[1]),0,0,0);if(rule_operator=='equals'){res.rule_visual=(compare.getMonth()+1)+'/'+compare.getDate()+'/'+compare.getFullYear()+' EQUALS '+rule_start_date;res.rule_result=(compare.getTime()==start.getTime());return res;}else if(rule_operator=='does_not_equal'){res.rule_visual=(compare.getMonth()+1)+'/'+compare.getDate()+'/'+compare.getFullYear()+' DOES NOT EQUAL '+rule_start_date;res.rule_result=(compare.getTime()!=start.getTime());return res;}else if(rule_operator=='less_than'){res.rule_visual=(compare.getMonth()+1)+'/'+compare.getDate()+'/'+compare.getFullYear()+' LESS THAN '+rule_start_date;res.rule_result=(compare.getTime()<start.getTime());return res;}else if(rule_operator=='greater_than'){res.rule_visual=(compare.getMonth()+1)+'/'+compare.getDate()+'/'+compare.getFullYear()+' GREATER THAN '+rule_start_date;res.rule_result=(compare.getTime()>start.getTime());return res;}else if(rule_operator=='between'||rule_operator=='is_not_between'){if(rule_end_date.indexOf('/')==-1){res.rule_message='end date in invalid format, does not contain slash: '+rule_end_date;res.rule_error=true;return res;}
end_date_parts=rule_end_date.split('/');if(end_date_parts.length!=3){res.rule_message='end date in invalid format, less than 3 date parts: '+rule_end_date;res.rule_error=true;return res;}
end=new Date(parseInt(end_date_parts[2]),parseInt(end_date_parts[0]-1),parseInt(end_date_parts[1]),0,0,0);if(end.getTime()<start.getTime()){res.rule_message='start date must be less than or equal to end date: '+rule_start_date+' (start date), '+rule_end_date+' (end date)';res.rule_error=true;return res;}
if(rule_operator=='between'){res.rule_visual=(compare.getMonth()+1)+'/'+compare.getDate()+'/'+compare.getFullYear()+' BETWEEN '+rule_start_date+', '+rule_end_date;res.rule_result=(compare.getTime()>=start.getTime()&&compare.getTime()<=end.getTime());return res;}else if(rule_operator=='is_not_between'){res.rule_visual=(compare.getMonth()+1)+'/'+compare.getDate()+'/'+compare.getFullYear()+' IS NOT BETWEEN '+rule_start_date+', '+rule_end_date;res.rule_result=(compare.getTime()<start.getTime()||compare.getTime()>end.getTime());return res;}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}else{res.rule_message='invalid operator: '+rule_operator;res.rule_error=true;res.result=false;return res;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"evalRuleDate");res.rule_error=true;res.rule_result=false;res.rule_message=e.message;return res;}}
function initLightboxActivity(){try{DIGIOH_LIGHTBOX_ANALYTICS.loadLightboxActivity();}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initLightboxActivity");}}
function checkLightboxMasterRules(){try{if(typeof DIGIOH_LIGHTBOX_MASTER_RULES!=="undefined"&&window.location.href.indexOf('ignore_lightbox_master_rules')<0){if(typeof DIGIOH_LIGHTBOX_MASTER_RULES.OneBoxPerPageview!=="undefined"&&DIGIOH_LIGHTBOX_MASTER_RULES.OneBoxPerPageview===true&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.master_rules["Once per pageview"]===false){logger("OneBoxPerPageview: Master rule prevented further execution.");return false;}
if(typeof DIGIOH_LIGHTBOX_MASTER_RULES.OneBoxPerSession!=="undefined"&&DIGIOH_LIGHTBOX_MASTER_RULES.OneBoxPerSession===true&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.master_rules["Once per session"]===false){logger("OneBoxPerSession:  Master rule prevented further execution.");return false;}
if(typeof DIGIOH_LIGHTBOX_MASTER_RULES.OneBoxPerVisitor!=="undefined"&&DIGIOH_LIGHTBOX_MASTER_RULES.OneBoxPerVisitor===true&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.master_rules["Once per visitor"]===false){logger("OneBoxPerVisitor:  Master rule prevented further execution.");return false;}
if(typeof DIGIOH_LIGHTBOX_MASTER_RULES.StopAfterFormSubmitted!=="undefined"&&DIGIOH_LIGHTBOX_MASTER_RULES.StopAfterFormSubmitted===true&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.master_rules["Until form is submitted"]===false){logger("StopAfterFormSubmitted:  Master rule prevented further execution.");return false;}
if(typeof DIGIOH_LIGHTBOX_MASTER_RULES.DisableIfCookiesDisabled!=="undefined"&&DIGIOH_LIGHTBOX_MASTER_RULES.DisableIfCookiesDisabled===true&&((DIGIOH_STORAGE.storage_type==='cookie'&&areCookiesDisabled())||(DIGIOH_STORAGE.storage_type==='cross_domain'&&!DIGIOH_CROSS_DOMAIN.isWorking))){logger("DisableIfCookiesDisabled:  Cookies are currently disabled in this browser.  Preventing further execution.");return false;}}
return true;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"checkLightboxMasterRules");return true;}}
function updateLightboxActivityView(lid){try{DIGIOH_LIGHTBOX_ANALYTICS.setLightboxEvent("view",lid);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"updateLightboxActivityView");}}
function updateLightboxActivityClose(lid){try{DIGIOH_LIGHTBOX_ANALYTICS.setLightboxEvent("close",lid);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"updateLightboxActivityClose");}}
function updateLightboxActivitySubmit(lid){try{DIGIOH_LIGHTBOX_ANALYTICS.setLightboxEvent("submit",lid);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"updateLightboxActivitySubmit");}}
function updateLightboxActivityRedirect(lid){try{DIGIOH_LIGHTBOX_ANALYTICS.setLightboxEvent("redirect",lid);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"updateLightboxActivityRedirect");}}
var initExistsSelectors=function(){try{for(var x=0;x<EXISTS_SELECTORS.length;x++){if(JQUERY_DIGIOH(EXISTS_SELECTORS[x]).length){DIGIOH_LIGHTBOX_ANALYTICS.VARS.exists_jquery_selector[EXISTS_SELECTORS[x]]=true;}else{DIGIOH_LIGHTBOX_ANALYTICS.VARS.exists_jquery_selector[EXISTS_SELECTORS[x]]=false;}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initExistsSelectors");}};var recheckExistsSelectors=function(){initExistsSelectors();};function initClickSelectors(){try{for(var x=0;x<CLICK_SELECTORS.length;x++){DIGIOH_LIGHTBOX_ANALYTICS.VARS.click_jquery_selector[CLICK_SELECTORS[x]]=false;JQUERY_DIGIOH(document).on('click',CLICK_SELECTORS[x],function(e){var curr=JQUERY_DIGIOH(this)[0];for(var y=0;y<CLICK_SELECTORS.length;y++){var elements=JQUERY_DIGIOH(CLICK_SELECTORS[y]);for(var w=0;w<elements.length;w++){if(elements[w]===curr){DIGIOH_LIGHTBOX_ANALYTICS.VARS.click_jquery_selector[CLICK_SELECTORS[y]]=true;var selector=CLICK_SELECTORS[y];var lbguid=checkConditions('click','',selector,false);if(lbguid&&lbguid.length>0){e.preventDefault();logger("loadLightbox: initClickSelectors, "+lbguid);loadLightbox(lbguid);}
DIGIOH_LIGHTBOX_ANALYTICS.VARS.click_jquery_selector[selector]=false;if(!DIGIOH_LIGHTBOX_MASTER_RULES.AllowMultipleBoxes){break;}}}}});}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initClickSelectors");}}
var checkConditionsClick=function(selector){try{var lbguid=checkConditions('click','',selector,false);if(lbguid&&lbguid.length>0){logger("loadLightbox: checkConditionsClick, "+lbguid);loadLightbox(lbguid);}
DIGIOH_LIGHTBOX_ANALYTICS.VARS.click_jquery_selector[selector]=false;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"checkConditionsClick");}};function initHoverSelectors(){try{for(var x=0;x<HOVER_SELECTORS.length;x++){DIGIOH_LIGHTBOX_ANALYTICS.VARS.hover_jquery_selector[HOVER_SELECTORS[x]]=false;JQUERY_DIGIOH(HOVER_SELECTORS[x]).mouseenter(function(){var curr=JQUERY_DIGIOH(this)[0];for(var y=0;y<HOVER_SELECTORS.length;y++){var elements=JQUERY_DIGIOH(HOVER_SELECTORS[y]);for(var w=0;w<elements.length;w++){if(elements[w]===curr){DIGIOH_LIGHTBOX_ANALYTICS.VARS.hover_jquery_selector[HOVER_SELECTORS[y]]=true;checkConditionsHover(HOVER_SELECTORS[y]);if(!DIGIOH_LIGHTBOX_MASTER_RULES.AllowMultipleBoxes){break;}}}}}).mouseleave(function(){var curr=JQUERY_DIGIOH(this)[0];for(var y=0;y<HOVER_SELECTORS.length;y++){var elements=JQUERY_DIGIOH(HOVER_SELECTORS[y]);for(var w=0;w<elements.length;w++){if(elements[w]===curr){DIGIOH_LIGHTBOX_ANALYTICS.VARS.hover_jquery_selector[HOVER_SELECTORS[y]]=false;if(!DIGIOH_LIGHTBOX_MASTER_RULES.AllowMultipleBoxes){break;}}}}});}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initHoverSelectors");}}
var checkConditionsHover=function(selector){try{var lbguid=checkConditions('hover','',selector,false);if(lbguid&&lbguid.length>0){logger("loadLightbox: checkConditionsHover, "+lbguid);loadLightbox(lbguid);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"checkConditionsHover");}};function initScrollSelectors(){try{if(SCROLL_BOXES_ARR.length>0){jqWin.scroll(function(){DIGIOH_LIGHTBOX_ANALYTICS.VARS.scroll_pixels=Math.round(jqWin.scrollTop());DIGIOH_LIGHTBOX_ANALYTICS.VARS.scroll_percent=Math.round(100*jqWin.scrollTop()/(jqDoc.height()-jqWin.height()));checkConditionsScroll();});logger("initScrollSelectors");}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initScrollSelectors");}}
var checkConditionsScroll=function(){try{var lbguidCurr='';var lbguidMatch='';var ss=SCROLL_BOXES_ARR;for(var x=0;x<ss.length;x++){if(!SS_EVAL_PREV.hasOwnProperty(ss[x])){SS_EVAL_PREV[ss[x]]=false;}
lbguidCurr=checkConditions('scroll',ss[x],'',false);if(lbguidCurr&&lbguidCurr.length>0){if(lbguidMatch===''&&!SS_EVAL_PREV[ss[x]]){lbguidMatch=lbguidCurr;}
SS_EVAL_PREV[ss[x]]=true;}else{SS_EVAL_PREV[ss[x]]=false;}}
if(lbguidMatch&&lbguidMatch.length>0){logger("loadLightbox: checkConditionsScroll, "+lbguidMatch);loadLightbox(lbguidMatch);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"checkConditionsScroll");}};function initExitSelectors(){try{if(EXIT_BOXES_ARR.length>0){var mousex=-1;var mousey=-1;var lastmousex=-1;var lastmousey=-1;var lastmousetime;var mousetravel=0;var magnitudex=0;var magnitudey=0;var directionx='';var directiony='';var pageWidth=jqWin.width();var pageHeight=jqWin.height();var yOffset=jqWin.scrollTop();jqDoc.mousemove(function(e){mousex=e.pageX;mousey=e.pageY;magnitudex=Math.abs(mousex-lastmousex);magnitudey=Math.abs(mousey-lastmousey);if(lastmousex>-1){mousetravel=Math.max(magnitudex,magnitudey);}
if(mousex<lastmousex)directionx='left';else directionx='right';if(mousey>lastmousey)directiony='down';else directiony='up';lastmousex=mousex;lastmousey=mousey;});jqDoc.mouseleave(function(){yOffset=jqWin.scrollTop();var relative_y=yOffset-mousey;var relative_x=jqWin.width()-mousex;logger('Exit intent detected, with mousetravel = '+mousetravel);if(directionx=='right'&&mousex>(pageWidth-200)&&mousey>(yOffset+50)&&mousey<(pageHeight+yOffset-50)&&mousetravel>0&&magnitudex>=(magnitudey/2)){DIGIOH_LIGHTBOX_ANALYTICS.VARS.exit_intent="Mouse exits window right";logger("Exit intent: Mouse exits window right");checkConditionsExit();JQUERY_DIGIOH(document).trigger("lightboxExitEvent",["right"]);}
else if(directionx=='left'&&mousex<200&&mousey>(yOffset+50)&&mousey<(pageHeight+yOffset-50)&&mousetravel>0&&magnitudex>=(magnitudey/2)){DIGIOH_LIGHTBOX_ANALYTICS.VARS.exit_intent="Mouse exits window left";logger("Exit intent: Mouse exits window left");checkConditionsExit();JQUERY_DIGIOH(document).trigger("lightboxExitEvent",["left"]);}
else if(directiony=='up'&&mousey<(yOffset+200)&&mousetravel>0){DIGIOH_LIGHTBOX_ANALYTICS.VARS.exit_intent="Mouse exits window top";logger("Exit intent: Mouse exits window top");checkConditionsExit();JQUERY_DIGIOH(document).trigger("lightboxExitEvent",["top"]);}
else if(directiony=='down'&&mousey>(pageHeight+yOffset-100)&&mousetravel>0){DIGIOH_LIGHTBOX_ANALYTICS.VARS.exit_intent="Mouse exits window bottom";logger("Exit intent: Mouse exits window bottom");checkConditionsExit();JQUERY_DIGIOH(document).trigger("lightboxExitEvent",["bottom"]);}
else if(DIGIOH_API.GET_ANALYTICS().VARS.DeviceAtlas.browserName=='Safari'){DIGIOH_LIGHTBOX_ANALYTICS.VARS.exit_intent="Mouse exits window top";logger("Exit intent: Mouse exits window from unknown position in Safari.  Registering Exit intent anyway.");checkConditionsExit();JQUERY_DIGIOH(document).trigger("lightboxExitEvent",["unknown"]);}
setTimeout(function(){DIGIOH_LIGHTBOX_ANALYTICS.VARS.exit_intent="";},1000);});jqWin.resize(function(){pageWidth=jqWin.width();pageHeight=jqWin.height();yOffset=jqWin.scrollTop();});}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initExitSelectors");}}
var checkConditionsExit=function(){try{if(DIGIOH_LIGHTBOX_MASTER_RULES.AllowMultipleBoxes){var lbguids=checkConditions('exit','','',true);logger("checkConditionsExit:  AllowMultipleBoxes(true) => lbguidsMatched => "+JSON.stringify(lbguids));for(var i=0;i<lbguids.length;i++){if(lbguids[i]&&lbguids[i].length>0){logger("loadLightbox: checkConditionsExit, "+lbguids[i]);loadLightbox(lbguids[i]);}}}
else{var lbguid=checkConditions('exit','','',false);logger("checkConditionsExit:  AllowMultipleBoxes(false) => lbguidMatched => "+lbguid);if(lbguid&&lbguid.length>0){logger("loadLightbox: checkConditionsExit, "+lbguid);loadLightbox(lbguid);}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"checkConditionsExit");}};var checkConditionsLoad=function(){try{if(DIGIOH_LIGHTBOX_MASTER_RULES.AllowMultipleBoxes){var lbguids=checkConditions('load','','',true);logger("checkConditionsLoad:  AllowMultipleBoxes(true) => lbguidsMatched => "+JSON.stringify(lbguids));for(var i=0;i<lbguids.length;i++){if(lbguids[i]&&lbguids[i].length>0){logger("loadLightbox: checkConditionsLoad, "+lbguids[i]);loadLightbox(lbguids[i]);}}}
else{var lbguid=checkConditions('load','','',false);logger("checkConditionsLoad:  AllowMultipleBoxes(false) => lbguidMatched => "+lbguid);if(lbguid&&lbguid.length>0){logger("loadLightbox: checkConditionsLoad, "+lbguid);loadLightbox(lbguid);}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"checkConditionsLoad");}};var checkConditionsTime=function(){try{var lbguidCurr='';var lbguidMatch='';var ts=TIME_BOXES_ARR;for(var x=0;x<ts.length;x++){if(!TS_EVAL_PREV.hasOwnProperty(ts[x])){TS_EVAL_PREV[ts[x]]=false;}
lbguidCurr=checkConditions('time',ts[x],'',false);if(lbguidCurr&&lbguidCurr.length>0){if(lbguidMatch===''&&!TS_EVAL_PREV[ts[x]]){lbguidMatch=lbguidCurr;}
TS_EVAL_PREV[ts[x]]=true;}else{TS_EVAL_PREV[ts[x]]=false;}}
if(lbguidMatch&&lbguidMatch.length>0){logger("loadLightbox: checkConditionsTime, "+lbguidMatch);loadLightbox(lbguidMatch);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"checkConditionsTime");}};function checkConditionsPreloadTeasers(){try{var lbguid='';var var_id='';var foundMatch=false;if(DIGIOH_LIGHTBOX_TEASER_PRELOAD_ARR.length>0||DIGIOH_LIGHTBOX_TEASER_FOLLOW_ME_ARR.length>0){for(var i=0;i<DIGIOH_LIGHTBOX_CONDITIONS.length;i++){foundMatch=false;lbguid=DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid;var_id='';if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lbguid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lbguid];}
var skipToNext=false;for(var j=0;j<DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR.length;j++){if(lbguid===DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR[j]){skipToNext=true;break;}else if(var_id&&var_id===DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR[j]){skipToNext=true;break;}}
if(!skipToNext){if(var_id.length>10){if(JQUERY_DIGIOH.inArray(var_id,DIGIOH_LIGHTBOX_TEASER_FOLLOW_ME_ARR)>-1){foundMatch=evalConditions(DIGIOH_LIGHTBOX_CONDITIONS[i].conditions,lbguid,DIGIOH_LIGHTBOX_ANALYTICS.VARS,true,true,false);if(foundMatch)
logger('** Opening Follow Me Teaser');}
else if(JQUERY_DIGIOH.inArray(var_id,DIGIOH_LIGHTBOX_TEASER_PRELOAD_ARR)>-1){foundMatch=evalConditions(DIGIOH_LIGHTBOX_CONDITIONS[i].conditions,lbguid,DIGIOH_LIGHTBOX_ANALYTICS.VARS,true,false,false);}}
else{if(JQUERY_DIGIOH.inArray(lbguid,DIGIOH_LIGHTBOX_TEASER_FOLLOW_ME_ARR)>-1){foundMatch=evalConditions(DIGIOH_LIGHTBOX_CONDITIONS[i].conditions,lbguid,DIGIOH_LIGHTBOX_ANALYTICS.VARS,true,true,false);if(foundMatch)
logger('** Opening Follow Me Teaser');}else if(JQUERY_DIGIOH.inArray(lbguid,DIGIOH_LIGHTBOX_TEASER_PRELOAD_ARR)>-1){foundMatch=evalConditions(DIGIOH_LIGHTBOX_CONDITIONS[i].conditions,lbguid,DIGIOH_LIGHTBOX_ANALYTICS.VARS,true,false,false);}}
if(foundMatch){var open_id=lbguid;if(var_id.length>7){open_id=var_id;}
if(EFFECTS[open_id]['widget_type']=='sidebar'){openTeaser(EFFECTS[open_id].sidebar.teaser,open_id);}else if(EFFECTS[open_id]['widget_type']=='fancybox'){openTeaser(EFFECTS[open_id].fancybox.teaser,open_id);}}}}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"checkConditionsPreloadTeasers");}}
function setLightboxDomId(lid){try{if(!LOADED_BOX_DOM_ID_MAP.hasOwnProperty(lid)||LOADED_BOX_DOM_ID_MAP[lid].length<10){LOADED_BOX_DOM_ID_MAP[lid]='lightbox-'+lid+'-'+new Date().getTime();}
return LOADED_BOX_DOM_ID_MAP[lid];}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"setLightboxDomId");}
return '';}
var getLightboxDomId=function(lid){try{if(LOADED_BOX_DOM_ID_MAP.hasOwnProperty(lid)&&LOADED_BOX_DOM_ID_MAP[lid].length>10){return LOADED_BOX_DOM_ID_MAP[lid];}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getLightboxDomId");}
return '';};var getActiveLightboxDomId=function(){try{if(LOADED_LIGHTBOXES.length>0){return getLightboxDomId(LOADED_LIGHTBOXES[LOADED_LIGHTBOXES.length-1]);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getActiveLightboxDomId");}
return '';};function preloadLightboxes(){try{if(DIGIOH_LIGHTBOX_PRELOAD_ARR.length>0){for(var x=0;x<DIGIOH_LIGHTBOX_PRELOAD_ARR.length;x++){preloadIframe(DIGIOH_LIGHTBOX_PRELOAD_ARR[x]);}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"preloadLightboxes");}}
function inlineResponsiveResizing(lbid,dom_id,start_time,prev_width,prev_height){try{var current_time=new Date().getTime();var diff_in_millis=current_time-start_time;var new_width=0;var new_height=0;if(JQUERY_DIGIOH('#'+dom_id).length){new_width=JQUERY_DIGIOH('#'+dom_id).width();new_height=JQUERY_DIGIOH('#'+dom_id).height();}
hMax=getResponsiveBoxHeightMax(lbid);hMin=getResponsiveBoxHeightMin(lbid);if(diff_in_millis>300){if(new_height>hMax){new_height=hMax;JQUERY_DIGIOH('#'+dom_id).height(new_height);}
if(new_height<hMin){new_height=hMin;JQUERY_DIGIOH('#'+dom_id).height(new_height);}}
if(new_width!==prev_width||new_height!==prev_height){window.setTimeout(function(){inlineResponsiveResizing(lbid,dom_id,start_time,new_width,new_height);},100);}
else{CURRENT_PAGE_DIMS_RESPONSIVE[lbid]={width:new_width,height:new_height};if(diff_in_millis<1000){sendMessageToIframe({sender:'lightbox',action:'dimensions_changed',widget_type:EFFECTS[lbid].widget_type,width:new_width,height:new_height},lbid);window.setTimeout(function(){inlineResponsiveResizing(lbid,dom_id,start_time,new_width,new_height);},100);}else{keepSendingResizeToChildUntilReceived({sender:'lightbox',action:'dimensions_changed',widget_type:EFFECTS[lbid].widget_type,width:new_width,height:new_height},lbid,100,0);}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"inlineResponsiveResizing");}}
function trySetAttribute(dom_id,kvp){try{if(kvp.k==='class')
JQUERY_DIGIOH('#'+dom_id).addClass(kvp.v);else
JQUERY_DIGIOH('#'+dom_id).attr(kvp.k,kvp.v);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"trySetAttribute");}}
async function preloadIframe(lid,inline_style,inline_jquery_selector,inline_jquery_method,inline_clear){try{if(!EFFECTS.hasOwnProperty(lid)){logger("preloadIframe: EFFECTS does not have lid: "+lid);return;}
var bpRes=await loadBreakpointsFile(lid);logger('preloadIframe breakpoint_file_loaded, bpRes = '+bpRes);setPixelThreshold(lid);if(typeof inline_style==='undefined'||inline_style===null)
inline_style='';if(typeof inline_jquery_selector==='undefined'||inline_jquery_selector===null)
inline_jquery_selector='';if(typeof inline_jquery_method==='undefined'||inline_jquery_method===null)
inline_jquery_method='';if(typeof inline_clear==='undefined'||inline_clear===null)
inline_clear='';var isVariation=false;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lid)){isVariation=true;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lid)){lid=LIGHTBOX_TO_VARIATION_MAP[lid];isVariation=true;}else if(DIGIOH_PUBLISHED_VARIATIONS_ARR.length>0&&DIGIOH_PUBLISHED_VARIATIONS_ARR.join(',').indexOf(lid)>=0){logger('preloadIframe: Skipping Preload Variation, it is ineligible: '+lid);return false;}
if(JQUERY_DIGIOH.inArray(lid,PRELOADED_LIGHTBOXES)==-1||!JQUERY_DIGIOH('#lightbox-iframe-'+lid).length){PRELOADED_LIGHTBOXES.push(lid);logger('preloadIframe: Preload Lightbox Started: '+lid);}else{logger('preloadIframe: Already Preloaded Lightbox: '+lid);return true;}
var dom_id=setLightboxDomId(lid);var add_classes='preloaded_lightbox';var pref=getPagePref(lid);var widthAndHeight='';var widthAndHeightInlineResponsive='';var responsiveScale='';var using_custom_iframe=(EFFECTS[lid].hasOwnProperty('iframe')&&EFFECTS[lid]['iframe']['use_custom']);if(using_custom_iframe){widthAndHeight+='width: '+EFFECTS[lid]['iframe']['width']+'px;';widthAndHeight+='height: '+EFFECTS[lid]['iframe']['height']+'px;';add_classes+=' preloaded_custom_iframe';}else{if(EFFECTS[lid].hasOwnProperty(pref+'responsive')&&EFFECTS[lid][pref+'responsive'].use){widthAndHeight+='width: '+getResponsiveBoxWidth(lid)+'px;';widthAndHeight+='height: '+getResponsiveBoxHeight(lid)+'px;';var wMax=getResponsiveBoxWidthMax(lid);var wMin=getResponsiveBoxWidthMin(lid);var hMax=getResponsiveBoxHeightMax(lid);var hMin=getResponsiveBoxHeightMin(lid);widthAndHeightInlineResponsive=";width:"+getResponsiveBoxWidthPercent(lid)+"%;height:"+getResponsiveBoxHeightPercent(lid)+"%;";widthAndHeightInlineResponsive+="max-width:"+wMax+"px;"+"min-width:"+wMin+"px;"+"max-height:"+hMax+"px;"+"min-height:"+hMin+"px;";}else{widthAndHeight+='width: '+getBoxWidth(lid)+'px;';widthAndHeight+='height: '+getBoxHeight(lid)+'px;';responsiveScale=getResponsiveScale(lid);}}
if(EFFECTS[lid]['widget_type']==='fancybox'){var extra_css='';if(EFFECTS[lid]['fancybox'].hasOwnProperty('css')&&typeof EFFECTS[lid]['fancybox']['css']==='string'&&EFFECTS[lid]['fancybox']['css'].indexOf(':')>0){extra_css=EFFECTS[lid]['fancybox']['css'];}
body.append("<div role='dialog' aria-label='Modal Overlay Box' id='"+dom_id+"' class='"+add_classes+"' style='z-index: 9948035; position: fixed; display: none; left: -2000px; top: -2000px; overflow: visible !important; "+widthAndHeight+responsiveScale+extra_css+"'><div title='Close' class='widget_fb_close' style='"+getCloseButtonStyle(EFFECTS[lid].fancybox.close_button,EFFECTS[lid].widget_type,lid)+"' aria-label='Close Modal'></div></div>");JQUERY_DIGIOH('#'+dom_id+' .widget_fb_close').click(function(){IS_LIGHTBOX_CLOSING[lid]=true;JQUERY_DIGIOH.fb_lightbox.close();});}else if(EFFECTS[lid]['widget_type']==='banner'){body.append("<div role='dialog' aria-label='Modal Overlay Box' id='"+dom_id+"' class='"+add_classes+"' style='display: none; "+getBannerPosition(EFFECTS[lid].banner,lid)+"'><div title='Close' class='banner-iframe-close' style='"+getCloseButtonStyle(EFFECTS[lid].banner.close_button,EFFECTS[lid].widget_type,lid)+"' aria-label='Close Banner'></div></div>");}else if(EFFECTS[lid]['widget_type']==='sidebar'){body.append("<div role='dialog' aria-label='Modal Overlay Box' id='"+dom_id+"' class='"+add_classes+"' style='display: none; "+getSidebarPosition(EFFECTS[lid].sidebar,lid)+"'><div title='Close' class='sidebar-iframe-close' style='"+getCloseButtonStyle(EFFECTS[lid].sidebar.close_button,EFFECTS[lid].widget_type,lid)+"' aria-label='Close Modal'></div></div>");}else if(EFFECTS[lid]['widget_type']==='inline'&&inline_style===''){return false;}else if(EFFECTS[lid]['widget_type']==='inline'&&inline_style!==''){if(inline_style.indexOf('position:')===-1){inline_style='position:relative;'+inline_style;}
if(IS_PREVIEW){JQUERY_DIGIOH('body').append('<div role="dialog" aria-label="Inline Form" id="'+dom_id+'" style="display:none;'+inline_style+widthAndHeightInlineResponsive+'"></div>');}else if(EFFECTS[lid].inline.position_using=='custom_function'){JQUERY_DIGIOH('body').append('<div role="dialog" aria-label="Inline Form" id="'+dom_id+'" style="display:none;'+inline_style+widthAndHeightInlineResponsive+'"></div>');JQUERY_DIGIOH('#'+dom_id).hide();}
else if(inline_jquery_selector===''){JQUERY_DIGIOH('body').append('<div role="dialog" aria-label="Inline Form" id="'+dom_id+'" style="display:none;'+inline_style+widthAndHeightInlineResponsive+'"></div>');}else{if(JQUERY_DIGIOH(inline_jquery_selector).length){if(JQUERY_DIGIOH(inline_jquery_selector).length>1){JQUERY_DIGIOH(inline_jquery_selector).eq(0)[inline_jquery_method]('<div role="dialog" aria-label="Inline Form" id="'+dom_id+'" style="display:none;'+inline_style+widthAndHeightInlineResponsive+'"></div>'+inline_clear);}else{JQUERY_DIGIOH(inline_jquery_selector)[inline_jquery_method]('<div role="dialog" aria-label="Inline Form" id="'+dom_id+'" style="display:none;'+inline_style+widthAndHeightInlineResponsive+'"></div>'+inline_clear);}}else{return false;}}}
if(using_custom_iframe){if(EFFECTS[lid]['iframe']['is_self_hosted']){if(PROTOCOL=='https://'&&EFFECTS[lid]['iframe']['self_hosted_url'].indexOf('http://')==0){CURRENT_IFRAME_SRC="https://"+EFFECTS[lid]['iframe']['self_hosted_url'].substring(7);}else{CURRENT_IFRAME_SRC=EFFECTS[lid]['iframe']['self_hosted_url'];}}else{if(isVariation){if(IS_QA){CURRENT_IFRAME_SRC=DIGIOH_API.CONFIG.BOX_BASE_URL+'/vendor/'+VENDOR_GUID+'/variation/'+lid+'/custom_iframe_qa.html?v='+EFFECTS[lid]['iframe']['html_last_uploaded'];}else if(IS_PREVIEW){CURRENT_IFRAME_SRC=DIGIOH_API.CONFIG.BOX_BASE_URL+'/vendor/'+VENDOR_GUID+'/variation/'+lid+'/custom_iframe_preview.html?v='+EFFECTS[lid]['iframe']['html_last_uploaded'];}else{CURRENT_IFRAME_SRC=DIGIOH_API.CONFIG.BOX_BASE_URL+'/vendor/'+VENDOR_GUID+'/variation/'+lid+'/custom_iframe.html?v='+EFFECTS[lid]['iframe']['html_last_uploaded'];}}else{if(IS_QA){CURRENT_IFRAME_SRC=DIGIOH_API.CONFIG.BOX_BASE_URL+'/vendor/'+VENDOR_GUID+'/lightbox/'+lid+'/custom_iframe_qa.html?v='+EFFECTS[lid]['iframe']['html_last_uploaded'];}else if(IS_PREVIEW){CURRENT_IFRAME_SRC=DIGIOH_API.CONFIG.BOX_BASE_URL+'/vendor/'+VENDOR_GUID+'/lightbox/'+lid+'/custom_iframe_preview.html?v='+EFFECTS[lid]['iframe']['html_last_uploaded'];}else{CURRENT_IFRAME_SRC=DIGIOH_API.CONFIG.BOX_BASE_URL+'/vendor/'+VENDOR_GUID+'/lightbox/'+lid+'/custom_iframe.html?v='+EFFECTS[lid]['iframe']['html_last_uploaded'];}}}
let TABINDEX=DIGIOH_API.getWidgetMetadata(lid,"boxtabindex");if(TABINDEX=="remove")TABINDEX="";else TABINDEX=TABINDEX&&!isNaN(TABINDEX)?`tabindex='${TABINDEX}'`:"tabindex='1'";JQUERY_DIGIOH('#'+dom_id).append("<iframe "+TABINDEX+" aria-label='Modal Overlay Box Frame' title='Modal Overlay Box Frame' src="+CURRENT_IFRAME_SRC+" width='"+getBoxWidth(lid)+"' height='"+getBoxHeight(lid)+"' frameborder='0' scrolling='no'></iframe>");if(JQUERY_DIGIOH.inArray(lid,PRELOADED_LIGHTBOXES_LOADED)==-1){PRELOADED_LIGHTBOXES_LOADED.push(lid);}}else{loadLightningIframe(lid,dom_id);if(EFFECTS[lid]['widget_type']==='inline'){if(EFFECTS[lid].hasOwnProperty(pref+'responsive')&&EFFECTS[lid][pref+'responsive'].use){inlineResponsiveResizing(lid,dom_id,(new Date().getTime()),0,0);}}}
if(EFFECTS[lid]['widget_type']&&EFFECTS[lid].hasOwnProperty(EFFECTS[lid]['widget_type'])&&EFFECTS[lid][EFFECTS[lid]['widget_type']].hasOwnProperty('metadata_kvps')){var kvps=EFFECTS[lid][EFFECTS[lid]['widget_type']].metadata_kvps;for(var k=0;k<kvps.length;k++){if(kvps[k].k&&kvps[k].v){trySetAttribute(dom_id,kvps[k]);}}}
if(EFFECTS[lid]['widget_type']==='inline'&&inline_style!==''&&EFFECTS[lid].inline.position_using==='custom_function'){if(!isVariation&&DIGIOH_LIGHTBOX_IDS.hasOwnProperty(lid)&&DIGIOH_CUSTOM_JS.hasOwnProperty('InlineLightboxFormPositionCustomFunction_'+DIGIOH_LIGHTBOX_IDS[lid])){DIGIOH_CUSTOM_JS['InlineLightboxFormPositionCustomFunction_'+DIGIOH_LIGHTBOX_IDS[lid]](window,document,JQUERY_DIGIOH,lid,dom_id,inline_style);}
else if(isVariation&&DIGIOH_LIGHTBOX_IDS.hasOwnProperty(lid)&&DIGIOH_CUSTOM_JS.hasOwnProperty('InlineLightboxFormPositionCustomFunction_VAR_'+DIGIOH_LIGHTBOX_IDS[lid])){DIGIOH_CUSTOM_JS['InlineLightboxFormPositionCustomFunction_VAR_'+DIGIOH_LIGHTBOX_IDS[lid]](window,document,JQUERY_DIGIOH,lid,dom_id,inline_style);}}
return true;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"preloadIframe");return false;}}
function showInline(lid){if(isActiveBox(lid)){logger('DIGIOH: isActiveBox() called from showInline() - prevented display - '+lid);return false;}
addActiveBox(lid);var bsid=DIGIOH_API.getBoxIDFromBoxOrVariation(lid).toString();logger('showInline('+lid+') before_lightbox_display: bsid='+bsid);if(DIGIOH_API.hasOwnProperty('BOXCOMM')&&DIGIOH_API.BOXCOMM.hasOwnProperty(bsid)&&DIGIOH_API.BOXCOMM[bsid].hasAfterDomReadyJsFinished){var res=DIGIOH_API.BOXCOMM[bsid].runCustomJsBeforeDisplay();logger('showInline('+lid+') before_lightbox_display: '+res);if(res===false){removeActiveBox(lid);return false;}
var dom_id=getLightboxDomId(lid);if(dom_id!=''&&JQUERY_DIGIOH('#'+dom_id).length){JQUERY_DIGIOH('#'+dom_id).show();if(!DIGIOH_API.contains(DIGIOH_LIGHTBOX_INLINE_DISPLAYED,lid)){DIGIOH_LIGHTBOX_INLINE_DISPLAYED.push(lid);logger('DIGIOH::::showInline('+lid+') ==>  SUCCESS');}
else{logger('DIGIOH::::showInline('+lid+') ==>  FAIL');}
registerLightboxShow(lid);JQUERY_DIGIOH('#'+dom_id).parent().find('div.box_loading_placeholder').hide();}}else{logger('showInline('+lid+') before_lightbox_display: retry');setTimeout(function(){removeActiveBox(lid);showInline(lid);},100);return false;}}
var shouldSuppressLightbox=function(lbid){try{if(typeof DIGIOH_VENDOR_SHORT_ID!=='undefined'&&DIGIOH_VENDOR_SHORT_ID){var dvsi=parseInt(DIGIOH_VENDOR_SHORT_ID);if((dvsi>40969&&dvsi<=40980&&dvsi!=40971)||dvsi==40774||dvsi==40884||dvsi==41391||dvsi==41763||dvsi==41758||dvsi==41688||dvsi==30575){if(DIGIOH_COOKIE.get('__bxsuppress',true)){logger('SUPPRESSION_POLICY ==> __bxsuppress cookie found, preventing lightbox display: '+lbid);return true;}
DIGIOH_COOKIE.set('__bxsuppress','1',1/48);logger('SUPPRESSION_POLICY ==> __bxsuppress cookie set, strictly preventing any non-inline boxes from displaying for the next 30 mins!');}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"shouldSuppressLightbox");}
return false;};var loadLightbox=function(lbid,force){try{if(typeof force==='undefined'){force=false;}
if(typeof lbid!=='string'||lbid.length<20){return false;}else if(!force&&!checkLightboxMasterRules()){logger('DIGIOH: checkLightboxMasterRules() called from loadLightbox() - prevented display - '+lbid);return false;}else if(isActiveBox(lbid)){logger('DIGIOH: isActiveBox() called from loadLightbox() - prevented display - '+lbid);return false;}
if(!force&&!DIGIOH_LIGHTBOX_MASTER_RULES.AllowMultipleBoxes&&LOADED_LIGHTBOXES.length>0){for(var i=0;i<LOADED_LIGHTBOXES.length;i++){var bidtmp=LOADED_LIGHTBOXES[i];if(EFFECTS.hasOwnProperty(bidtmp)&&EFFECTS[bidtmp].hasOwnProperty('widget_type')&&EFFECTS[bidtmp].widget_type!=='inline'){logger('DIGIOH: DIGIOH_LIGHTBOX_MASTER_RULES.AllowMultipleBoxes == false (prevented multi display of '+lbid+')'+' (found another active non-inline box '+EFFECTS[bidtmp].widget_type+' '+bidtmp+')');return false;}}}
var var_id='';var orig_lid=lbid;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lbid)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[lbid];var_id=lbid;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lbid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lbid];}
if(var_id!==''&&var_id.length>7){lbid=var_id;}
if(!IS_PREVIEW||IS_DEV){if(!isInlineLightbox(lbid)){if(shouldSuppressLightbox(lbid)){return false;}else{var customJsAppsResult=runCustomJsLinkedApps('BeforeDisplay',orig_lid,var_id);logger('JS_PARENT_APPS.runCustomJsBeforeLightboxDisplay - '+lbid);if(customJsAppsResult===false){logger('JS_PARENT_APPS.runCustomJsBeforeLightboxDisplay - prevented lightbox '+lbid+' from being displayed');return false;}
var customJsSuperResult=DIGIOH_CUSTOM_JS_SUPER.runCustomJsBeforeLightboxDisplay(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_GLOBAL.runCustomJsBeforeLightboxDisplay - '+lbid);if(!customJsSuperResult){logger('JS_GLOBAL.runCustomJsBeforeLightboxDisplay - prevented lightbox '+lbid+' from being displayed');return false;}
var customJsResult=DIGIOH_CUSTOM_JS.runCustomJsBeforeLightboxDisplay(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_PARENT.runCustomJsBeforeLightboxDisplay - '+lbid);if(!customJsResult){logger('JS_PARENT.runCustomJsBeforeLightboxDisplay - prevented lightbox '+lbid+' from being displayed');return false;}}}}
if(EFFECTS.hasOwnProperty(lbid)&&EFFECTS[lbid].hasOwnProperty('iframe')&&EFFECTS[lbid]['iframe']['use_custom']){EFFECTS[lbid].width=EFFECTS[lbid]['iframe']['width'];EFFECTS[lbid].height=EFFECTS[lbid]['iframe']['height'];}
if(JQUERY_DIGIOH.inArray(lbid,PRELOADED_LIGHTBOXES)>-1){logger('loadLightbox_1: '+lbid+', '+EFFECTS[lbid].widget_type);tryShowPreloadedLightbox(lbid);}else{logger('loadLightbox_2: '+lbid+', '+EFFECTS[lbid].widget_type);preloadIframe(lbid).then(function(){logger('loadLightbox_3: preloadIframe Promise complete - '+lbid);tryShowPreloadedLightbox(lbid);}).catch(function(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logger('loadLightbox_4: preloadIframe Promise ERROR - '+e.message);tryShowPreloadedLightbox(lbid);});}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"loadLightbox");}};var addActiveBox=function(lid){try{if(JQUERY_DIGIOH.inArray(lid,LOADED_LIGHTBOXES)===-1){LOADED_LIGHTBOXES.push(lid);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"addActiveBox");}};var removeActiveBox=function(lid){try{if(JQUERY_DIGIOH.inArray(lid,LOADED_LIGHTBOXES)>=0){LOADED_LIGHTBOXES.splice(JQUERY_DIGIOH.inArray(lid,LOADED_LIGHTBOXES),1);logger('removeActiveBox: LOADED_LIGHTBOXES - '+lid);logger(LOADED_LIGHTBOXES);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"removeActiveBox");}};function getActiveBreakpointPixels(lid){try{if(typeof DIGIOH_API.BREAKPOINT_POINTER==='object'&&DIGIOH_API.BREAKPOINT_POINTER.hasOwnProperty(lid)&&DIGIOH_API.BREAKPOINT_POINTER[lid]!=={}){var ptArr=[];for(var prop in DIGIOH_API.BREAKPOINT_POINTER[lid]){if(DIGIOH_API.BREAKPOINT_POINTER[lid].hasOwnProperty(prop)){if(JQUERY_DIGIOH.inArray(parseInt(prop),ptArr)===-1){ptArr.push(parseInt(prop));}}}
if(ptArr.length>0){ptArr.sort(function(a,b){return a-b;});var winWidth=JQUERY_DIGIOH(window).width();if(isMobile()||isTablet()){winWidth=getiOSWindowWidth();}
for(var i=0;i<ptArr.length;i++){if(ptArr[i]>winWidth){logger('breakpoint_file: getActiveBreakpointPixels - foundMatch ('+lid+') '+ptArr[i]);return ptArr[i];}}}}
return 0;}
catch(e){return 0;}}
function sortAndSetBreakpointForBox(lid,caller){try{var foundMatch=false;if(typeof DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS==='object'&&DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS.hasOwnProperty(lid)){var ptArr=[];for(var prop in DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS[lid]){if(DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS[lid].hasOwnProperty(prop)){if(JQUERY_DIGIOH.inArray(parseInt(prop),ptArr)===-1){ptArr.push(parseInt(prop));}}}
if(ptArr.length>0){ptArr.sort(function(a,b){return a-b;});var winWidth=JQUERY_DIGIOH(window).width();if(isMobile()||isTablet()){winWidth=getiOSWindowWidth();}
for(var i=0;i<ptArr.length;i++){if(ptArr[i]>winWidth){DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid]=DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS[lid][ptArr[i].toString()];foundMatch=true;logger('breakpoint_file: DIGIOH_API.LIGHTBOX.PixelThresholdSettings['+lid+'] - foundMatch ('+caller+') '+ptArr[i]);break;}}}}
return foundMatch;}
catch(e){return false;}}
async function tryLoadBreakpointFile(breakpointURL,lid,started){let prom=new Promise(function(resolve,reject){JQUERY_DIGIOH.ajax({url:breakpointURL,crossDomain:true,dataType:'script',cache:true,success:function(){logger('breakpoint_file_download_success');resolve('breakpoint_file_download_success');},complete:function(){logger('breakpoint_file_download_complete');resolve('breakpoint_file_download_complete');},error:function(XMLHttpRequest,textStatus,errorThrown){logger('breakpoint_file_download_error: '+textStatus);resolve('breakpoint_file_download_error');}});});let res=await prom;logger('breakpoint_file: tryLoadBreakpointFile: '+res);return res;}
async function loadBreakpointsFile(lid){try{if(!DIGIOH_API||!DIGIOH_API.LIGHTBOX)
return false;if(!DIGIOH_API.LIGHTBOX.hasOwnProperty('PixelThresholdSettings'))
DIGIOH_API.LIGHTBOX.PixelThresholdSettings={};if(!DIGIOH_API.LIGHTBOX.PixelThresholdSettings.hasOwnProperty(lid))
DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid]='';if(!DIGIOH_API.hasOwnProperty('hasTriedLoadingBreakpointFile')){DIGIOH_API.hasTriedLoadingBreakpointFile={};}
if(DIGIOH_API.hasTriedLoadingBreakpointFile.hasOwnProperty(lid)){logger('breakpoint_file: awaiting B');await DIGIOH_API.hasTriedLoadingBreakpointFile[lid];}
else if(!DIGIOH_API.hasTriedLoadingBreakpointFile.hasOwnProperty(lid)&&!DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS.hasOwnProperty(lid)&&DIGIOH_API.BREAKPOINT_POINTER.hasOwnProperty(lid)&&DIGIOH_API.BREAKPOINT_POINTER[lid]!=={}){logger('breakpoint_file: trying to load breakpoints.js');DIGIOH_API.hasTriedLoadingBreakpointFile[lid]=new Promise(async(resolve,reject)=>{var isVariation=false;var actual_lid=lid;var var_id='';if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lid)){var_id=lid;actual_lid=DIGIOH_VARIATION_TO_BOX_MAP[lid];isVariation=true;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lid];actual_lid=lid;isVariation=true;lid=var_id;}
var breakpointFile="";var varIdOrLid="";if(isVariation&&var_id){breakpointFile+="/variation/"+var_id;varIdOrLid=var_id;}else{breakpointFile+="/lightbox/"+lid;varIdOrLid=lid;}
if(IS_QA){breakpointFile+="/breakpoints_qa.js";}else if(IS_PREVIEW){breakpointFile+="/breakpoints_preview.js";}else{breakpointFile+="/breakpoints.js";}
if(typeof DIGIOH_CACHE_VERSION==='undefined'){DIGIOH_CACHE_VERSION=(new Date().getTime());}
var breakpointURL=DIGIOH_API.CONFIG.BOX_BASE_URL+'/vendor/'+VENDOR_GUID+breakpointFile+'?cb='+DIGIOH_CACHE_VERSION;logger('breakpoint_file_url: '+breakpointURL);try{logger('tryLoadBreakpointFile started');var res=await tryLoadBreakpointFile(breakpointURL,lid,false);logger('tryLoadBreakpointFile finished: '+res);resolve('breakpoint_file_loaded');}
catch(ajaxError){logger('breakpoint_file_error...');console.error(ajaxError);reject('breakpoint_file_error');}});logger('breakpoint_file: awaiting A');await DIGIOH_API.hasTriedLoadingBreakpointFile[lid];}
return true;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"loadBreakpointsFile");return false;}}
function setPixelThreshold(lid,force_update){try{if(!DIGIOH_API||!DIGIOH_API.LIGHTBOX)
return false;if(!DIGIOH_API.LIGHTBOX.hasOwnProperty('PixelThresholdSettings'))
DIGIOH_API.LIGHTBOX.PixelThresholdSettings={};if(!DIGIOH_API.LIGHTBOX.PixelThresholdSettings.hasOwnProperty(lid))
DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid]='';if(typeof force_update==='undefined'||!force_update){if(typeof DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid]==='object'&&DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid]!==null){return false;}}
if(typeof DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS==='object'&&!DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS.hasOwnProperty(lid)){return false;}
var existingThreshold='';if(typeof DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid]==='object'&&DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid]!==null){if(DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid].hasOwnProperty('pixel_version')){existingThreshold=DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid]['pixel_version'];}}
var foundMatch=sortAndSetBreakpointForBox(lid,'Existing');if(!foundMatch&&DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS.hasOwnProperty(lid)){if(typeof DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid]==='string'&&DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid].indexOf('{')<0){DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid]=JSON.parse(DIGIOH_API.LIGHTBOX.LZString.decompressFromBase64(DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid]));}else if(typeof DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid]==='string'&&DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid].indexOf('{')>=0){DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid]=JSON.parse(DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid]);}else{DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid]=DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid];}
logger('breakpoint_file: DIGIOH_API.LIGHTBOX.PixelThresholdSettings['+lid+'] - original');}
if(EFFECTS.hasOwnProperty(lid)&&DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid]){if(DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid].hasOwnProperty('iframe')){EFFECTS[lid].iframe=DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid].iframe;}
var pref='';for(var i=1;i<=102;i++){if(i==1){pref='';}
else if(i==2){pref='thx';}
else if(i>=3&&i<=6){pref='ep'+(i-2);}
else if(i>=7){pref='ep'+(i-2);if(!DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid].hasOwnProperty(pref+'layout')){continue;}}
if(DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid].hasOwnProperty(pref+'layout')){EFFECTS[lid][pref+'width']=DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid][pref+'layout'].width;EFFECTS[lid][pref+'height']=DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid][pref+'layout'].height;}
if(DIGIOH_USE_RESPONSIVE&&DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid].hasOwnProperty(pref+'responsive')&&DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid][pref+'responsive'].use){EFFECTS[lid][pref+'responsive']={};EFFECTS[lid][pref+'responsive'].use=DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid][pref+'responsive'].use;EFFECTS[lid][pref+'responsive'].box_width=DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid][pref+'responsive'].box_width;EFFECTS[lid][pref+'responsive'].box_height=DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid][pref+'responsive'].box_height;EFFECTS[lid][pref+'responsive'].width_max=DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid][pref+'responsive'].width_max;EFFECTS[lid][pref+'responsive'].width_min=DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid][pref+'responsive'].width_min;EFFECTS[lid][pref+'responsive'].height_max=DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid][pref+'responsive'].height_max;EFFECTS[lid][pref+'responsive'].height_min=DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid][pref+'responsive'].height_min;}
else{if(DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid].hasOwnProperty(pref+'responsive')){EFFECTS[lid][pref+'responsive']={};EFFECTS[lid][pref+'responsive'].use=DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid][pref+'responsive'].use;}
if(DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid].hasOwnProperty(pref+'scaling')){EFFECTS[lid][pref+'scaling']={};for(var prop2 in DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid][pref+'scaling']){if(DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid][pref+'scaling'].hasOwnProperty(prop2)){EFFECTS[lid][pref+'scaling'][prop2]=DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid][pref+'scaling'][prop2];}}}}}}
var newThreshold='';if(typeof DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid]==='object'){if(DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid].hasOwnProperty('pixel_version')){newThreshold=DIGIOH_API.LIGHTBOX.PixelThresholdSettings[lid]['pixel_version'];}}
return(existingThreshold!==newThreshold);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"setPixelThreshold");return false;}}
function tryShowPreloadedLightbox(lbid){if(TERMINATED_LIGHTBOXES.hasOwnProperty(lbid)&&TERMINATED_LIGHTBOXES[lbid]){delete TERMINATED_LIGHTBOXES[lbid];}else if(JQUERY_DIGIOH.inArray(lbid,PRELOADED_LIGHTBOXES_LOADED)>-1){showPreloadedLightbox(lbid);}else{setTimeout(function(){tryShowPreloadedLightbox(lbid);},100);}}
function showPreloadedLightbox(lbid){try{logger('showPreloadedLightbox:'+lbid);if(EFFECTS[lbid].widget_type==="fancybox"){initFancybox(lbid,true);}else if(EFFECTS[lbid].widget_type==="sidebar"){showPreloadedSidebar(lbid);}else if(EFFECTS[lbid].widget_type==="banner"){showPreloadedBanner(lbid);}else if(EFFECTS[lbid].widget_type==="inline"){showInline(lbid);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"showPreloadedLightbox");}}
function showPreloadedSidebar(lid){try{SIDEBAR_CLOSE_MAP[lid]=0;logger('showPreloadedSidebar:'+lid);var dom_id=getLightboxDomId(lid);if(dom_id!=''&&JQUERY_DIGIOH('#'+dom_id).length){showSidebar(lid);}else{initSidebar(lid);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"showPreloadedSidebar");}}
function showPreloadedBanner(lid){try{BANNER_CLOSE_MAP[lid]=0;var dom_id=getLightboxDomId(lid);if(dom_id!=''&&JQUERY_DIGIOH('#'+dom_id).length){showBanner(lid);}else{initBanner(lid);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"showPreloadedBanner");}}
function showLightbox(lbid){try{if(EFFECTS[lbid].widget_type==="fancybox"){initFancybox(lbid,false);}else if(EFFECTS[lbid].widget_type==="sidebar"){initSidebar(lbid);}else if(EFFECTS[lbid].widget_type==="banner"){initBanner(lbid);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"showLightbox");}}
function initSidebar(lid){try{var dom_id=setLightboxDomId(lid);if(JQUERY_DIGIOH('#'+dom_id).length){logger('initSidebar_1');showSidebar(lid);}else{logger('initSidebar_2');body.append("<div id='"+dom_id+"' style='display:none;"+getSidebarPosition(EFFECTS[lid].sidebar,lid)+"'><div title='Close' class='sidebar-iframe-close' style='"+getCloseButtonStyle(EFFECTS[lid].sidebar.close_button,EFFECTS[lid].widget_type,lid)+"' aria-label='Close Modal'></div></div>");loadLightningIframe(lid,dom_id);if(EFFECTS[lid].hasOwnProperty('iframe')&&EFFECTS[lid]['iframe']['use_custom']){showSidebar(lid);}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initSidebar");}}
function initBanner(lid){try{var dom_id=setLightboxDomId(lid);if(JQUERY_DIGIOH('#'+dom_id).length){showBanner(lid);}else{body.append("<div id='"+dom_id+"' style='display:none;"+getBannerPosition(EFFECTS[lid].sidebar,lid)+"'><div title='Close' class='sidebar-iframe-close' style='"+getCloseButtonStyle(EFFECTS[lid].banner.close_button,EFFECTS[lid].widget_type,lid)+"' aria-label='Close Banner'></div></div>");loadLightningIframe(lid,dom_id);if(EFFECTS[lid].hasOwnProperty('iframe')&&EFFECTS[lid]['iframe']['use_custom']){showBanner(lid);}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initBanner");}}
function showBanner(lid){try{if(isActiveBox(lid)){logger('DIGIOH: isActiveBox() called from showBanner() - prevented display - '+lid);return false;}
addActiveBox(lid);var bsid=DIGIOH_API.getBoxIDFromBoxOrVariation(lid).toString();logger('showBanner('+lid+') before_lightbox_display: bsid='+bsid);if(DIGIOH_API.hasOwnProperty('BOXCOMM')&&DIGIOH_API.BOXCOMM.hasOwnProperty(bsid)&&DIGIOH_API.BOXCOMM[bsid].hasAfterDomReadyJsFinished){var res=DIGIOH_API.BOXCOMM[bsid].runCustomJsBeforeDisplay();logger('showBanner('+lid+') before_lightbox_display: '+res);if(res===false){removeActiveBox(lid);return false;}}else{logger('showBanner('+lid+') before_lightbox_display: retry');setTimeout(function(){removeActiveBox(lid);showBanner(lid);},100);return false;}
BANNER_CLOSE_MAP[lid]=0;var dom_id=getLightboxDomId(lid);JQUERY_DIGIOH('#'+dom_id+' .banner-iframe-close').click(function(){closeBanner(lid);});if(EFFECTS[lid].banner.close_button.display){JQUERY_DIGIOH('#'+dom_id+' .banner-iframe-close').css({'display':'block'});}
if(!EFFECTS[lid].banner.hasOwnProperty('placement')||EFFECTS[lid].banner.placement!=='bottom'){if(EFFECTS[lid].banner.page_overlap==='move'){var banner_height=getActualBoxWidthAndHeight(lid).height;JQUERY_DIGIOH('body').prepend("<div id='banner-spacer-"+lid+"' style='width:100%; height:"+banner_height+"px;'></div>");}}
var ele=JQUERY_DIGIOH('#'+dom_id);ele.attr('style',getBannerPosition(EFFECTS[lid].banner,lid));ele.show();registerLightboxShow(lid);registerMobileSidebarToLightboxConversion(lid,dom_id);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"showBanner");}}
function showSidebar(lid){try{if(isActiveBox(lid)){logger('DIGIOH: isActiveBox() called from showSidebar() - prevented display - '+lid);return false;}
addActiveBox(lid);var bsid=DIGIOH_API.getBoxIDFromBoxOrVariation(lid).toString();logger('showSidebar('+lid+') before_lightbox_display: bsid='+bsid);if(DIGIOH_API.hasOwnProperty('BOXCOMM')&&DIGIOH_API.BOXCOMM.hasOwnProperty(bsid)&&DIGIOH_API.BOXCOMM[bsid].hasAfterDomReadyJsFinished){var res=DIGIOH_API.BOXCOMM[bsid].runCustomJsBeforeDisplay();logger('showSidebar('+lid+') before_lightbox_display: '+res);if(res===false){removeActiveBox(lid);return false;}}else{logger('showSidebar('+lid+') before_lightbox_display: retry');setTimeout(function(){removeActiveBox(lid);showSidebar(lid);},100);return false;}
SIDEBAR_CLOSE_MAP[lid]=0;var dom_id=getLightboxDomId(lid);JQUERY_DIGIOH('#'+dom_id+' .sidebar-iframe-close').click(function(){if(DIGIOH_API.LIGHTBOX.isMobile()){logger('closeSidebar('+lid+') on native close button click (Mobile)');setTimeout(function(){closeSidebar(lid);},250);}
else{logger('closeSidebar('+lid+') on native close button click (Desktop)');setTimeout(function(){closeSidebar(lid);},50);}});if(effectsHasTeaserDisplaySidebar(lid)){closeTeaser(EFFECTS[lid].sidebar.teaser,lid,false);}
if(EFFECTS[lid].sidebar.close_button.display){JQUERY_DIGIOH('#'+dom_id+' .sidebar-iframe-close').css({'display':'block'});}
var bgScrollAccount=DIGIOH_API.getAccountMetadata('bgscroll_enable');var bgScroll=DIGIOH_API.getWidgetMetadata(lid,'bgscroll_enable');if(bgScroll!=='true'&&bgScrollAccount!=='true'&&EFFECTS[lid].sidebar.position==='center-center'){var st=jqWin.scrollTop();if(!JQUERY_DIGIOH('#dghstyles').length){var str='html.box_active_disable_scrolling, body.box_active_disable_scrolling { touch-action: none !important; overscroll-behavior: none !important; -webkit-overflow-scrolling: auto !important; overflow: hidden !important; }';JQUERY_DIGIOH('head').append('<style id="dghstyles" type="text/css">'+str+'</style>');}
if(!JQUERY_DIGIOH('html').hasClass('box_active_disable_scrolling')){JQUERY_DIGIOH('html').addClass('box_active_disable_scrolling');}
if(!JQUERY_DIGIOH('body').hasClass('box_active_disable_scrolling')){JQUERY_DIGIOH('body').addClass('box_active_disable_scrolling');}
if(isMobile()){jqWin.scrollTop(st);}
logger('bgscroll_disable');}
var oa=getOpenAnimation(EFFECTS[lid].sidebar,lid);if(EFFECTS[lid].sidebar.hasOwnProperty('overlay')&&EFFECTS[lid].sidebar.overlay&&(EFFECTS[lid].sidebar.overlay.background.use_image||EFFECTS[lid].sidebar.overlay.background.color!=='rgba(255, 255, 255, 0)')){JQUERY_DIGIOH('body').append("<div id='sidebar-overlay-"+dom_id+"' class='fb_lightbox-overlay fb_lightbox-overlay-fixed'></div>");var bg=getBackgroundStyle(EFFECTS[lid].sidebar.overlay.background);bg['display']='block';JQUERY_DIGIOH("#sidebar-overlay-"+dom_id).css(bg);}
if(!oa){oa={};var ele=JQUERY_DIGIOH('#'+dom_id);ele.attr('style',getSidebarPosition(EFFECTS[lid].sidebar,lid));ele.show();registerLightboxShow(lid);registerCloseSidebarClick(lid);registerCloseSidebarScroll(lid);registerCloseSidebarTime(lid);setBoxToScrollMode(lid,'main','display');}else{logger('DIGIOH: getOpenAnimation...');logger(oa);JQUERY_DIGIOH('#'+dom_id).show().animate(oa,{duration:EFFECTS[lid].sidebar.speed.open,easing:EFFECTS[lid].sidebar.easing.open,complete:function(){registerLightboxShow(lid);registerCloseSidebarClick(lid);registerCloseSidebarScroll(lid);registerCloseSidebarTime(lid);var sbp=getSidebarPosition(EFFECTS[lid].sidebar,lid);var sbpaa=getSidebarPositionAfterAnimation(EFFECTS[lid].sidebar,lid);if(sbp!==sbpaa){JQUERY_DIGIOH('#'+dom_id).attr('style',sbpaa);logger('DIGIOH: getSidebarPositionAfterAnimation() ==> override (sbpaa) (sbp)');logger(sbpaa);logger(sbp);}
registerMobileSidebarToLightboxConversion(lid,dom_id);setBoxToScrollMode(lid,'main','display');}});}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"showSidebar");}}
function registerMobileSidebarToLightboxConversion(lid,dom_id){try{if(!MOBILE_SCROLL_TOP_MAP.hasOwnProperty(lid)&&isMobile()){MOBILE_SCROLL_TOP_MAP[lid]=Math.round(jqWin.scrollTop());var ele=JQUERY_DIGIOH('#'+dom_id);var origStyle='';JQUERY_DIGIOH('#lightbox-iframe-'+lid).contents().find('input').each(function(){JQUERY_DIGIOH(this).focus(function(){PREVENT_SIDEBAR_CLOSE_GUIDS[lid]=true;if(EFFECTS[lid].widget_type==='sidebar'&&EFFECTS[lid].sidebar.css_positioning==='fixed'){logger('registerMobileSidebarToLightboxConversion: sidebar');origStyle=ele.attr('style');FOCUSED_SIDEBAR_BANNER_GUIDS[lid]=true;ele.attr('style',getSidebarPositionMobileFocused(EFFECTS[lid].sidebar,lid));for(var i=1;i<=5;i++){window.setTimeout(function(){ele.attr('style',getSidebarPositionMobileFocused(EFFECTS[lid].sidebar,lid));},(100*i*2));}}
if(EFFECTS[lid].widget_type==='banner'){logger('registerMobileSidebarToLightboxConversion: banner');origStyle=ele.attr('style');FOCUSED_SIDEBAR_BANNER_GUIDS[lid]=true;ele.attr('style',getBannerPositionMobileFocused(EFFECTS[lid].banner,lid));for(var i=1;i<=5;i++){window.setTimeout(function(){ele.attr('style',getBannerPositionMobileFocused(EFFECTS[lid].banner,lid));},(100*i*2));}}}).blur(function(){});});}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"registerMobileSidebarToLightboxConversion");}}
function getMobileSidebarToLightboxConversionPositionCss(lid,position_type){try{var css_top='';var css_left='';var css_margin_left='';var jqW=jqWin.width();var jqH=jqWin.height();var winW=window.innerWidth||jqW;var winH=window.innerHeight||jqH;var scrollTop=jqWin.scrollTop();var scrollLeft=jqWin.scrollLeft();var hasScrollbar=true;var isPortrait=true;if(winH>winW){isPortrait=true;if(winH-jqH<=10){winH=Math.round(winH*52/94);hasScrollbar=true;}else{winH=Math.round(winH*55/97);hasScrollbar=false;}}else{isPortrait=false;if(jqH-winH<=10){winH=Math.round(winH*24/58);hasScrollbar=false;}else{winH=Math.round(winH*18/51);hasScrollbar=true;}}
if(typeof position_type!=='string'||position_type!=='absolute'){position_type='fixed';}else{position_type='absolute';}
css_top=(Math.round(scrollTop)+20+'px');if((getBoxWidth(lid)+20)>=winW){if(scrollLeft>0){css_left=Math.round(scrollLeft)+10+'px';}else{css_left='10px';}}else{if(scrollLeft>0){css_left=Math.round(scrollLeft)+Math.round(winW/2)-Math.round(getBoxWidth(lid)/2)+'px';}else{css_left=Math.round(winW/2)-Math.round(getBoxWidth(lid)/2)+'px';}}
position_type='absolute';css_margin_left='0px';var css_obj={'top':css_top,'left':css_left,'width':(getBoxWidth(lid)+'px'),'height':(getBoxHeight(lid)+'px')};var style_attr="position: absolute; z-index: 9948030; top: "+css_top+"; left: "+css_left+"; width: "+getBoxWidth(lid)+"px; height: "+getBoxHeight(lid)+"px;";return style_attr;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getMobileSidebarToLightboxConversionPositionCss");}}
function setIframeSrc(lid,is_preload){try{if(typeof is_preload!=="undefined"&&is_preload)is_preload=true;else is_preload=false;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lid)){isVariation=true;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lid)){lid=LIGHTBOX_TO_VARIATION_MAP[lid];isVariation=true;}
if(EFFECTS[lid].hasOwnProperty('iframe')&&EFFECTS[lid]['iframe']['use_custom']){if(EFFECTS[lid]['iframe']['is_self_hosted']){if(PROTOCOL=='https://'&&EFFECTS[lid]['iframe']['self_hosted_url'].indexOf('http://')==0){CURRENT_IFRAME_SRC="https://"+EFFECTS[lid]['iframe']['self_hosted_url'].substring(7);}else{CURRENT_IFRAME_SRC=EFFECTS[lid]['iframe']['self_hosted_url'];}}else{if(isVariation){if(IS_QA){CURRENT_IFRAME_SRC=DIGIOH_API.CONFIG.BOX_BASE_URL+'/vendor/'+VENDOR_GUID+'/variation/'+lid+'/custom_iframe_qa.html?v='+EFFECTS[lid]['iframe']['html_last_uploaded'];}else if(IS_PREVIEW){CURRENT_IFRAME_SRC=DIGIOH_API.CONFIG.BOX_BASE_URL+'/vendor/'+VENDOR_GUID+'/variation/'+lid+'/custom_iframe_preview.html?v='+EFFECTS[lid]['iframe']['html_last_uploaded'];}else{CURRENT_IFRAME_SRC=DIGIOH_API.CONFIG.BOX_BASE_URL+'/vendor/'+VENDOR_GUID+'/variation/'+lid+'/custom_iframe.html?v='+EFFECTS[lid]['iframe']['html_last_uploaded'];}}else{if(IS_QA){CURRENT_IFRAME_SRC=DIGIOH_API.CONFIG.BOX_BASE_URL+'/vendor/'+VENDOR_GUID+'/lightbox/'+lid+'/custom_iframe_qa.html?v='+EFFECTS[lid]['iframe']['html_last_uploaded'];}else if(IS_PREVIEW){CURRENT_IFRAME_SRC=DIGIOH_API.CONFIG.BOX_BASE_URL+'/vendor/'+VENDOR_GUID+'/lightbox/'+lid+'/custom_iframe_preview.html?v='+EFFECTS[lid]['iframe']['html_last_uploaded'];}else{CURRENT_IFRAME_SRC=DIGIOH_API.CONFIG.BOX_BASE_URL+'/vendor/'+VENDOR_GUID+'/lightbox/'+lid+'/custom_iframe.html?v='+EFFECTS[lid]['iframe']['html_last_uploaded'];}}}}else{if(IS_DEV)CURRENT_IFRAME_SRC=DIGIOH_API.CONFIG.BOX_BASE_URL+'/static/lightbox_dev.html?';else CURRENT_IFRAME_SRC=DIGIOH_API.CONFIG.BOX_BASE_URL+'/static/lightbox.html?';CURRENT_IFRAME_SRC+='wt='+EFFECTS[lid]['widget_type'];CURRENT_IFRAME_SRC+='&se='+(SHOW_ERRORS?'1':'0');CURRENT_IFRAME_SRC+='&prev='+(IS_PREVIEW?'1':'0');CURRENT_IFRAME_SRC+='&vid='+VENDOR_GUID;CURRENT_IFRAME_SRC+='&lid='+lid;CURRENT_IFRAME_SRC+='&is_var='+(isVariation?'1':'0');CURRENT_IFRAME_SRC+='&purl='+window.location.host;if(DIGIOH_CACHE_VERSION){CURRENT_IFRAME_SRC+='&cb='+DIGIOH_CACHE_VERSION;}else{CURRENT_IFRAME_SRC+='&cb='+(new Date().getTime());}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"setIframeSrc");}}
function getCustomJsMetadata(lid){var S={};try{if(typeof DIGIOH_CACHE_VERSION==='undefined'){DIGIOH_CACHE_VERSION=(new Date().getTime());}
S.protocol=(PROTOCOL||"https://");S.protocol_user_override=(PROTOCOL_USER_OVERRIDE||"https://");S.cache_version=DIGIOH_CACHE_VERSION;S.parent_url=PROTOCOL+window.location.host;S.full_url=window.location.href.split("'").join("%27")||'';S.use_bugsnag=(typeof DIGIOH_USE_BUGSNAG!=='undefined'&&DIGIOH_USE_BUGSNAG);S.use_console=SHOW_ERRORS;S.is_preview=IS_PREVIEW;S.is_qa=IS_QA;S.user_id=VENDOR_GUID;S.user_guid=VENDOR_GUID;S.user_short_id=DIGIOH_VENDOR_SHORT_ID;S.vendor_id=VENDOR_GUID;S.vendor_guid=VENDOR_GUID;S.vendor_short_id=DIGIOH_VENDOR_SHORT_ID;S.client_id=CLIENT_GUID;S.client_guid=CLIENT_GUID;S.is_desktop=isDesktop();S.is_phone=isPhone();S.is_tablet=isTablet();S.is_mobile=isMobile();if(typeof lid==='string'&&lid.length>20){var isVariation=false;var actual_lid=lid;var var_id='';if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lid)){var_id=lid;actual_lid=DIGIOH_VARIATION_TO_BOX_MAP[lid];isVariation=true;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lid];actual_lid=lid;isVariation=true;lid=var_id;}
var split_guid='';var split_short_id='';var split_name='';if(var_id.length>7&&AB_BOXES_TAKE_MAP.hasOwnProperty(var_id)){split_guid=AB_BOXES_TAKE_MAP[var_id];}else if(AB_BOXES_TAKE_MAP.hasOwnProperty(actual_lid)){split_guid=AB_BOXES_TAKE_MAP[actual_lid];}
if(split_guid!=''){for(var i=0;i<DIGIOH_SPLIT_TESTS_ARR.length;i++){if(DIGIOH_SPLIT_TESTS_ARR[i].split_guid==split_guid){split_short_id=DIGIOH_SPLIT_TESTS_ARR[i].split_short_id;split_name=DIGIOH_SPLIT_TESTS_ARR[i].name;break;}}}
var widget_type='';var lightbox_name='';var variation_name='';var lightbox_short_id='';var variation_short_id='';if(var_id&&EFFECTS.hasOwnProperty(var_id)){widget_type=EFFECTS[var_id].widget_type;}else if(EFFECTS.hasOwnProperty(actual_lid)){widget_type=EFFECTS[actual_lid].widget_type;}
if(DIGIOH_LIGHTBOX_NAMES.hasOwnProperty(actual_lid)){lightbox_name=DIGIOH_LIGHTBOX_NAMES[actual_lid];}
if(DIGIOH_LIGHTBOX_NAMES.hasOwnProperty(var_id)){variation_name=DIGIOH_LIGHTBOX_NAMES[var_id];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(actual_lid)){lightbox_short_id=DIGIOH_LIGHTBOX_IDS[actual_lid];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(var_id)){variation_short_id=DIGIOH_LIGHTBOX_IDS[var_id];}
var varIdOrLid="";if(isVariation&&var_id){varIdOrLid=var_id;}else{varIdOrLid=lid;}
lightbox_or_variation_guid=(isVariation?var_id:actual_lid);S.widget_type=widget_type;S.lightbox_id=actual_lid;S.lightbox_guid=actual_lid;S.lightbox_short_id=lightbox_short_id;S.lightbox_name=lightbox_name;S.variation_id=var_id;S.variation_guid=var_id;S.variation_short_id=variation_short_id;S.variation_name=variation_name;S.is_variation=isVariation;S.ab_test_id=split_guid;S.ab_test_guid=split_guid;S.ab_test_short_id=split_short_id;S.ab_test_name=split_name;S.lightbox_or_variation_id=lightbox_or_variation_guid;S.lightbox_or_variation_guid=lightbox_or_variation_guid;S.lightbox_or_variation_short_id=(isVariation?variation_short_id:lightbox_short_id);S.lightbox_or_variation_name=(isVariation?variation_name:lightbox_name);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getCustomJsMetadata");}
return S;}
function loadLightningIframe(lid,append_to_element_id){try{var isVariation=false;var actual_lid=lid;var var_id='';if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lid)){var_id=lid;actual_lid=DIGIOH_VARIATION_TO_BOX_MAP[lid];isVariation=true;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lid];actual_lid=lid;isVariation=true;lid=var_id;}
var split_guid='';var split_short_id='';var split_name='';if(var_id.length>7&&AB_BOXES_TAKE_MAP.hasOwnProperty(var_id)){split_guid=AB_BOXES_TAKE_MAP[var_id];}else if(AB_BOXES_TAKE_MAP.hasOwnProperty(actual_lid)){split_guid=AB_BOXES_TAKE_MAP[actual_lid];}
if(split_guid!=''){for(var i=0;i<DIGIOH_SPLIT_TESTS_ARR.length;i++){if(DIGIOH_SPLIT_TESTS_ARR[i].split_guid==split_guid){split_short_id=DIGIOH_SPLIT_TESTS_ARR[i].split_short_id;split_name=DIGIOH_SPLIT_TESTS_ARR[i].name;break;}}}
var widget_type='';var lightbox_name='';var variation_name='';var lightbox_short_id='';var variation_short_id='';if(var_id&&EFFECTS.hasOwnProperty(var_id)){widget_type=EFFECTS[var_id].widget_type;}else if(EFFECTS.hasOwnProperty(actual_lid)){widget_type=EFFECTS[actual_lid].widget_type;}
if(DIGIOH_LIGHTBOX_NAMES.hasOwnProperty(actual_lid)){lightbox_name=DIGIOH_LIGHTBOX_NAMES[actual_lid];}
if(DIGIOH_LIGHTBOX_NAMES.hasOwnProperty(var_id)){variation_name=DIGIOH_LIGHTBOX_NAMES[var_id];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(actual_lid)){lightbox_short_id=DIGIOH_LIGHTBOX_IDS[actual_lid];}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(var_id)){variation_short_id=DIGIOH_LIGHTBOX_IDS[var_id];}
var iframe_id='lightbox-iframe-'+lid;var iframe_position='absolute';if(isMobile()){if(widget_type==='inline'){iframe_position='absolute';}else{iframe_position='relative';}}
var settingsFile="";var varIdOrLid="";if(isVariation&&var_id){settingsFile+="/variation/"+var_id;varIdOrLid=var_id;}else{settingsFile+="/lightbox/"+lid;varIdOrLid=lid;}
if(IS_QA){settingsFile+="/settings_qa.js";}else if(IS_PREVIEW){settingsFile+="/settings_preview.js";}else{settingsFile+="/settings.js";}
if(typeof DIGIOH_CACHE_VERSION==='undefined'){DIGIOH_CACHE_VERSION=(new Date().getTime());}
if(!window.DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS.hasOwnProperty(varIdOrLid)){JQUERY_DIGIOH.ajax({url:DIGIOH_API.CONFIG.BOX_BASE_URL+
'/vendor/'+
VENDOR_GUID+
settingsFile+
'?cb='+
DIGIOH_CACHE_VERSION,crossDomain:true,dataType:"script",cache:true});}else{logger('settings.js already preloaded for '+varIdOrLid);}
var iframe_title=lightbox_name;if(iframe_title===''||!iframe_title)
iframe_title=variation_name;if(iframe_title===''||!iframe_title)
iframe_title='Lightbox Screen Overlay';iframe_title=iframe_title.split('"').join('').split("'").join("");var hostname='';if(window&&window.location&&window.location.hostname){hostname=window.location.hostname;}else if(window&&window.parent&&window.parent.location&&window.parent.location.hostname){hostname=window.parent.location.hostname;}
var hosted_iframe=DIGIOH_API.getAccountMetadata('hosted_iframe:'+hostname);if(!hosted_iframe){hosted_iframe=DIGIOH_API.getAccountMetadata('hosted_iframe');}
if(hosted_iframe){hosted_iframe=hosted_iframe.toLowerCase().replace('https://','').replace('http://','').trim();}
var use_hosted_iframe=hostname&&hosted_iframe&&hosted_iframe.length>7;if(use_hosted_iframe&&hosted_iframe.indexOf(hostname+'/')!==0){use_hosted_iframe=false;logger('hosted_iframe: host of configured url ('+hosted_iframe+') must match current hostname ('+hostname+')');}
if(!IS_PREVIEW&&use_hosted_iframe){var boxParams='';boxParams+="PROTOCOL="+(PROTOCOL||"https://")+"";boxParams+="|||PROTOCOL_USER_OVERRIDE="+(PROTOCOL_USER_OVERRIDE||"https://")+"";boxParams+="|||WIDGET_TYPE="+widget_type+"";boxParams+="|||CACHE_VERSION="+DIGIOH_CACHE_VERSION+"";boxParams+="|||PARENT_URL="+PROTOCOL+window.location.host+"";boxParams+="|||FULL_URL="+window.location.href.split("'").join("%27")+"";boxParams+="|||IS_PRODUCTION="+(IS_DEV?'false':'true')+"";boxParams+="|||IS_QA="+(DIGIOH_API.isQaMode()?'true':'false')+"";boxParams+="|||IS_PREVIEW="+(IS_PREVIEW?'true':'false')+"";boxParams+="|||SHOW_ERRORS="+(SHOW_ERRORS?'true':'false')+"";boxParams+="|||IS_IE_9_OR_LESS=false";boxParams+="|||VENDOR_GUID="+VENDOR_GUID+"";boxParams+="|||VENDOR_SHORT_ID="+DIGIOH_VENDOR_SHORT_ID+"";boxParams+="|||CLIENT_GUID="+CLIENT_GUID+"";boxParams+="|||LIGHTBOX_GUID="+actual_lid+"";boxParams+="|||LIGHTBOX_SHORT_ID="+lightbox_short_id+"";boxParams+="|||LIGHTBOX_NAME="+lightbox_name+"";boxParams+="|||VARIATION_GUID="+var_id+"";boxParams+="|||VARIATION_SHORT_ID="+variation_short_id+"";boxParams+="|||VARIATION_NAME="+variation_name+"";boxParams+="|||IS_VARIATION="+isVariation.toString().toLowerCase()+"";boxParams+="|||AB_TEST_GUID="+split_guid+"";boxParams+="|||AB_TEST_SHORT_ID="+split_short_id+"";boxParams+="|||AB_TEST_NAME="+split_name+"";boxParams+="|||IS_DESKTOP="+isDesktop().toString().toLowerCase()+"";boxParams+="|||IS_PHONE="+isPhone().toString().toLowerCase()+"";boxParams+="|||IS_TABLET="+isTablet().toString().toLowerCase()+"";boxParams+="|||IS_MOBILE="+isMobile().toString().toLowerCase()+"";if(typeof DIGIOH_USE_RESPONSIVE!=='undefined'&&DIGIOH_USE_RESPONSIVE)
boxParams+="|||DIGIOH_USE_RESPONSIVE=true";else
boxParams+="|||DIGIOH_USE_RESPONSIVE=false";if(typeof DIGIOH_USE_BUGSNAG!=='undefined'&&DIGIOH_USE_BUGSNAG)
boxParams+="|||DIGIOH_USE_BUGSNAG=true";else
boxParams+="|||DIGIOH_USE_BUGSNAG=false";if(typeof DIGIOH_USE_PRQ!=='undefined'&&DIGIOH_USE_PRQ)
boxParams+="|||DIGIOH_USE_PRQ=true";else
boxParams+="|||DIGIOH_USE_PRQ=false";DIGIOH_API.LIGHTBOX.USE_PRQ=(typeof DIGIOH_USE_PRQ!=='undefined'&&DIGIOH_USE_PRQ);var lzParams=LZString.compressToBase64(boxParams);var frameLink=hosted_iframe;let TABINDEX=DIGIOH_API.getWidgetMetadata(lid,"boxtabindex");if(TABINDEX=="remove")TABINDEX="";else TABINDEX=TABINDEX&&!isNaN(TABINDEX)?`tabindex='${TABINDEX}'`:"tabindex='1'";JQUERY_DIGIOH("<iframe "+TABINDEX+" aria-label='Modal Overlay Box Frame' src='//"+frameLink+"?lz="+lzParams+"' id='"+iframe_id+"' title='"+iframe_title+"' class='box-"+lightbox_short_id+"' width='100%' height='100%' frameborder='0' scrolling='no' style='display:block;position:"+iframe_position+";margin:0;padding:0;border:none;width:100%;height:100%;' sandbox='allow-scripts allow-same-origin allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-top-navigation'></iframe>").bind('load',function(event){}).appendTo('#'+append_to_element_id);}
else{let TABINDEX=DIGIOH_API.getWidgetMetadata(lid,"boxtabindex");if(TABINDEX=="remove")TABINDEX="";else TABINDEX=TABINDEX&&!isNaN(TABINDEX)?`tabindex='${TABINDEX}'`:"tabindex='1'";JQUERY_DIGIOH("<iframe "+TABINDEX+" aria-label='Modal Overlay Box Frame' id='"+iframe_id+"' title='"+iframe_title+"' class='box-"+lightbox_short_id+"' width='100%' height='100%' frameborder='0' scrolling='no' style='display:block;position:"+iframe_position+";margin:0;padding:0;border:none;width:100%;height:100%;' sandbox='allow-scripts allow-same-origin allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-top-navigation'></iframe>").bind('load',function(event){var cwd=null;if(this.contentDocument){cwd=this.contentDocument;}else if(this.contentWindow){cwd=this.contentWindow.document;}
if(cwd==null){return;}
var s;var cwh=cwd.getElementsByTagName('head')[0];var scriptInit='';scriptInit+="var PROTOCOL = '"+(PROTOCOL||"https://")+"';";scriptInit+="var PROTOCOL_USER_OVERRIDE = '"+(PROTOCOL_USER_OVERRIDE||"https://")+"';";scriptInit+="var WIDGET_TYPE = '"+widget_type+"';";scriptInit+="var CACHE_VERSION = '"+DIGIOH_CACHE_VERSION+"';";scriptInit+="var PARENT_URL = '"+PROTOCOL+window.location.host+"';";scriptInit+="var FULL_URL = '"+window.location.href.split("'").join("%27")+"';";scriptInit+="var IS_PRODUCTION = "+(IS_DEV?'false':'true')+";";scriptInit+="var IS_PREVIEW = "+(IS_PREVIEW?'true':'false')+";";scriptInit+="var IS_QA = "+(DIGIOH_API.isQaMode()?'true':'false')+";";scriptInit+="var SHOW_ERRORS = "+(SHOW_ERRORS?'true':'false')+";";scriptInit+="var IS_IE_9_OR_LESS = false;";scriptInit+="var VENDOR_GUID = '"+VENDOR_GUID+"';";scriptInit+="var VENDOR_SHORT_ID = '"+DIGIOH_VENDOR_SHORT_ID+"';";scriptInit+="var CLIENT_GUID = '"+CLIENT_GUID+"';";scriptInit+="var LIGHTBOX_GUID = '"+actual_lid+"';";scriptInit+="var LIGHTBOX_SHORT_ID = '"+lightbox_short_id+"';";scriptInit+="var LIGHTBOX_NAME = '"+lightbox_name+"';";scriptInit+="var VARIATION_GUID = '"+var_id+"';";scriptInit+="var VARIATION_SHORT_ID = '"+variation_short_id+"';";scriptInit+="var VARIATION_NAME = '"+variation_name+"';";scriptInit+="var IS_VARIATION = "+isVariation.toString().toLowerCase()+";";scriptInit+="var AB_TEST_GUID = '"+split_guid+"';";scriptInit+="var AB_TEST_SHORT_ID = '"+split_short_id+"';";scriptInit+="var AB_TEST_NAME = '"+split_name+"';";var is_desktop=isDesktop();var is_phone=isPhone();if(typeof is_desktop!=='boolean'||typeof is_phone!=='boolean'){logger('isDesktop() ==> '+is_desktop);logger('isPhone() ==> '+is_phone);logger('DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.primaryHardwareType ==> '+DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.primaryHardwareType);}
scriptInit+="var IS_DESKTOP = "+is_desktop.toString().toLowerCase()+";";scriptInit+="var IS_PHONE = "+is_phone.toString().toLowerCase()+";";scriptInit+="var IS_TABLET = "+isTablet().toString().toLowerCase()+";";scriptInit+="var IS_MOBILE = "+isMobile().toString().toLowerCase()+";";if(typeof DIGIOH_USE_RESPONSIVE!=='undefined'&&DIGIOH_USE_RESPONSIVE){scriptInit+="var DIGIOH_USE_RESPONSIVE = true;";}else{scriptInit+="var DIGIOH_USE_RESPONSIVE = false;";}
if(typeof DIGIOH_USE_BUGSNAG!=='undefined'&&DIGIOH_USE_BUGSNAG){scriptInit+="var DIGIOH_USE_BUGSNAG = true;";}else{scriptInit+="var DIGIOH_USE_BUGSNAG = false;";}
if(typeof DIGIOH_USE_PRQ!=='undefined'&&DIGIOH_USE_PRQ){scriptInit+="var DIGIOH_USE_PRQ = true;";}else{scriptInit+="var DIGIOH_USE_PRQ = false;";}
DIGIOH_API.LIGHTBOX.USE_PRQ=(typeof DIGIOH_USE_PRQ!=='undefined'&&DIGIOH_USE_PRQ);s=cwd.createElement('script');s.type='text/javascript';if(typeof s.textContent!=="undefined"){s.textContent=scriptInit;}else{s.innerText=scriptInit;}
cwh.appendChild(s);let builderFilename='lightbox_builder.js';if(DIGIOH_API.isPreview())builderFilename='lightbox_builder_preview.js';if(DIGIOH_API.isQaMode())builderFilename='lightbox_builder_qa.js';s=cwd.createElement('script');s.type='text/javascript';s.src=DIGIOH_API.CONFIG.BOX_BASE_URL+'/vendor/'+VENDOR_GUID+'/'+builderFilename+'?cb='+DIGIOH_CACHE_VERSION;cwh.appendChild(s);}).appendTo('#'+append_to_element_id);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"loadLightningIframe");}}
function tryInitFancyboxWhenChildReady(lid,attempts){if(attempts>30){logger('tryInitFancyboxWhenChildReady - cancelled after '+attempts+' attempts');return;}else if(!CHILD_READY.hasOwnProperty(lid)||CHILD_READY[lid]!==true){window.setTimeout(function(){tryInitFancyboxWhenChildReady(lid,attempts++);},100);}else{logger('tryInitFancyboxWhenChildReady - loaded after '+attempts+' attempts');initFancybox(lid,true);}}
function updateFancyboxPosition(dom_id,cnt,lbid){try{if(IS_LIGHTBOX_CLOSING.hasOwnProperty(lbid)&&IS_LIGHTBOX_CLOSING[lbid]){return;}
var wrap=JQUERY_DIGIOH('.fb_lightbox-wrap').filter(':first');var preload=JQUERY_DIGIOH('#'+dom_id);var position={};if(!isMobile()){position.position="fixed";}else{position.position="absolute";}
position.top=parseInt(wrap.css('top'));position.left=parseInt(wrap.css('left'));var m=getResponsiveScaleMultiplier(lbid);preload.css({'position':position.position,'left':position.left,'top':position.top,'transform':'scale('+m+')','-webkit-transform':'scale('+m+')','-moz-transform':'scale('+m+')','-ms-transform':'scale('+m+')','-o-transform':'scale('+m+')'});preload.show();if(cnt<2){cnt++;window.setTimeout(function(){updateFancyboxPosition(dom_id,cnt,lbid);},300);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"updateFancyboxPosition");}}
function initFancybox(lbid,is_preloaded){try{if(is_preloaded)is_preloaded=true;else is_preloaded=false;if(isActiveBox(lbid)){logger('DIGIOH: isActiveBox() called from initFancybox() - prevented display - '+lbid);return false;}
addActiveBox(lbid);var bsid=DIGIOH_API.getBoxIDFromBoxOrVariation(lbid).toString();logger('initFancybox('+lbid+') before_lightbox_display: bsid='+bsid);if(DIGIOH_API.hasOwnProperty('BOXCOMM')&&DIGIOH_API.BOXCOMM.hasOwnProperty(bsid)&&DIGIOH_API.BOXCOMM[bsid].hasAfterDomReadyJsFinished){var res=DIGIOH_API.BOXCOMM[bsid].runCustomJsBeforeDisplay();logger('initFancybox('+lbid+') before_lightbox_display: '+res);if(res===false){removeActiveBox(lbid);return false;}}else{logger('initFancybox('+lbid+') before_lightbox_display: retry');setTimeout(function(){removeActiveBox(lbid);initFancybox(lbid,is_preloaded);},100);return false;}
if(effectsHasTeaserDisplayFancybox(lbid)){closeTeaser(EFFECTS[lbid].fancybox.teaser,lbid,false);}
if(!is_preloaded){preloadIframe(lbid);removeActiveBox(lbid);tryInitFancyboxWhenChildReady(lbid,1);return;}
var dom_id=getLightboxDomId(lbid);var fb={};var dims_box=getActualBoxWidthAndHeight(lbid);if(is_preloaded){fb={content:"<div class='fb_lightbox-content'></div>",width:dims_box.width,height:dims_box.height,autoSize:false,scrolling:'no',arrows:false,padding:0,autoCenter:(!isMobile()),fixed:(!isMobile()),keys:{close:0}};fb.afterShow=function(){IS_LIGHTBOX_CLOSING[lbid]=false;registerLightboxShow(lbid);JQUERY_DIGIOH("body").css({'overflow-y':'hidden'});updateFancyboxPosition(dom_id,0,lbid);};fb.onUpdate=function(){if(!isMobile()||!FANCY_REPOSITION_LOCKED.hasOwnProperty(lbid)||!FANCY_REPOSITION_LOCKED[lbid]){updateFancyboxPosition(dom_id,0,lbid);}};fb.beforeClose=function(){IS_LIGHTBOX_CLOSING[lbid]=true;removeActiveBox(lbid);keepSendingEventNotificationToChildUntilReceived({sender:'lightbox',action:'before_lightbox_close'},lbid,100,0);};fb.afterClose=function(){IS_LIGHTBOX_CLOSING[lbid]=true;JQUERY_DIGIOH('#'+dom_id).hide();JQUERY_DIGIOH("body").css({'overflow-y':'visible'});JQUERY_DIGIOH('#'+dom_id).css({'opacity':1});registerLightboxClose(lbid);if(FANCY_REPOSITION_LOCKED.hasOwnProperty(lbid)){FANCY_REPOSITION_LOCKED[lbid]=false;}
setTimeout(function(){IS_LIGHTBOX_CLOSING[lbid]=false;},1500);};}else{}
fb.beforeLoad=function(){JQUERY_DIGIOH.fb_lightbox.hideLoading();};fb.helpers={overlay:{closeClick:EFFECTS[lbid].fancybox.overlay.close_click,css:getBackgroundStyle(EFFECTS[lbid].fancybox.overlay.background)}};fb.topRatio=(EFFECTS[lbid].fancybox.position.top/10);fb.leftRatio=(EFFECTS[lbid].fancybox.position.left/10);if(EFFECTS[lbid].fancybox.animation.open!="fade"&&EFFECTS[lbid].fancybox.animation.open!="elastic"){fb.openEffect="fade";fb.openMethod=EFFECTS[lbid].fancybox.animation.open+"In";}else{fb.openEffect=EFFECTS[lbid].fancybox.animation.open;fb.openMethod='zoomInCustom';}
if(EFFECTS[lbid].fancybox.animation.open!="fade"){fb.openEasing=EFFECTS[lbid].fancybox.easing.open;}
fb.openSpeed=EFFECTS[lbid].fancybox.speed.open;if(EFFECTS[lbid].fancybox.animation.close!="fade"&&EFFECTS[lbid].fancybox.animation.close!="elastic"){fb.closeEffect="fade";fb.closeMethod=EFFECTS[lbid].fancybox.animation.close+"Out";}else{fb.closeEffect=EFFECTS[lbid].fancybox.animation.close;fb.closeMethod='zoomOutCustom';}
if(EFFECTS[lbid].fancybox.animation.close!="fade"){fb.closeEasing=EFFECTS[lbid].fancybox.easing.close;}
fb.closeSpeed=EFFECTS[lbid].fancybox.speed.close;fb.tpl={closeBtn:'<div title="Close" id="widget_fb_close_hide" style="display:none;" aria-label="Close Modal"></div>'};fb.box_id=lbid;JQUERY_DIGIOH.fb_lightbox.open(fb);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initFancybox");}}
function fancyboxMobileSidebarFix(lbid){try{var dom_id=getLightboxDomId(lbid);var dims_box=getActualBoxWidthAndHeight(lbid);var fb={content:'<div></div>',width:dims_box.width,height:dims_box.height,autoSize:false,scrolling:'no',arrows:false,padding:0,autoCenter:false,fixed:false,keys:{close:0}};fb.afterShow=function(){var wrap=JQUERY_DIGIOH('.fb_lightbox-wrap').filter(':first');var preload=JQUERY_DIGIOH('#'+dom_id);var position=wrap.offset();preload.css(position);preload.show();};fb.onUpdate=function(){if(!FANCY_REPOSITION_LOCKED.hasOwnProperty(lbid)||!FANCY_REPOSITION_LOCKED[lbid]){var wrap=JQUERY_DIGIOH('.fb_lightbox-wrap').filter(':first');var preload=JQUERY_DIGIOH('#'+dom_id);var position=wrap.offset();preload.css(position);}};fb.beforeClose=function(){keepSendingEventNotificationToChildUntilReceived({sender:'lightbox',action:'before_lightbox_close'},lbid,100,0);};fb.afterClose=function(){JQUERY_DIGIOH('#'+dom_id).hide();JQUERY_DIGIOH("body").css({'overflow-y':'visible'});JQUERY_DIGIOH('#'+dom_id).css({'opacity':1});registerLightboxClose(lbid);};fb.beforeLoad=function(){JQUERY_DIGIOH.fb_lightbox.hideLoading();JQUERY_DIGIOH("body").css({'overflow-y':'hidden'});};fb.helpers={overlay:{closeClick:false,css:{"background-color":"rgba(0, 0, 0, 0)","opacity":"0"}}};fb.topRatio=(1/10);fb.leftRatio=(5/10);fb.openEffect="fade";fb.openMethod="slideDownIn";fb.closeEffect="fade";fb.closeMethod="slideUpOut";fb.openSpeed=50;fb.closeSpeed=100;fb.tpl={closeBtn:'<div title="Close" id="widget_fb_close_hide" style="display:none;"></div>'};JQUERY_DIGIOH('#'+dom_id+' .widget_fb_close').click(function(){IS_LIGHTBOX_CLOSING[lbid]=true;JQUERY_DIGIOH.fb_lightbox.close();});fb.box_id=lbid;JQUERY_DIGIOH.fb_lightbox.open(fb);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"fancyboxMobileSidebarFix");}}
function initFancyboxEffects(){try{(function(JQUERY_DIGIOH,F){F.transitions.slideDownIn=function(){logger("initFancyboxEffects: "+F.current.box_id);var dims_obj=getActualBoxWidthAndHeight(F.current.box_id);var endPos=F._getPosition(true);var animatePx=(parseInt(endPos.top,10)+dims_obj.height)+'px';endPos.top=(dims_obj.height*-1)+'px';if(JQUERY_DIGIOH.inArray(F.current.box_id,PRELOADED_LIGHTBOXES)===-1){F.wrap.css(endPos).show().animate({top:'+='+animatePx},{easing:F.current.openEasing,duration:F.current.openSpeed,complete:F._afterZoomIn});}else{JQUERY_DIGIOH('#'+getLightboxDomId(F.current.box_id)).css(endPos).show().animate({top:'+='+animatePx},{easing:F.current.openEasing,duration:F.current.openSpeed,complete:F._afterZoomIn});}};F.transitions.slideDownOut=function(){logger("initFancyboxEffects: "+F.current.box_id);var dims_obj=getActualBoxWidthAndHeight(F.current.box_id);var winHeight=JQUERY_DIGIOH(window).height();var widgetTop=JQUERY_DIGIOH('.fb_lightbox-wrap').filter(':first').offset().top;var animatePx=Math.ceil(winHeight-widgetTop)+'px';if(JQUERY_DIGIOH.inArray(F.current.box_id,PRELOADED_LIGHTBOXES)===-1){F.wrap.removeClass('fb_lightbox-opened').animate({top:'+='+animatePx},{easing:F.current.closeEasing,duration:F.current.closeSpeed,complete:F._afterZoomOut});}else{F.wrap.removeClass('fb_lightbox-opened');JQUERY_DIGIOH('#'+getLightboxDomId(F.current.box_id)).animate({top:'+='+animatePx},{easing:F.current.closeEasing,duration:F.current.closeSpeed,complete:F._afterZoomOut});}};F.transitions.slideUpIn=function(){logger("initFancyboxEffects: "+F.current.box_id);var dims_obj=getActualBoxWidthAndHeight(F.current.box_id);var endPos=F._getPosition(true);var winHeight=JQUERY_DIGIOH(window).height();var animatePx=Math.ceil(winHeight-parseInt(endPos.top,10))+'px';endPos.top=Math.ceil(winHeight)+'px';if(JQUERY_DIGIOH.inArray(F.current.box_id,PRELOADED_LIGHTBOXES)===-1){F.wrap.css(endPos).show().animate({top:'-='+animatePx},{easing:F.current.openEasing,duration:F.current.openSpeed,complete:F._afterZoomIn});}else{JQUERY_DIGIOH('#'+getLightboxDomId(F.current.box_id)).css(endPos).show().animate({top:'-='+animatePx},{easing:F.current.openEasing,duration:F.current.openSpeed,complete:F._afterZoomIn});}};F.transitions.slideUpOut=function(){logger("initFancyboxEffects: "+F.current.box_id);var dims_obj=getActualBoxWidthAndHeight(F.current.box_id);var endPos=F._getPosition(true);var animatePx=(parseInt(endPos.top,10)+dims_obj.height)+'px';if(JQUERY_DIGIOH.inArray(F.current.box_id,PRELOADED_LIGHTBOXES)===-1){F.wrap.removeClass('fb_lightbox-opened').animate({top:'-='+animatePx},{easing:F.current.closeEasing,duration:F.current.closeSpeed,complete:F._afterZoomOut});}else{F.wrap.removeClass('fb_lightbox-opened');JQUERY_DIGIOH('#'+getLightboxDomId(F.current.box_id)).animate({top:'-='+animatePx},{easing:F.current.closeEasing,duration:F.current.closeSpeed,complete:F._afterZoomOut});}};F.transitions.slideLeftIn=function(){logger("initFancyboxEffects: "+F.current.box_id);var dims_obj=getActualBoxWidthAndHeight(F.current.box_id);var winWidth=JQUERY_DIGIOH(window).width();var endPos=F._getPosition(true);var animatePx=Math.ceil(winWidth-parseInt(endPos.left,10))+'px';endPos.left=Math.ceil(winWidth)+'px';if(JQUERY_DIGIOH.inArray(F.current.box_id,PRELOADED_LIGHTBOXES)===-1){F.wrap.css(endPos).show().animate({left:'-='+animatePx},{easing:F.current.openEasing,duration:F.current.openSpeed,complete:F._afterZoomIn});}else{JQUERY_DIGIOH('#'+getLightboxDomId(F.current.box_id)).css(endPos).show().animate({left:'-='+animatePx},{easing:F.current.openEasing,duration:F.current.openSpeed,complete:F._afterZoomIn});}};F.transitions.slideLeftOut=function(){logger("initFancyboxEffects: "+F.current.box_id);var dims_obj=getActualBoxWidthAndHeight(F.current.box_id);var widgetLeft=JQUERY_DIGIOH('.fb_lightbox-wrap').filter(':first').offset().left;var animatePx=Math.ceil(widgetLeft+dims_obj.width)+'px';if(JQUERY_DIGIOH.inArray(F.current.box_id,PRELOADED_LIGHTBOXES)===-1){F.wrap.removeClass('fb_lightbox-opened').animate({left:'-='+animatePx},{easing:F.current.closeEasing,duration:F.current.closeSpeed,complete:F._afterZoomOut});}else{F.wrap.removeClass('fb_lightbox-opened');JQUERY_DIGIOH('#'+getLightboxDomId(F.current.box_id)).animate({left:'-='+animatePx},{easing:F.current.closeEasing,duration:F.current.closeSpeed,complete:F._afterZoomOut});}};F.transitions.slideRightIn=function(){logger("initFancyboxEffects: "+F.current.box_id);var dims_obj=getActualBoxWidthAndHeight(F.current.box_id);var endPos=F._getPosition(true);var animatePx=Math.ceil(parseInt(endPos.left,10)+dims_obj.width)+'px';endPos.left=(dims_obj.width*-1)+'px';if(JQUERY_DIGIOH.inArray(F.current.box_id,PRELOADED_LIGHTBOXES)===-1){F.wrap.css(endPos).show().animate({left:'+='+animatePx},{easing:F.current.openEasing,duration:F.current.openSpeed,complete:F._afterZoomIn});}else{JQUERY_DIGIOH('#'+getLightboxDomId(F.current.box_id)).css(endPos).show().animate({left:'+='+animatePx},{easing:F.current.openEasing,duration:F.current.openSpeed,complete:F._afterZoomIn});}};F.transitions.slideRightOut=function(){logger("initFancyboxEffects: "+F.current.box_id);var dims_obj=getActualBoxWidthAndHeight(F.current.box_id);var winWidth=JQUERY_DIGIOH(window).width();var widgetLeft=JQUERY_DIGIOH('.fb_lightbox-wrap').filter(':first').offset().left;var animatePx=Math.ceil(winWidth-widgetLeft)+'px';if(JQUERY_DIGIOH.inArray(F.current.box_id,PRELOADED_LIGHTBOXES)===-1){F.wrap.removeClass('fb_lightbox-opened').animate({left:'+='+animatePx},{easing:F.current.closeEasing,duration:F.current.closeSpeed,complete:F._afterZoomOut});}else{F.wrap.removeClass('fb_lightbox-opened');JQUERY_DIGIOH('#'+getLightboxDomId(F.current.box_id)).animate({left:'+='+animatePx},{easing:F.current.closeEasing,duration:F.current.closeSpeed,complete:F._afterZoomOut});}};F.transitions.zoomInCustom=function(){logger("initFancyboxEffects: "+F.current.box_id);var dims_obj=getActualBoxWidthAndHeight(F.current.box_id);var current=F.current,startPos=current.pos,effect=current.openEffect,elastic=effect==='elastic',endPos=JQUERY_DIGIOH.extend({opacity:1},startPos);delete endPos.position;if(elastic){startPos=this.getOrigPosition();if(current.openOpacity){startPos.opacity=0.1;}}else if(effect==='fade'){startPos.opacity=0.1;}
if(JQUERY_DIGIOH.inArray(F.current.box_id,PRELOADED_LIGHTBOXES)===-1){F.wrap.css(startPos).animate(endPos,{duration:effect==='none'?0:current.openSpeed,easing:current.openEasing,step:elastic?this.step:null,complete:F._afterZoomIn});}else{JQUERY_DIGIOH('#'+getLightboxDomId(F.current.box_id)).css(startPos).show().animate(endPos,{duration:effect==='none'?0:current.openSpeed,easing:current.openEasing,step:elastic?this.step:null,complete:F._afterZoomIn}).css('overflow','visible');}};F.transitions.zoomOutCustom=function(){logger("initFancyboxEffects: "+F.current.box_id);var dims_obj=getActualBoxWidthAndHeight(F.current.box_id);var current=F.current,effect=current.closeEffect,elastic=effect==='elastic',endPos={opacity:0.1};if(elastic){endPos=this.getOrigPosition();if(current.closeOpacity){endPos.opacity=0.1;}}
if(JQUERY_DIGIOH.inArray(F.current.box_id,PRELOADED_LIGHTBOXES)===-1){F.wrap.animate(endPos,{duration:effect==='none'?0:current.closeSpeed,easing:current.closeEasing,step:elastic?this.step:null,complete:F._afterZoomOut});}else{JQUERY_DIGIOH('#'+getLightboxDomId(F.current.box_id)).animate(endPos,{duration:effect==='none'?0:current.closeSpeed,easing:current.closeEasing,step:elastic?this.step:null,complete:F._afterZoomOut});}};}(JQUERY_DIGIOH,JQUERY_DIGIOH.fb_lightbox));}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initFancyboxEffects");}}
function createIdentityIframe(){try{var src=DIGIOH_API.CONFIG.BOX_BASE_URL+'/lclst/'+VENDOR_GUID+'/ls.html';src+='?purl='+encodeURIComponent(window.location.href);src+='&vid='+VENDOR_GUID;src+='&se='+(SHOW_ERRORS?'1':'0');src+='&prev='+(IS_PREVIEW?'1':'0');if(DIGIOH_CACHE_VERSION){src+='&cb='+DIGIOH_CACHE_VERSION;}else{src+='&cb='+(new Date().getTime());}
DIGIOH_IDENTITY_CHILD_IFRAME=JQUERY_DIGIOH('<iframe title="DigiohLocalStorageIframe" name="DigiohLocalStorageIframe" id="DigiohLocalStorageIframe" src="'+src+'" width="0" height="0" style="position:absolute;visibility:hidden;left:-100px;top:-100px;width:0;height:0;margin:0;padding:0;border-width:0px;border-style:none;" frameborder="0" scrolling="no"></iframe>').appendTo('body');}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"createIdentityIframe");}}
function initPostMessageReceiver(){try{if(window.addEventListener){window.addEventListener("message",runPostMessageReceiver,false);}
else{window.attachEvent("message",runPostMessageReceiver);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initPostMessageReceiver");}}
function runPostMessageReceiver(e){try{var postMessageDomain=PROTOCOL_USER_OVERRIDE+DIGIOH_API.CONFIG.CDN_DOMAIN;var origin=e.origin||e.originalEvent.origin;if(e.source&&e.source===window.frames['DigiohLocalStorageIframe']){var data=/^#localStorage#(\d+)(null)?#([\S\s]*)/.exec(e.data);if(data){if(DIGIOH_CROSS_DOMAIN.callbacks[data[1]]){DIGIOH_CROSS_DOMAIN.callbacks[data[1]](data[2]==='null'?null:data[3]);}
delete DIGIOH_CROSS_DOMAIN.callbacks[data[1]];}}
else if(e.data&&e.data==='#recaptcha#digioh#solved'){}
else if(origin!==postMessageDomain){return;}
else{processPostMessage(parsePostMessageResult(e.data));}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"runPostMessageReceiver");}}
function sendIdentityPostMessage(msgObj){try{var postMessageContentWindow=DIGIOH_IDENTITY_CHILD_IFRAME.get(0).contentWindow;var src=DIGIOH_API.CONFIG.BOX_BASE_URL+'/lclst/'+VENDOR_GUID+'/ls.html';src+='?parent_url='+encodeURIComponent(document.location.href);if(DIGIOH_CACHE_VERSION){src+='&cb='+DIGIOH_CACHE_VERSION;}else{src+='&cb='+(new Date().getTime());}
DIGIOH_CROSS_DOMAIN.getAll(function(value){if(typeof USE_LZ==='undefined'||USE_LZ==true){value=LZString.decompressFromBase64(value);}
console.log('got local storage item (mykey2) back in parent with value: '+value);});}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"sendIdentityPostMessage");}}
function initPostMessageReceiverOld(){try{var postMessageDomain='https://'+DIGIOH_API.CONFIG.CDN_DOMAIN;JQUERY_DIGIOH.receiveMessage(function(e){console.log(e);processPostMessage(parsePostMessageResult(e.data));},postMessageDomain);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"initPostMessageReceiverOld");}}
function processPostMessage(e,lid){try{if(typeof lid!=='undefined'&&lid&&!CHILD_READY.hasOwnProperty(lid)){CHILD_READY[lid]=true;}
var hash=e;if(!hash.hasOwnProperty('sender')||(hash.hasOwnProperty('digioh_identity')&&hash.digioh_identity)){logger('processPostMessage: ');logger(hash);}
if(hash.hasOwnProperty('child_action')&&hash.hasOwnProperty('lightbox_id')){if(hash.child_action=='close_lightbox'){if(EFFECTS.hasOwnProperty(hash.lightbox_id)&&EFFECTS[hash.lightbox_id].widget_type==="sidebar"){if(hash.trigger=='form_submit'){EFFECTS[hash.lightbox_id].sidebar.teaser.display=false;}
closeSidebar(hash.lightbox_id);}else if(EFFECTS.hasOwnProperty(hash.lightbox_id)&&EFFECTS[hash.lightbox_id].widget_type==="banner"){closeBanner(hash.lightbox_id);}else if(EFFECTS.hasOwnProperty(hash.lightbox_id)&&EFFECTS[hash.lightbox_id].widget_type==="fancybox"){if(hash.trigger=='form_submit'){EFFECTS[hash.lightbox_id].fancybox.teaser.display=false;}
IS_LIGHTBOX_CLOSING[lid]=true;JQUERY_DIGIOH.fb_lightbox.close(true);}else if(EFFECTS.hasOwnProperty(hash.lightbox_id)&&EFFECTS[hash.lightbox_id].widget_type==="inline"){logger('closeInline: '+hash.lightbox_id);closeInline(hash.lightbox_id);}}else if(hash.child_action=='redirect_parent'&&hash.hasOwnProperty('url')&&hash.url.length>7){if(hash.hasOwnProperty('ui_trigger')){if(!IS_REDIRECTING_PARENT){IS_REDIRECTING_PARENT=true;keenLightboxRedirect(hash.lightbox_id);var var_id='';var orig_lid=hash.lightbox_id;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(hash.lightbox_id)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[hash.lightbox_id];var_id=hash.lightbox_id;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(hash.lightbox_id)){var_id=LIGHTBOX_TO_VARIATION_MAP[hash.lightbox_id];}
var ab_test_id='';if(var_id!=''&&AB_BOXES_TAKE_MAP.hasOwnProperty(var_id)){ab_test_id=AB_BOXES_TAKE_MAP[var_id];}else if(AB_BOXES_TAKE_MAP.hasOwnProperty(orig_lid)){ab_test_id=AB_BOXES_TAKE_MAP[orig_lid];}
if(!IS_PREVIEW||IS_DEV){if(!isInlineLightbox(hash.lightbox_id)||doesInlineLightboxHaveCustomJsType(hash.lightbox_id,'all')){DIGIOH_CUSTOM_JS_SUPER.runCustomJsOnLightboxRedirect(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_GLOBAL.runCustomJsOnLightboxRedirect - '+hash.lightbox_id);DIGIOH_CUSTOM_JS.runCustomJsOnLightboxRedirect(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_PARENT.runCustomJsOnLightboxRedirect - '+hash.lightbox_id);}}
DIGIOH_LIGHTBOX_ANALYTICS.setLightboxEvent("redirect",orig_lid);var vendorShortId=VENDOR_GUID||'empty';var boxShortId=orig_lid||'empty';var variationShortId=var_id||'empty';var splitShortId=ab_test_id||'empty';if(typeof DIGIOH_VENDOR_SHORT_ID!=='undefined'){vendorShortId=DIGIOH_VENDOR_SHORT_ID;}
if(orig_lid&&DIGIOH_LIGHTBOX_IDS.hasOwnProperty(orig_lid)&&DIGIOH_LIGHTBOX_IDS[orig_lid]){boxShortId=DIGIOH_LIGHTBOX_IDS[orig_lid];}
if(var_id&&DIGIOH_LIGHTBOX_IDS.hasOwnProperty(var_id)&&DIGIOH_LIGHTBOX_IDS[var_id]){variationShortId=DIGIOH_LIGHTBOX_IDS[var_id];}
if(typeof DIGIOH_SPLIT_TESTS_ARR!=='undefined'&&DIGIOH_SPLIT_TESTS_ARR.length){for(var i=0;i<DIGIOH_SPLIT_TESTS_ARR.length;i++){if(DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('split_short_id')&&DIGIOH_SPLIT_TESTS_ARR[i].hasOwnProperty('split_guid')&&DIGIOH_SPLIT_TESTS_ARR[i]['split_guid']==ab_test_id){splitShortId=DIGIOH_SPLIT_TESTS_ARR[i]['split_short_id'];break;}}}
var hostname='empty';if(window&&window.location&&window.location.hostname){hostname=window.location.hostname;}
var eplz=DIGIOH_API.LIGHTBOX.LZString.compressToBase64('e=r&c='+(new Date().getTime())+'&h='+encodeURIComponent(hostname)+'&u='+vendorShortId+'&b='+boxShortId+'&v='+variationShortId+'&s='+splitShortId+'#######'+hash.url);var epred=DIGIOH_API.CONFIG.JSAPI_BASE_URL+'/Event/RedirectProxy?eplz='+eplz+'&cb='+(new Date().getTime());var use_watch=getUrlParam('use_watch');if(use_watch&&(use_watch=='yes'||use_watch=='true'||use_watch=='1')){epred+="&use_watch=yes";}
if(!hash.hasOwnProperty('redirect_type')||!hash.redirect_type||hash.redirect_type==='current'){IS_REDIRECTING_PARENT=false;logger('IS_REDIRECTING_PARENT: '+IS_REDIRECTING_PARENT);logger('redirect_type=current ('+epred+')');window.location.href=epred;}else if(hash.redirect_type==='tab'){var randId=Math.floor(Math.random()*10000000);JQUERY_DIGIOH('body').append("<a id='new-tab-link-"+randId+"' style='display:none;' href='"+epred+"' target='_blank'></a>");document.getElementById("new-tab-link-"+randId).click();window.setTimeout(function(){JQUERY_DIGIOH("#new-tab-link-"+randId).remove();IS_REDIRECTING_PARENT=false;},1000);logger('redirect_type=tab');}else if(hash.redirect_type==='window'){window.open(epred,"NewWindow","menubar=yes,height="+(JQUERY_DIGIOH(window).height()-25)+",width="+(JQUERY_DIGIOH(window).width()-25)+",left=25,top=25");window.setTimeout(function(){IS_REDIRECTING_PARENT=false;},1000);logger('redirect_type=window');}}}}else if(hash.child_action=='lightbox_open'&&hash.hasOwnProperty('lightbox_open')&&hash.lightbox_open.length>1){if(!IS_REDIRECTING_PARENT){IS_REDIRECTING_PARENT=true;if(hash.hasOwnProperty('ui_trigger')&&hash.ui_trigger=='button'){keenLightboxRedirect(hash.lightbox_id);var var_id='';var orig_lid=hash.lightbox_id;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(hash.lightbox_id)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[hash.lightbox_id];var_id=hash.lightbox_id;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(hash.lightbox_id)){var_id=LIGHTBOX_TO_VARIATION_MAP[hash.lightbox_id];}
var ab_test_id='';if(var_id!=''&&AB_BOXES_TAKE_MAP.hasOwnProperty(var_id)){ab_test_id=AB_BOXES_TAKE_MAP[var_id];}else if(AB_BOXES_TAKE_MAP.hasOwnProperty(orig_lid)){ab_test_id=AB_BOXES_TAKE_MAP[orig_lid];}
if(!IS_PREVIEW||IS_DEV){if(!isInlineLightbox(hash.lightbox_id)||doesInlineLightboxHaveCustomJsType(hash.lightbox_id,'all')){DIGIOH_CUSTOM_JS_SUPER.runCustomJsOnLightboxRedirect(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_GLOBAL.runCustomJsOnLightboxRedirect - '+hash.lightbox_id);DIGIOH_CUSTOM_JS.runCustomJsOnLightboxRedirect(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_PARENT.runCustomJsOnLightboxRedirect - '+hash.lightbox_id);}}
DIGIOH_LIGHTBOX_ANALYTICS.setLightboxEvent("redirect",orig_lid);analyticsRedirect(orig_lid,var_id,ab_test_id);}
if(EFFECTS.hasOwnProperty(hash.lightbox_id)&&EFFECTS[hash.lightbox_id].widget_type==="sidebar"){EFFECTS[hash.lightbox_id].sidebar.teaser.display=false;closeSidebar(hash.lightbox_id);}else if(EFFECTS.hasOwnProperty(hash.lightbox_id)&&EFFECTS[hash.lightbox_id].widget_type==="banner"){closeBanner(hash.lightbox_id);}else if(EFFECTS.hasOwnProperty(hash.lightbox_id)&&EFFECTS[hash.lightbox_id].widget_type==="fancybox"){EFFECTS[hash.lightbox_id].fancybox.teaser.display=false;IS_LIGHTBOX_CLOSING[hash.lightbox_id]=true;JQUERY_DIGIOH.fb_lightbox.close(true);}
var foundAnotherLightbox=false;var lightbox_open_guid=DIGIOH_API.getBoxGUID(hash.lightbox_open);for(var i=0;i<DIGIOH_LIGHTBOX_CONDITIONS.length;i++){if(lightbox_open_guid==DIGIOH_LIGHTBOX_CONDITIONS[i].lightbox_guid){foundAnotherLightbox=true;tryOpenAnotherLightbox(lightbox_open_guid);break;}}
if(!foundAnotherLightbox){logger('Action lightbox_open invalid, could not find another active Lightbox with GUID: '+lightbox_open_guid);}}}else if(hash.child_action=='download_file'){keenLightboxDownload(hash.lightbox_id);var var_id='';var orig_lid=hash.lightbox_id;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(hash.lightbox_id)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[hash.lightbox_id];var_id=hash.lightbox_id;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(hash.lightbox_id)){var_id=LIGHTBOX_TO_VARIATION_MAP[hash.lightbox_id];}
var ab_test_id='';if(var_id!=''&&AB_BOXES_TAKE_MAP.hasOwnProperty(var_id)){ab_test_id=AB_BOXES_TAKE_MAP[var_id];}else if(AB_BOXES_TAKE_MAP.hasOwnProperty(orig_lid)){ab_test_id=AB_BOXES_TAKE_MAP[orig_lid];}
if(!IS_PREVIEW||IS_DEV){if(!isInlineLightbox(hash.lightbox_id)||doesInlineLightboxHaveCustomJsType(hash.lightbox_id,'all')){runCustomJsLinkedApps('AfterDownload',orig_lid,var_id);logger('JS_PARENT_APPS.runCustomJsOnLightboxDownload - '+hash.lightbox_id);DIGIOH_CUSTOM_JS_SUPER.runCustomJsOnLightboxDownload(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_GLOBAL.runCustomJsOnLightboxDownload - '+hash.lightbox_id);DIGIOH_CUSTOM_JS.runCustomJsOnLightboxDownload(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_PARENT.runCustomJsOnLightboxDownload - '+hash.lightbox_id);}}
DIGIOH_LIGHTBOX_ANALYTICS.setLightboxEvent("download",orig_lid);analyticsDownload(orig_lid,var_id,ab_test_id);}else if(hash.child_action=='change_pages'){var pref=hash.page_prefix.replace('_','');CURRENT_PAGE[hash.lightbox_id]=pref;var width_new=hash.width;var height_new=hash.height;var width_prev=hash.width_prev;var height_prev=hash.height_prev;var dom_id=getLightboxDomId(hash.lightbox_id);var dims_box=getActualBoxWidthAndHeight(hash.lightbox_id);CURRENT_PAGE_DIMS[hash.lightbox_id]={width:dims_box.width,height:dims_box.height};var offset_prev=JQUERY_DIGIOH('#'+dom_id).offset();logger('Changed Pages: '+pref+' ('+dims_box.width+'x'+dims_box.height+')');if(EFFECTS[hash.lightbox_id].widget_type==='inline'){var lbid=hash.lightbox_id;if(DIGIOH_USE_RESPONSIVE&&EFFECTS[lbid].hasOwnProperty(pref+'responsive')&&EFFECTS[lbid][pref+'responsive'].use){JQUERY_DIGIOH('#'+dom_id).css({'width':getResponsiveBoxWidthPercent(lbid)+'%','height':getResponsiveBoxHeightPercent(lbid)+'%','max-width':getResponsiveBoxWidthMax(lbid)+'px','min-width':getResponsiveBoxWidthMin(lbid)+'px','max-height':getResponsiveBoxHeightMax(lbid)+'px','min-height':getResponsiveBoxHeightMin(lbid)+'px'});}
else if(!DIGIOH_USE_RESPONSIVE&&EFFECTS[lbid].hasOwnProperty(pref+'responsive')&&EFFECTS[lbid][pref+'responsive'].use){var bw=getBoxWidth(lbid);var bh=getBoxHeight(lbid);JQUERY_DIGIOH('#'+dom_id).css({'width':'100%','height':bh+'px','max-width':'10000px','min-width':bw+'px','max-height':bh+'px','min-height':bh+'px'});}
else{var bw=getBoxWidth(lbid);var bh=getBoxHeight(lbid);JQUERY_DIGIOH('#'+dom_id).css({'width':bw+'px','height':bh+'px','min-width':bw+'px','min-height':bh+'px','max-height':bh+'px'});}}
if(EFFECTS[hash.lightbox_id].widget_type==='banner'){JQUERY_DIGIOH('#'+dom_id).attr('style',getBannerPosition(EFFECTS[hash.lightbox_id].banner,hash.lightbox_id));if(!EFFECTS[hash.lightbox_id].banner.hasOwnProperty('placement')||EFFECTS[hash.lightbox_id].banner.placement!=='bottom'){if(JQUERY_DIGIOH('#banner-spacer-'+hash.lightbox_id).length){JQUERY_DIGIOH('#banner-spacer-'+hash.lightbox_id).height(dims_box.height);}}
responsiveResizeCheck('change_pages');}
if(EFFECTS[hash.lightbox_id].widget_type==='sidebar'){if(Math.abs(width_new-width_prev)>20||Math.abs(height_new-height_prev)>20){JQUERY_DIGIOH('#'+dom_id).attr('style',getSidebarPositionAfterAnimation(EFFECTS[hash.lightbox_id].sidebar,hash.lightbox_id));}
setBoxToScrollMode(hash.lightbox_id,pref,'change_pages');responsiveResizeCheck('change_pages');}
if(EFFECTS[hash.lightbox_id].widget_type==='fancybox'){FANCY_REPOSITION_LOCKED[hash.lightbox_id]=true;if(isMobile()){if(Math.abs(width_new-width_prev)>20||Math.abs(height_new-height_prev)>20){var left_new=Math.round(((jqWin.width()-dims_box.width)/2)+jqWin.scrollLeft());var top_new=Math.round(((jqWin.height()-dims_box.height)/2)+jqWin.scrollTop());var m=getResponsiveScaleMultiplier(hash.lightbox_id);var wrap=JQUERY_DIGIOH('.fb_lightbox-wrap').filter(':first');wrap.css({'left':left_new,'top':top_new,'width':dims_box.width+'px','height':dims_box.height+'px','transform':'scale('+m+')','-webkit-transform':'scale('+m+')','-moz-transform':'scale('+m+')','-ms-transform':'scale('+m+')','-o-transform':'scale('+m+')'});JQUERY_DIGIOH('#'+dom_id).css({'left':left_new,'top':top_new,'width':dims_box.width+'px','height':dims_box.height+'px','transform':'scale('+m+')','-webkit-transform':'scale('+m+')','-moz-transform':'scale('+m+')','-ms-transform':'scale('+m+')','-o-transform':'scale('+m+')'});}}else{updateFancyboxPosition(dom_id,0,hash.lightbox_id);}
responsiveResizeCheck('change_pages');}
if(EFFECTS[hash.lightbox_id].hasOwnProperty(pref+'responsive')&&EFFECTS[hash.lightbox_id][pref+'responsive'].use){if(EFFECTS[hash.lightbox_id].widget_type!=='inline'){CURRENT_PAGE_DIMS_RESPONSIVE[hash.lightbox_id]={width:dims_box.width,height:dims_box.height};keepSendingResizeToChildUntilReceived({sender:'lightbox',action:'dimensions_changed',widget_type:EFFECTS[hash.lightbox_id].widget_type,width:dims_box.width,height:dims_box.height},hash.lightbox_id,100,0);}else{inlineResponsiveResizing(hash.lightbox_id,dom_id,(new Date().getTime()),0,0);}}
var var_id='';var orig_lid=hash.lightbox_id;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(hash.lightbox_id)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[hash.lightbox_id];var_id=hash.lightbox_id;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(hash.lightbox_id)){var_id=LIGHTBOX_TO_VARIATION_MAP[hash.lightbox_id];}
if(!IS_PREVIEW||IS_DEV){var metadata=getCustomJsMetadata(orig_lid);metadata.new_width=hash.width;metadata.old_width=hash.width_prev;metadata.new_height=hash.height;metadata.old_height=hash.height_prev;metadata.new_page=hash.new_page;metadata.old_page=hash.previous_page;metadata.element=hash.el_name;metadata.trigger=hash.ui_source;if(!isInlineLightbox(hash.lightbox_id)||doesInlineLightboxHaveCustomJsType(hash.lightbox_id,'all')){runCustomJsLinkedApps('AfterChangePages',orig_lid,var_id);logger('JS_PARENT_APPS.runCustomJsOnChangePages - '+hash.lightbox_id);DIGIOH_CUSTOM_JS_SUPER.runCustomJsOnChangePages(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,metadata);logger('JS_GLOBAL.runCustomJsOnChangePages - '+hash.lightbox_id);DIGIOH_CUSTOM_JS.runCustomJsOnChangePages(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,metadata);logger('JS_PARENT.runCustomJsOnChangePages - '+hash.lightbox_id);}}}else if(hash.child_action=='register_analytics_submit'&&hash.hasOwnProperty('submission')&&hash.hasOwnProperty('post_to_keen')){if(!hash.hasOwnProperty('form_display')){logger("register_analytics_submit: hash does not have property - form_display");}
if(!hash.hasOwnProperty('form_display')||hash.form_display==true){var sid=generateGuidWithTimestamp();DIGIOH_LIGHTBOX_ANALYTICS.form_submit_data=JSON.parse(LZString.decompressFromBase64(hash.submission));DIGIOH_LIGHTBOX_ANALYTICS.form_submit_query=LZString.decompressFromBase64(hash.post_to_keen);var extra_data={};if(hash.hasOwnProperty('extra')&&hash.extra){extra_data=hash.extra;}
if(!hash.hasOwnProperty('skip_submit')||!hash.skip_submit){keenLightboxSubmit(DIGIOH_LIGHTBOX_ANALYTICS.form_submit_data,hash.lightbox_id,sid,extra_data);postToKeen(DIGIOH_LIGHTBOX_ANALYTICS.form_submit_query,hash.lightbox_id,sid,extra_data);}
registerLightboxSubmit(hash.lightbox_id);try{var curr=DIGIOH_LOCAL_STORAGE.getManual('fsdbx');if(typeof curr!=='object'||!curr){curr={};}
var box_short_id=hash.lightbox_id;if(DIGIOH_LIGHTBOX_IDS&&DIGIOH_LIGHTBOX_IDS.hasOwnProperty(hash.lightbox_id)){box_short_id=DIGIOH_LIGHTBOX_IDS[hash.lightbox_id]+'';}
for(var prop in DIGIOH_LIGHTBOX_ANALYTICS.form_submit_data){if(DIGIOH_LIGHTBOX_ANALYTICS.form_submit_data.hasOwnProperty(prop)&&DIGIOH_LIGHTBOX_ANALYTICS.form_submit_data[prop]!==''){curr[prop]=DIGIOH_LIGHTBOX_ANALYTICS.form_submit_data[prop];if(!curr.hasOwnProperty(box_short_id)||typeof curr[box_short_id]!=='object'||curr[box_short_id]===null){curr[box_short_id]={};}
curr[box_short_id][prop]=DIGIOH_LIGHTBOX_ANALYTICS.form_submit_data[prop];}}
DIGIOH_LOCAL_STORAGE.setManual('fsdbx',curr);logger('fsdbx ==> ');logger(curr);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logger('fsdbx error - '+e.message);}}else{logger("register_analytics_submit: prevented submit event from firing because form is turned off.");DIGIOH_LIGHTBOX_ANALYTICS.form_submit_data=JSON.parse(LZString.decompressFromBase64(hash.submission));keenLightboxDebug(hash.lightbox_id,DIGIOH_LIGHTBOX_ANALYTICS.form_submit_data);}}else if(hash.child_action=='coupon_used'&&hash.hasOwnProperty('coupon_meta_data')){keenLightboxCoupon(hash.lightbox_id,hash.coupon_meta_data);logger("coupon_used: keenLightboxCoupon");logger(hash);}}
if(hash.hasOwnProperty('parent_action')&&hash.hasOwnProperty('lightbox_id')){if(hash.parent_action=='terminate_lightbox'){TERMINATED_LIGHTBOXES[hash.lightbox_id]=true;var domId=getLightboxDomId(hash.lightbox_id);if(domId&&JQUERY_DIGIOH("#"+domId).length){JQUERY_DIGIOH("#"+domId).remove();}
if(DIGIOH_API.contains(PRELOADED_LIGHTBOXES_LOADED,hash.lightbox_id)){PRELOADED_LIGHTBOXES_LOADED=DIGIOH_API.remove(PRELOADED_LIGHTBOXES_LOADED,hash.lightbox_id);}
if(DIGIOH_API.contains(PRELOADED_LIGHTBOXES,hash.lightbox_id)){PRELOADED_LIGHTBOXES=DIGIOH_API.remove(PRELOADED_LIGHTBOXES,hash.lightbox_id);}
logger("Custom JS Boxes - Before DOM Ready - Terminated Execution of Lightbox: "+hash.lightbox_id);}}
if(hash.hasOwnProperty('event')){if(hash.event=='mouseenter'&&hash.hasOwnProperty('lightbox_id')){PREVENT_SIDEBAR_CLOSE_GUIDS[hash.lightbox_id]=true;}else if(hash.event=='mouseleave'&&hash.hasOwnProperty('lightbox_id')){if(PREVENT_SIDEBAR_CLOSE_GUIDS.hasOwnProperty(hash.lightbox_id)){delete PREVENT_SIDEBAR_CLOSE_GUIDS[hash.lightbox_id];}}else if(hash.event=='input_focus'&&hash.hasOwnProperty('lightbox_id')){if(isMobile()){}}}
if(hash.hasOwnProperty('zipcode')){if(hash.hasOwnProperty('sender')&&hash.sender=='maxmind2'){if(hash.hasOwnProperty('callback_func')&&hash.callback_func.length>0){if(window.DIGIOH_API.LIGHTBOX.hasOwnProperty(hash.callback_func)){window.DIGIOH_API.LIGHTBOX[hash.callback_func](hash.ip);}}}else{GEO_IP=hash;if(GEO_IP.hasOwnProperty("country_name"))GEO_IP.country_name=GEO_IP.country_name.replace('+',' ');if(GEO_IP.hasOwnProperty("region_name"))GEO_IP.region_name=GEO_IP.region_name.replace('+',' ');if(GEO_IP.hasOwnProperty("city"))GEO_IP.city=GEO_IP.city.replace('+',' ');if(GEO_IP.hasOwnProperty("latitude")&&GEO_IP.latitude)GEO_IP.latitude=parseFloat(GEO_IP.latitude);if(GEO_IP.hasOwnProperty("longitude")&&GEO_IP.longitude)GEO_IP.longitude=parseFloat(GEO_IP.longitude);if(GEO_IP.hasOwnProperty("time_zone")&&GEO_IP.time_zone)GEO_IP.time_zone=decodeURIComponent(GEO_IP.time_zone);GEO_IP.geo_source='maxmind';DIGIOH_LIGHTBOX_ANALYTICS.setGeoData(GEO_IP);initDependentScripts();}}
if(hash.hasOwnProperty('loading_status')&&hash.loading_status=="settings_applied"){if(hash.hasOwnProperty('widget_type')&&hash.widget_type==="sidebar"){if(JQUERY_DIGIOH.inArray(hash.lightbox_id,PRELOADED_LIGHTBOXES)===-1){showSidebar(hash.lightbox_id);logger("settings_applied_showSidebar: "+hash.lightbox_id);}}else if(hash.hasOwnProperty('widget_type')&&hash.widget_type==="banner"){if(JQUERY_DIGIOH.inArray(hash.lightbox_id,PRELOADED_LIGHTBOXES)===-1){showBanner(hash.lightbox_id);logger("settings_applied_showBanner: "+hash.lightbox_id);}}else if(hash.hasOwnProperty('widget_type')&&hash.widget_type==="inline"){showInline(hash.lightbox_id);logger("settings_applied_showInline: "+hash.lightbox_id);}
if(JQUERY_DIGIOH.inArray(hash.lightbox_id,PRELOADED_LIGHTBOXES_LOADED)==-1){PRELOADED_LIGHTBOXES_LOADED.push(hash.lightbox_id);}
if(IS_PREVIEW){logger("preview 1");if(typeof DigiohPreviewOnScriptLoaded!=="undefined"&&!wasScriptOnLoadedCalled){logger("preview 2");DigiohPreviewOnScriptLoaded();if(!IS_PREVIEW_EVENT){logger("preview 3");window.setTimeout(function(){logger("loadLightbox: settings_applied > IS_PREVIEW, "+LIGHTBOX_GUID_PREVIEW);loadLightbox(LIGHTBOX_GUID_PREVIEW);},500);}}}
var pref=getPagePref(hash.lightbox_id);if(EFFECTS[hash.lightbox_id].hasOwnProperty(pref+'responsive')&&EFFECTS[hash.lightbox_id][pref+'responsive'].use){if(EFFECTS[hash.lightbox_id].widget_type!=='inline'){var dims_box=getActualBoxWidthAndHeight(hash.lightbox_id);CURRENT_PAGE_DIMS_RESPONSIVE[hash.lightbox_id]={width:dims_box.width,height:dims_box.height};keepSendingResizeToChildUntilReceived({sender:'lightbox',action:'dimensions_changed',widget_type:EFFECTS[hash.lightbox_id].widget_type,width:dims_box.width,height:dims_box.height},hash.lightbox_id,100,0);}else{inlineResponsiveResizing(hash.lightbox_id,getLightboxDomId(hash.lightbox_id),(new Date().getTime()),0,0);}}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"processPostMessage");}}
function parsePostMessageResult(data){try{var hash={};if(data.indexOf('&')>0){var kvps=data.split('&');for(var x=0;x<kvps.length;x++){if(kvps[x].indexOf('=')>0){var kvp=kvps[x].split('=');hash[kvp[0]]=decodeURIComponent(kvp[1]);}}}else if(data.indexOf('=')>0){var kvp=data.split('=');hash[kvp[0]]=decodeURIComponent(kvp[1]);}
return hash;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"parsePostMessageResult");}}
function tryOpenAnotherLightbox(lid){window.setTimeout(function(){logger('tryOpenAnotherLightbox: loading another lightbox: '+lid);logger("loadLightbox: tryOpenAnotherLightbox, "+lid);loadLightbox(lid,true);IS_REDIRECTING_PARENT=false;},150);}
function getAnalyticsDataForSubmission(lid){try{var var_id='';if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lid)){var_id=lid;lid=DIGIOH_VARIATION_TO_BOX_MAP[lid];}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lid];}
var hash={is_preview:IS_PREVIEW,vendor_id:VENDOR_GUID,client_id:CLIENT_GUID,lightbox_id:lid,variation_id:var_id,referrer_url:document.referrer,page_url:document.location.href,geoip:{ip_address:DIGIOH_LIGHTBOX_ANALYTICS.VARS.ip_address,continent_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.continent,country_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.country,country_name:DIGIOH_LIGHTBOX_ANALYTICS.VARS.country_name,region_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.state,region_name:DIGIOH_LIGHTBOX_ANALYTICS.VARS.region_name,city:DIGIOH_LIGHTBOX_ANALYTICS.VARS.city,zipcode:DIGIOH_LIGHTBOX_ANALYTICS.VARS.zipcode,metro_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.metro_code,time_zone:DIGIOH_LIGHTBOX_ANALYTICS.VARS.time_zone,area_code:DIGIOH_LIGHTBOX_ANALYTICS.VARS.area_code,latitude:DIGIOH_LIGHTBOX_ANALYTICS.VARS.latitude,longitude:DIGIOH_LIGHTBOX_ANALYTICS.VARS.longitude},device:{hardware:DIGIOH_LIGHTBOX_ANALYTICS.VARS.device,os:DIGIOH_LIGHTBOX_ANALYTICS.VARS.operating_system,browser_type:DIGIOH_LIGHTBOX_ANALYTICS.VARS.browser_type,browser_version:DIGIOH_LIGHTBOX_ANALYTICS.VARS.browser_version},entry_point:{referrer_url:DIGIOH_LIGHTBOX_ANALYTICS.VARS.referring_website_url,landing_page_url:DIGIOH_LIGHTBOX_ANALYTICS.VARS.landing_page,landing_page_ip:DIGIOH_LIGHTBOX_ANALYTICS.VARS.landing_page_ip,landing_page_date:DIGIOH_LIGHTBOX_ANALYTICS.VARS.date_of_visit,web_source:DIGIOH_LIGHTBOX_ANALYTICS.VARS.web_source,past_visits:DIGIOH_LIGHTBOX_ANALYTICS.VARS.past_visits,page_visits:DIGIOH_LIGHTBOX_ANALYTICS.VARS.page_visits,search_engine:DIGIOH_LIGHTBOX_ANALYTICS.VARS.search_engine,utm_campaign_source:DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_source,utm_campaign_medium:DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_medium,utm_campaign_term:DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_term,utm_campaign_content:DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_content,utm_campaign_name:DIGIOH_LIGHTBOX_ANALYTICS.VARS.utm_campaign_name}};return hash;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getAnalyticsDataForSubmission");}}
function effectsHasTeaserDisplayFancybox(lbid){try{return(EFFECTS.hasOwnProperty(lbid)&&EFFECTS[lbid].hasOwnProperty("fancybox")&&EFFECTS[lbid]["fancybox"].hasOwnProperty("teaser")&&(EFFECTS[lbid].fancybox.teaser.display||EFFECTS[lbid].fancybox.teaser.display_on_page_load));}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"effectsHasTeaserDisplayFancybox");}}
function effectsHasTeaserDisplaySidebar(lbid){try{return(EFFECTS.hasOwnProperty(lbid)&&EFFECTS[lbid].hasOwnProperty("sidebar")&&EFFECTS[lbid]["sidebar"].hasOwnProperty("teaser")&&(EFFECTS[lbid].sidebar.teaser.display||EFFECTS[lbid].sidebar.teaser.display_on_page_load));}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"effectsHasTeaserDisplaySidebar");}}
function registerCloseSidebarTime(lbid){try{if(EFFECTS[lbid].sidebar.auto_close.time>0){window.setTimeout(function(){if(!PREVENT_SIDEBAR_CLOSE_GUIDS.hasOwnProperty(lbid)){closeSidebar(lbid);}},(1000*EFFECTS[lbid].sidebar.auto_close.time));}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"registerCloseSidebarTime");}}
function registerCloseSidebarScroll(lbid){try{if(EFFECTS[lbid].sidebar.auto_close.scroll_up>0||EFFECTS[lbid].sidebar.auto_close.scroll_down>0){ELIGIBLE_SIDEBAR_CLOSE_SCROLL_GUIDS[lbid]=Math.round(jqWin.scrollTop());if(!body.hasClass('sidebar-body-scroll')){body.addClass('sidebar-body-scroll');jqWin.scroll(function(){for(var key in ELIGIBLE_SIDEBAR_CLOSE_SCROLL_GUIDS){if(EFFECTS[key].sidebar.auto_close.scroll_up>0&&ELIGIBLE_SIDEBAR_CLOSE_SCROLL_GUIDS[key]-jqWin.scrollTop()>=EFFECTS[key].sidebar.auto_close.scroll_up){if(!PREVENT_SIDEBAR_CLOSE_GUIDS.hasOwnProperty(key)){closeSidebar(key);}}else if(EFFECTS[key].sidebar.auto_close.scroll_down>0&&jqWin.scrollTop()-ELIGIBLE_SIDEBAR_CLOSE_SCROLL_GUIDS[key]>=EFFECTS[key].sidebar.auto_close.scroll_down){if(!PREVENT_SIDEBAR_CLOSE_GUIDS.hasOwnProperty(key)){closeSidebar(key);}}}});}
logger("registerCloseSidebarScroll");}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"registerCloseSidebarScroll");}}
function registerCloseSidebarClick(lbid){try{if(EFFECTS[lbid].sidebar.auto_close.click){if(!body.hasClass('sidebar-body-click')){body.addClass('sidebar-body-click');}
JQUERY_DIGIOH('.sidebar-body-click').on(isMobile()?'touchstart':'mousedown',function(e){if(DIGIOH_API.LIGHTBOX.isMobile()){setTimeout(function(){closeSidebar(lbid);},150);}
else{setTimeout(function(){closeSidebar(lbid);},50);}});}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"registerCloseSidebarClick");}}
function debounce_leading(func,timeout=300){let timer;return(...args)=>{if(!timer){func.apply(this,args);}
clearTimeout(timer);timer=setTimeout(()=>{timer=undefined;},timeout);};}
function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;clearTimeout(timeout);timeout=setTimeout(function(){timeout=null;if(!immediate){func.apply(context,args);}},wait);if(immediate&&!timeout){func.apply(context,args);}};}
var closeBanner=function(lbid){try{var dom_id=getLightboxDomId(lbid);if(JQUERY_DIGIOH('#'+dom_id).length&&(!BANNER_CLOSE_MAP.hasOwnProperty(lbid)||BANNER_CLOSE_MAP[lbid]!=1)){BANNER_CLOSE_MAP[lbid]=1;setTimeout(function(){BANNER_CLOSE_MAP[lbid]=0;},1000);removeActiveBox(lbid);if(body.hasClass('sidebar-body-click')){JQUERY_DIGIOH(".sidebar-body-click").off();body.removeClass('sidebar-body-click');}
if(PREVENT_SIDEBAR_CLOSE_GUIDS.hasOwnProperty(lbid)){delete PREVENT_SIDEBAR_CLOSE_GUIDS[lbid];}
FOCUSED_SIDEBAR_BANNER_GUIDS[lbid]=false;if(ELIGIBLE_SIDEBAR_CLOSE_SCROLL_GUIDS.hasOwnProperty(lbid)){delete ELIGIBLE_SIDEBAR_CLOSE_SCROLL_GUIDS[lbid];}
keepSendingEventNotificationToChildUntilReceived({sender:'lightbox',action:'before_lightbox_close'},lbid,100,0);registerLightboxClose(lbid);JQUERY_DIGIOH('#'+dom_id).hide();if(!EFFECTS[lbid].banner.hasOwnProperty('placement')||EFFECTS[lbid].banner.placement!=='bottom'){if(JQUERY_DIGIOH("#banner-spacer-"+lbid).length){JQUERY_DIGIOH("#banner-spacer-"+lbid).remove();}}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"closeBanner");}};var closeSidebar=function(lbid){try{var dom_id=getLightboxDomId(lbid);stopBoxScrollMode(lbid);if(JQUERY_DIGIOH('#'+dom_id).length&&(!SIDEBAR_CLOSE_MAP.hasOwnProperty(lbid)||SIDEBAR_CLOSE_MAP[lbid]!=1)){SIDEBAR_CLOSE_MAP[lbid]=1;setTimeout(function(){SIDEBAR_CLOSE_MAP[lbid]=0;},1000);removeActiveBox(lbid);if(body.hasClass('sidebar-body-click')){JQUERY_DIGIOH(".sidebar-body-click").off();body.removeClass('sidebar-body-click');}
var bgScrollAccount=DIGIOH_API.getAccountMetadata('bgscroll_enable');var bgScroll=DIGIOH_API.getWidgetMetadata(lbid,'bgscroll_enable');if(bgScroll!=='true'&&bgScrollAccount!=='true'&&EFFECTS[lbid].sidebar.position==='center-center'){if(JQUERY_DIGIOH('html').hasClass('box_active_disable_scrolling')){JQUERY_DIGIOH('html').removeClass('box_active_disable_scrolling');}
if(JQUERY_DIGIOH('body').hasClass('box_active_disable_scrolling')){JQUERY_DIGIOH('body').removeClass('box_active_disable_scrolling');}
logger('bgscroll_reenable_on_close');}
if(PREVENT_SIDEBAR_CLOSE_GUIDS.hasOwnProperty(lbid)){delete PREVENT_SIDEBAR_CLOSE_GUIDS[lbid];}
FOCUSED_SIDEBAR_BANNER_GUIDS[lbid]=false;if(ELIGIBLE_SIDEBAR_CLOSE_SCROLL_GUIDS.hasOwnProperty(lbid)){delete ELIGIBLE_SIDEBAR_CLOSE_SCROLL_GUIDS[lbid];}
keepSendingEventNotificationToChildUntilReceived({sender:'lightbox',action:'before_lightbox_close'},lbid,100,0);if(EFFECTS[lbid].sidebar.hasOwnProperty('overlay')&&EFFECTS[lbid].sidebar.overlay){if(JQUERY_DIGIOH("#sidebar-overlay-"+dom_id).length){JQUERY_DIGIOH("#sidebar-overlay-"+dom_id).remove();}else if(JQUERY_DIGIOH(".fb_lightbox-overlay").length){JQUERY_DIGIOH(".fb_lightbox-overlay").remove();}}
var ca=getCloseAnimation(EFFECTS[lbid].sidebar,lbid);if(!ca){ca={};registerLightboxClose(lbid);JQUERY_DIGIOH('#'+dom_id).hide();}else{logger('DIGIOH: getCloseAnimation...');logger(ca);JQUERY_DIGIOH('#'+dom_id).animate(ca,{duration:EFFECTS[lbid].sidebar.speed.close,easing:EFFECTS[lbid].sidebar.easing.close,complete:function(){registerLightboxClose(lbid);JQUERY_DIGIOH('#'+dom_id).hide();}});}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"closeSidebar");}};var closeInline=function(lbid){try{if(JQUERY_DIGIOH.inArray(lbid,PRELOADED_LIGHTBOXES)>-1){var dom_id=getLightboxDomId(lbid);if(JQUERY_DIGIOH("#"+dom_id).length){setTimeout(function(){if(JQUERY_DIGIOH("#"+dom_id).length){JQUERY_DIGIOH("#"+dom_id).hide();JQUERY_DIGIOH("#"+dom_id).remove();DIGIOH_API.log('closeInline: '+dom_id);}},100);}
else{DIGIOH_API.log('closeInline_5::::'+lbid);}
removeActiveBox(lbid);keepSendingEventNotificationToChildUntilReceived({sender:'lightbox',action:'before_lightbox_close'},lbid,100,0);registerLightboxClose(lbid);if(DIGIOH_API.contains(DIGIOH_LIGHTBOX_INLINE_DISPLAYED,lbid)){DIGIOH_LIGHTBOX_INLINE_DISPLAYED=DIGIOH_API.remove(DIGIOH_LIGHTBOX_INLINE_DISPLAYED,lbid);}
else{}
if(DIGIOH_API.contains(PRELOADED_LIGHTBOXES,lbid)){PRELOADED_LIGHTBOXES=DIGIOH_API.remove(PRELOADED_LIGHTBOXES,lbid);}
else{}}
else{}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"closeInline");}};function openTeaser(teaser,lbid){try{var teaserId='teaser-'+lbid;TEASER_LIGHTBOX_GUIDS[teaserId]="open";if(!JQUERY_DIGIOH('#'+teaserId).length){body.append("<div id=\""+teaserId+"\" class=\""+teaserId+"\" style=\""+getTeaserStyle(teaser)+"\">"+teaser.text+"</div>");JQUERY_DIGIOH('#'+teaserId).css(getBackgroundStyle(teaser.background));JQUERY_DIGIOH('#'+teaserId).css(getBorderStyle(teaser.border));JQUERY_DIGIOH('#'+teaserId).css(getFontStyle(teaser.font));JQUERY_DIGIOH('#'+teaserId).click(function(){var lid=JQUERY_DIGIOH(this).attr('id').substring(7);closeTeaser(teaser,lid,true);});JQUERY_DIGIOH('#'+teaserId).mouseenter(function(){JQUERY_DIGIOH('#'+teaserId).css(getBackgroundStyle(teaser.background_hover));JQUERY_DIGIOH('#'+teaserId).css(getBorderStyle(teaser.border_hover));JQUERY_DIGIOH('#'+teaserId).css(getFontStyle(teaser.font_hover));}).mouseleave(function(){JQUERY_DIGIOH('#'+teaserId).css(getBackgroundStyle(teaser.background));JQUERY_DIGIOH('#'+teaserId).css(getBorderStyle(teaser.border));JQUERY_DIGIOH('#'+teaserId).css(getFontStyle(teaser.font));});JQUERY_DIGIOH('#'+teaserId).mousedown(function(){JQUERY_DIGIOH('#'+teaserId).css(getBackgroundStyle(teaser.background_focus));JQUERY_DIGIOH('#'+teaserId).css(getBorderStyle(teaser.border_focus));JQUERY_DIGIOH('#'+teaserId).css(getFontStyle(teaser.font_focus));}).mouseup(function(){JQUERY_DIGIOH('#'+teaserId).css(getBackgroundStyle(teaser.background_hover));JQUERY_DIGIOH('#'+teaserId).css(getBorderStyle(teaser.border_hover));JQUERY_DIGIOH('#'+teaserId).css(getFontStyle(teaser.font_hover));});}
var oa=getTeaserOpenAnimation(teaser);JQUERY_DIGIOH('#'+teaserId).animate({top:oa.top,left:oa.left,right:oa.right,bottom:oa.bottom},{duration:500,easing:"swing",complete:function(){}});}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"openTeaser");}}
function closeTeaser(teaser,lbid,triggerLightboxLoad){try{if(JQUERY_DIGIOH('#teaser-'+lbid).length){var ca=getTeaserCloseAnimation(teaser);if(!ca)ca={};JQUERY_DIGIOH('#teaser-'+lbid).animate({top:ca.top,left:ca.left,right:ca.right,bottom:ca.bottom},{duration:100,easing:"swing",complete:function(){JQUERY_DIGIOH('#teaser-'+lbid).remove();if(triggerLightboxLoad){logger("loadLightbox: closeTeaser, "+lbid);loadLightbox(lbid);}}});}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"closeTeaser");}}
function getTeaserCloseAnimation(teaser){try{var pos=teaser.position.split('-');var posx=pos[1];var posy=pos[0];var ca={};if(posx=='left'){if(posy=='top'){ca.left="-="+(teaser.width+teaser.offset_x)+"px";}else if(posy=='center'){ca.left="-="+(teaser.width+teaser.offset_x)+"px";}else if(posy=='bottom'){ca.bottom="-="+(teaser.height+teaser.offset_y)+"px";}}else if(posx=='center'){if(posy=='top'){ca.top="-="+(teaser.height+teaser.offset_y)+"px";}else if(posy=='bottom'){ca.bottom="-="+(teaser.height+teaser.offset_y)+"px";}}else if(posx=='right'){if(posy=='top'){ca.right="-="+(teaser.width+teaser.offset_x)+"px";}else if(posy=='center'){ca.right="-="+(teaser.width+teaser.offset_x)+"px";}else if(posy=='bottom'){ca.bottom="-="+(teaser.height+teaser.offset_y)+"px";}}
return ca;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getTeaserCloseAnimation");}}
function getTeaserOpenAnimation(teaser){try{var pos=teaser.position.split('-');var posx=pos[1];var posy=pos[0];var oa={};if(posx=='left'){if(posy=='top'){oa.left="+="+(teaser.width+teaser.offset_x)+"px";}else if(posy=='center'){oa.left="+="+(teaser.width+teaser.offset_x)+"px";}else if(posy=='bottom'){oa.bottom="+="+(teaser.height+teaser.offset_y)+"px";}}else if(posx=='center'){if(posy=='top'){oa.top="+="+(teaser.height+teaser.offset_y)+"px";}else if(posy=='bottom'){oa.bottom="+="+(teaser.height+teaser.offset_y)+"px";}}else if(posx=='right'){if(posy=='top'){oa.right="+="+(teaser.width+teaser.offset_x)+"px";}else if(posy=='center'){oa.right="+="+(teaser.width+teaser.offset_x)+"px";}else if(posy=='bottom'){oa.bottom="+="+(teaser.height+teaser.offset_y)+"px";}}
return oa;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getTeaserOpenAnimation");}}
function getTeaserStyle(teaser){try{var str="cursor: pointer; z-index: 9948030; ";str+="position: "+teaser.css_positioning+"; ";str+="width: "+teaser.width+"px; ";str+="height: "+teaser.height+"px; ";str+="padding-top: "+teaser.padding.top+"px; ";str+="padding-right: "+teaser.padding.right+"px; ";str+="padding-bottom: "+teaser.padding.bottom+"px; ";str+="padding-left: "+teaser.padding.left+"px; ";var pos=teaser.position.split('-');var posx=pos[1];var posy=pos[0];if(posx=='left'){if(posy=='top'){str+="left: -"+(teaser.width)+"px; ";str+="top: "+(teaser.offset_y)+"px; ";}else if(posy=='center'){str+="left: -"+(teaser.width)+"px; ";str+="top: 50%; margin-top: -"+(Math.round(teaser.height/2)+teaser.offset_y)+"px; ";}else if(posy=='bottom'){str+="left: "+(teaser.offset_x)+"px; ";str+="bottom: -"+(teaser.height)+"px; ";}}else if(posx=='center'){if(posy=='top'){str+="left: 50%; margin-left: -"+(Math.round(teaser.width/2)+teaser.offset_x)+"px; ";str+="top: -"+(teaser.height)+"px; ";}else if(posy=='bottom'){str+="left: 50%; margin-left: -"+(Math.round(teaser.width/2)+teaser.offset_x)+"px; ";str+="bottom: -"+(teaser.height)+"px; ";}}else if(posx=='right'){if(posy=='top'){str+="right: -"+(teaser.width)+"px; ";str+="top: "+(teaser.offset_y)+"px; ";}else if(posy=='center'){str+="right: -"+(teaser.width)+"px; ";str+="top: 50%; margin-top: -"+(Math.round(teaser.height/2)+teaser.offset_y)+"px; ";}else if(posy=='bottom'){str+="right: "+(teaser.offset_x)+"px; ";str+="bottom: -"+(teaser.height)+"px; ";}}
return str;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getTeaserStyle");}}
function getFontStyle(propFont){try{var hash={};hash["font-family"]=propFont.family;hash["font-weight"]=(propFont.bold?"bold":"normal");hash["font-style"]=(propFont.italic?"italic":"normal");hash["text-decoration"]=(propFont.underline?"underline":"none");hash["text-transform"]=(propFont.uppercase?"uppercase":"none");hash["text-align"]=propFont.align;hash["font-size"]=propFont.size+"px";hash["color"]=propFont.color;return hash;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getFontStyle");}}
function getBorderStyle(propBorder){try{var hash={};if(propBorder.style==='none'||propBorder.width==='0'||propBorder.width===0){hash["border-style"]='none';hash["border-width"]='0px';hash["border-color"]='transparent';hash["border-radius"]='0px';}else{hash["border-color"]=propBorder.color;hash["border-style"]=propBorder.style;hash["border-width"]=propBorder.width+'px';hash["border-radius"]=propBorder.radius+'px';}
return hash;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getBorderStyle");}}
function getBackgroundStyle(propBackground){try{var hash={};if(propBackground.use_image&&propBackground.image.length>3&&propBackground.image!='none'){hash["background-image"]="url("+DIGIOH_API.CONFIG.S3_BASE_URL+"/vendors/"+VENDOR_GUID+"/uploads/"+propBackground.image+")";hash["background-position"]=propBackground.position;hash["background-color"]=propBackground.color;if(propBackground.repeat==='stretch'){hash["-webkit-background-size"]='cover';hash["-moz-background-size"]='cover';hash["-o-background-size"]='cover';hash["background-size"]='cover';}else{hash["background-repeat"]=propBackground.repeat;}}
else if(propBackground.use_gradient&&propBackground.gradient.length>3){hash["background-image"]="none";if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.browser_type=="Chrome")
hash["background"]="-webkit-gradient(linear, left top, left bottom, from("+propBackground.color+"),to("+propBackground.gradient+"))";else if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.browser_type=="Safari")
hash["background"]="-webkit-linear-gradient(top, "+propBackground.color+","+propBackground.gradient+")";else if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.browser_type=="Opera")
hash["background"]="-o-linear-gradient(top, "+propBackground.color+","+propBackground.gradient+")";else if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.browser_type=="Firefox")
hash["background"]="-moz-linear-gradient(top, "+propBackground.color+","+propBackground.gradient+")";else if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.browser_type=="Internet Explorer")
hash["background"]="-ms-linear-gradient(top, "+propBackground.color+","+propBackground.gradient+")";else
hash["background"]="linear-gradient(to bottom,"+propBackground.color+","+propBackground.gradient+")";}
else{hash["background-image"]="none";hash["background-color"]=propBackground.color;}
return hash;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getBackgroundStyle");}}
function getCloseButtonStyle(prop,widget_type,lbid){try{var str="position: absolute; width: 36px; height: 36px; cursor: pointer; z-index: 9948040; background-image: url("+CLOSE_BUTTON_URL+");";if(typeof lbid==='string'&&lbid&&EFFECTS.hasOwnProperty(lbid)){if(EFFECTS[lbid].widget_type&&EFFECTS[lbid].widget_type!=='inline'&&EFFECTS[lbid][EFFECTS[lbid].widget_type].hasOwnProperty('close_button_image')&&EFFECTS[lbid][EFFECTS[lbid].widget_type].close_button_image.length>30){var btnsrc=DIGIOH_API.CONFIG.S3_BASE_URL+'/vendors/'+DIGIOH_API.getAccountGuid()+'/uploads/'+EFFECTS[lbid][EFFECTS[lbid].widget_type].close_button_image;str="position: absolute; width: 36px; height: 36px; cursor: pointer; z-index: 9948040; background-image: url("+btnsrc+"); background-repeat: no-repeat; background-size: auto; background-position: center center;";}}
if(prop.display&&widget_type!="sidebar")str+="display: block; ";else str+="display: none; ";if(prop.position=='top-left'){str+="top: "+prop.offset_y+"px; ";str+="left: "+prop.offset_x+"px; ";}else if(prop.position=='top-right'){str+="top: "+prop.offset_y+"px; ";str+="right: "+prop.offset_x+"px; ";}else if(prop.position=='bottom-left'){str+="bottom: "+prop.offset_y+"px; ";str+="left: "+prop.offset_x+"px; ";}else if(prop.position=='bottom-right'){str+="bottom: "+prop.offset_y+"px; ";str+="right: "+prop.offset_x+"px; ";}
return str;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getCloseButtonStyle");}}
var setBoxToScrollMode=function(lid,page,event){try{var $=JQUERY_DIGIOH;DIGIOH_API.scroll_mode_data=DIGIOH_API.scroll_mode_data||{};if(typeof page=='undefined'){page='main';}
if(typeof event==='string'&&event==='window_resize'&&DIGIOH_API.scroll_mode_data&&DIGIOH_API.scroll_mode_data.lid){lid=DIGIOH_API.scroll_mode_data.lid;}
if(typeof event==='string'&&event==='change_pages'&&$('#lightbox-override').length){logger('setBoxToScrollMode:  Box page changed, forcing browser to scroll to the top of the box: '+page);$('#lightbox-override')[0].scrollTop=0;}
if(typeof lid==="string"&&lid.length>0&&!isActiveBox(lid)){return;}
if((DIGIOH_API.LIGHTBOX.getActiveLightboxDomId()!=""||$('#lightbox-override').length)&&DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS.hasOwnProperty(lid)&&DIGIOH_LIGHTBOX_EFFECTS.hasOwnProperty(lid)&&DIGIOH_LIGHTBOX_EFFECTS[lid].widget_type=="sidebar"){if(typeof DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid]==='string'&&DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid].length>50&&DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid].indexOf('{')<0){DIGIOH_API.scroll_mode_data.settings=JSON.parse(DIGIOH_API.LIGHTBOX.LZString.decompressFromBase64(DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid]));}else if(typeof DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid]==='string'&&DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid].length>50&&DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid].indexOf('{')>=0){DIGIOH_API.scroll_mode_data.settings=JSON.parse(DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid]);}else{DIGIOH_API.scroll_mode_data.settings=DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lid];}
var activeBreakpoint=1000000;DIGIOH_API.scroll_mode_data.responsive_breakpoint_in_use=false;if(typeof DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS==='object'&&DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS&&DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS.hasOwnProperty(lid)&&DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS[lid]){Object.keys(DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS[lid]).forEach(function(key){if(DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS[lid].hasOwnProperty(key)&&$(window).width()<parseInt(key)&&parseInt(key)<activeBreakpoint){activeBreakpoint=parseInt(key);}});}
if(activeBreakpoint<100000&&DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS[lid].hasOwnProperty(activeBreakpoint.toString())){if(!DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS[lid][activeBreakpoint.toString()].hasOwnProperty('scrolling')||!DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS[lid][activeBreakpoint.toString()]['scrolling']['use']){logger("setBoxToScrollMode: scrolling was off for breakpoint ("+activeBreakpoint+") "+lid);stopBoxScrollMode(lid);return false;}
logger("setBoxToScrollMode: scrolling was on for breakpoint ("+activeBreakpoint+") "+lid);DIGIOH_API.scroll_mode_data.responsive_breakpoint_in_use=true;DIGIOH_API.scroll_mode_data.settings=DIGIOH_API.DIGIOH_PIXEL_THRESHOLDS[lid][activeBreakpoint.toString()];}
else if(typeof DIGIOH_API.scroll_mode_data.settings!=='object'||!DIGIOH_API.scroll_mode_data.settings||!DIGIOH_API.scroll_mode_data.settings.hasOwnProperty('scrolling')||!DIGIOH_API.scroll_mode_data.settings.scrolling.use){logger("setBoxToScrollMode: scrolling was off for sidebar "+lid);stopBoxScrollMode(lid);return false;}
DIGIOH_API.scroll_mode_data.is_scroll_box_active=true;if(lid){DIGIOH_API.scroll_mode_data.lid=lid;}
var layoutName=page=="main"?"layout":page+"layout";DIGIOH_API.scroll_mode_data.currentPage=page;if(!$('#lightbox-override').length){$('#'+DIGIOH_API.LIGHTBOX.getLightboxDomId(lid)).attr('id','lightbox-override').attr('style','');logger('setBoxToScrollMode:  going to override the box positioning');}
else{logger('setBoxToScrollMode:  updating scroll box positioning: '+DIGIOH_API.scroll_mode_data.settings.scrolling.use+', '+DIGIOH_API.scroll_mode_data.responsive_breakpoint_in_use);}
DIGIOH_API.scroll_mode_data.pageUpdate=page;scrollModeSetCSSSettings(DIGIOH_API.scroll_mode_data.settings);$("head,body").addClass("digioh_overlay_style");$('#lightbox-override').css('height',$(window).height()+"px").css('width',$(window).width()+"px").css('margin-left','unset').css('margin-top','unset').css('top',$(window).scrollTop()+'px');$('#lightbox-override iframe').attr('style','').attr('data-layout',layoutName).addClass('digioh_override');if(CURRENT_PAGE&&CURRENT_PAGE.hasOwnProperty(lid)&&$('#lightbox-override iframe.digioh_override').length){var pg=CURRENT_PAGE[lid].replace('_','');if(pg=='main')pg='';$('#lightbox-override iframe.digioh_override').attr('data-layout',pg+'layout');logger('setBoxToScrollMode:  data-layout set to page: '+pg);}
if($("#lightbox-override > iframe[id^='lightbox-iframe-']").contents().find("button[custom_close_btn]").length){$("#lightbox-override > iframe[id^='lightbox-iframe-']").contents().find("button[custom_close_btn]").on(DIGIOH_API.LIGHTBOX.isMobile()?'touchend':'click',function(){if(DIGIOH_API.LIGHTBOX.isMobile()){setTimeout(function(){closeSidebar(lid);},150);}
else{setTimeout(function(){closeSidebar(lid);},50);}});}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"setBoxToScrollMode");return 1;}}
var stopBoxScrollMode=function(lid){try{if(DIGIOH_API.hasOwnProperty('scroll_mode_data')&&DIGIOH_API.scroll_mode_data.hasOwnProperty('is_scroll_box_active')&&DIGIOH_API.scroll_mode_data.is_scroll_box_active){delete DIGIOH_API.scroll_mode_data.settings;delete DIGIOH_API.scroll_mode_data.pageUpdate;delete DIGIOH_API.scroll_mode_data.currentPage;delete DIGIOH_API.scroll_mode_data.is_scroll_box_active;JQUERY_DIGIOH('#digioh_element_styles').remove();JQUERY_DIGIOH("head,body").removeClass("digioh_overlay_style");JQUERY_DIGIOH("#lightbox-override iframe").removeClass("digioh_override").removeAttr('data-layout');JQUERY_DIGIOH('#lightbox-override').attr('id',DIGIOH_API.LIGHTBOX.getLightboxDomId(lid));logger('stopBoxScrollMode');}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"stopBoxScrollMode");}}
function scrollModeSetCSSSettings(settings){if(typeof settings!='object'||!settings||!settings.hasOwnProperty('layout')){logger('setBoxToScrollMode: missing settings object in scrollModeSetCSSSettings');return false;}
var css_str=".digioh_overlay_style {";css_str+="position: fixed !important;";css_str+="top: 0 !important;";css_str+="right: 0 !important;";css_str+="bottom: 0 !important;";css_str+="left: 0 !important;";css_str+="-webkit-overflow-scrolling: touch !important;";css_str+="margin-top: 0 !important;";css_str+="margin-bottom: 0 !important;";css_str+="-webkit-transition: none !important;";css_str+="transition: none !important;";css_str+="overflow: hidden !important;";css_str+="}";css_str+=".digioh_overlay_style .preloaded_lightbox {";css_str+="position: fixed !important;";css_str+="top: 0 !important;";css_str+="right: 0 !important;";css_str+="left: 0 !important;";css_str+="bottom: 0 !important;";css_str+="overflow-x: hidden !important;";css_str+="overflow-y: auto !important;";css_str+="text-align: center !important;";css_str+="z-index: 9948030 !important;";css_str+="}";css_str+=".digioh_overlay_style .fb_lightbox-overlay-fixed {";css_str+="z-index: 9847010 !important;";css_str+="}";css_str+=".digioh_overlay_style .sidebar-iframe-close {";css_str+="display: none !important;";css_str+="}";Object.keys(settings).forEach(function(key){if(key.match(/(layout|ep1layout|ep2layout|ep3layout|ep4layout|thxlayout)$/)){var top=35;if(settings.hasOwnProperty('scrolling')&&settings['scrolling'].use&&settings['scrolling'].hasOwnProperty('top')){top=settings['scrolling'].top;}
css_str+=".digioh_overlay_style .preloaded_lightbox .digioh_override[data-layout=\""+key+"\"]{";css_str+="position: absolute !important;";css_str+="width: "+settings[key].width+"px !important;";css_str+="height: "+(settings[key].height+35)+"px !important;";css_str+="top: "+top+"px !important;";css_str+="left: 50% !important;";css_str+="margin-left: -"+(settings[key].width/2)+"px !important;";css_str+="z-index: 9948031 !important;";css_str+="}";}});if(!DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH('#digioh_element_styles').length){DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH('head').append('<style id="digioh_element_styles" type="text/css">'+css_str+'</style>');}else{DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH('#digioh_element_styles').html(css_str);}
return true;};function getResponsiveScaleMultiplier(lid){try{var pref=getPagePref(lid);if(EFFECTS[lid].hasOwnProperty(pref+'scaling')&&EFFECTS[lid][pref+'scaling'].use===true){var ww=JQUERY_DIGIOH(window).width();var wh=JQUERY_DIGIOH(window).height();var bw=getBoxWidth(lid);var bh=getBoxHeight(lid);var scale=EFFECTS[lid][pref+'scaling'];if(scale.max_type&&scale.max_type==='pct'){if(scale.max_width_pct){ww=ww*scale.max_width_pct/100;}
if(scale.max_height_pct){wh=wh*scale.max_height_pct/100;}}else if(scale.max_type&&scale.max_type==='abs'){if(scale.max_width&&scale.max_width<ww){ww=scale.max_width;}
if(scale.max_height&&scale.max_height<wh){wh=scale.max_height;}}else if(scale.max_type&&scale.max_type==='win'){}
var mh=wh/bh;var mw=ww/bw;var m=1;if(mh<mw){m=mh;}else{m=mw;}
return m;}
else{return 1;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getResponsiveScaleMultiplier");return 1;}}
function getResponsiveScale(lid){try{var pref=getPagePref(lid);if(EFFECTS[lid].hasOwnProperty(pref+'scaling')&&EFFECTS[lid][pref+'scaling'].use===true){var m=getResponsiveScaleMultiplier(lid);var str='';str+='-webkit-transform: scale('+m+');';str+='-moz-transform: scale('+m+');';str+='-ms-transform: scale('+m+');';str+='-o-transform: scale('+m+');';str+='transform: scale('+m+');';if(EFFECTS[lid].widget_type==='banner'&&EFFECTS[lid].banner.placement==='bottom'){str+='transform-origin: 50% 100%;';}else if(EFFECTS[lid].widget_type==='banner'&&EFFECTS[lid].banner.placement==='top'){str+='transform-origin: 50% 0%;';}
if(EFFECTS[lid].widget_type==='sidebar'&&EFFECTS[lid].sidebar.position==='top-left'){str+='transform-origin: 0% 0%;';}else if(EFFECTS[lid].widget_type==='sidebar'&&EFFECTS[lid].sidebar.position==='top-center'){str+='transform-origin: 50% 0%;';}else if(EFFECTS[lid].widget_type==='sidebar'&&EFFECTS[lid].sidebar.position==='top-right'){str+='transform-origin: 100% 0%;';}
else if(EFFECTS[lid].widget_type==='sidebar'&&EFFECTS[lid].sidebar.position==='center-left'){str+='transform-origin: 0% 50%;';}else if(EFFECTS[lid].widget_type==='sidebar'&&EFFECTS[lid].sidebar.position==='center-center'){str+='transform-origin: 50% 50%;';}else if(EFFECTS[lid].widget_type==='sidebar'&&EFFECTS[lid].sidebar.position==='center-right'){str+='transform-origin: 100% 50%;';}
else if(EFFECTS[lid].widget_type==='sidebar'&&EFFECTS[lid].sidebar.position==='bottom-left'){str+='transform-origin: 0% 100%;';}else if(EFFECTS[lid].widget_type==='sidebar'&&EFFECTS[lid].sidebar.position==='bottom-center'){str+='transform-origin: 50% 100%;';}else if(EFFECTS[lid].widget_type==='sidebar'&&EFFECTS[lid].sidebar.position==='bottom-right'){str+='transform-origin: 100% 100%;';}
return str;}
else{return '';}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getResponsiveScale");return '';}}
function getResponsiveScaleInline(lid,dom_id){try{var pref=getPagePref(lid);if(EFFECTS[lid].hasOwnProperty(pref+'scaling')&&EFFECTS[lid][pref+'scaling'].use===true){var ww=JQUERY_DIGIOH('#'+dom_id).parent().width();var wh=JQUERY_DIGIOH('#'+dom_id).parent().height();var bw=getBoxWidth(lid);var bh=getBoxHeight(lid);var scale=EFFECTS[lid][pref+'scaling'];if(scale.max_type&&scale.max_type==='pct'){if(scale.max_width_pct){ww=ww*scale.max_width_pct/100;}
if(scale.max_height_pct){wh=wh*scale.max_height_pct/100;}}else if(scale.max_type&&scale.max_type==='abs'){if(scale.max_width&&scale.max_width<ww){ww=scale.max_width;}
if(scale.max_height&&scale.max_height<wh){wh=scale.max_height;}}else if(scale.max_type&&scale.max_type==='win'){}
var mh=wh/bh;var mw=ww/bw;var m=1;if(mh<mw){m=mh;}else{m=mw;}
var str='';str+='-webkit-transform: scale('+m+');';str+='-moz-transform: scale('+m+');';str+='-ms-transform: scale('+m+');';str+='-o-transform: scale('+m+');';str+='transform: scale('+m+');';return str;}
else{return '';}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getResponsiveScaleInline");return '';}}
function getBannerPosition(prop,lid){try{var css_pos='';if(prop.hasOwnProperty('placement')&&prop.placement==='bottom'){css_pos="fixed";}else if(prop.css_positioning=="fixed"&&isMobile()){css_pos=prop.css_positioning;}else{css_pos=prop.css_positioning;}
var str="position: "+css_pos+"; ";var dims_box=getActualBoxWidthAndHeight(lid);str+="width: "+dims_box.width+"px; ";str+="height: "+dims_box.height+"px; ";str+="z-index: 9948030; ";str+="left: 50%; margin-left: -"+Math.round(dims_box.width/2)+"px; ";str+=getResponsiveScale(lid);if(css_pos==="fixed"){if(prop.hasOwnProperty('placement')&&prop.placement==='bottom'){str+="bottom: 0px; ";}else{str+="top: 0px; ";}}else{var st=jqWin.scrollTop();if(prop.hasOwnProperty('placement')&&prop.placement==='bottom'){str+="bottom: 0px; ";}else if(prop.hasOwnProperty('placement')&&prop.placement==='top'){str+="top: 0px; ";}}
if(EFFECTS[lid]['banner'].hasOwnProperty('css')&&typeof EFFECTS[lid]['banner']['css']==='string'&&EFFECTS[lid]['banner']['css'].indexOf(':')>0){str+=EFFECTS[lid]['banner']['css'];}
return str;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getBannerPosition");}}
function getSidebarPosition(prop,lid){try{var css_pos='';if(prop.css_positioning=="fixed"&&isMobile()){css_pos=prop.css_positioning;}else{css_pos=prop.css_positioning;}
css_pos='fixed';var str="position: "+css_pos+"; ";var actualWindowWidthPixels=JQUERY_DIGIOH(window).width();var actualWindowHeightPixels=JQUERY_DIGIOH(window).height();var dims_box=getActualBoxWidthAndHeight(lid);str+="width: "+dims_box.width+"px; ";str+="height: "+dims_box.height+"px; ";str+="z-index: 9948030; ";str+=getResponsiveScale(lid);var pos=prop.position.split('-');var posx=pos[1];var posy=pos[0];if(css_pos==="fixed"){var offset_x=-1*Math.round(dims_box.width/2);var offset_y=-1*Math.round(dims_box.height/2);if(prop.hasOwnProperty('offset')&&prop.offset.hasOwnProperty('left')){if(prop.offset.left==0){offset_x=-1*(actualWindowWidthPixels/2)+30;}
else if(prop.offset.left==10){offset_x=1*(actualWindowWidthPixels/2)-dims_box.width-30;}
else if(prop.offset.left<5){offset_x=((prop.offset.left-5)/5)*((actualWindowWidthPixels/2)-Math.round(dims_box.width/2))-Math.round(dims_box.width/2);}
else if(prop.offset.left>5){offset_x=((prop.offset.left-5)/5)*((actualWindowWidthPixels/2)-Math.round(dims_box.width/2))-Math.round(dims_box.width/2);}}
if(prop.hasOwnProperty('offset')&&prop.offset.hasOwnProperty('top')){if(prop.offset.top==0){offset_y=-1*(actualWindowHeightPixels/2)+30;}
else if(prop.offset.top==10){offset_y=1*(actualWindowHeightPixels/2)-dims_box.height-30;}
else if(prop.offset.top<5){offset_y=((prop.offset.top-5)/5)*((actualWindowHeightPixels/2)-Math.round(dims_box.height/2))-Math.round(dims_box.height/2);}
else if(prop.offset.top>5){offset_y=((prop.offset.top-5)/5)*((actualWindowHeightPixels/2)-Math.round(dims_box.height/2))-Math.round(dims_box.height/2);}}
if(prop.animation.open=="slideUp"){str+="top: "+Math.ceil(actualWindowHeightPixels)+"px; ";}else if(prop.animation.open=="slideDown"){str+="top: "+Math.ceil(-1*dims_box.height)+"px; ";}else if(prop.animation.open=="slideRight"){str+="left: "+Math.ceil(-1*dims_box.width)+"px; ";}else if(prop.animation.open=="slideLeft"){str+="left: "+Math.ceil(actualWindowWidthPixels)+"px; ";}
if(prop.animation.open=="slideUp"||prop.animation.open=="slideDown"){if(posx=='left')str+="left: 0px; ";else if(posx=='center')str+="left: 50%; margin-left: "+offset_x+"px; ";else if(posx=='right')str+="right: 0px; ";}else if(prop.animation.open=="slideLeft"||prop.animation.open=="slideRight"){if(posy=='top')str+="top: 0px; ";else if(posy=='center')str+="top: 50%; margin-top: "+offset_y+"px; ";else if(posy=='bottom')str+="bottom: 0px; ";}else if(prop.animation.open=="fade"||prop.animation.open=="elastic"){if(posx=='left')str+="left: 0px; ";else if(posx=='center')str+="left: 50%; margin-left: "+offset_x+"px; ";else if(posx=='right')str+="right: 0px; ";if(posy=='top')str+="top: 0px; ";else if(posy=='center')str+="top: 50%; margin-top: "+offset_y+"px; ";else if(posy=='bottom')str+="bottom: 0px; ";}}else{var st=jqWin.scrollTop();if(prop.animation.open=="slideUp"){str+="top: "+Math.ceil(actualWindowHeightPixels+st)+"px; ";}else if(prop.animation.open=="slideDown"){str+="top: "+(Math.ceil(st)+Math.ceil(-1*dims_box.height))+"px; ";}else if(prop.animation.open=="slideRight"){str+="left: "+Math.ceil(-1*dims_box.width)+"px; ";}else if(prop.animation.open=="slideLeft"){str+="left: "+Math.ceil(actualWindowWidthPixels)+"px; ";}
if(prop.animation.open=="slideUp"||prop.animation.open=="slideDown"){if(posx=='left')str+="left: 0px; ";else if(posx=='center')str+="left: "+(Math.round(jqWin.width()/2)-Math.round(dims_box.width/2))+"px; ";else if(posx=='right')str+="left: "+Math.ceil(jqWin.width()-dims_box.width)+"px; ";}else if(prop.animation.open=="slideLeft"||prop.animation.open=="slideRight"){if(posy=='top')str+="top: "+Math.ceil(st)+"px; ";else if(posy=='center')str+="top: "+(Math.ceil(st)+Math.round(actualWindowHeightPixels/2)-Math.round(dims_box.height/2))+"px; ";else if(posy=='bottom')str+="top: "+Math.ceil(st+jqWin.height()-dims_box.height)+"px; ";}else if(prop.animation.open=="fade"||prop.animation.open=="elastic"){if(posx=='left')str+="left: 0px; ";else if(posx=='center')str+="left: "+(Math.round(jqWin.width()/2)-Math.round(dims_box.width/2))+"px; ";else if(posx=='right')str+="left: "+Math.ceil(jqWin.width()-dims_box.width)+"px; ";if(posy=='top')str+="top: "+Math.ceil(st)+"px; ";else if(posy=='center')str+="top: "+(Math.ceil(st)+Math.round(actualWindowHeightPixels/2)-Math.round(dims_box.height/2))+"px; ";else if(posy=='bottom')str+="top: "+Math.ceil(st+jqWin.height()-dims_box.height)+"px; ";}}
if(EFFECTS[lid]['sidebar'].hasOwnProperty('css')&&typeof EFFECTS[lid]['sidebar']['css']==='string'&&EFFECTS[lid]['sidebar']['css'].indexOf(':')>0){str+=EFFECTS[lid]['sidebar']['css'];}
return str;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getSidebarPosition");}}
function getSidebarPositionAfterAnimation(prop,lid){try{var css_pos='';if(prop.css_positioning=="fixed"&&isMobile()){css_pos=prop.css_positioning;}else{css_pos=prop.css_positioning;}
var str="position: "+css_pos+"; ";var actualWindowWidthPixels=JQUERY_DIGIOH(window).width();var actualWindowHeightPixels=JQUERY_DIGIOH(window).height();var dims_box=getActualBoxWidthAndHeight(lid);str+="width: "+dims_box.width+"px; ";str+="height: "+dims_box.height+"px; ";str+="z-index: 9948030; ";str+=getResponsiveScale(lid);var pos=prop.position.split('-');var posx=pos[1];var posy=pos[0];var st=jqWin.scrollTop();if(css_pos==="fixed"){var offset_x=(Math.round(jqWin.width()/2)-Math.round(dims_box.width/2));var offset_y=(Math.round(jqWin.height()/2)-Math.round(dims_box.height/2));if(prop.hasOwnProperty('offset')&&prop.offset.hasOwnProperty('left')){if(prop.offset.left==0){offset_x=30;}
else if(prop.offset.left==10){offset_x=actualWindowWidthPixels-dims_box.width-30;}
else if(prop.offset.left<5){offset_x=(prop.offset.left/5)*((actualWindowWidthPixels/2)-Math.round(dims_box.width/2));}
else if(prop.offset.left>5){offset_x=((prop.offset.left-5)/5)*((actualWindowWidthPixels/2)-Math.round(dims_box.width/2))+(actualWindowWidthPixels/2)-Math.round(dims_box.width/2);}}
if(prop.hasOwnProperty('offset')&&prop.offset.hasOwnProperty('top')){if(prop.offset.top==0){offset_y=30;}
else if(prop.offset.top==10){offset_y=actualWindowHeightPixels-dims_box.height-30;}
else if(prop.offset.top<5){offset_y=(prop.offset.top/5)*((actualWindowHeightPixels/2)-Math.round(dims_box.height/2));}
else if(prop.offset.top>5){offset_y=((prop.offset.top-5)/5)*((actualWindowHeightPixels/2)-Math.round(dims_box.height/2))+(actualWindowHeightPixels/2)-Math.round(dims_box.height/2);}}
if(posx=='left')str+="left: 0px; ";else if(posx=='center')str+="left: "+offset_x+"px; ";else if(posx=='right')str+="left: "+Math.ceil(jqWin.width()-dims_box.width)+"px; ";if(posy=='top')str+="top: 0px; ";else if(posy=='center')str+="top: "+offset_y+"px; ";else if(posy=='bottom')str+="bottom: 0px; ";}else{if(posx=='left')str+="left: 0px; ";else if(posx=='center')str+="left: "+(Math.round(jqWin.width()/2)-Math.round(dims_box.width/2))+"px; ";else if(posx=='right')str+="left: "+Math.ceil(jqWin.width()-dims_box.width)+"px; ";if(posy=='top')str+="top: "+Math.ceil(st)+"px; ";else if(posy=='center')str+="top: "+(Math.ceil(st)+Math.round(jqWin.height()/2)-Math.round(dims_box.height/2))+"px; ";else if(posy=='bottom')str+="top: "+Math.ceil(st+jqWin.height()-dims_box.height)+"px; ";}
if(EFFECTS[lid]['sidebar'].hasOwnProperty('css')&&typeof EFFECTS[lid]['sidebar']['css']==='string'&&EFFECTS[lid]['sidebar']['css'].indexOf(':')>0){str+=EFFECTS[lid]['sidebar']['css'];}
return str;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getSidebarPositionAfterAnimation");}}
function setSidebarPositionBeforeClose(lid){try{var css_pos='fixed';var str="position: "+css_pos+"; ";var dom_id=getLightboxDomId(lid);var dom_ele=JQUERY_DIGIOH('#'+dom_id);var offset=dom_ele.offset();logger('setSidebarPositionBeforeClose ==> offset: ');logger(offset);var st=jqWin.scrollTop();var top=Math.ceil(offset.top-st)+'px';var left=Math.ceil(offset.left)+'px';logger('top: '+top+', left: '+left);dom_ele.css({'position':'fixed',"left":left,"top":top});}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"setSidebarPositionBeforeClose");}}
function getSidebarPositionMobileFocused(prop,lid){try{var str="";if(DIGIOH_API.hasOwnProperty('scroll_mode_data')&&DIGIOH_API.scroll_mode_data.hasOwnProperty('is_scroll_box_active')&&DIGIOH_API.scroll_mode_data.is_scroll_box_active===true)
{return str;}
str+="position: absolute; ";var dims_box=getActualBoxWidthAndHeight(lid);str+="width: "+dims_box.width+"px; ";str+="height: "+dims_box.height+"px; ";str+="z-index: 9948030; ";str+="left: 50%; margin-left: -"+Math.round(dims_box.width/2)+"px; ";str+=getResponsiveScale(lid);var top=JQUERY_DIGIOH(window).scrollTop();var m=getResponsiveScaleMultiplier(lid);if(m>1){top=top+((dims_box.height*m)-dims_box.height);}
else if(m<1){top=top-(dims_box.height-(dims_box.height*m));}
str+="top: "+top+'px;';if(EFFECTS[lid]['sidebar'].hasOwnProperty('css')&&typeof EFFECTS[lid]['sidebar']['css']==='string'&&EFFECTS[lid]['sidebar']['css'].indexOf(':')>0){str+=EFFECTS[lid]['sidebar']['css'];}
return str;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getSidebarPositionMobileFocused");}}
function getBannerPositionMobileFocused(prop,lid){try{var str="";str+="position: absolute; ";var dims_box=getActualBoxWidthAndHeight(lid);str+="width: "+dims_box.width+"px; ";str+="height: "+dims_box.height+"px; ";str+="z-index: 9948030; ";str+="left: 50%; margin-left: -"+Math.round(dims_box.width/2)+"px; ";str+=getResponsiveScale(lid);var top=JQUERY_DIGIOH(window).scrollTop();var m=getResponsiveScaleMultiplier(lid);if(m>1){top=top+((dims_box.height*m)-dims_box.height);}
else if(m<1){top=top-(dims_box.height-(dims_box.height*m));}
str+="top: "+top+'px;';if(EFFECTS[lid]['banner'].hasOwnProperty('css')&&typeof EFFECTS[lid]['banner']['css']==='string'&&EFFECTS[lid]['banner']['css'].indexOf(':')>0){str+=EFFECTS[lid]['banner']['css'];}
return str;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getBannerPositionMobileFocused");}}
function getOpenAnimation(prop,lbid){try{var css_pos='';if(prop.css_positioning=="fixed"&&isMobile()){css_pos=prop.css_positioning;}else{css_pos=prop.css_positioning;}
var pos=prop.position.split('-');var posx=pos[1];var posy=pos[0];var oa={};var actualWindowWidthPixels=JQUERY_DIGIOH(window).width();var actualWindowHeightPixels=JQUERY_DIGIOH(window).height();var dims_box=getActualBoxWidthAndHeight(lbid);var offset_x=(Math.round(actualWindowWidthPixels/2)+Math.round(dims_box.width/2));var offset_y=(Math.round(actualWindowHeightPixels/2)+Math.round(dims_box.height/2));if(prop.hasOwnProperty('offset')&&prop.offset.hasOwnProperty('left')){if(prop.offset.left==0&&prop.animation.open=="slideRight"){offset_x=dims_box.width+30;}
else if(prop.offset.left==0&&prop.animation.open=="slideLeft"){offset_x=actualWindowWidthPixels-45;}
else if(prop.offset.left==10&&prop.animation.open=="slideRight"){offset_x=actualWindowWidthPixels-30;}
else if(prop.offset.left==10&&prop.animation.open=="slideLeft"){offset_x=dims_box.width+15;}
else if(prop.offset.left<5&&prop.animation.open=="slideLeft"){offset_x=actualWindowWidthPixels-((prop.offset.left/5)*((actualWindowWidthPixels/2)-Math.round(dims_box.width/2)))-15;}
else if(prop.offset.left<5&&prop.animation.open=="slideRight"){offset_x=(prop.offset.left/5)*((actualWindowWidthPixels/2)-Math.round(dims_box.width/2))+dims_box.width;}
else if(prop.offset.left>5&&prop.animation.open=="slideLeft"){offset_x=(((10-prop.offset.left)/5)*((actualWindowWidthPixels/2)-Math.round(dims_box.width/2)))+dims_box.width-15;}
else if(prop.offset.left>5&&prop.animation.open=="slideRight"){offset_x=((prop.offset.left-5)/5)*((actualWindowWidthPixels/2)-Math.round(dims_box.width/2))+(actualWindowWidthPixels/2)+(dims_box.width/2);}}
if(prop.hasOwnProperty('offset')&&prop.offset.hasOwnProperty('top')){if(prop.offset.top==0&&prop.animation.open=="slideDown"){offset_y=dims_box.height+30;}
else if(prop.offset.top==0&&prop.animation.open=="slideUp"){offset_y=actualWindowHeightPixels-30;}
else if(prop.offset.top==10&&prop.animation.open=="slideDown"){offset_y=actualWindowHeightPixels-30;}
else if(prop.offset.top==10&&prop.animation.open=="slideUp"){offset_y=dims_box.height+30;}
else if(prop.offset.top<5&&prop.animation.open=="slideUp"){offset_y=actualWindowHeightPixels-((prop.offset.top/5)*((actualWindowHeightPixels/2)-Math.round(dims_box.height/2)))-15;}
else if(prop.offset.top<5&&prop.animation.open=="slideDown"){offset_y=(prop.offset.top/5)*((actualWindowHeightPixels/2)-Math.round(dims_box.height/2))+dims_box.height;}
else if(prop.offset.top>5&&prop.animation.open=="slideUp"){offset_y=(((10-prop.offset.top)/5)*((actualWindowHeightPixels/2)-Math.round(dims_box.height/2)))+dims_box.height-15;}
else if(prop.offset.top>5&&prop.animation.open=="slideDown"){offset_y=((prop.offset.top-5)/5)*((actualWindowHeightPixels/2)-Math.round(dims_box.height/2))+(actualWindowHeightPixels/2)+(dims_box.height/2);}}
if(css_pos==="fixed"){if(prop.animation.open=="slideUp"){if(posy=='top'){oa.top="-="+Math.ceil(actualWindowHeightPixels)+"px";}else if(posy=='center'){oa.top="-="+offset_y+"px";}else if(posy=='bottom'){oa.top="-="+Math.ceil(dims_box.height)+"px";}
return oa;}else if(prop.animation.open=="slideDown"){if(posy=='top'){oa.top="+="+Math.ceil(dims_box.height)+"px";}else if(posy=='center'){oa.top="+="+offset_y+"px";}else if(posy=='bottom'){oa.top="+="+Math.ceil(actualWindowHeightPixels)+"px";}
return oa;}
if(prop.animation.open=="slideRight"){if(posx=='left'){oa.left="+="+Math.ceil(dims_box.width)+"px";}else if(posx=='center'){oa.left="+="+offset_x+"px";}else if(posx=='right'){oa.left="+="+Math.ceil(actualWindowWidthPixels)+"px";}
return oa;}else if(prop.animation.open=="slideLeft"){if(posx=='left'){oa.left="-="+Math.ceil(actualWindowWidthPixels)+"px";}else if(posx=='center'){oa.left="-="+offset_x+"px";}else if(posx=='right'){oa.left="-="+Math.ceil(dims_box.width)+"px";}
return oa;}}else{var st=jqWin.scrollTop();if(prop.animation.open=="slideUp"){if(posy=='top'){oa.top="-="+Math.ceil(actualWindowHeightPixels)+"px";}else if(posy=='center'){oa.top="-="+Math.ceil((actualWindowHeightPixels/2)+(dims_box.height/2))+"px";}else if(posy=='bottom'){oa.top="-="+Math.ceil(dims_box.height)+"px";}
return oa;}else if(prop.animation.open=="slideDown"){if(posy=='top'){oa.top="+="+Math.ceil(dims_box.height)+"px";}else if(posy=='center'){oa.top="+="+Math.ceil((actualWindowHeightPixels/2)+(dims_box.height/2))+"px";}else if(posy=='bottom'){oa.top="+="+(Math.ceil(actualWindowHeightPixels))+"px";}
return oa;}
if(prop.animation.open=="slideRight"){if(posx=='left'){oa.left="+="+Math.ceil(dims_box.width)+"px";}else if(posx=='center'){oa.left="+="+Math.ceil((actualWindowWidthPixels/2)+(dims_box.width/2))+"px";}else if(posx=='right'){oa.left="+="+Math.ceil(actualWindowWidthPixels)+"px";}
return oa;}else if(prop.animation.open=="slideLeft"){if(posx=='left'){oa.left="-="+Math.ceil(actualWindowWidthPixels)+"px";}else if(posx=='center'){oa.left="-="+Math.ceil((actualWindowWidthPixels/2)+(dims_box.width/2))+"px";}else if(posx=='right'){oa.left="-="+Math.ceil(dims_box.width)+"px";}
return oa;}}
return false;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getOpenAnimation");}}
function getCloseAnimation(prop,lbid){try{var pos=prop.position.split('-');var posx=pos[1];var posy=pos[0];var ca={};var actualWindowWidthPixels=JQUERY_DIGIOH(window).width();var actualWindowHeightPixels=JQUERY_DIGIOH(window).height();var dims_box=getActualBoxWidthAndHeight(lbid);var dom_id=getLightboxDomId(lbid);var dom_ele=JQUERY_DIGIOH('#'+dom_id);var offset=dom_ele.offset();logger('getCloseAnimation ==> offset: ');var st=jqWin.scrollTop();var top=Math.ceil(offset.top-st);var left=Math.ceil(offset.left);logger('top: '+top+', left: '+left);if(prop.animation.close=="slideUp"){ca.top="-="+Math.ceil(top+dims_box.height)+"px";return ca;}else if(prop.animation.close=="slideDown"){ca.top="+="+Math.ceil(actualWindowHeightPixels-top)+"px";return ca;}else if(prop.animation.close=="slideRight"){ca.left="+="+Math.ceil(actualWindowWidthPixels-left)+"px";return ca;}else if(prop.animation.close=="slideLeft"){ca.left="-="+Math.ceil(left+dims_box.width)+"px";return ca;}
return false;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getCloseAnimation");}}
var isInlineLightbox=function(lid){try{if(lid.length<30){var boxShortId=lid;for(var lbguid in DIGIOH_LIGHTBOX_IDS){if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(lbguid)&&DIGIOH_LIGHTBOX_IDS[lbguid]==boxShortId){lid=lbguid;break;}}}
var idxArrAlways=JQUERY_DIGIOH.inArray(lid,DIGIOH_LIGHTBOX_INLINE_ALWAYS_ARR);var idxArrConditions=JQUERY_DIGIOH.inArray(lid,DIGIOH_LIGHTBOX_INLINE_CONDITIONS_ARR);return(idxArrAlways>=0||idxArrConditions>=0);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"isInlineLightbox");}}
function registerLightboxShow(lbid){try{var var_id='';var orig_lid=lbid;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lbid)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[lbid];var_id=lbid;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lbid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lbid];}
logger('DIGIOH: registerLightboxShow: '+lbid);addActiveBox(lbid);updateLightboxActivityView(orig_lid);analyticsLightboxDisplay(lbid);var af=false;if(var_id&&var_id.length>7&&EFFECTS.hasOwnProperty(var_id)&&EFFECTS[var_id].widget_type){if(EFFECTS[var_id].widget_type==="fancybox"){af=true;}
else if(EFFECTS[var_id].widget_type==="sidebar"&&EFFECTS[var_id].sidebar.position=='center-center'){af=true;}}
else if(EFFECTS.hasOwnProperty(orig_lid)&&EFFECTS[orig_lid].widget_type){if(EFFECTS[orig_lid].widget_type==="fancybox"){af=true;}
else if(EFFECTS[orig_lid].widget_type==="sidebar"&&EFFECTS[orig_lid].sidebar.position=='center-center'){af=true;}}
keepSendingEventNotificationToChildUntilReceived({sender:'lightbox',action:'after_lightbox_display',auto_focus:af},(var_id&&var_id.length>7?var_id:lbid),100,0);if(!IS_PREVIEW||IS_DEV){if(!isInlineLightbox(lbid)||doesInlineLightboxHaveCustomJsType(lbid,'display')||doesInlineLightboxHaveCustomJsType(lbid,'all')){runCustomJsLinkedApps('AfterDisplay',orig_lid,var_id);logger('JS_PARENT_APPS.runCustomJsOnLightboxDisplay - '+lbid);DIGIOH_CUSTOM_JS_SUPER.runCustomJsOnLightboxDisplay(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_GLOBAL.runCustomJsOnLightboxDisplay - '+lbid);DIGIOH_CUSTOM_JS.runCustomJsOnLightboxDisplay(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_PARENT.runCustomJsOnLightboxDisplay - '+lbid);}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"registerLightboxShow");}}
function registerLightboxSubmit(lbid){try{var var_id='';var orig_lid=lbid;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lbid)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[lbid];var_id=lbid;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lbid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lbid];}
updateLightboxActivitySubmit(orig_lid);if(!IS_PREVIEW||IS_DEV){if(!isInlineLightbox(lbid)||doesInlineLightboxHaveCustomJsType(lbid,'submit')||doesInlineLightboxHaveCustomJsType(lbid,'all')){runCustomJsLinkedApps('AfterSubmit',orig_lid,var_id);logger('JS_PARENT_APPS.runCustomJsOnLightboxSubmit - '+lbid);DIGIOH_CUSTOM_JS_SUPER.runCustomJsOnLightboxSubmit(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_GLOBAL.runCustomJsOnLightboxSubmit - '+lbid);DIGIOH_CUSTOM_JS.runCustomJsOnLightboxSubmit(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_PARENT.runCustomJsOnLightboxSubmit - '+lbid);}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"registerLightboxSubmit");}}
function registerLightboxRedirect(lbid){try{var var_id='';var orig_lid=lbid;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lbid)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[lbid];var_id=lbid;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lbid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lbid];}
updateLightboxActivityRedirect(orig_lid);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"registerLightboxRedirect");}}
function registerLightboxClose(lbid){try{var var_id='';var orig_lid=lbid;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lbid)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[lbid];var_id=lbid;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lbid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lbid];}
removeActiveBox(lbid);removeActiveBox(orig_lid);updateLightboxActivityClose(orig_lid);keepSendingEventNotificationToChildUntilReceived({sender:'lightbox',action:'after_lightbox_close'},(var_id&&var_id.length>7?var_id:lbid),100,0);if(!IS_PREVIEW||IS_DEV){if(!isInlineLightbox(lbid)||doesInlineLightboxHaveCustomJsType(lbid,'all')){runCustomJsLinkedApps('AfterClose',orig_lid,var_id);logger('JS_PARENT_APPS.runCustomJsOnLightboxClose - '+lbid);DIGIOH_CUSTOM_JS_SUPER.runCustomJsOnLightboxClose(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_GLOBAL.runCustomJsOnLightboxClose - '+lbid);DIGIOH_CUSTOM_JS.runCustomJsOnLightboxClose(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_PARENT.runCustomJsOnLightboxClose - '+lbid);}}
logger('DIGIOH: checkLightboxMasterRules() called from registerLightboxClose() - '+orig_lid+', '+var_id);if(checkLightboxMasterRules()){if(effectsHasTeaserDisplayFancybox(lbid)&&EFFECTS[lbid].widget_type==="fancybox"){openTeaser(EFFECTS[lbid].fancybox.teaser,lbid);}else if(effectsHasTeaserDisplaySidebar(lbid)&&EFFECTS[lbid].widget_type==="sidebar"){openTeaser(EFFECTS[lbid].sidebar.teaser,lbid);}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"registerLightboxClose");}}
var registerAnalyticsManualRedirect=function(lbid){try{var var_id='';var orig_lid=lbid;if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(lbid)){orig_lid=DIGIOH_VARIATION_TO_BOX_MAP[lbid];var_id=lbid;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(lbid)){var_id=LIGHTBOX_TO_VARIATION_MAP[lbid];}
var ab_test_id='';if(var_id!=''&&AB_BOXES_TAKE_MAP.hasOwnProperty(var_id)){ab_test_id=AB_BOXES_TAKE_MAP[var_id];}else if(AB_BOXES_TAKE_MAP.hasOwnProperty(orig_lid)){ab_test_id=AB_BOXES_TAKE_MAP[orig_lid];}
keenLightboxRedirect(lbid);DIGIOH_LIGHTBOX_ANALYTICS.setLightboxEvent("redirect",orig_lid);analyticsRedirect(orig_lid,var_id,ab_test_id);if(!IS_PREVIEW||IS_DEV){if(!isInlineLightbox(lbid)||doesInlineLightboxHaveCustomJsType(lbid,'all')){runCustomJsLinkedApps('AfterRedirect',orig_lid,var_id);logger('JS_PARENT_APPS.runCustomJsOnLightboxRedirect - '+lbid);DIGIOH_CUSTOM_JS_SUPER.runCustomJsOnLightboxRedirect(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_GLOBAL.runCustomJsOnLightboxRedirect - '+lbid);DIGIOH_CUSTOM_JS.runCustomJsOnLightboxRedirect(window.DIGIOH_API,window,document,JQUERY_DIGIOH,orig_lid,var_id,getCustomJsMetadata(orig_lid));logger('JS_PARENT.runCustomJsOnLightboxRedirect - '+lbid);}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"registerAnalyticsManualRedirect");}}
function startIdleTimer(){try{JQUERY_DIGIOH.idleTimer(IDLE_PERIOD*1000);JQUERY_DIGIOH(document).bind("idle.idleTimer",function(){IDLE_TIME+=IDLE_PERIOD;IDLE_INTERVAL=iframewin.setInterval(idleTimerIncrement,1000);});JQUERY_DIGIOH(document).bind("active.idleTimer",function(){if(IDLE_INTERVAL!=0)iframewin.clearInterval(IDLE_INTERVAL);IDLE_INTERVAL=0;});TOTAL_INTERVAL=iframewin.setInterval(totalTimerIncrement,1000);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"startIdleTimer");}}
function idleTimerIncrement(){try{IDLE_TIME+=1;DIGIOH_LIGHTBOX_ANALYTICS.VARS.idle_time_seconds=IDLE_TIME;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"idleTimerIncrement");}}
function totalTimerIncrement(){try{TOTAL_TIME+=1;DIGIOH_LIGHTBOX_ANALYTICS.VARS.total_time_seconds=TOTAL_TIME;DIGIOH_LIGHTBOX_ANALYTICS.VARS.active_time_seconds=TOTAL_TIME-IDLE_TIME;if(TIME_BOXES_ARR.length>0){checkConditionsTime();}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"totalTimerIncrement");}}
function isStringAnInteger(str){if(!str||str.length==0)return false;return!isNaN(str);}
function stringEndsWith(str,suffix){return str.indexOf(suffix,str.length-suffix.length)!==-1;}
function stringStartsWith(str,prefix){return str.indexOf(prefix)===0;}
function compareUrlEqualityWithAndWithoutTrailingSlash(urla,urlb){try{if(urla.toLowerCase()==urlb.toLowerCase())return true;if(urla.length>1&&stringEndsWith(urla,'/'))urla=urla.substr(0,urla.length-1);if(urlb.length>1&&stringEndsWith(urlb,'/'))urlb=urlb.substr(0,urlb.length-1);if(urla.toLowerCase()==urlb.toLowerCase())return true;else return false;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"compareUrlEqualityWithAndWithoutTrailingSlash");return false;}}
function compareUrlEndingWithAndWithoutTrailingSlash(url,suffix){try{if(stringEndsWith(url.toLowerCase(),suffix.toLowerCase()))return true;if(url.length>1&&stringEndsWith(url,'/'))url=url.substr(0,url.length-1);return stringEndsWith(url.toLowerCase(),suffix.toLowerCase());}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"compareUrlEndingWithAndWithoutTrailingSlash");return false;}}
function logger(msg,isJson){try{DIGIOH_API.log(msg);}
catch(e2){}}
function logErrorText(function_name,msg){if(typeof DIGIOH_BUGSNAG!=='undefined'&&DIGIOH_BUGSNAG!==null){processStoredTextErrors();DIGIOH_BUGSNAG.notify("[DIGIOH_EXCEPTION_JS] "+function_name,msg);}else{TEXT_ERROR_LOG_ARR.push({msg:msg,fcn:function_name,processed:false});}
if(function_name&&function_name!="logger"){logger('ERROR:::: '+function_name+'() - '+msg);}}
function processStoredTextErrors(){if(TEXT_ERROR_LOG_ARR.length>0){for(var i=0;i<TEXT_ERROR_LOG_ARR.length;i++){if(!TEXT_ERROR_LOG_ARR[i].processed){DIGIOH_BUGSNAG.notify("[DIGIOH_EXCEPTION_JS] "+TEXT_ERROR_LOG_ARR[i].fcn,TEXT_ERROR_LOG_ARR[i].msg);TEXT_ERROR_LOG_ARR[i].processed=true;}}}}
function logError(e,function_name){if(function_name&&function_name!=="logger"){DIGIOH_API.logError('ERROR:::: '+function_name+'() - '+e.message);}
if(typeof DIGIOH_BUGSNAG!=='undefined'&&DIGIOH_BUGSNAG!==null){processStoredExceptions();DIGIOH_BUGSNAG.notifyException(e,"[DIGIOH_EXCEPTION_JS] (main.js) - "+function_name);}else{ERROR_LOG_TEMP_ARR.push({ex:e,fcn:("(main.js) - "+function_name),processed:false});}}
function processStoredExceptions(){if(ERROR_LOG_TEMP_ARR.length>0){for(var i=0;i<ERROR_LOG_TEMP_ARR.length;i++){if(!ERROR_LOG_TEMP_ARR[i].processed){DIGIOH_BUGSNAG.notifyException(ERROR_LOG_TEMP_ARR[i].ex,"[DIGIOH_EXCEPTION_JS] "+ERROR_LOG_TEMP_ARR[i].fcn);ERROR_LOG_TEMP_ARR[i].processed=true;}}}}
var addExistsSelector=function(selector){if(JQUERY_DIGIOH.inArray(selector,EXISTS_SELECTORS)==-1){EXISTS_SELECTORS.push(selector);buildConditionSelectorsToBoxesMap();initExistsSelectors();logger('addExistsSelector: '+selector);}};var removeExistsSelector=function(selector){var idx=JQUERY_DIGIOH.inArray(selector,EXISTS_SELECTORS);if(idx>-1){EXISTS_SELECTORS.splice(idx,1);if(CONDITION_SELECTOR_BOXES_MAP['exists'].hasOwnProperty(selector)){delete CONDITION_SELECTOR_BOXES_MAP['exists'][selector];}
buildConditionSelectorsToBoxesMap();initExistsSelectors();logger('removeExistsSelector: '+selector);}};var getExistsSelectors=function(){return EXISTS_SELECTORS;};var hasOpenLightboxes=function(){return LOADED_LIGHTBOXES.length>0;};var setLightboxID=function(lightbox_id){LIGHTBOX_GUID=lightbox_id;};function getIntFromStringOrIntOrDecimal(the_num){try{var out_num=0;if(typeof the_num==='undefined'||the_num===null||the_num===0||the_num===''){return 0;}
if(typeof the_num==='string'){the_num=the_num.trim();if(the_num.indexOf('.')===0){return 0;}else if(the_num.indexOf('.')>0){return getIntFromStringOrIntOrDecimal(the_num.split('.')[0].trim());}else{var parsed=parseInt(the_num.trim());if(isNaN(parsed)){return 0;}else{return Math.round(parsed);}}}
if(typeof the_num==='number'){return Math.round(the_num);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getIntFromStringOrIntOrDecimal");}
return the_num;}
var getActualBoxWidthAndHeight=function(lbid){try{var pref=getPagePref(lbid);var actualBoxWidthPixels=0;var actualBoxHeightPixels=0;if(EFFECTS[lbid].hasOwnProperty(pref+'responsive')&&EFFECTS[lbid][pref+'responsive'].use){actualBoxWidthPixels=getResponsiveBoxWidth(lbid);actualBoxHeightPixels=getResponsiveBoxHeight(lbid);FANCY_REPOSITION_LOCKED[lbid]=true;}else{actualBoxWidthPixels=getBoxWidth(lbid);actualBoxHeightPixels=getBoxHeight(lbid);}
return{width:actualBoxWidthPixels,height:actualBoxHeightPixels};}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getActualBoxWidthAndHeight");}
return{width:500,height:500};};var getBoxWidth=function(lbid){try{setPixelThreshold(lbid);var pref=getPagePref(lbid);if(EFFECTS.hasOwnProperty(lbid)&&EFFECTS[lbid].hasOwnProperty(pref+'width')&&EFFECTS[lbid][pref+'width']>0){return getIntFromStringOrIntOrDecimal(EFFECTS[lbid][pref+'width']);}else{return getIntFromStringOrIntOrDecimal(EFFECTS[lbid].width);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getBoxWidth");}
return 600;};var getBoxHeight=function(lbid){try{setPixelThreshold(lbid);var pref=getPagePref(lbid);if(EFFECTS.hasOwnProperty(lbid)&&EFFECTS[lbid].hasOwnProperty(pref+'height')&&EFFECTS[lbid][pref+'height']>0){return getIntFromStringOrIntOrDecimal(EFFECTS[lbid][pref+'height']);}else{return getIntFromStringOrIntOrDecimal(EFFECTS[lbid].height);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getBoxHeight");}
return 400;};var getResponsiveBoxWidth=function(lbid){try{var widthWin=JQUERY_DIGIOH(window).width();var widthPct=getResponsiveBoxWidthPercent(lbid);var widthActual=Math.round(widthWin*widthPct/100);if(DIGIOH_USE_RESPONSIVE){var widthMax=getResponsiveBoxWidthMax(lbid);if(widthActual>widthMax){widthActual=widthMax;}
var widthMin=getResponsiveBoxWidthMin(lbid);if(widthActual<widthMin){widthActual=widthMin;}}
return widthActual;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getResponsiveBoxWidth");}
return 50;};var getResponsiveBoxHeight=function(lbid){try{if(!DIGIOH_USE_RESPONSIVE){return getBoxHeight(lbid);}
var heightWin=JQUERY_DIGIOH(window).height();var heightPct=getResponsiveBoxHeightPercent(lbid);var heightActual=Math.round(heightWin*heightPct/100);if(DIGIOH_USE_RESPONSIVE){var heightMax=getResponsiveBoxHeightMax(lbid);if(heightActual>heightMax){heightActual=heightMax;}
var heightMin=getResponsiveBoxHeightMin(lbid);if(heightActual<heightMin){heightActual=heightMin;}}
return heightActual;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getResponsiveBoxHeight");}
return 50;};var getResponsiveBoxWidthPercent=function(lbid){try{setPixelThreshold(lbid);if(!DIGIOH_USE_RESPONSIVE)
return 100;var pref=getPagePref(lbid);if(EFFECTS[lbid].hasOwnProperty(pref+'responsive'))
return getIntFromStringOrIntOrDecimal(EFFECTS[lbid][pref+'responsive'].box_width);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getResponsiveBoxWidthPercent");}
return 100;};var getResponsiveBoxHeightPercent=function(lbid){try{setPixelThreshold(lbid);if(!DIGIOH_USE_RESPONSIVE)
return 100;var pref=getPagePref(lbid);if(EFFECTS[lbid].hasOwnProperty(pref+'responsive'))
return getIntFromStringOrIntOrDecimal(EFFECTS[lbid][pref+'responsive'].box_height);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getResponsiveBoxHeightPercent");}
return 35;};var getResponsiveBoxWidthMax=function(lbid){try{setPixelThreshold(lbid);var pref=getPagePref(lbid);if(EFFECTS[lbid].hasOwnProperty(pref+'responsive')&&EFFECTS[lbid][pref+'responsive'].use&&DIGIOH_USE_RESPONSIVE)
return getIntFromStringOrIntOrDecimal(EFFECTS[lbid][pref+'responsive'].width_max);else if(EFFECTS[lbid].hasOwnProperty(pref+'responsive')&&EFFECTS[lbid][pref+'responsive'].use&&!DIGIOH_USE_RESPONSIVE)
return 10000;else if(EFFECTS[lbid].hasOwnProperty(pref+'width'))
return getIntFromStringOrIntOrDecimal(EFFECTS[lbid][pref+'width']);else
return getIntFromStringOrIntOrDecimal(EFFECTS[lbid].width);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getResponsiveBoxWidthMax");}
return 1000;};var getResponsiveBoxHeightMax=function(lbid){try{setPixelThreshold(lbid);var pref=getPagePref(lbid);if(EFFECTS[lbid].hasOwnProperty(pref+'responsive')&&DIGIOH_USE_RESPONSIVE)
return getIntFromStringOrIntOrDecimal(EFFECTS[lbid][pref+'responsive'].height_max);else if(EFFECTS[lbid].hasOwnProperty(pref+'height'))
return getIntFromStringOrIntOrDecimal(EFFECTS[lbid][pref+'height']);else
return getIntFromStringOrIntOrDecimal(EFFECTS[lbid].height);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getResponsiveBoxHeightMax");}
return 600;};var getResponsiveBoxWidthMin=function(lbid){try{setPixelThreshold(lbid);var pref=getPagePref(lbid);if(EFFECTS[lbid].hasOwnProperty(pref+'responsive')&&DIGIOH_USE_RESPONSIVE)
return getIntFromStringOrIntOrDecimal(EFFECTS[lbid][pref+'responsive'].width_min);else if(EFFECTS[lbid].hasOwnProperty(pref+'width'))
return getIntFromStringOrIntOrDecimal(EFFECTS[lbid][pref+'width']);else
return getIntFromStringOrIntOrDecimal(EFFECTS[lbid].width);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getResponsiveBoxWidthMin");}
return 50;};var getResponsiveBoxHeightMin=function(lbid){try{setPixelThreshold(lbid);var pref=getPagePref(lbid);if(EFFECTS[lbid].hasOwnProperty(pref+'responsive')&&DIGIOH_USE_RESPONSIVE)
return getIntFromStringOrIntOrDecimal(EFFECTS[lbid][pref+'responsive'].height_min);else if(EFFECTS[lbid].hasOwnProperty(pref+'height'))
return getIntFromStringOrIntOrDecimal(EFFECTS[lbid][pref+'height']);else
return getIntFromStringOrIntOrDecimal(EFFECTS[lbid].height);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getResponsiveBoxHeightMin");}
return 50;};var closeAllOpenLightboxes=function(guid){try{if(DIGIOH_LIGHTBOX_IDS){for(var lbguid in DIGIOH_LIGHTBOX_IDS){if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(lbguid)&&isActiveBox(lbguid)&&(typeof guid==='undefined'||!guid||guid===lbguid)){if(EFFECTS[lbguid]['widget_type']==='fancybox'){IS_LIGHTBOX_CLOSING[lbguid]=true;JQUERY_DIGIOH.fb_lightbox.close();}else if(EFFECTS[lbguid]['widget_type']==='sidebar'){closeSidebar(lbguid);}else if(EFFECTS[lbguid]['widget_type']==='banner'){closeBanner(lbguid);}}}
logger('closeAllOpenLightboxes_2');}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"closeAllOpenLightboxes");}};var sendMessageToIframe=function(obj,lid){try{if(document.getElementById('lightbox-iframe-'+lid)!==null&&document.getElementById('lightbox-iframe-'+lid).contentWindow&&typeof document.getElementById('lightbox-iframe-'+lid).contentWindow.receiveMessageFromParent==='function'){document.getElementById('lightbox-iframe-'+lid).contentWindow.receiveMessageFromParent(obj);logger('sendMessageToIframe (success): '+lid);return true;}else{return false;}}catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logger('sendMessageToIframe - child not ready: '+lid);return false;}};var receiveMessageFromIframe=function(obj,lid){if(obj&&obj.hasOwnProperty('message')){logger(obj.message);}
if(lid&&obj&&obj.hasOwnProperty('sender')&&obj.sender==='lightbox'){processPostMessage(obj,lid);}else if(lid&&obj){}else{logger('receiveMessageFromIframe ERROR - not all parameters were set correctly');}};var relayMessageToIframe=function(obj,lid_source,lid_target){if(obj&&lid_source&&lid_target&&lid_source!=lid_target&&document.getElementById('lightbox-iframe-'+lid_source)!==null&&document.getElementById('lightbox-iframe-'+lid_target)!==null&&CHILD_READY.hasOwnProperty(lid_target)&&CHILD_READY[lid_target]==true){document.getElementById('lightbox-iframe-'+lid_target).contentWindow.receiveMessageFromIframe(obj,lid_source,lid_target);}else{logger('relayMessageToIframe - child not ready: '+lid_target);}};var getUrlParam=function(name,urlOverride){try{if(!name)
return null;var url=parent.location.href;if(typeof urlOverride==='string'&&urlOverride.indexOf('http')===0)
url=urlOverride;if(!url||!DIGIOH_API.contains(url,'?'))
return null;var qs=url.split('?')[1];if(!qs||!DIGIOH_API.contains(qs,name+'='))
return null;var val='';var foundVal=false;if(DIGIOH_API.contains(qs,'&')){var parts=qs.split('&');for(var i=0;i<parts.length;i++){if(parts[i].indexOf(name+'=')===0){val=parts[i].split(name+'=')[1];foundVal=true;break;}}}else if(qs.indexOf(name+'=')===0){val=qs.split(name+'=')[1];foundVal=true;}
if(!foundVal)
return null;if(DIGIOH_API.contains(val,'%'))
return decodeURIComponent(val);return val;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
return null;}};var isPhone=function(){try{if(typeof DIGIOH_LIGHTBOX_ANALYTICS==='object'&&DIGIOH_LIGHTBOX_ANALYTICS!==null&&DIGIOH_LIGHTBOX_ANALYTICS.hasOwnProperty('VARS')&&typeof DIGIOH_LIGHTBOX_ANALYTICS.VARS==='object'&&DIGIOH_LIGHTBOX_ANALYTICS.VARS!==null){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.hasOwnProperty('DeviceAtlas')&&typeof DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas==='object'){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.hasOwnProperty('isMobilePhone')&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.isMobilePhone!==''){return DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.isMobilePhone;}
if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.hasOwnProperty('primaryHardwareType')&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.primaryHardwareType!==''){return(DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.primaryHardwareType==='Mobile Phone');}}
if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.device){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.device==='Phone/Tablet'){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.hasOwnProperty('device_apple')&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.device_apple){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.device_apple.toLowerCase()==='iphone'){return true;}else{return false;}}else{return true;}}else{return false;}}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"isPhone");}
return '';}
var isTablet=function(){try{if(typeof DIGIOH_LIGHTBOX_ANALYTICS==='object'&&DIGIOH_LIGHTBOX_ANALYTICS!==null&&DIGIOH_LIGHTBOX_ANALYTICS.hasOwnProperty('VARS')&&typeof DIGIOH_LIGHTBOX_ANALYTICS.VARS==='object'&&DIGIOH_LIGHTBOX_ANALYTICS.VARS!==null){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.hasOwnProperty('DeviceAtlas')&&typeof DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas==='object'){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.hasOwnProperty('isTablet')&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.isTablet!==''){return DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.isTablet;}
if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.hasOwnProperty('primaryHardwareType')&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.primaryHardwareType!==''){return(DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.primaryHardwareType==='Tablet');}}
if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.device){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.device==='Phone/Tablet'){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.hasOwnProperty('device_apple')&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.device_apple){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.device_apple.toLowerCase()==='ipad'){return true;}else{return false;}}else{return true;}}else{return false;}}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"isTablet");}
return '';}
var isMobile=function(){try{if(typeof DIGIOH_LIGHTBOX_ANALYTICS==='object'&&DIGIOH_LIGHTBOX_ANALYTICS!==null&&DIGIOH_LIGHTBOX_ANALYTICS.hasOwnProperty('VARS')&&typeof DIGIOH_LIGHTBOX_ANALYTICS.VARS==='object'&&DIGIOH_LIGHTBOX_ANALYTICS.VARS!==null){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.hasOwnProperty('DeviceAtlas')&&typeof DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas==='object'){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.hasOwnProperty('mobileDevice')&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.mobileDevice!==''){return DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.mobileDevice;}}
if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.device&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.device==='Phone/Tablet'){return true;}}
return(isPhone()||isTablet());}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"isMobile");}
return '';}
var isiOs=function(){try{if(typeof DIGIOH_LIGHTBOX_ANALYTICS==='object'&&DIGIOH_LIGHTBOX_ANALYTICS!==null&&DIGIOH_LIGHTBOX_ANALYTICS.hasOwnProperty('VARS')&&typeof DIGIOH_LIGHTBOX_ANALYTICS.VARS==='object'&&DIGIOH_LIGHTBOX_ANALYTICS.VARS!==null){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.hasOwnProperty('DeviceAtlas')&&typeof DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas==='object'){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.hasOwnProperty('osiOs')&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.osiOs!==''){return DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.osiOs;}}
if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.device&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.device==='Phone/Tablet'){return true;}}
return(isPhone()||isTablet());}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"isiOs");}
return '';}
var isAndroid=function(){try{if(typeof DIGIOH_LIGHTBOX_ANALYTICS==='object'&&DIGIOH_LIGHTBOX_ANALYTICS!==null&&DIGIOH_LIGHTBOX_ANALYTICS.hasOwnProperty('VARS')&&typeof DIGIOH_LIGHTBOX_ANALYTICS.VARS==='object'&&DIGIOH_LIGHTBOX_ANALYTICS.VARS!==null){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.hasOwnProperty('DeviceAtlas')&&typeof DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas==='object'){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.hasOwnProperty('osAndroid')&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.osAndroid!==''){return DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.osAndroid;}}
if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.device&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.device==='Phone/Tablet'){return true;}}
return(isPhone()||isTablet());}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"isAndroid");}
return '';}
var isDesktop=function(){try{if(typeof DIGIOH_LIGHTBOX_ANALYTICS==='object'&&DIGIOH_LIGHTBOX_ANALYTICS!==null&&DIGIOH_LIGHTBOX_ANALYTICS.hasOwnProperty('VARS')&&typeof DIGIOH_LIGHTBOX_ANALYTICS.VARS==='object'&&DIGIOH_LIGHTBOX_ANALYTICS.VARS!==null){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.hasOwnProperty('DeviceAtlas')&&typeof DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas==='object'){if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.hasOwnProperty('primaryHardwareType')&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.DeviceAtlas.primaryHardwareType==='Desktop'){return true;}}
if(DIGIOH_LIGHTBOX_ANALYTICS.VARS.device&&DIGIOH_LIGHTBOX_ANALYTICS.VARS.device==='Desktop/Laptop'){return true;}}
return(!isPhone()&&!isTablet());}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"isDesktop");}
return '';}
var isDigiohReady=function(){return DIGIOH_IS_READY;}
DIGIOH_API.GET_ANALYTICS=function(){return DIGIOH_LIGHTBOX_ANALYTICS;}
DIGIOH_API.GET_KEEN_SCHEMA=function(){return KEEN_SCHEMA;}
DIGIOH_API.GET_KEEN_CLIENT=function(){return KEEN_CLIENT;}
DIGIOH_API.GET_KEEN_CLIENT_2=function(){return KEEN_CLIENT_2;}
DIGIOH_API.GET_EFFECTS=function(lbid){if(EFFECTS.hasOwnProperty(lbid)){return EFFECTS[lbid];}else{return null;}}
DIGIOH_API.GET_SETTINGS=function(lbid){if(typeof DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS==='object'&&DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS!==null&&DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS.hasOwnProperty(lbid)){return DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[lbid];}else{return null;}}
DIGIOH_API.formatLogMessage=function(msg,caller){try{if(typeof caller==='string'&&caller.length>0)
caller=caller+' -- ';else
caller='';if(typeof msg==='string'&&msg.indexOf('DIGIOH:')!==0&&msg.indexOf('POST')===-1){return 'DIGIOH: '+caller+msg;}else if(typeof msg==='object'&&msg!==null){return caller+JSON.stringify(msg,undefined,2);}else if(typeof msg!=='undefined'&&msg!==null){return caller+msg;}else{return '';}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
return msg;}}
DIGIOH_API.logStream=false;DIGIOH_API.logArray=[];DIGIOH_API.tryShowError=function(e){try{if(typeof e=='undefined'||e==null){e={};}
return DIGIOH_API.logStream;}
catch(e){console.log('ERROR_LOG',e);}}
DIGIOH_API.log=function(msg,caller){try{if(typeof caller!=='string')
caller='';if(DIGIOH_API.logStream&&typeof console!=="undefined")
console.log(DIGIOH_API.formatLogMessage(msg,caller));else
DIGIOH_API.logArray.push(DIGIOH_API.formatLogMessage(msg,caller));}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}}}
DIGIOH_API.logErrorStream=false;DIGIOH_API.logErrorArray=[];DIGIOH_API.logError=function(msg){try{if(DIGIOH_API.logErrorStream&&typeof console!=="undefined"){if(typeof msg==='string'&&msg.indexOf('ERROR::::')!==0){console.log('ERROR:::: '+msg);}else if(typeof msg==='object'&&msg!==null){console.log('ERROR:::: '+JSON.stringify(msg,undefined,2));}else if(typeof msg!=='undefined'&&msg!==null){console.log(msg);}}else{if(typeof msg==='string'&&msg.indexOf('ERROR::::')!==0){DIGIOH_API.logErrorArray.push('ERROR:::: '+msg);DIGIOH_API.logArray.push('ERROR:::: '+msg);}else if(typeof msg==='object'&&msg!==null){DIGIOH_API.logErrorArray.push('ERROR:::: '+JSON.stringify(msg,undefined,2));DIGIOH_API.logArray.push('ERROR:::: '+JSON.stringify(msg,undefined,2));}else if(typeof msg!=='undefined'&&msg!==null){DIGIOH_API.logErrorArray.push(msg);DIGIOH_API.logArray.push(msg);}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}}}
DIGIOH_API.logErrorFromBox=function(e,function_name){try{if(function_name&&function_name!=="logger")
DIGIOH_API.logError('BOX.'+function_name+'() - '+e.message);else
DIGIOH_API.logError('BOX - '+e.message);if(typeof DIGIOH_BUGSNAG!=='undefined'&&DIGIOH_BUGSNAG!==null){processStoredExceptions();DIGIOH_BUGSNAG.notifyException(e,"[DIGIOH_EXCEPTION_JS] (lightbox_builder.js) - "+function_name);}else{ERROR_LOG_TEMP_ARR.push({ex:e,fcn:("(lightbox_builder.js) - "+function_name),processed:false});}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}}}
DIGIOH_API.logErrorFromAnalytics=function(e,function_name){try{if(function_name&&function_name!=="logger")
DIGIOH_API.logError('ANALYTICS.'+function_name+'() - '+e.message);else
DIGIOH_API.logError('ANALYTICS - '+e.message);if(typeof DIGIOH_BUGSNAG!=='undefined'&&DIGIOH_BUGSNAG!==null){processStoredExceptions();DIGIOH_BUGSNAG.notifyException(e,"[DIGIOH_EXCEPTION_JS] (analytics.js) - "+function_name);}else{ERROR_LOG_TEMP_ARR.push({ex:e,fcn:("(analytics.js) - "+function_name),processed:false});}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}}}
DIGIOH_API.logErrorFromCustomJsParent=function(e,function_name){try{if(function_name&&function_name!=="logger")
DIGIOH_API.logError('PARENT_JS.'+function_name+'() - '+e.message);else
DIGIOH_API.logError('PARENT_JS - '+e.message);if(typeof DIGIOH_BUGSNAG!=='undefined'&&DIGIOH_BUGSNAG!==null){processStoredExceptions();DIGIOH_BUGSNAG.notifyException(e,"[DIGIOH_EXCEPTION_JS] - "+function_name);}else{ERROR_LOG_TEMP_ARR.push({ex:e,fcn:function_name,processed:false});}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}}};DIGIOH_API.print=function(pattern){if(typeof pattern!=='string'||pattern==='')
pattern='CUSTOM_JS_';if(typeof console!=="undefined"){DIGIOH_API.logStream=true;if(typeof pattern==='string'&&pattern!==''&&pattern!=='all'){var n=0;for(var i=0;i<DIGIOH_API.logArray.length;i++){if(typeof DIGIOH_API.logArray[i]==='string'&&DIGIOH_API.logArray[i].indexOf(pattern)>=0){console.log(DIGIOH_API.logArray[i]);n++;}}
if(pattern.indexOf('CUSTOM_JS')===0){console.log(n+' Total Messages Printed.  New messages will now stream automatically to the console.  Use the "printAll()" function to see more runtime details.');}}else{for(var i=0;i<DIGIOH_API.logArray.length;i++){console.log(DIGIOH_API.logArray[i]);}
console.log(DIGIOH_API.logArray.length+' Total Messages Printed.  New messages will now stream automatically to the console...');}}};const PRINT_ALL_FLAG_NAME="printAllCalled";DIGIOH_API.printAll=function(){try{if(window&&window.localStorage&&!window.localStorage.getItem(PRINT_ALL_FLAG_NAME))window.localStorage.setItem(PRINT_ALL_FLAG_NAME,"true");}catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"printAll");}
DIGIOH_API.print('all');};DIGIOH_API.trySessionPrint=function(){try{if(window&&window.localStorage&&window.localStorage.getItem(PRINT_ALL_FLAG_NAME))DIGIOH_API.printAll();}catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"trySessionPrint");}}
DIGIOH_API.printErrors=function(){if(typeof console!=="undefined"){DIGIOH_API.logErrorStream=true;for(var i=0;i<DIGIOH_API.logErrorArray.length;i++){console.log(DIGIOH_API.logErrorArray[i]);}
console.log(DIGIOH_API.logErrorArray.length+' Total Errors Printed');}};DIGIOH_API.printConditionsOutput=printConditionsOutput;if(typeof DIGIOH_DYNAMIC_BOXES!=='undefined')
DIGIOH_API.DIGIOH_DYNAMIC_BOXES=DIGIOH_DYNAMIC_BOXES;else
DIGIOH_API.DIGIOH_DYNAMIC_BOXES=[];if(typeof COUPON_GROUP_POPULATE_OBJ!=='undefined')
DIGIOH_API.COUPON_GROUP_POPULATE_OBJ=COUPON_GROUP_POPULATE_OBJ;else
DIGIOH_API.COUPON_GROUP_POPULATE_OBJ={};DIGIOH_API.GoogleAnalytics={};DIGIOH_API.GoogleAnalytics.num_checks=0;DIGIOH_API.GoogleAnalytics.tracker=false;DIGIOH_API.GoogleAnalytics.is_ga_classic=false;DIGIOH_API.GoogleAnalytics.is_ga_universal=false;DIGIOH_API.GoogleAnalytics.is_new_diuid=false;DIGIOH_API.GoogleAnalytics.tryInitGADigioh=tryInitGADigioh;DIGIOH_API.GoogleAnalytics.sendGAEvent=sendGAEvent;DIGIOH_API.GoogleAnalytics.uaIdManual='';DIGIOH_API.sendGAEvent=function(category,action,label,obj){if(typeof obj==='object'&&obj){if(!obj.hasOwnProperty('uaId')||!obj.uaId||typeof obj.uaId!=='string')
obj.uaId=DIGIOH_API.GoogleAnalytics.uaIdManual;if((!obj.hasOwnProperty('val')||!obj.val)&&obj.val!==0)
obj.val='';if(!obj.hasOwnProperty('nonInteraction'))
obj.nonInteraction=true;if(typeof obj.nonInteraction==='number'){if(obj.nonInteraction===0)obj.nonInteraction=false;else obj.nonInteraction=true;}
if(typeof obj.nonInteraction!=='boolean')
obj.nonInteraction=true;DIGIOH_API.GoogleAnalytics.sendGAEvent(category,action,label,obj.val,{'nonInteraction':obj.nonInteraction},obj.uaId);}
else{DIGIOH_API.GoogleAnalytics.sendGAEvent(category,action,label,'',{'nonInteraction':true},DIGIOH_API.GoogleAnalytics.uaIdManual);}};DIGIOH_API.setGATracker=function(uaId){if(typeof uaId==='string')
DIGIOH_API.GoogleAnalytics.uaIdManual=uaId;};DIGIOH_API.sendGADisplayEvent=function(obj){if(typeof obj==='object'&&obj&&obj.hasOwnProperty('lightbox_name')){var label=obj.lightbox_name;if(obj.hasOwnProperty('is_variation')&&obj.is_variation&&obj.variation_name)
label+='['+obj.variation_name+']';DIGIOH_API.sendGAEvent('Digioh','Display',label);}};DIGIOH_API.sendGASubmitEvent=function(obj){if(typeof obj==='object'&&obj&&obj.hasOwnProperty('lightbox_name')){var label=obj.lightbox_name;if(obj.hasOwnProperty('is_variation')&&obj.is_variation&&obj.variation_name)
label+='['+obj.variation_name+']';DIGIOH_API.sendGAEvent('Digioh','Submit',label);}};DIGIOH_API.sendGARedirectEvent=function(obj){if(typeof obj==='object'&&obj&&obj.hasOwnProperty('lightbox_name')){var label=obj.lightbox_name;if(obj.hasOwnProperty('is_variation')&&obj.is_variation&&obj.variation_name)
label+='['+obj.variation_name+']';DIGIOH_API.sendGAEvent('Digioh','Redirect',label);}};DIGIOH_API.sendGACloseEvent=function(obj){if(typeof obj==='object'&&obj&&obj.hasOwnProperty('lightbox_name')){var label=obj.lightbox_name;if(obj.hasOwnProperty('is_variation')&&obj.is_variation&&obj.variation_name)
label+='['+obj.variation_name+']';DIGIOH_API.sendGAEvent('Digioh','Close',label);}};DIGIOH_API.LIGHTBOX={};DIGIOH_API.LIGHTBOX.loadLightbox=loadLightbox;DIGIOH_API.LIGHTBOX.closeSidebar=closeSidebar;DIGIOH_API.LIGHTBOX.closeBanner=closeBanner;DIGIOH_API.LIGHTBOX.closeInline=closeInline;DIGIOH_API.LIGHTBOX.closeAllInlineForms=closeAllInlineForms;DIGIOH_API.LIGHTBOX.getLightboxDomId=getLightboxDomId;DIGIOH_API.LIGHTBOX.getActiveLightboxDomId=getActiveLightboxDomId;DIGIOH_API.LIGHTBOX.cloneObj=cloneObj;DIGIOH_API.LIGHTBOX.isPhone=isPhone;DIGIOH_API.LIGHTBOX.isTablet=isTablet;DIGIOH_API.LIGHTBOX.isMobile=isMobile;DIGIOH_API.LIGHTBOX.isDesktop=isDesktop;DIGIOH_API.LIGHTBOX.isiOs=isiOs;DIGIOH_API.LIGHTBOX.isAndroid=isAndroid;DIGIOH_API.LIGHTBOX.getActualBoxWidthAndHeight=getActualBoxWidthAndHeight;DIGIOH_API.LIGHTBOX.getBoxWidth=getBoxWidth;DIGIOH_API.LIGHTBOX.getBoxHeight=getBoxHeight;DIGIOH_API.LIGHTBOX.getResponsiveBoxWidth=getResponsiveBoxWidth;DIGIOH_API.LIGHTBOX.getResponsiveBoxHeight=getResponsiveBoxHeight;DIGIOH_API.LIGHTBOX.getResponsiveBoxWidthPercent=getResponsiveBoxWidthPercent;DIGIOH_API.LIGHTBOX.getResponsiveBoxHeightPercent=getResponsiveBoxHeightPercent;DIGIOH_API.LIGHTBOX.getResponsiveBoxWidthMax=getResponsiveBoxWidthMax;DIGIOH_API.LIGHTBOX.getResponsiveBoxHeightMax=getResponsiveBoxHeightMax;DIGIOH_API.LIGHTBOX.getResponsiveBoxWidthMin=getResponsiveBoxWidthMin;DIGIOH_API.LIGHTBOX.getResponsiveBoxHeightMin=getResponsiveBoxHeightMin;DIGIOH_API.LIGHTBOX.responsiveResizeCheck=responsiveResizeCheck;DIGIOH_API.LIGHTBOX.sendMessageToIframe=sendMessageToIframe;DIGIOH_API.LIGHTBOX.receiveMessageFromIframe=receiveMessageFromIframe;DIGIOH_API.LIGHTBOX.relayMessageToIframe=relayMessageToIframe;DIGIOH_API.LIGHTBOX.setLightboxID=setLightboxID;DIGIOH_API.LIGHTBOX.hasOpenLightboxes=hasOpenLightboxes;DIGIOH_API.LIGHTBOX.closeAllOpenLightboxes=closeAllOpenLightboxes;DIGIOH_API.LIGHTBOX.initExistsSelectors=initExistsSelectors;DIGIOH_API.LIGHTBOX.recheckExistsSelectors=recheckExistsSelectors;DIGIOH_API.LIGHTBOX.addExistsSelector=addExistsSelector;DIGIOH_API.LIGHTBOX.removeExistsSelector=removeExistsSelector;DIGIOH_API.LIGHTBOX.getExistsSelectors=getExistsSelectors;DIGIOH_API.LIGHTBOX.checkConditions=checkConditions;DIGIOH_API.LIGHTBOX.checkConditionsClick=checkConditionsClick;DIGIOH_API.LIGHTBOX.checkConditionsHover=checkConditionsHover;DIGIOH_API.LIGHTBOX.checkConditionsScroll=checkConditionsScroll;DIGIOH_API.LIGHTBOX.checkConditionsExit=checkConditionsExit;DIGIOH_API.LIGHTBOX.checkConditionsLoad=checkConditionsLoad;DIGIOH_API.LIGHTBOX.checkConditionsTime=checkConditionsTime;DIGIOH_API.LIGHTBOX.isInlineLightbox=isInlineLightbox;DIGIOH_API.LIGHTBOX.embedInlineLightboxForm=embedInlineLightboxForm;DIGIOH_API.LIGHTBOX.reDisplayInlineForm=reDisplayInlineForm;DIGIOH_API.LIGHTBOX.onInfiniteScrollPageChanged=onInfiniteScrollPageChanged;DIGIOH_API.LIGHTBOX.onPageUrlChanged=onPageUrlChanged;DIGIOH_API.LIGHTBOX.isDigiohReady=isDigiohReady;DIGIOH_API.LIGHTBOX.customJsOnDocumentReadyCallback=customJsOnDocumentReadyCallback;DIGIOH_API.LIGHTBOX.analyticsRunAfterIdentify=analyticsRunAfterIdentify;DIGIOH_API.LIGHTBOX.getUrlParam=getUrlParam;DIGIOH_API.LIGHTBOX.getUrlParameter=getUrlParam;DIGIOH_API.LIGHTBOX.getClientGuid=getClientGuid;DIGIOH_API.LIGHTBOX.generateGuid=generateGuid;DIGIOH_API.LIGHTBOX.generateGuidWithTimestamp=generateGuidWithTimestamp;DIGIOH_API.LIGHTBOX.keenLightboxDebug=keenLightboxDebug;DIGIOH_API.LIGHTBOX.registerAnalyticsManualRedirect=registerAnalyticsManualRedirect;DIGIOH_API.LIGHTBOX.runJquerySelectorGenerator=runJquerySelectorGenerator;DIGIOH_API.LIGHTBOX.setBoxToScrollMode=setBoxToScrollMode;DIGIOH_API.LIGHTBOX.INTEGRATION_MAP={};DIGIOH_API.LIGHTBOX.AB_BOXES_TAKE_MAP=AB_BOXES_TAKE_MAP;DIGIOH_API.LIGHTBOX.AB_BOXES_SKIP_MAP=AB_BOXES_SKIP_MAP;DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH=JQUERY_DIGIOH;DIGIOH_API.LIGHTBOX.DIGIOH_KEEN_WRITE_KEY=DIGIOH_KEEN_WRITE_KEY;DIGIOH_API.LIGHTBOX.KEEN_CLIENT=KEEN_CLIENT;DIGIOH_API.LIGHTBOX.LZString=LZString;DIGIOH_API.LIGHTBOX.DIGIOH_BUGSNAG=DIGIOH_BUGSNAG;DIGIOH_API.LIGHTBOX.DIGIOH_COOKIE=DIGIOH_COOKIE;DIGIOH_API.LIGHTBOX.DIGIOH_LOCAL_STORAGE=DIGIOH_LOCAL_STORAGE;DIGIOH_API.LIGHTBOX.DIGIOH_STORAGE=DIGIOH_STORAGE;DIGIOH_API.LIGHTBOX.USE_LZ=(typeof USE_LZ==='undefined'||USE_LZ==true);DIGIOH_API.COMM={};DIGIOH_API.debugger=function(optionalPurpose){if(DIGIOH_API.isPreview()||DIGIOH_API.isQaMode()){if(optionalPurpose){if(confirm("Debug "+optionalPurpose+"?")){debugger;}}else{debugger;}}}
DIGIOH_API.getCookie=function(name,obj){return DIGIOH_COOKIE.getEncoded(name);};DIGIOH_API.getCookieLZString=function(name,obj){return DIGIOH_COOKIE.get(name,false);};DIGIOH_API.getCookieBase64=function(name,obj){try{var b64=DIGIOH_COOKIE.getEncoded(name);if(b64!=null&&typeof b64==='string'&&b64!=''&&typeof atob==='function'){var decodedVal=atob(b64);return decodedVal;}
else{return b64;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getCookieBase64");return DIGIOH_COOKIE.getEncoded(name);}};DIGIOH_API.setCookie=function(name,value,obj){try{var expirationDays=365;if(typeof obj==='object'&&obj!==null&&obj.hasOwnProperty('expirationDays'))
expirationDays=obj.expirationDays;if(typeof expirationDays==='string')
expirationDays=parseFloat(expirationDays);DIGIOH_COOKIE.trySet(name,value,false,expirationDays);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"setCookie");}};DIGIOH_API.setCookieLZString=function(name,value,obj){try{var expirationDays=365;if(typeof obj==='object'&&obj!==null&&obj.hasOwnProperty('expirationDays'))
expirationDays=obj.expirationDays;if(typeof expirationDays==='string')
expirationDays=parseFloat(expirationDays);DIGIOH_COOKIE.trySet(name,value,true,expirationDays);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"setCookieLZString");}};DIGIOH_API.setCookieBase64=function(name,value,obj){try{var expirationDays=365;if(typeof obj==='object'&&obj!==null&&obj.hasOwnProperty('expirationDays'))
expirationDays=obj.expirationDays;if(typeof expirationDays==='string')
expirationDays=parseFloat(expirationDays);DIGIOH_COOKIE.trySet(name,btoa(value),false,expirationDays);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"setCookieBase64");}};DIGIOH_API.deleteCookie=function(name,obj){DIGIOH_COOKIE.erase(name);};DIGIOH_API.getUrlParameter=function(name,obj){return DIGIOH_API.LIGHTBOX.getUrlParameter(name);};DIGIOH_API.getCurrentUrl=function(obj){return window.location.href;};DIGIOH_API.getHostname=function(obj){return window.location.host;};DIGIOH_API.getPagePath=function(obj){return window.location.pathname;};DIGIOH_API.getQueryString=function(obj){return window.location.search;};DIGIOH_API.getUrlHash=function(obj){return window.location.hash;};DIGIOH_API.getLandingPageUrl=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.landing_page;};DIGIOH_API.getReferrer=function(obj){return document.referrer;};DIGIOH_API.getLandingPageReferrer=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.referring_website_url;};DIGIOH_API.getClientIpAddress=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.ip_address;};DIGIOH_API.getClientContinentCode=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.continent;};DIGIOH_API.getClientContinentName=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.continent_name;};DIGIOH_API.getClientCountryCode=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.country;};DIGIOH_API.getClientCountryName=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.country_name;};DIGIOH_API.getClientCountryISO=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.country;};DIGIOH_API.isClientInEU=function(obj){return DIGIOH_API.getClientContinentCode==='EU'||DIGIOH_API.getClientContinentName==='Europe';};DIGIOH_API.getClientRegionOrStateCode=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.state;};DIGIOH_API.getClientRegionOrStateName=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.region_name;};DIGIOH_API.getClientCity=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.city;};DIGIOH_API.getClientPostalCode=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.zipcode;};DIGIOH_API.getOperatingSystem=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.operating_system;};DIGIOH_API.getBrowserType=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.browser_type;};DIGIOH_API.getBrowserVersion=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.browser_version;};DIGIOH_API.getDeviceType=function(){return DIGIOH_API.GET_ANALYTICS().VARS.device;};DIGIOH_API.getTrafficSource=function(){return DIGIOH_API.GET_ANALYTICS().VARS.web_source;};DIGIOH_API.getSearchEngineSource=function(){return DIGIOH_API.GET_ANALYTICS().VARS.search_engine;};DIGIOH_API.getTotalPageViews=function(){return DIGIOH_API.GET_ANALYTICS().VARS.page_visits;};DIGIOH_API.getTotalSessions=function(){return DIGIOH_API.GET_ANALYTICS().VARS.past_visits;};DIGIOH_API.isPreview=function(obj){return IS_PREVIEW;};DIGIOH_API.isQaMode=function(){return(DIGIOH_API.getQueryString().indexOf('boxqamode')>-1||sessionStorage.getItem('xdibx_boxqamode')==1);};DIGIOH_API.turnOffQAMode=function(){sessionStorage.removeItem('xdibx_boxqamode');if(window.location.href.indexOf("boxqamode")>-1){window.location.href=window.location.href.replace("boxqamode",'');}
else{window.location.reload();}};DIGIOH_API.turnOnQAMode=function(){sessionStorage.setItem('xdibx_boxqamode',1);window.location.reload();};DIGIOH_API.isMobile=function(obj){return DIGIOH_API.LIGHTBOX.isMobile();};DIGIOH_API.isTablet=function(obj){return DIGIOH_API.LIGHTBOX.isTablet();};DIGIOH_API.isDesktop=function(obj){return DIGIOH_API.LIGHTBOX.isDesktop();};DIGIOH_API.isIOS=function(obj){return DIGIOH_API.LIGHTBOX.isiOs();};DIGIOH_API.isAndroid=function(obj){return DIGIOH_API.LIGHTBOX.isAndroid();};DIGIOH_API.isNewSession=function(obj){return DIGIOH_API.GET_ANALYTICS().IsNewSession;};DIGIOH_API.isNewVisitor=function(obj){return DIGIOH_API.GET_ANALYTICS().IsNewVisitor;};DIGIOH_API.getPagesNavigatedAllTime=function(obj){return DIGIOH_API.GET_ANALYTICS().VARS.PagesNavigated;};DIGIOH_API.getDaysSinceLastPageview=function(obj){try{var timestamp=new Date().getTime();var diff=Math.floor((timestamp-DIGIOH_API.GET_ANALYTICS().PreviousPageviewTs)/(1000*60*60*24));return diff;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getDaysSinceLastPageview");return 0;}};DIGIOH_API.getAccountId=function(obj){return DIGIOH_VENDOR_SHORT_ID;};DIGIOH_API.getAccountGuid=function(obj){return DIGIOH_VENDOR_GUID;};DIGIOH_API.getClientId=function(obj){return CLIENT_GUID;};DIGIOH_API.closeAllBoxes=function(){try{DIGIOH_API.LIGHTBOX.closeAllOpenLightboxes();}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"closeAllBoxes");}};DIGIOH_API.closeBox=function(boxId){try{boxId=DIGIOH_API.getBoxGUID(boxId);if(!boxId)
DIGIOH_API.LIGHTBOX.closeAllOpenLightboxes();else
DIGIOH_API.LIGHTBOX.closeAllOpenLightboxes(boxId);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"closeBox");}};DIGIOH_API.openBox=function(boxId){try{boxId=DIGIOH_API.getBoxGUID(boxId);if(boxId){DIGIOH_API.log("loadLightbox: DIGIOH_API.openBox, "+boxId);DIGIOH_API.LIGHTBOX.loadLightbox(boxId);}
else{DIGIOH_API.log('DIGIOH_API.openBox ==> boxId parameter is required!');}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"openBox");}};DIGIOH_API.addBoxIntegration=function(boxId,integrationId){try{if(boxId&&boxId.length<20)
boxId=DIGIOH_API.getBoxGUID(boxId);if(!boxId){DIGIOH_API.log('DIGIOH_API.addBoxIntegration ==> boxId parameter is required!');return;}
if(!integrationId||(typeof integrationId==='string'&&integrationId.indexOf('-')>0)){DIGIOH_API.log('DIGIOH_API.addBoxIntegration ==> integrationId parameter is required!  It should be the short id value of the integration.');return;}
if(typeof integrationId!=='string')
integrationId=integrationId.toString();if(!DIGIOH_API.LIGHTBOX.INTEGRATION_MAP.hasOwnProperty(boxId)){DIGIOH_API.LIGHTBOX.INTEGRATION_MAP[boxId]=integrationId;DIGIOH_API.log('DIGIOH_API.addBoxIntegration ==> (BOX #'+boxId+') - Added integration_id '+integrationId+' to INTEGRATION_MAP');DIGIOH_API.log(DIGIOH_API.LIGHTBOX.INTEGRATION_MAP);}
else if(DIGIOH_API.LIGHTBOX.INTEGRATION_MAP[boxId].indexOf(integrationId)===-1){if(DIGIOH_API.LIGHTBOX.INTEGRATION_MAP[boxId].length>1){DIGIOH_API.LIGHTBOX.INTEGRATION_MAP[boxId]+=',';}
DIGIOH_API.LIGHTBOX.INTEGRATION_MAP[boxId]+=integrationId;DIGIOH_API.log('DIGIOH_API.addBoxIntegration ==> (BOX #'+boxId+') - Added integration_id '+integrationId+' to INTEGRATION_MAP');DIGIOH_API.log(DIGIOH_API.LIGHTBOX.INTEGRATION_MAP);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"addBoxIntegration");}};DIGIOH_API.removeBoxIntegration=function(boxId,integrationId){try{boxId=DIGIOH_API.getBoxGUID(boxId);if(!boxId){DIGIOH_API.log('DIGIOH_API.removeBoxIntegration ==> boxId parameter is required!');return;}
if(!integrationId||(typeof integrationId==='string'&&integrationId.indexOf('-')>0)){DIGIOH_API.log('DIGIOH_API.removeBoxIntegration ==> integrationId parameter is required!  It should be the short id value of the integration.');return;}
if(typeof integrationId!=='string')
integrationId=integrationId.toString();if(DIGIOH_API.LIGHTBOX.INTEGRATION_MAP.hasOwnProperty(boxId)&&DIGIOH_API.LIGHTBOX.INTEGRATION_MAP[boxId].indexOf(integrationId)>=0){DIGIOH_API.LIGHTBOX.INTEGRATION_MAP[boxId]=DIGIOH_API.LIGHTBOX.INTEGRATION_MAP[boxId].replace(','+integrationId,'').replace(integrationId+',','').replace(integrationId,'');DIGIOH_API.log('DIGIOH_API.removeBoxIntegration ==> (BOX #'+boxId+') - Removed integration_id '+integrationId+' from INTEGRATION_MAP');DIGIOH_API.log(DIGIOH_API.LIGHTBOX.INTEGRATION_MAP);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"removeBoxIntegration");}};DIGIOH_API.resetBoxIntegrations=function(boxId){try{boxId=DIGIOH_API.getBoxGUID(boxId);if(!boxId){DIGIOH_API.log('DIGIOH_API.resetBoxIntegrations ==> boxId parameter is required!');return;}
if(DIGIOH_API.LIGHTBOX.INTEGRATION_MAP.hasOwnProperty(boxId)){delete DIGIOH_API.LIGHTBOX.INTEGRATION_MAP[boxId];}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"resetBoxIntegrations");}};DIGIOH_API.getBoxType=function(boxId){try{boxId=DIGIOH_API.getBoxGUID(boxId);if(!boxId){DIGIOH_API.log('DIGIOH_API.getBoxType ==> boxId parameter is required!');return '';}
if(!DIGIOH_API.GET_EFFECTS(boxId)){DIGIOH_API.log('DIGIOH_API.getBoxType ==> boxId '+boxId+' not found in EFFECTS object!');return '';}
if(DIGIOH_API.GET_EFFECTS(boxId).widget_type==='sidebar'&&DIGIOH_API.GET_EFFECTS(boxId).sidebar.hasOwnProperty('is_converted_lightbox')&&DIGIOH_API.GET_EFFECTS(boxId).sidebar.is_converted_lightbox)
return 'lightbox';if(DIGIOH_API.GET_EFFECTS(boxId).widget_type==='fancybox')
return 'lightbox';return DIGIOH_API.GET_EFFECTS(boxId).widget_type;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getBoxType");return '';}};DIGIOH_API.getBoxGUID=function(boxIDorGUID){try{if(!boxIDorGUID){DIGIOH_API.log('DIGIOH_API.getBoxGUID ==> boxIDorGUID parameter is required!');return '';}
if(typeof boxIDorGUID!=='string')
boxIDorGUID=boxIDorGUID.toString();if(boxIDorGUID.indexOf('-')>0&&boxIDorGUID.length>30)
return boxIDorGUID;var boxShortID=boxIDorGUID;for(var guid in DIGIOH_LIGHTBOX_IDS){if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(guid)&&DIGIOH_LIGHTBOX_IDS[guid].toString()===boxShortID){return guid;}}
return '';}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getBoxGUID");return '';}};DIGIOH_API.getBoxID=function(boxIDorGUID){try{if(!boxIDorGUID){DIGIOH_API.log('DIGIOH_API.getBoxID ==> boxIDorGUID parameter is required!');return '';}
if(typeof boxIDorGUID!=='string')
boxIDorGUID=boxIDorGUID.toString();if(boxIDorGUID.indexOf('-')<0&&boxIDorGUID.length<30)
return boxIDorGUID;var boxGUID=boxIDorGUID;if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(boxGUID)){return DIGIOH_LIGHTBOX_IDS[boxGUID].toString();}
return '';}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getBoxID");return '';}};DIGIOH_API.getBoxIDFromBoxOrVariation=function(boxIDorGUID){try{if(!boxIDorGUID){DIGIOH_API.log('DIGIOH_API.getBoxIDFromBoxOrVariation ==> boxIDorGUID parameter is required!');return '';}
if(typeof boxIDorGUID!=='string')
boxIDorGUID=boxIDorGUID.toString();if(boxIDorGUID.indexOf('-')<0&&boxIDorGUID.length<30){var boxShortID=boxIDorGUID;for(var guid in DIGIOH_LIGHTBOX_IDS){if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(guid)&&DIGIOH_LIGHTBOX_IDS[guid].toString()===boxShortID){if(guid.indexOf('var-')!==0){return boxShortID;}
else{boxIDorGUID=guid;break;}}}}
var boxGUID=boxIDorGUID;var isVariation=false;var parentBoxGUID=boxGUID;var variationGUID='';if(DIGIOH_VARIATION_TO_BOX_MAP.hasOwnProperty(boxGUID)){variationGUID=boxGUID;parentBoxGUID=DIGIOH_VARIATION_TO_BOX_MAP[boxGUID];isVariation=true;}else if(LIGHTBOX_TO_VARIATION_MAP.hasOwnProperty(boxGUID)){variationGUID=LIGHTBOX_TO_VARIATION_MAP[boxGUID];parentBoxGUID=boxGUID;isVariation=true;boxGUID=variationGUID;}
if(DIGIOH_LIGHTBOX_IDS.hasOwnProperty(parentBoxGUID)){return DIGIOH_LIGHTBOX_IDS[parentBoxGUID].toString();}
return '';}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getBoxIDFromBoxOrVariation");return '';}};DIGIOH_API.isCaptchaEnabled=function(boxIDorGUID){try{if(typeof DIGIOH_API.ICE_BOXES!=='string'){DIGIOH_API.log('DIGIOH_API.ICE_BOXES ==> undefined');return false;}
if(!boxIDorGUID){DIGIOH_API.log('DIGIOH_API.isCaptchaEnabled ==> boxIDorGUID parameter is required!');return false;}
if(typeof boxIDorGUID!=='string')
boxIDorGUID=boxIDorGUID.toString();var boxGUID=DIGIOH_API.getBoxGUID(boxIDorGUID);return DIGIOH_API.ICE_BOXES.indexOf('|'+boxGUID+'|')>=0;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"isCaptchaEnabled");return '';}};DIGIOH_API.isValidEmail=function(email,obj){try{if(typeof email!=='string'||email.indexOf('@')<=0){DIGIOH_API.log('DIGIOH_API.isValidEmail ==> email parameter is required!');return false;}
var emailParts=email.split('@'),emailName=emailParts[0],emailDomain=emailParts[1],emailDomainParts=emailDomain.split('.'),validChars='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.0123456789_-+',validCharsBasic='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_';var valid_email_regex=/\S+@\S+\.\S+/;if(!valid_email_regex.test(email)){DIGIOH_API.log('DIGIOH_API.isValidEmail ==> Failed regex format test');return false;}
if(emailParts.length!==2){DIGIOH_API.log('DIGIOH_API.isValidEmail ==> Wrong number of @ signs');return false;}
if(emailName.length<1||emailDomain.length<3){DIGIOH_API.log('DIGIOH_API.isValidEmail ==> Wrong number of characters before or after @ sign');return false;}
if(emailDomain.indexOf('.')<=0){DIGIOH_API.log('DIGIOH_API.isValidEmail ==> Domain must include but not start with .');return false;}
if(email.indexOf(',')>=0||email.indexOf("'")>=0||email.indexOf('`')>=0||email.indexOf('"')>=0||email.indexOf(' ')>=0){DIGIOH_API.log('DIGIOH_API.isValidEmail ==> Email must exclude most special characters');return false;}
if(validCharsBasic.indexOf(emailName.substr(emailName.length-1))<0){DIGIOH_API.log('DIGIOH_API.isValidEmail ==> no special chars immediately before @ symbol');return false;}
if(validCharsBasic.indexOf(emailDomain.substr(0,1))<0){DIGIOH_API.log('DIGIOH_API.isValidEmail ==> no special chars immediately after @ symbol');return false;}
if(validCharsBasic.indexOf(emailName.substr(0,1))<0){DIGIOH_API.log('DIGIOH_API.isValidEmail ==> Email must not start with special chars');return false;}
if(emailDomainParts[emailDomainParts.length-1].length<2){DIGIOH_API.log('DIGIOH_API.isValidEmail ==> Domains last . should be 2 chars or more from the end');return false;}
if(emailName.indexOf(' ')>0||emailDomain.indexOf(' ')>0||emailName.indexOf('..')>=0||emailDomain.indexOf('..')>=0){DIGIOH_API.log('DIGIOH_API.isValidEmail ==> Found extra spaces or chained periods');return false;}
const wrongMails=["gogglemail","googlmail","goglemail","hotmial","hotmal","hoitmail","homail","hotnail","hotrmail","hotmil","hotmaill","ntlwolrd","ntlword","ntl.world","ntlwrold","tiscale","tiscalli","tiscally","tiscaly","btinterent","btinternt","yaho.","uahoo","ayhoo","ymial","ymal","ymil","ymaill","ynail","yail","gmial","gmal","gmil","gnail","gmaill","gail"];const wrongMailEnds=["con","cmo","cno","cmom","kcom","conm","kom","cm","c","o","coom","comm","ccom"];if(wrongMails.filter(item=>emailDomain.toLowerCase().indexOf(item.toLowerCase())>-1).length>0){DIGIOH_API.log('DIGIOH_API.isValidEmail ==> Found email typo');return false;}
if(wrongMailEnds.filter(item=>emailDomainParts[1]==item).length>0){DIGIOH_API.log('DIGIOH_API.isValidEmail ==> Found email typo');return false;}
return true;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"isValidEmail");return false;}};DIGIOH_API.writeCustomFlag=function(flagId,obj){try{if(!flagId){DIGIOH_API.log('DIGIOH_API.writeCustomFlag ==> flagId parameter is required!');return;}
DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH('body').append('<div id="'+flagId+'" class="box_custom_flag"></div>');}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"writeCustomFlag");}};DIGIOH_API.reload=function(obj){try{var url='';var sendPvEvent=true;var updatePvVars=true;var useMasterRules=true;var recalculateAbTests=false;if(obj&&typeof obj==='object'&&obj.hasOwnProperty('url'))
url=obj.url;if(obj&&typeof obj==='object'&&obj.hasOwnProperty('sendPvEvent'))
sendPvEvent=obj.sendPvEvent;if(obj&&typeof obj==='object'&&obj.hasOwnProperty('updatePvVars'))
updatePvVars=obj.updatePvVars;if(obj&&typeof obj==='object'&&obj.hasOwnProperty('useMasterRules'))
useMasterRules=obj.useMasterRules;if(obj&&typeof obj==='object'&&obj.hasOwnProperty('recalculateAbTests'))
recalculateAbTests=obj.recalculateAbTests;DIGIOH_API.LIGHTBOX.onPageUrlChanged(url,sendPvEvent,updatePvVars,useMasterRules,recalculateAbTests);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"reload");}};DIGIOH_API.enableReloadOnUrlChange=function(obj){DIGIOH_API.CURRENT_PAGE_URL=DIGIOH_API.CURRENT_PAGE_URL||window.location.href;var sendPvEvent=true;var updatePvVars=true;var useMasterRules=true;var recalculateAbTests=false;var checkIntervalMillis=500;try{if(obj&&typeof obj==='object'&&obj.hasOwnProperty('sendPvEvent'))
sendPvEvent=obj.sendPvEvent;if(obj&&typeof obj==='object'&&obj.hasOwnProperty('updatePvVars'))
updatePvVars=obj.updatePvVars;if(obj&&typeof obj==='object'&&obj.hasOwnProperty('useMasterRules'))
useMasterRules=obj.useMasterRules;if(obj&&typeof obj==='object'&&obj.hasOwnProperty('recalculateAbTests'))
recalculateAbTests=obj.recalculateAbTests;if(obj&&typeof obj==='object'&&obj.hasOwnProperty('checkIntervalMillis')&&typeof obj.checkIntervalMillis==='number')
checkIntervalMillis=obj.checkIntervalMillis;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"enableReloadOnUrlChange ");}
function checkReloadDigiohOnUrlChange(){try{if(window.location.href!=DIGIOH_API.CURRENT_PAGE_URL){DIGIOH_API.CURRENT_PAGE_URL=window.location.href;DIGIOH_API.LIGHTBOX.closeAllInlineForms();DIGIOH_API.LIGHTBOX.closeAllOpenLightboxes();DIGIOH_API.LIGHTBOX.onPageUrlChanged(DIGIOH_API.CURRENT_PAGE_URL,sendPvEvent,updatePvVars,useMasterRules,recalculateAbTests);DIGIOH_CUSTOM_JS.log('enableReloadOnUrlChange  - Lightbox_Page_URL_Changed_SUCCESS: '+DIGIOH_API.CURRENT_PAGE_URL);}}
catch(e){DIGIOH_API.log('enableReloadOnUrlChange  - Lightbox_Page_URL_Changed_ERROR ==> '+DIGIOH_API.CURRENT_PAGE_URL);DIGIOH_API.log(e.message);}}
DIGIOH_API.enableReloadOnUrlChangeInterval=setInterval(function(){checkReloadDigiohOnUrlChange();},checkIntervalMillis);checkReloadDigiohOnUrlChange();};DIGIOH_API.isReady=function(obj){return DIGIOH_API.LIGHTBOX.isDigiohReady();};DIGIOH_API.logEvent=function(data,options){try{if(DIGIOH_API.CONFIG.REGION!=='US'||DIGIOH_API.CONFIG.LOG_BASE_URL.indexOf('skipendpoint')>=0){DIGIOH_API.log('DIGIOH_API.logEvent ==> will not run for accounts that are based outside the US!');return;}
if(!data||typeof data!=='object'){DIGIOH_API.log('DIGIOH_API.logEvent ==> data param is required!');return;}
updateKeenSchemaBeforeSending();var ev={};ev.geoip=KEEN_SCHEMA.geoip;ev.device_atlas=KEEN_SCHEMA.device_atlas;ev.entry_point=KEEN_SCHEMA.entry_point;ev.referrer_url=document.referrer;ev.current_url=document.location.href;ev.cache_version=DIGIOH_CACHE_VERSION;ev.is_preview=IS_PREVIEW;ev.client_id=CLIENT_GUID;ev.event_id=generateGuidWithTimestamp();ev.user_id=DIGIOH_API.getAccountId();ev.user_guid=DIGIOH_API.getAccountGuid();ev.page_total_time=TOTAL_TIME;ev.page_active_time=TOTAL_TIME-IDLE_TIME;ev.page_idle_time=IDLE_TIME;var dt=(new Date()).getTime();if(!options||typeof options!=='object')
options={};if(!options.hasOwnProperty('group'))
options.group='default';var isExpDefault=false;if(!options.hasOwnProperty('exp')){options.exp=dt+(72*60*60*1000);isExpDefault=true;}
try{if(typeof options.exp==='string'&&(options.exp.indexOf('/')>0||options.exp.indexOf('-')>0||options.exp.indexOf('.')>0))
options.exp=Date.parse(options.exp);}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
options.exp=dt+(72*60*60*1000);isExpDefault=true;logError(err,"DIGIOH_API.logEvent.Date.parse(options.exp)");}
var opt={};try{var localOptions=localStorage.getItem('__d_widget_logs');if(typeof localOptions==='string'&&localOptions.length>7){opt=JSON.parse(LZString.decompressFromBase64(localOptions));if(opt.hasOwnProperty(options.group)&&opt[options.group].hasOwnProperty('exp')&&isExpDefault){options.exp=opt[options.group]['exp'];}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(err,"DIGIOH_API.logEvent.localOptions");}
opt[options.group]={};opt[options.group]['exp']=options.exp;localStorage.setItem('__d_widget_logs',LZString.compressToBase64(JSON.stringify(opt)));if(dt>options.exp){DIGIOH_API.log('DIGIOH_API.logEvent ==> Log event suppressed.  Log group ('+options.group+') expired on '+new Date(options.exp));return;}
DIGIOH_API.log('DIGIOH_API.logEvent ==> Log event sent!  Log group ('+options.group+') expires on '+new Date(options.exp));ev.options_group=options.group;ev.options_exp=options.exp;var event_schema=mergeObjectData(ev,data);if(DIGIOH_API.CONFIG.REGION=='US'||DIGIOH_API.CONFIG.LOG_BASE_URL.indexOf('skipendpoint')<0){var img=new Image();img.src=(DIGIOH_API.CONFIG.LOG_BASE_URL+'/Keen/LgEv?u='+DIGIOH_API.getAccountId()+'&k='+encodeURIComponent(DIGIOH_KEEN_WRITE_KEY)+'&p='+encodeURIComponent(LZString.compressToBase64(JSON.stringify(event_schema))));}}
catch(e)
{if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"logEvent");}};DIGIOH_API.getBrowserLanguages=getBrowserLanguages;DIGIOH_API.trim=function(str){try{return str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,'');}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"trim");return str;}};DIGIOH_API.contains=function(obj,val){try{if(typeof obj==='undefined'||obj===null){return false;}
if(typeof obj==='string'){return obj.indexOf(val)>=0;}
if(DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH.isArray(obj)){return DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH.inArray(val,obj)>=0;}
return false;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"contains");return false;}};DIGIOH_API.remove=function(obj,valToRemove){try{if(typeof obj==='undefined'||obj===null){return obj;}
if(typeof obj==='string'&&obj.indexOf(valToRemove)>=0){obj=obj.split(valToRemove).join('');}
else if(DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH.isArray(obj)){obj=DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH.grep(obj,function(v){return valToRemove!=v;});}
return obj;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"remove");return obj;}};DIGIOH_API.hideUrlParameter=function(key){try{if(typeof key!=='string'||!key)
return;if(top.location.search.indexOf(key+'=')>=0){var qre=new RegExp('[\?&]'+key+'=[^&]+','gi');top.history.replaceState(null,null,top.location.protocol+'//'+top.location.host+top.location.pathname+top.location.search.replace(qre,'').replace(/^&/,'?'));}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"hideUrlParameter");}};DIGIOH_API.getDataLayerValue=function(key,box_id){try{if(typeof key!=='string'||!key)
return null;var curr=DIGIOH_LOCAL_STORAGE.getManual('fsdbx');if(typeof curr!=='object'||!curr)
return null;if(typeof box_id==='number')
box_id=box_id.toString();if(typeof box_id==='string'&&box_id.length>2){var box_short_id=DIGIOH_API.getBoxID(box_id);if(!curr.hasOwnProperty(box_short_id)||typeof curr[box_short_id]!=='object'||curr[box_short_id]===null||!curr[box_short_id].hasOwnProperty(key))
return null;return curr[box_short_id][key];}
else if(curr.hasOwnProperty(key)){return curr[key];}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getDataLayerValue");}
return null;};DIGIOH_API.setDataLayerValue=function(key,val,box_id){try{if(typeof key!=='string'||!key)
return;var curr=DIGIOH_LOCAL_STORAGE.getManual('fsdbx');if(typeof curr!=='object'||!curr)
curr={};if(typeof box_id==='number')
box_id=box_id.toString();if(typeof box_id==='string'&&box_id.length>2){var box_short_id=DIGIOH_API.getBoxID(box_id);if(!curr.hasOwnProperty(box_short_id)||typeof curr[box_short_id]!=='object'||curr[box_short_id]===null)
curr[box_short_id]={};curr[box_short_id][key]=val;DIGIOH_LOCAL_STORAGE.setManual('fsdbx',curr);}
else{curr[key]=val;DIGIOH_LOCAL_STORAGE.setManual('fsdbx',curr);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"setDataLayerValue");}};DIGIOH_API.removeDataLayerValue=function(key,box_id){try{if(typeof key!=='string'||!key)
return;var curr=DIGIOH_LOCAL_STORAGE.getManual('fsdbx');if(typeof curr!=='object'||!curr)
return;if(typeof box_id==='number')
box_id=box_id.toString();if(typeof box_id==='string'&&box_id.length>2){var box_short_id=DIGIOH_API.getBoxID(box_id);if(!curr.hasOwnProperty(box_short_id)||typeof curr[box_short_id]!=='object'||curr[box_short_id]===null||!curr[box_short_id].hasOwnProperty(key))
return;delete curr[box_short_id][key];DIGIOH_LOCAL_STORAGE.setManual('fsdbx',curr);}
else if(curr.hasOwnProperty(key)){delete curr[key];DIGIOH_LOCAL_STORAGE.setManual('fsdbx',curr);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"removeDataLayerValue");}};DIGIOH_API.getDataLayer=function(box_id){try{var curr=DIGIOH_LOCAL_STORAGE.getManual('fsdbx');if(typeof curr!=='object'||!curr)
return{};if(typeof box_id==='number')
box_id=box_id.toString();if(typeof box_id==='string'&&box_id.length>2){var box_short_id=DIGIOH_API.getBoxID(box_id);if(!curr.hasOwnProperty(box_short_id)||typeof curr[box_short_id]!=='object'||curr[box_short_id]===null)
return{};return curr[box_short_id];}
else{return curr;}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getDataLayer");}
return{};};DIGIOH_API.setDataLayer=function(obj,box_id){try{if(typeof obj!=='object'||!obj)
return;var curr=DIGIOH_LOCAL_STORAGE.getManual('fsdbx');if(typeof curr!=='object'||!curr)
curr={};if(typeof box_id==='number')
box_id=box_id.toString();if(typeof box_id==='string'&&box_id.length>2){var box_short_id=DIGIOH_API.getBoxID(box_id);if(!curr.hasOwnProperty(box_short_id)||typeof curr[box_short_id]!=='object'||curr[box_short_id]===null)
curr[box_short_id]={};for(var prop in obj){if(obj.hasOwnProperty(prop)){curr[box_short_id][prop]=obj[prop];}}
DIGIOH_LOCAL_STORAGE.setManual('fsdbx',curr);}
else{for(var prop in obj){if(obj.hasOwnProperty(prop)){curr[prop]=obj[prop];}}
DIGIOH_LOCAL_STORAGE.setManual('fsdbx',curr);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"setDataLayer");}};DIGIOH_API.clearDataLayer=function(box_id){try{if(typeof box_id==='number')
box_id=box_id.toString();if(typeof box_id==='string'&&box_id.length>2){var curr=DIGIOH_LOCAL_STORAGE.getManual('fsdbx');if(typeof curr!=='object'||!curr)
curr={};var box_short_id=DIGIOH_API.getBoxID(box_id);curr[box_short_id]={};DIGIOH_LOCAL_STORAGE.setManual('fsdbx',curr);}
else{curr={};DIGIOH_LOCAL_STORAGE.setManual('fsdbx',curr);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"clearDataLayer");}};DIGIOH_API.getFormData=function(box_id){try{if(typeof box_id==='number')
box_id=box_id.toString();var box_short_id=DIGIOH_API.getBoxID(box_id).toString();if(DIGIOH_API.LIGHTBOX.hasOwnProperty('SINGLE_PAGE_FORM_DATA')&&DIGIOH_API.LIGHTBOX.SINGLE_PAGE_FORM_DATA&&DIGIOH_API.LIGHTBOX.SINGLE_PAGE_FORM_DATA.hasOwnProperty(box_short_id)){return DIGIOH_API.LIGHTBOX.SINGLE_PAGE_FORM_DATA[box_short_id];}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getFormData");}
return null;};DIGIOH_API.getWidgetMetadata=function(box_id,key){try{if(typeof box_id!=='string'&&typeof box_id!=='number')
return null;var box_guid=DIGIOH_API.getBoxGUID(box_id);if(!box_guid||box_guid.length<20)
return null;var box_effects=DIGIOH_API.GET_EFFECTS(box_guid);if(box_effects&&box_effects.widget_type&&box_effects[box_effects.widget_type]&&box_effects[box_effects.widget_type].metadata_kvps){if(typeof key!=='string'||!key)
return box_effects[box_effects.widget_type].metadata_kvps;for(var i=0;i<box_effects[box_effects.widget_type].metadata_kvps.length;i++){if(box_effects[box_effects.widget_type].metadata_kvps[i].k===key)
return box_effects[box_effects.widget_type].metadata_kvps[i].v;}}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getWidgetMetadata");}
return null;};DIGIOH_API.getAccountMetadata=function(key){try{if((typeof key==='undefined'||key===null||!key)&&typeof ACCOUNT_METADATA==='object')
return ACCOUNT_METADATA;if(typeof key==='string'&&key.length>0&&typeof ACCOUNT_METADATA==='object'&&ACCOUNT_METADATA!==null&&ACCOUNT_METADATA.hasOwnProperty(key))
return ACCOUNT_METADATA[key];}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getAccountMetadata");}
return null;};DIGIOH_API.getMVTestGroups=function(){const testIds=[];for(const testObj of DIGIOH_SPLIT_TESTS_ARR){const splitShortId=testObj.split_short_id;const splitGuid=testObj.split_guid;if(testObj.test_type=='multivariate'){let testId=splitShortId+'-';const inTestBoxGuids=testObj.box_guids.split(',');for(const inTestBoxGuid of inTestBoxGuids){if(api.LIGHTBOX.AB_BOXES_TAKE_MAP[inTestBoxGuid]==splitGuid){testId+=api.getBoxID(inTestBoxGuid);testIds.push(testId);break;}}
if(/-$/.test(testId))throw new Error('Could not find box in test');}}
return testIds;}
DIGIOH_API.get$=function(){try{return DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH;}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"get$");}
return null;};DIGIOH_API.reset=function(){try{DIGIOH_API.clearDataLayer();DIGIOH_COOKIE.erase('xdibx');localStorage.removeItem('fsdbx');localStorage.removeItem('xdibx');localStorage.removeItem('xdibx_pgsnavurls');}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"reset");}};DIGIOH_API.resetAll=function(){try{DIGIOH_API.reset();localStorage.clear();var cookies=window.parent.document.cookie.split(";");for(var i=0;i<cookies.length;i++){DIGIOH_COOKIE.erase(cookies[i].split("=")[0]);}}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"resetAll");}};DIGIOH_API.getClientTimeZone=function(){try{return DIGIOH_API.GET_ANALYTICS().VARS.time_zone||'';}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getClientTimeZone");}
return '';};DIGIOH_API.getLongitude=function(){try{return DIGIOH_API.GET_ANALYTICS().VARS.longitude||'';}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getLongitude");}
return '';};DIGIOH_API.getLatitude=function(){try{return DIGIOH_API.GET_ANALYTICS().VARS.latitude||'';}
catch(e){if(DIGIOH_API.tryShowError(e)){e.message='DIGIOH_ERROR: user.js -- '+e.message;console.error(e);}
logError(e,"getLatitude");}
return '';};DIGIOH_API.downloadQuizResultsTable=function(){var currentdate=new Date();var datetime=currentdate.getFullYear()+"_"+(currentdate.getMonth()+1)+"_"+currentdate.getDate()+"_"
+currentdate.getHours()+"_"+currentdate.getMinutes()+"_"+currentdate.getSeconds();var filename='Quiz_Results_Account'+DIGIOH_API.getAccountId()+'_'+datetime;var html="<html><head><style id='quiz_test_styles' type='text/css'>"+DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH('#quiz_test_styles').html()+"</style></head><body><div id='quiz_test_results'>"+DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH('#quiz_test_results').html()+"</div></body></html>";var pom=document.createElement('a');pom.setAttribute('href','data:text/html;charset=utf-8,'+encodeURIComponent(html));pom.setAttribute('download',filename);if(document.createEvent){var event=document.createEvent('MouseEvents');event.initEvent('click',true,true);pom.dispatchEvent(event);}
else{pom.click();}};DIGIOH_API.DIGIOH_LIGHTBOX_IDS=DIGIOH_LIGHTBOX_IDS;window.DIGIOH_API=DIGIOH_API;window.LIGHTBOX_API=DIGIOH_API;hideEmbedDivContainer();appendFbDigiohCss();afterScriptLoaded();}(window.parent,window.parent.document,window,LZString));