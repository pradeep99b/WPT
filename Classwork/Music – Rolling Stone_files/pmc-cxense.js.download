(()=>{var e={109:(e,t)=>{t.q={DMPWeight:1,onetrustToDMPMapping:{C0001:1,C0002:2,C0003:2,C0004:3},DMPWeightConsentAll:3,weightsToModes:{1:"opt-out",2:"essential",3:"opt-in"},hookIntoOneTrust:function(){window.pmc_cxense_data?.isConsentDisabled||(console.log("PMC: Cxense:","Consent Initialization.."),window.pmc.hooks.add_action("pmc_onetrust_consent_data_ready",this.determineDMPMode.bind(this)))},determineDMPMode:function({groupsConsentedTo:e}){const t=this;if(console.log("PMC: Cxense:","pmc_onetrust_consent_data_ready","OneTrust groups consented to",e),0<e.length){const n=e.length>=Object.keys(t.onetrustToDMPMapping).length,s=e.filter((e=>t.onetrustToDMPMapping[e])).map((e=>t.onetrustToDMPMapping[e]));t.DMPWeight=Math.max(...s,n?t.DMPWeightConsentAll:t.DMPWeight),console.log("PMC: Cxense:","DMPWeight",t.DMPWeight)}window.cX.callQueue.push(["invoke",t.setDMPMode.bind(t)])},setDMPMode:function(){var e;window.pdl=window.pdl||{},window.pdl.requireConsent=!0,["ESP","Social Flow","COMPOSER","ID","PA","VX","DL"].forEach((e=>{window.cX.consent.set(e,{mode:"opt-out"})})),window.cX.consent.set("DMP",{mode:null!==(e=this.weightsToModes[this.DMPWeight])&&void 0!==e?e:"opt-out"}),console.log("PMC: Cxense:","cX.consent.get()",window.cX.consent.get())}}},293:(e,t,n)=>{const s=n(109).q;let i,o=window.cX=window.cX||{};window.cookie3PSupported=null,window.cxpmc={custom_parameters:pmc_cxense_data.custom_parameters,initialized:!1,is_proxied:!1,modules:pmc_cxense_data.modules,page_location:pmc_cxense_data.page_location,paywall_parameters:pmc_cxense_data.paywall_parameters,site_id:pmc_cxense_data.site_id,current_url:window.location.href,utms:window?.pmc?.tracking?.get_properties_string(),get_page_location:function(){let e=this.current_url,t=!1;return this.page_location.length&&(e=this.page_location),t=/#/i.test(e),this.utms&&t&&(e=e.split("#")[0]+(window.location.search?"&":"?")+this.utms),this.is_proxied?pmc.reverse_proxy_url(e):e},get_page_view_parameters:function(){return["sendPageViewEvent",null,null,{location:this.get_page_location()}]},initialize:function(){var e=this;window.pmc.is_proxied()&&(e.is_proxied=!0,e.page_location=e.get_page_location()),e.set_user_default_data();const t=[];t.push(new Promise(((e,t)=>{window.pmc.subscription_v2.on_subscriber_data_loaded((function(t){e(t)}),(function(){e()}))}))),window.pmcPiano?.entitlements&&t.push(new Promise((e=>{window.pmcPiano.entitlements.on_subscriber_data_loaded((function(t){console.log("[cx] - Subscriber data from Piano:",t),e(t),void 0!==window.pmcPiano?.entitlements?.cxenseCallbackCalled&&(window.pmcPiano.entitlements.cxenseCallbackCalled=!0)}))}))),Promise.all(t).then((t=>{let n={},s=new Set;console.log("[cx] - Combining subscriber data",t);try{for(const e of t)e&&e.user&&(n={...n,...e},e.user?.entitlements?.map((e=>s.add(e))));n?.user&&(n={...n,user:{...n.user,entitlements:Array.from(s)}},console.log("[cx] - Loading combined subscriber data",n),e.subscriber.check_subscriber_data(n))}catch(e){console.log("[cx] - Error loading subscriber_data "+e)}e.run(),e.load_modules()})),e.initialized=!0},load_cce:function(e){var t=document.createElement("script");t.type="text/javascript",t.async="async",t.src="https://scdn.cxense.com/cx.cce.js",t.onload=e,t.onerror=function(){console.log("Error loading "+t.src)},document.getElementsByTagName("head")[0].appendChild(t)},load_modules:function(){this.modules.length&&this.modules.forEach((function(e){document.getElementById(e.targetElementId)&&o.CCE.callQueue.push(["run",e,{context:{url:window.cxpmc.get_page_location()}}])}))},shouldSendPageView:function(){const e=new URL(this.get_page_location());let t=!0;const n=new URLSearchParams(e.search),s=n.has("pmc_sitemap"),i=n.has("preview");return(s||i)&&(t=!1),t},report_gallery_pv:function(){o.callQueue.push(["initializePage"]),this.run()},run:function(){this.site_id.length&&(this.update_custom_parameters(),o.callQueue.push(["setSiteId",this.site_id]),Object.keys(this.custom_parameters).length&&o.callQueue.push(["setCustomParameters",JSON.parse(JSON.stringify(this.custom_parameters))]),this.shouldSendPageView()&&o.CCE.callQueue.push(this.get_page_view_parameters()))},update_custom_parameters:function(){if(this.custom_parameters["pmc-logged-in"]=this.subscriber.logged_in,this.custom_parameters["pmc-subscriber-type"]=this.subscriber.subscriber_type,this.custom_parameters["pmc-concurrency_rest"]=this.subscriber.concurrency_restricted,this.utms){const e=new URLSearchParams(this.utms).entries();for(const[t,n]of e)this.custom_parameters[t]=n}},set_user_default_data:function(){this.custom_parameters.pmc_account_type="",this.custom_parameters.pmc_campaign="",this.custom_parameters.pmc_reg_date="",this.custom_parameters.pmc_days_since_reg=""},days_ago:function(e){var t=new Date(e),n=new Date;return parseInt((n-t)/864e5,10)},subscriber:{logged_in:"no",subscriber_type:"free",concurrency_restricted:"no",object_combine:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},check_subscriber_data:function(e){if(this.logged_in="yes",(window.pmc.subscription_v2.has_entitlements()||"piano"===e?.data_type)&&this.translate_subscriber_entitlements(e),e.session?.hasOwnProperty("concurrency_restricted")&&!0===e.session.concurrency_restricted&&(this.concurrency_restricted="yes"),e.user.hasOwnProperty("acct")){var t={},n={};if(e.user.acct.hasOwnProperty("type")&&null!==e.user.acct.type&&(n.pmc_account_type=e.user.acct.type),e.user.acct.hasOwnProperty("contact_id")&&null!==e.user.acct.contact_id&&(t={id:e.user.acct.contact_id,type:"pmc"}),window.pmc.subscription_v2.is_registered_user()){var s=window.pmc.subscription_v2.get_registered_user_data();n.pmc_campaign=s.cam,n.pmc_reg_date=s.date,n.pmc_days_since_reg=window.cxpmc.days_ago(s.date)}t=this.object_combine(t,n),window.cxpmc.custom_parameters=this.object_combine(window.cxpmc.custom_parameters,n),o.callQueue.push(["addExternalId",t]),o.callQueue.push(["setUserProfileParameters",t]),o.callQueue.push(["sendEvent","user-login",t])}},pmc_hook_helper_functions:function(e){return{entitlements:e,has:(...t)=>()=>t.filter((t=>e.includes(t))).length===t.length,or:(...e)=>()=>e.filter((e=>e())).length>0,exec:e=>Object.entries(e).filter((([e,t])=>t()))?.pop()?.shift()}},translate_subscriber_entitlements:function(e){this.subscriber_type=pmc.hooks.apply_filters("cxense_entitlements",this.subscriber_type,this.pmc_hook_helper_functions(e.user.entitlements)),pmc.hooks.do_action("pmc_after_translate_subscriber_entitlements",this.subscriber_type,e)}}},o.callQueue=o.callQueue||[],o.CCE=o.CCE||{},o.CCE.callQueue=o.CCE.callQueue||[],window.shouldCxensePollActivity=()=>{var e=!1;o.hasConsent("pv")&&(e=!0),o.callQueue.push(["shouldPollActivity",e])},window.initialize_cxense=()=>{s.hookIntoOneTrust(),window.cxpmc.load_cce((function(){window.cxpmc.initialized||"enable"!==window.pmc_cxense_data.load_cxense||window.cxpmc.initialize()}))},window.cxense_dependencies_exist=()=>void 0!==window.pmc&&void 0!==window.pmc.subscription_v2&&"undefined"!=typeof pmc_fastly_geo_data&&void 0!==window.pmcPiano&&void 0!==window.pmcPiano?.piano&&void 0!==window.pmcPiano?.entitlements,cxense_dependencies_exist()?initialize_cxense(window.cxpmc):i=window.setInterval((function(){cxense_dependencies_exist()&&(window.clearInterval(i),initialize_cxense(window.cxpmc))}),500),e.exports=window.cxpmc,window.testCookieSupport=()=>{if(null===window.cookie3PSupported){var e=document.createElement("iframe");e.id="3pc",e.src="https://subscriptions-static.pmc.com/cookies/read-cookie.html",e.style.display="none",e.style.position="fixed",e.setAttribute("sandbox","allow-same-origin allow-scripts"),document.body.appendChild(e),window.addEventListener("message",(function(e){"https://subscriptions-static.pmc.com"===e.origin&&("3pc.supported"!==e.data&&"3pc.unsupported"!==e.data||(window.cookie3PSupported="3pc.supported"===e.data))}),!1)}},window.sendGAEvent=(e,t,n)=>{window.ga&&ga("send","event",e,t,n),"undefined"!=typeof gtag&&gtag("event",String(e+"-"+t).substring(0,39),{eventCategory:String(e).substring(0,99),eventAction:String(t).substring(0,99),eventLabel:String(n).substring(0,99)})},window.loginRedirectUrl=(e,t)=>{var n=document.querySelector(e);if(n?.href){var s=new URL(n.href),i=new URLSearchParams(s.search),o=i.get("returnTo");return o&&(-1===o.indexOf("?")?o+="?utm_source=cxense":o+="&utm_source=cxense",i.set("returnTo",o),s.search=i.toString()),s.toString()}return t}}},t={};!function n(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,n),o.exports}(293)})();